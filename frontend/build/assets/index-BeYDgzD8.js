var LS=t=>{throw TypeError(t)};var Lp=(t,e,n)=>e.has(t)||LS("Cannot "+n);var F=(t,e,n)=>(Lp(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>e.has(t)?LS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,i)=>(Lp(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Le=(t,e,n)=>(Lp(t,e,"access private method"),n);var Gu=(t,e,n,i)=>({set _(a){ke(t,e,a,n)},get _(){return F(t,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ek(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function IO(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var jp={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function zO(){if(jS)return Hl;jS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:o}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var US;function BO(){return US||(US=1,jp.exports=zO()),jp.exports}var R=BO(),Up={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS;function qO(){if(IS)return De;IS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function b(y){return y===null||typeof y!="object"?null:(y=v&&y[v]||y["@@iterator"],typeof y=="function"?y:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function O(y,M,G){this.props=y,this.context=M,this.refs=S,this.updater=G||k}O.prototype.isReactComponent={},O.prototype.setState=function(y,M){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,M,"setState")},O.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function _(){}_.prototype=O.prototype;function L(y,M,G){this.props=y,this.context=M,this.refs=S,this.updater=G||k}var I=L.prototype=new _;I.constructor=L,C(I,O.prototype),I.isPureReactComponent=!0;var j=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function U(y,M,G,$,ne,fe){return G=fe.ref,{$$typeof:t,type:y,key:M,ref:G!==void 0?G:null,props:fe}}function K(y,M){return U(y.type,M,void 0,void 0,void 0,y.props)}function N(y){return typeof y=="object"&&y!==null&&y.$$typeof===t}function P(y){var M={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(G){return M[G]})}var V=/\/+/g;function J(y,M){return typeof y=="object"&&y!==null&&y.key!=null?P(""+y.key):M.toString(36)}function Y(){}function W(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(Y,Y):(y.status="pending",y.then(function(M){y.status==="pending"&&(y.status="fulfilled",y.value=M)},function(M){y.status==="pending"&&(y.status="rejected",y.reason=M)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function ge(y,M,G,$,ne){var fe=typeof y;(fe==="undefined"||fe==="boolean")&&(y=null);var oe=!1;if(y===null)oe=!0;else switch(fe){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(y.$$typeof){case t:case e:oe=!0;break;case m:return oe=y._init,ge(oe(y._payload),M,G,$,ne)}}if(oe)return ne=ne(y),oe=$===""?"."+J(y,0):$,j(ne)?(G="",oe!=null&&(G=oe.replace(V,"$&/")+"/"),ge(ne,M,G,"",function(Re){return Re})):ne!=null&&(N(ne)&&(ne=K(ne,G+(ne.key==null||y&&y.key===ne.key?"":(""+ne.key).replace(V,"$&/")+"/")+oe)),M.push(ne)),1;oe=0;var me=$===""?".":$+":";if(j(y))for(var Te=0;Te<y.length;Te++)$=y[Te],fe=me+J($,Te),oe+=ge($,M,G,fe,ne);else if(Te=b(y),typeof Te=="function")for(y=Te.call(y),Te=0;!($=y.next()).done;)$=$.value,fe=me+J($,Te++),oe+=ge($,M,G,fe,ne);else if(fe==="object"){if(typeof y.then=="function")return ge(W(y),M,G,$,ne);throw M=String(y),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return oe}function H(y,M,G){if(y==null)return y;var $=[],ne=0;return ge(y,$,"","",function(fe){return M.call(G,fe,ne++)}),$}function w(y){if(y._status===-1){var M=y._result;M=M(),M.then(function(G){(y._status===0||y._status===-1)&&(y._status=1,y._result=G)},function(G){(y._status===0||y._status===-1)&&(y._status=2,y._result=G)}),y._status===-1&&(y._status=0,y._result=M)}if(y._status===1)return y._result.default;throw y._result}var ve=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function q(){}return De.Children={map:H,forEach:function(y,M,G){H(y,function(){M.apply(this,arguments)},G)},count:function(y){var M=0;return H(y,function(){M++}),M},toArray:function(y){return H(y,function(M){return M})||[]},only:function(y){if(!N(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},De.Component=O,De.Fragment=n,De.Profiler=a,De.PureComponent=L,De.StrictMode=i,De.Suspense=f,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,De.__COMPILER_RUNTIME={__proto__:null,c:function(y){return E.H.useMemoCache(y)}},De.cache=function(y){return function(){return y.apply(null,arguments)}},De.cloneElement=function(y,M,G){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var $=C({},y.props),ne=y.key,fe=void 0;if(M!=null)for(oe in M.ref!==void 0&&(fe=void 0),M.key!==void 0&&(ne=""+M.key),M)!D.call(M,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&M.ref===void 0||($[oe]=M[oe]);var oe=arguments.length-2;if(oe===1)$.children=G;else if(1<oe){for(var me=Array(oe),Te=0;Te<oe;Te++)me[Te]=arguments[Te+2];$.children=me}return U(y.type,ne,void 0,void 0,fe,$)},De.createContext=function(y){return y={$$typeof:c,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:o,_context:y},y},De.createElement=function(y,M,G){var $,ne={},fe=null;if(M!=null)for($ in M.key!==void 0&&(fe=""+M.key),M)D.call(M,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ne[$]=M[$]);var oe=arguments.length-2;if(oe===1)ne.children=G;else if(1<oe){for(var me=Array(oe),Te=0;Te<oe;Te++)me[Te]=arguments[Te+2];ne.children=me}if(y&&y.defaultProps)for($ in oe=y.defaultProps,oe)ne[$]===void 0&&(ne[$]=oe[$]);return U(y,fe,void 0,void 0,null,ne)},De.createRef=function(){return{current:null}},De.forwardRef=function(y){return{$$typeof:u,render:y}},De.isValidElement=N,De.lazy=function(y){return{$$typeof:m,_payload:{_status:-1,_result:y},_init:w}},De.memo=function(y,M){return{$$typeof:h,type:y,compare:M===void 0?null:M}},De.startTransition=function(y){var M=E.T,G={};E.T=G;try{var $=y(),ne=E.S;ne!==null&&ne(G,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(q,ve)}catch(fe){ve(fe)}finally{E.T=M}},De.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},De.use=function(y){return E.H.use(y)},De.useActionState=function(y,M,G){return E.H.useActionState(y,M,G)},De.useCallback=function(y,M){return E.H.useCallback(y,M)},De.useContext=function(y){return E.H.useContext(y)},De.useDebugValue=function(){},De.useDeferredValue=function(y,M){return E.H.useDeferredValue(y,M)},De.useEffect=function(y,M,G){var $=E.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(y,M)},De.useId=function(){return E.H.useId()},De.useImperativeHandle=function(y,M,G){return E.H.useImperativeHandle(y,M,G)},De.useInsertionEffect=function(y,M){return E.H.useInsertionEffect(y,M)},De.useLayoutEffect=function(y,M){return E.H.useLayoutEffect(y,M)},De.useMemo=function(y,M){return E.H.useMemo(y,M)},De.useOptimistic=function(y,M){return E.H.useOptimistic(y,M)},De.useReducer=function(y,M,G){return E.H.useReducer(y,M,G)},De.useRef=function(y){return E.H.useRef(y)},De.useState=function(y){return E.H.useState(y)},De.useSyncExternalStore=function(y,M,G){return E.H.useSyncExternalStore(y,M,G)},De.useTransition=function(){return E.H.useTransition()},De.version="19.1.0",De}var zS;function Ui(){return zS||(zS=1,Up.exports=qO()),Up.exports}var T=Ui();const Ya=Ek(T);var Ip={exports:{}},Fl={},zp={exports:{}},Bp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function HO(){return BS||(BS=1,function(t){function e(H,w){var ve=H.length;H.push(w);e:for(;0<ve;){var q=ve-1>>>1,y=H[q];if(0<a(y,w))H[q]=w,H[ve]=y,ve=q;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var w=H[0],ve=H.pop();if(ve!==w){H[0]=ve;e:for(var q=0,y=H.length,M=y>>>1;q<M;){var G=2*(q+1)-1,$=H[G],ne=G+1,fe=H[ne];if(0>a($,ve))ne<y&&0>a(fe,$)?(H[q]=fe,H[ne]=ve,q=ne):(H[q]=$,H[G]=ve,q=G);else if(ne<y&&0>a(fe,ve))H[q]=fe,H[ne]=ve,q=ne;else break e}}return w}function a(H,w){var ve=H.sortIndex-w.sortIndex;return ve!==0?ve:H.id-w.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],m=1,v=null,b=3,k=!1,C=!1,S=!1,O=!1,_=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function j(H){for(var w=n(h);w!==null;){if(w.callback===null)i(h);else if(w.startTime<=H)i(h),w.sortIndex=w.expirationTime,e(f,w);else break;w=n(h)}}function E(H){if(S=!1,j(H),!C)if(n(f)!==null)C=!0,D||(D=!0,J());else{var w=n(h);w!==null&&ge(E,w.startTime-H)}}var D=!1,U=-1,K=5,N=-1;function P(){return O?!0:!(t.unstable_now()-N<K)}function V(){if(O=!1,D){var H=t.unstable_now();N=H;var w=!0;try{e:{C=!1,S&&(S=!1,L(U),U=-1),k=!0;var ve=b;try{t:{for(j(H),v=n(f);v!==null&&!(v.expirationTime>H&&P());){var q=v.callback;if(typeof q=="function"){v.callback=null,b=v.priorityLevel;var y=q(v.expirationTime<=H);if(H=t.unstable_now(),typeof y=="function"){v.callback=y,j(H),w=!0;break t}v===n(f)&&i(f),j(H)}else i(f);v=n(f)}if(v!==null)w=!0;else{var M=n(h);M!==null&&ge(E,M.startTime-H),w=!1}}break e}finally{v=null,b=ve,k=!1}w=void 0}}finally{w?J():D=!1}}}var J;if(typeof I=="function")J=function(){I(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,W=Y.port2;Y.port1.onmessage=V,J=function(){W.postMessage(null)}}else J=function(){_(V,0)};function ge(H,w){U=_(function(){H(t.unstable_now())},w)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(H){switch(b){case 1:case 2:case 3:var w=3;break;default:w=b}var ve=b;b=w;try{return H()}finally{b=ve}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(H,w){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ve=b;b=H;try{return w()}finally{b=ve}},t.unstable_scheduleCallback=function(H,w,ve){var q=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?q+ve:q):ve=q,H){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=ve+y,H={id:m++,callback:w,priorityLevel:H,startTime:ve,expirationTime:y,sortIndex:-1},ve>q?(H.sortIndex=ve,e(h,H),n(f)===null&&H===n(h)&&(S?(L(U),U=-1):S=!0,ge(E,ve-q))):(H.sortIndex=y,e(f,H),C||k||(C=!0,D||(D=!0,J()))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var w=b;return function(){var ve=b;b=w;try{return H.apply(this,arguments)}finally{b=ve}}}}(Bp)),Bp}var qS;function FO(){return qS||(qS=1,zp.exports=HO()),zp.exports}var qp={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function VO(){if(HS)return Zt;HS=1;var t=Ui();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:h,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},Zt.flushSync=function(f){var h=c.T,m=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=h,i.p=m,i.d.f()}},Zt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},Zt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Zt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,v=u(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,k=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:k}):m==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:k,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Zt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},Zt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=u(m,h.crossOrigin);i.d.L(f,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Zt.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},Zt.requestFormReset=function(f){i.d.r(f)},Zt.unstable_batchedUpdates=function(f,h){return f(h)},Zt.useFormState=function(f,h,m){return c.H.useFormState(f,h,m)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.1.0",Zt}var FS;function GO(){if(FS)return qp.exports;FS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qp.exports=VO(),qp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function QO(){if(VS)return Fl;VS=1;var t=FO(),e=Ui(),n=GO();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function u(r){if(o(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,d=s;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return u(p),r;if(g===d)return u(p),s;g=g.sibling}throw Error(i(188))}if(l.return!==d.return)l=p,d=g;else{for(var x=!1,A=p.child;A;){if(A===l){x=!0,l=p,d=g;break}if(A===d){x=!0,d=p,l=g;break}A=A.sibling}if(!x){for(A=g.child;A;){if(A===l){x=!0,l=g,d=p;break}if(A===d){x=!0,d=g,l=p;break}A=A.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function h(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=h(r),s!==null)return s;r=r.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),I=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var Y=Symbol.for("react.client.reference");function W(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Y?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case I:return(r.displayName||"Context")+".Provider";case L:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return s=r.displayName||null,s!==null?s:W(r.type)||"Memo";case K:s=r._payload,r=r._init;try{return W(r(s))}catch{}}return null}var ge=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},q=[],y=-1;function M(r){return{current:r}}function G(r){0>y||(r.current=q[y],q[y]=null,y--)}function $(r,s){y++,q[y]=r.current,r.current=s}var ne=M(null),fe=M(null),oe=M(null),me=M(null);function Te(r,s){switch($(oe,s),$(fe,r),$(ne,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?cS(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=cS(s),r=uS(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}G(ne),$(ne,r)}function Re(){G(ne),G(fe),G(oe)}function Me(r){r.memoizedState!==null&&$(me,r);var s=ne.current,l=uS(s,r.type);s!==l&&($(fe,r),$(ne,l))}function Qe(r){fe.current===r&&(G(ne),G(fe)),me.current===r&&(G(me),Ul._currentValue=ve)}var Ke=Object.prototype.hasOwnProperty,qe=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Et=t.unstable_requestPaint,_e=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,xt=t.unstable_ImmediatePriority,Pt=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,Hi=t.unstable_LowPriority,ma=t.unstable_IdlePriority,Ac=t.log,ga=t.unstable_setDisableYieldValue,va=null,yt=null;function ln(r){if(typeof Ac=="function"&&ga(r),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(va,r)}catch{}}var xn=Math.clz32?Math.clz32:wx,kx=Math.log,Cx=Math.LN2;function wx(r){return r>>>=0,r===0?32:31-(kx(r)/Cx|0)|0}var Mc=256,Dc=4194304;function ya(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Nc(r,s,l){var d=r.pendingLanes;if(d===0)return 0;var p=0,g=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var A=d&134217727;return A!==0?(d=A&~g,d!==0?p=ya(d):(x&=A,x!==0?p=ya(x):l||(l=A&~r,l!==0&&(p=ya(l))))):(A=d&~g,A!==0?p=ya(A):x!==0?p=ya(x):l||(l=d&~r,l!==0&&(p=ya(l)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,l=s&-s,g>=l||g===32&&(l&4194048)!==0)?s:p}function Qo(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ex(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qv(){var r=Mc;return Mc<<=1,(Mc&4194048)===0&&(Mc=256),r}function Kv(){var r=Dc;return Dc<<=1,(Dc&62914560)===0&&(Dc=4194304),r}function wf(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Ko(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xx(r,s,l,d,p,g){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var A=r.entanglements,z=r.expirationTimes,ee=r.hiddenUpdates;for(l=x&~l;0<l;){var le=31-xn(l),he=1<<le;A[le]=0,z[le]=-1;var te=ee[le];if(te!==null)for(ee[le]=null,le=0;le<te.length;le++){var ie=te[le];ie!==null&&(ie.lane&=-536870913)}l&=~he}d!==0&&Yv(r,d,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(x&~s))}function Yv(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var d=31-xn(s);r.entangledLanes|=s,r.entanglements[d]=r.entanglements[d]|1073741824|l&4194090}function Jv(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var d=31-xn(l),p=1<<d;p&s|r[d]&s&&(r[d]|=s),l&=~p}}function Ef(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function xf(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Xv(){var r=w.p;return r!==0?r:(r=window.event,r===void 0?32:_S(r.type))}function Rx(r,s){var l=w.p;try{return w.p=r,s()}finally{w.p=l}}var Tr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Tr,cn="__reactProps$"+Tr,hs="__reactContainer$"+Tr,Rf="__reactEvents$"+Tr,Ox="__reactListeners$"+Tr,_x="__reactHandles$"+Tr,Wv="__reactResources$"+Tr,Yo="__reactMarker$"+Tr;function Of(r){delete r[Xt],delete r[cn],delete r[Rf],delete r[Ox],delete r[_x]}function ps(r){var s=r[Xt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[hs]||l[Xt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=pS(r);r!==null;){if(l=r[Xt])return l;r=pS(r)}return s}r=l,l=r.parentNode}return null}function ms(r){if(r=r[Xt]||r[hs]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Jo(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function gs(r){var s=r[Wv];return s||(s=r[Wv]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function zt(r){r[Yo]=!0}var Zv=new Set,$v={};function ba(r,s){vs(r,s),vs(r+"Capture",s)}function vs(r,s){for($v[r]=s,r=0;r<s.length;r++)Zv.add(s[r])}var Px=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ey={},ty={};function Ax(r){return Ke.call(ty,r)?!0:Ke.call(ey,r)?!1:Px.test(r)?ty[r]=!0:(ey[r]=!0,!1)}function Lc(r,s,l){if(Ax(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function jc(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Fi(r,s,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+d)}}var _f,ny;function ys(r){if(_f===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);_f=s&&s[1]||"",ny=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_f+r+ny}var Pf=!1;function Af(r,s){if(!r||Pf)return"";Pf=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){te=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),x=g[0],A=g[1];if(x&&A){var z=x.split(`
`),ee=A.split(`
`);for(p=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;if(d===z.length||p===ee.length)for(d=z.length-1,p=ee.length-1;1<=d&&0<=p&&z[d]!==ee[p];)p--;for(;1<=d&&0<=p;d--,p--)if(z[d]!==ee[p]){if(d!==1||p!==1)do if(d--,p--,0>p||z[d]!==ee[p]){var le=`
`+z[d].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=d&&0<=p);break}}}finally{Pf=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?ys(l):""}function Mx(r){switch(r.tag){case 26:case 27:case 5:return ys(r.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return Af(r.type,!1);case 11:return Af(r.type.render,!1);case 1:return Af(r.type,!0);case 31:return ys("Activity");default:return""}}function iy(r){try{var s="";do s+=Mx(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function In(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ry(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Dx(r){var s=ry(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(x){d=""+x,g.call(this,x)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Uc(r){r._valueTracker||(r._valueTracker=Dx(r))}function ay(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return r&&(d=ry(r)?r.checked?"true":"false":r.value),r=d,r!==l?(s.setValue(r),!0):!1}function Ic(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Nx=/[\n"\\]/g;function zn(r){return r.replace(Nx,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mf(r,s,l,d,p,g,x,A){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+In(s)):r.value!==""+In(s)&&(r.value=""+In(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?Df(r,x,In(s)):l!=null?Df(r,x,In(l)):d!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.name=""+In(A):r.removeAttribute("name")}function sy(r,s,l,d,p,g,x,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;l=l!=null?""+In(l):"",s=s!=null?""+In(s):l,A||s===r.value||(r.value=s),r.defaultValue=s}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=A?r.checked:!!d,r.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Df(r,s,l){s==="number"&&Ic(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function bs(r,s,l,d){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&d&&(r[l].defaultSelected=!0)}else{for(l=""+In(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,d&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function oy(r,s,l){if(s!=null&&(s=""+In(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+In(l):""}function ly(r,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(ge(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=In(s),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d)}function Ss(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Lx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cy(r,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":d?r.setProperty(s,l):typeof l!="number"||l===0||Lx.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function uy(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var p in s)d=s[p],s.hasOwnProperty(p)&&l[p]!==d&&cy(r,p,d)}else for(var g in s)s.hasOwnProperty(g)&&cy(r,g,s[g])}function Nf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ux=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zc(r){return Ux.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Lf=null;function jf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ts=null,ks=null;function dy(r){var s=ms(r);if(s&&(r=s.stateNode)){var l=r[cn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Mf(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+zn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==r&&d.form===r.form){var p=d[cn]||null;if(!p)throw Error(i(90));Mf(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===r.form&&ay(d)}break e;case"textarea":oy(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&bs(r,!!l.multiple,s,!1)}}}var Uf=!1;function fy(r,s,l){if(Uf)return r(s,l);Uf=!0;try{var d=r(s);return d}finally{if(Uf=!1,(Ts!==null||ks!==null)&&(wu(),Ts&&(s=Ts,r=ks,ks=Ts=null,dy(s),r)))for(s=0;s<r.length;s++)dy(r[s])}}function Xo(r,s){var l=r.stateNode;if(l===null)return null;var d=l[cn]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=!1;if(Vi)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){If=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{If=!1}var kr=null,zf=null,Bc=null;function hy(){if(Bc)return Bc;var r,s=zf,l=s.length,d,p="value"in kr?kr.value:kr.textContent,g=p.length;for(r=0;r<l&&s[r]===p[r];r++);var x=l-r;for(d=1;d<=x&&s[l-d]===p[g-d];d++);return Bc=p.slice(r,1<d?1-d:void 0)}function qc(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Hc(){return!0}function py(){return!1}function un(r){function s(l,d,p,g,x){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(l=r[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hc:py,this.isPropagationStopped=py,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),s}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=un(Sa),Zo=m({},Sa,{view:0,detail:0}),Ix=un(Zo),Bf,qf,$o,Vc=m({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$o&&($o&&r.type==="mousemove"?(Bf=r.screenX-$o.screenX,qf=r.screenY-$o.screenY):qf=Bf=0,$o=r),Bf)},movementY:function(r){return"movementY"in r?r.movementY:qf}}),my=un(Vc),zx=m({},Vc,{dataTransfer:0}),Bx=un(zx),qx=m({},Zo,{relatedTarget:0}),Hf=un(qx),Hx=m({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=un(Hx),Vx=m({},Sa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gx=un(Vx),Qx=m({},Sa,{data:0}),gy=un(Qx),Kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xx(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Jx[r])?!!s[r]:!1}function Ff(){return Xx}var Wx=m({},Zo,{key:function(r){if(r.key){var s=Kx[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Yx[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(r){return r.type==="keypress"?qc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Zx=un(Wx),$x=m({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vy=un($x),eR=m({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),tR=un(eR),nR=m({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),iR=un(nR),rR=m({},Vc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),aR=un(rR),sR=m({},Sa,{newState:0,oldState:0}),oR=un(sR),lR=[9,13,27,32],Vf=Vi&&"CompositionEvent"in window,el=null;Vi&&"documentMode"in document&&(el=document.documentMode);var cR=Vi&&"TextEvent"in window&&!el,yy=Vi&&(!Vf||el&&8<el&&11>=el),by=" ",Sy=!1;function Ty(r,s){switch(r){case"keyup":return lR.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ky(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Cs=!1;function uR(r,s){switch(r){case"compositionend":return ky(s);case"keypress":return s.which!==32?null:(Sy=!0,by);case"textInput":return r=s.data,r===by&&Sy?null:r;default:return null}}function dR(r,s){if(Cs)return r==="compositionend"||!Vf&&Ty(r,s)?(r=hy(),Bc=zf=kr=null,Cs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yy&&s.locale!=="ko"?null:s.data;default:return null}}var fR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!fR[r.type]:s==="textarea"}function wy(r,s,l,d){Ts?ks?ks.push(d):ks=[d]:Ts=d,s=Pu(s,"onChange"),0<s.length&&(l=new Fc("onChange","change",null,l,d),r.push({event:l,listeners:s}))}var tl=null,nl=null;function hR(r){rS(r,0)}function Gc(r){var s=Jo(r);if(ay(s))return r}function Ey(r,s){if(r==="change")return s}var xy=!1;if(Vi){var Gf;if(Vi){var Qf="oninput"in document;if(!Qf){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),Qf=typeof Ry.oninput=="function"}Gf=Qf}else Gf=!1;xy=Gf&&(!document.documentMode||9<document.documentMode)}function Oy(){tl&&(tl.detachEvent("onpropertychange",_y),nl=tl=null)}function _y(r){if(r.propertyName==="value"&&Gc(nl)){var s=[];wy(s,nl,r,jf(r)),fy(hR,s)}}function pR(r,s,l){r==="focusin"?(Oy(),tl=s,nl=l,tl.attachEvent("onpropertychange",_y)):r==="focusout"&&Oy()}function mR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gc(nl)}function gR(r,s){if(r==="click")return Gc(s)}function vR(r,s){if(r==="input"||r==="change")return Gc(s)}function yR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rn=typeof Object.is=="function"?Object.is:yR;function il(r,s){if(Rn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!Ke.call(s,p)||!Rn(r[p],s[p]))return!1}return!0}function Py(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ay(r,s){var l=Py(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=s&&d>=s)return{node:l,offset:s-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Py(l)}}function My(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?My(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Dy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ic(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Ic(r.document)}return s}function Kf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var bR=Vi&&"documentMode"in document&&11>=document.documentMode,ws=null,Yf=null,rl=null,Jf=!1;function Ny(r,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jf||ws==null||ws!==Ic(d)||(d=ws,"selectionStart"in d&&Kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),rl&&il(rl,d)||(rl=d,d=Pu(Yf,"onSelect"),0<d.length&&(s=new Fc("onSelect","select",null,s,l),r.push({event:s,listeners:d}),s.target=ws)))}function Ta(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Es={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},Xf={},Ly={};Vi&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function ka(r){if(Xf[r])return Xf[r];if(!Es[r])return r;var s=Es[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ly)return Xf[r]=s[l];return r}var jy=ka("animationend"),Uy=ka("animationiteration"),Iy=ka("animationstart"),SR=ka("transitionrun"),TR=ka("transitionstart"),kR=ka("transitioncancel"),zy=ka("transitionend"),By=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function ei(r,s){By.set(r,s),ba(s,[r])}var qy=new WeakMap;function Bn(r,s){if(typeof r=="object"&&r!==null){var l=qy.get(r);return l!==void 0?l:(s={value:r,source:s,stack:iy(s)},qy.set(r,s),s)}return{value:r,source:s,stack:iy(s)}}var qn=[],xs=0,Zf=0;function Qc(){for(var r=xs,s=Zf=xs=0;s<r;){var l=qn[s];qn[s++]=null;var d=qn[s];qn[s++]=null;var p=qn[s];qn[s++]=null;var g=qn[s];if(qn[s++]=null,d!==null&&p!==null){var x=d.pending;x===null?p.next=p:(p.next=x.next,x.next=p),d.pending=p}g!==0&&Hy(l,p,g)}}function Kc(r,s,l,d){qn[xs++]=r,qn[xs++]=s,qn[xs++]=l,qn[xs++]=d,Zf|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function $f(r,s,l,d){return Kc(r,s,l,d),Yc(r)}function Rs(r,s){return Kc(r,null,null,s),Yc(r)}function Hy(r,s,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var p=!1,g=r.return;g!==null;)g.childLanes|=l,d=g.alternate,d!==null&&(d.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,p&&s!==null&&(p=31-xn(l),r=g.hiddenUpdates,d=r[p],d===null?r[p]=[s]:d.push(s),s.lane=l|536870912),g):null}function Yc(r){if(50<_l)throw _l=0,ap=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Os={};function CR(r,s,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(r,s,l,d){return new CR(r,s,l,d)}function eh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gi(r,s){var l=r.alternate;return l===null?(l=On(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Fy(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Jc(r,s,l,d,p,g){var x=0;if(d=r,typeof r=="function")eh(r)&&(x=1);else if(typeof r=="string")x=EO(r,l,ne.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=On(31,l,s,p),r.elementType=N,r.lanes=g,r;case C:return Ca(l.children,p,g,s);case S:x=8,p|=24;break;case O:return r=On(12,l,s,p|2),r.elementType=O,r.lanes=g,r;case E:return r=On(13,l,s,p),r.elementType=E,r.lanes=g,r;case D:return r=On(19,l,s,p),r.elementType=D,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case I:x=10;break e;case L:x=9;break e;case j:x=11;break e;case U:x=14;break e;case K:x=16,d=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),d=null}return s=On(x,l,s,p),s.elementType=r,s.type=d,s.lanes=g,s}function Ca(r,s,l,d){return r=On(7,r,d,s),r.lanes=l,r}function th(r,s,l){return r=On(6,r,null,s),r.lanes=l,r}function nh(r,s,l){return s=On(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var _s=[],Ps=0,Xc=null,Wc=0,Hn=[],Fn=0,wa=null,Qi=1,Ki="";function Ea(r,s){_s[Ps++]=Wc,_s[Ps++]=Xc,Xc=r,Wc=s}function Vy(r,s,l){Hn[Fn++]=Qi,Hn[Fn++]=Ki,Hn[Fn++]=wa,wa=r;var d=Qi;r=Ki;var p=32-xn(d)-1;d&=~(1<<p),l+=1;var g=32-xn(s)+p;if(30<g){var x=p-p%5;g=(d&(1<<x)-1).toString(32),d>>=x,p-=x,Qi=1<<32-xn(s)+p|l<<p|d,Ki=g+r}else Qi=1<<g|l<<p|d,Ki=r}function ih(r){r.return!==null&&(Ea(r,1),Vy(r,1,0))}function rh(r){for(;r===Xc;)Xc=_s[--Ps],_s[Ps]=null,Wc=_s[--Ps],_s[Ps]=null;for(;r===wa;)wa=Hn[--Fn],Hn[Fn]=null,Ki=Hn[--Fn],Hn[Fn]=null,Qi=Hn[--Fn],Hn[Fn]=null}var rn=null,bt=null,Ze=!1,xa=null,ki=!1,ah=Error(i(519));function Ra(r){var s=Error(i(418,""));throw ol(Bn(s,r)),ah}function Gy(r){var s=r.stateNode,l=r.type,d=r.memoizedProps;switch(s[Xt]=r,s[cn]=d,l){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(l=0;l<Al.length;l++)ze(Al[l],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),sy(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Uc(s);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),ly(s,d.value,d.defaultValue,d.children),Uc(s)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||lS(s.textContent,l)?(d.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),d.onScroll!=null&&ze("scroll",s),d.onScrollEnd!=null&&ze("scrollend",s),d.onClick!=null&&(s.onclick=Au),s=!0):s=!1,s||Ra(r)}function Qy(r){for(rn=r.return;rn;)switch(rn.tag){case 5:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:rn=rn.return}}function al(r){if(r!==rn)return!1;if(!Ze)return Qy(r),Ze=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Tp(r.type,r.memoizedProps)),l=!l),l&&bt&&Ra(r),Qy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){bt=ni(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}bt=null}}else s===27?(s=bt,Ir(r.type)?(r=Ep,Ep=null,bt=r):bt=s):bt=rn?ni(r.stateNode.nextSibling):null;return!0}function sl(){bt=rn=null,Ze=!1}function Ky(){var r=xa;return r!==null&&(hn===null?hn=r:hn.push.apply(hn,r),xa=null),r}function ol(r){xa===null?xa=[r]:xa.push(r)}var sh=M(null),Oa=null,Yi=null;function Cr(r,s,l){$(sh,s._currentValue),s._currentValue=l}function Ji(r){r._currentValue=sh.current,G(sh)}function oh(r,s,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===l)break;r=r.return}}function lh(r,s,l,d){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var x=p.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=p;for(var z=0;z<s.length;z++)if(A.context===s[z]){g.lanes|=l,A=g.alternate,A!==null&&(A.lanes|=l),oh(g.return,l,r),d||(x=null);break e}g=A.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(i(341));x.lanes|=l,g=x.alternate,g!==null&&(g.lanes|=l),oh(x,l,r),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===r){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function ll(r,s,l,d){r=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var A=p.type;Rn(p.pendingProps.value,x.value)||(r!==null?r.push(A):r=[A])}}else if(p===me.current){if(x=p.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Ul):r=[Ul])}p=p.return}r!==null&&lh(s,r,l,d),s.flags|=262144}function Zc(r){for(r=r.firstContext;r!==null;){if(!Rn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function _a(r){Oa=r,Yi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Wt(r){return Yy(Oa,r)}function $c(r,s){return Oa===null&&_a(r),Yy(r,s)}function Yy(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Yi===null){if(r===null)throw Error(i(308));Yi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Yi=Yi.next=s;return l}var wR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},ER=t.unstable_scheduleCallback,xR=t.unstable_NormalPriority,Nt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new wR,data:new Map,refCount:0}}function cl(r){r.refCount--,r.refCount===0&&ER(xR,function(){r.controller.abort()})}var ul=null,uh=0,As=0,Ms=null;function RR(r,s){if(ul===null){var l=ul=[];uh=0,As=fp(),Ms={status:"pending",value:void 0,then:function(d){l.push(d)}}}return uh++,s.then(Jy,Jy),s}function Jy(){if(--uh===0&&ul!==null){Ms!==null&&(Ms.status="fulfilled");var r=ul;ul=null,As=0,Ms=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function OR(r,s){var l=[],d={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){d.status="fulfilled",d.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(d.status="rejected",d.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),d}var Xy=H.S;H.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&RR(r,s),Xy!==null&&Xy(r,s)};var Pa=M(null);function dh(){var r=Pa.current;return r!==null?r:ct.pooledCache}function eu(r,s){s===null?$(Pa,Pa.current):$(Pa,s.pool)}function Wy(){var r=dh();return r===null?null:{parent:Nt._currentValue,pool:r}}var dl=Error(i(460)),Zy=Error(i(474)),tu=Error(i(542)),fh={then:function(){}};function $y(r){return r=r.status,r==="fulfilled"||r==="rejected"}function nu(){}function e0(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(nu,nu),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,n0(r),r;default:if(typeof s.status=="string")s.then(nu,nu);else{if(r=ct,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(d){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=d}},function(d){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,n0(r),r}throw fl=s,dl}}var fl=null;function t0(){if(fl===null)throw Error(i(459));var r=fl;return fl=null,r}function n0(r){if(r===dl||r===tu)throw Error(i(483))}var wr=!1;function hh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Er(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xr(r,s,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(tt&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,s=Yc(r),Hy(r,null,l),s}return Kc(r,d,s,l),Yc(r)}function hl(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,Jv(r,l)}}function mh(r,s){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=x:g=g.next=x,l=l.next}while(l!==null);g===null?p=g=s:g=g.next=s}else p=g=s;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var gh=!1;function pl(){if(gh){var r=Ms;if(r!==null)throw r}}function ml(r,s,l,d){gh=!1;var p=r.updateQueue;wr=!1;var g=p.firstBaseUpdate,x=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var z=A,ee=z.next;z.next=null,x===null?g=ee:x.next=ee,x=z;var le=r.alternate;le!==null&&(le=le.updateQueue,A=le.lastBaseUpdate,A!==x&&(A===null?le.firstBaseUpdate=ee:A.next=ee,le.lastBaseUpdate=z))}if(g!==null){var he=p.baseState;x=0,le=ee=z=null,A=g;do{var te=A.lane&-536870913,ie=te!==A.lane;if(ie?(Ve&te)===te:(d&te)===te){te!==0&&te===As&&(gh=!0),le!==null&&(le=le.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Pe=r,xe=A;te=s;var at=l;switch(xe.tag){case 1:if(Pe=xe.payload,typeof Pe=="function"){he=Pe.call(at,he,te);break e}he=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=xe.payload,te=typeof Pe=="function"?Pe.call(at,he,te):Pe,te==null)break e;he=m({},he,te);break e;case 2:wr=!0}}te=A.callback,te!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=p.callbacks,ie===null?p.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},le===null?(ee=le=ie,z=he):le=le.next=ie,x|=te;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;ie=A,A=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);le===null&&(z=he),p.baseState=z,p.firstBaseUpdate=ee,p.lastBaseUpdate=le,g===null&&(p.shared.lanes=0),Nr|=x,r.lanes=x,r.memoizedState=he}}function i0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function r0(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)i0(l[r],s)}var Ds=M(null),iu=M(0);function a0(r,s){r=nr,$(iu,r),$(Ds,s),nr=r|s.baseLanes}function vh(){$(iu,nr),$(Ds,Ds.current)}function yh(){nr=iu.current,G(Ds),G(iu)}var Rr=0,je=null,it=null,At=null,ru=!1,Ns=!1,Aa=!1,au=0,gl=0,Ls=null,_R=0;function Rt(){throw Error(i(321))}function bh(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Rn(r[l],s[l]))return!1;return!0}function Sh(r,s,l,d,p,g){return Rr=g,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=r===null||r.memoizedState===null?H0:F0,Aa=!1,g=l(d,p),Aa=!1,Ns&&(g=o0(s,l,d,p)),s0(r),g}function s0(r){H.H=du;var s=it!==null&&it.next!==null;if(Rr=0,At=it=je=null,ru=!1,gl=0,Ls=null,s)throw Error(i(300));r===null||Bt||(r=r.dependencies,r!==null&&Zc(r)&&(Bt=!0))}function o0(r,s,l,d){je=r;var p=0;do{if(Ns&&(Ls=null),gl=0,Ns=!1,25<=p)throw Error(i(301));if(p+=1,At=it=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}H.H=jR,g=s(l,d)}while(Ns);return g}function PR(){var r=H.H,s=r.useState()[0];return s=typeof s.then=="function"?vl(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(je.flags|=1024),s}function Th(){var r=au!==0;return au=0,r}function kh(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Ch(r){if(ru){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ru=!1}Rr=0,At=it=je=null,Ns=!1,gl=au=0,Ls=null}function dn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?je.memoizedState=At=r:At=At.next=r,At}function Mt(){if(it===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=At===null?je.memoizedState:At.next;if(s!==null)At=s,it=r;else{if(r===null)throw je.alternate===null?Error(i(467)):Error(i(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},At===null?je.memoizedState=At=r:At=At.next=r}return At}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(r){var s=gl;return gl+=1,Ls===null&&(Ls=[]),r=e0(Ls,r,s),s=je,(At===null?s.memoizedState:At.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?H0:F0),r}function su(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return vl(r);if(r.$$typeof===I)return Wt(r)}throw Error(i(438,String(r)))}function Eh(r){var s=null,l=je.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=je.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=wh(),je.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),d=0;d<r;d++)l[d]=P;return s.index++,l}function Xi(r,s){return typeof s=="function"?s(r):s}function ou(r){var s=Mt();return xh(s,it,r)}function xh(r,s,l){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var p=r.baseQueue,g=d.pending;if(g!==null){if(p!==null){var x=p.next;p.next=g.next,g.next=x}s.baseQueue=p=g,d.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{s=p.next;var A=x=null,z=null,ee=s,le=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(Ve&he)===he:(Rr&he)===he){var te=ee.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===As&&(le=!0);else if((Rr&te)===te){ee=ee.next,te===As&&(le=!0);continue}else he={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(A=z=he,x=g):z=z.next=he,je.lanes|=te,Nr|=te;he=ee.action,Aa&&l(g,he),g=ee.hasEagerState?ee.eagerState:l(g,he)}else te={lane:he,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(A=z=te,x=g):z=z.next=te,je.lanes|=he,Nr|=he;ee=ee.next}while(ee!==null&&ee!==s);if(z===null?x=g:z.next=A,!Rn(g,r.memoizedState)&&(Bt=!0,le&&(l=Ms,l!==null)))throw l;r.memoizedState=g,r.baseState=x,r.baseQueue=z,d.lastRenderedState=g}return p===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Rh(r){var s=Mt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var d=l.dispatch,p=l.pending,g=s.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do g=r(g,x.action),x=x.next;while(x!==p);Rn(g,s.memoizedState)||(Bt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,d]}function l0(r,s,l){var d=je,p=Mt(),g=Ze;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=s();var x=!Rn((it||p).memoizedState,l);x&&(p.memoizedState=l,Bt=!0),p=p.queue;var A=d0.bind(null,d,p,r);if(yl(2048,8,A,[r]),p.getSnapshot!==s||x||At!==null&&At.memoizedState.tag&1){if(d.flags|=2048,js(9,lu(),u0.bind(null,d,p,l,s),null),ct===null)throw Error(i(349));g||(Rr&124)!==0||c0(d,s,l)}return l}function c0(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=je.updateQueue,s===null?(s=wh(),je.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function u0(r,s,l,d){s.value=l,s.getSnapshot=d,f0(s)&&h0(r)}function d0(r,s,l){return l(function(){f0(s)&&h0(r)})}function f0(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Rn(r,l)}catch{return!0}}function h0(r){var s=Rs(r,2);s!==null&&Dn(s,r,2)}function Oh(r){var s=dn();if(typeof r=="function"){var l=r;if(r=l(),Aa){ln(!0);try{l()}finally{ln(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:r},s}function p0(r,s,l,d){return r.baseState=l,xh(r,it,typeof d=="function"?d:Xi)}function AR(r,s,l,d,p){if(uu(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};H.T!==null?l(!0):g.isTransition=!1,d(g),l=s.pending,l===null?(g.next=s.pending=g,m0(s,g)):(g.next=l.next,s.pending=l.next=g)}}function m0(r,s){var l=s.action,d=s.payload,p=r.state;if(s.isTransition){var g=H.T,x={};H.T=x;try{var A=l(p,d),z=H.S;z!==null&&z(x,A),g0(r,s,A)}catch(ee){_h(r,s,ee)}finally{H.T=g}}else try{g=l(p,d),g0(r,s,g)}catch(ee){_h(r,s,ee)}}function g0(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){v0(r,s,d)},function(d){return _h(r,s,d)}):v0(r,s,l)}function v0(r,s,l){s.status="fulfilled",s.value=l,y0(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,m0(r,l)))}function _h(r,s,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,y0(s),s=s.next;while(s!==d)}r.action=null}function y0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function b0(r,s){return s}function S0(r,s){if(Ze){var l=ct.formState;if(l!==null){e:{var d=je;if(Ze){if(bt){t:{for(var p=bt,g=ki;p.nodeType!==8;){if(!g){p=null;break t}if(p=ni(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){bt=ni(p.nextSibling),d=p.data==="F!";break e}}Ra(d)}d=!1}d&&(s=l[0])}}return l=dn(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b0,lastRenderedState:s},l.queue=d,l=z0.bind(null,je,d),d.dispatch=l,d=Oh(!1),g=Nh.bind(null,je,!1,d.queue),d=dn(),p={state:s,dispatch:null,action:r,pending:null},d.queue=p,l=AR.bind(null,je,p,g,l),p.dispatch=l,d.memoizedState=r,[s,l,!1]}function T0(r){var s=Mt();return k0(s,it,r)}function k0(r,s,l){if(s=xh(r,s,b0)[0],r=ou(Xi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=vl(s)}catch(x){throw x===dl?tu:x}else d=s;s=Mt();var p=s.queue,g=p.dispatch;return l!==s.memoizedState&&(je.flags|=2048,js(9,lu(),MR.bind(null,p,l),null)),[d,g,r]}function MR(r,s){r.action=s}function C0(r){var s=Mt(),l=it;if(l!==null)return k0(s,l,r);Mt(),s=s.memoizedState,l=Mt();var d=l.queue.dispatch;return l.memoizedState=r,[s,d,!1]}function js(r,s,l,d){return r={tag:r,create:l,deps:d,inst:s,next:null},s=je.updateQueue,s===null&&(s=wh(),je.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,s.lastEffect=r),r}function lu(){return{destroy:void 0,resource:void 0}}function w0(){return Mt().memoizedState}function cu(r,s,l,d){var p=dn();d=d===void 0?null:d,je.flags|=r,p.memoizedState=js(1|s,lu(),l,d)}function yl(r,s,l,d){var p=Mt();d=d===void 0?null:d;var g=p.memoizedState.inst;it!==null&&d!==null&&bh(d,it.memoizedState.deps)?p.memoizedState=js(s,g,l,d):(je.flags|=r,p.memoizedState=js(1|s,g,l,d))}function E0(r,s){cu(8390656,8,r,s)}function x0(r,s){yl(2048,8,r,s)}function R0(r,s){return yl(4,2,r,s)}function O0(r,s){return yl(4,4,r,s)}function _0(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function P0(r,s,l){l=l!=null?l.concat([r]):null,yl(4,4,_0.bind(null,s,r),l)}function Ph(){}function A0(r,s){var l=Mt();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&bh(s,d[1])?d[0]:(l.memoizedState=[r,s],r)}function M0(r,s){var l=Mt();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&bh(s,d[1]))return d[0];if(d=r(),Aa){ln(!0);try{r()}finally{ln(!1)}}return l.memoizedState=[d,s],d}function Ah(r,s,l){return l===void 0||(Rr&1073741824)!==0?r.memoizedState=s:(r.memoizedState=l,r=Lb(),je.lanes|=r,Nr|=r,l)}function D0(r,s,l,d){return Rn(l,s)?l:Ds.current!==null?(r=Ah(r,l,d),Rn(r,s)||(Bt=!0),r):(Rr&42)===0?(Bt=!0,r.memoizedState=l):(r=Lb(),je.lanes|=r,Nr|=r,s)}function N0(r,s,l,d,p){var g=w.p;w.p=g!==0&&8>g?g:8;var x=H.T,A={};H.T=A,Nh(r,!1,s,l);try{var z=p(),ee=H.S;if(ee!==null&&ee(A,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var le=OR(z,d);bl(r,s,le,Mn(r))}else bl(r,s,d,Mn(r))}catch(he){bl(r,s,{then:function(){},status:"rejected",reason:he},Mn())}finally{w.p=g,H.T=x}}function DR(){}function Mh(r,s,l,d){if(r.tag!==5)throw Error(i(476));var p=L0(r).queue;N0(r,p,s,ve,l===null?DR:function(){return j0(r),l(d)})}function L0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ve},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function j0(r){var s=L0(r).next.queue;bl(r,s,{},Mn())}function Dh(){return Wt(Ul)}function U0(){return Mt().memoizedState}function I0(){return Mt().memoizedState}function NR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Mn();r=Er(l);var d=xr(s,r,l);d!==null&&(Dn(d,s,l),hl(d,s,l)),s={cache:ch()},r.payload=s;return}s=s.return}}function LR(r,s,l){var d=Mn();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},uu(r)?B0(s,l):(l=$f(r,s,l,d),l!==null&&(Dn(l,r,d),q0(l,s,d)))}function z0(r,s,l){var d=Mn();bl(r,s,l,d)}function bl(r,s,l,d){var p={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(uu(r))B0(s,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var x=s.lastRenderedState,A=g(x,l);if(p.hasEagerState=!0,p.eagerState=A,Rn(A,x))return Kc(r,s,p,0),ct===null&&Qc(),!1}catch{}finally{}if(l=$f(r,s,p,d),l!==null)return Dn(l,r,d),q0(l,s,d),!0}return!1}function Nh(r,s,l,d){if(d={lane:2,revertLane:fp(),action:d,hasEagerState:!1,eagerState:null,next:null},uu(r)){if(s)throw Error(i(479))}else s=$f(r,l,d,2),s!==null&&Dn(s,r,2)}function uu(r){var s=r.alternate;return r===je||s!==null&&s===je}function B0(r,s){Ns=ru=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function q0(r,s,l){if((l&4194048)!==0){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,Jv(r,l)}}var du={readContext:Wt,use:su,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},H0={readContext:Wt,use:su,useCallback:function(r,s){return dn().memoizedState=[r,s===void 0?null:s],r},useContext:Wt,useEffect:E0,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,cu(4194308,4,_0.bind(null,s,r),l)},useLayoutEffect:function(r,s){return cu(4194308,4,r,s)},useInsertionEffect:function(r,s){cu(4,2,r,s)},useMemo:function(r,s){var l=dn();s=s===void 0?null:s;var d=r();if(Aa){ln(!0);try{r()}finally{ln(!1)}}return l.memoizedState=[d,s],d},useReducer:function(r,s,l){var d=dn();if(l!==void 0){var p=l(s);if(Aa){ln(!0);try{l(s)}finally{ln(!1)}}}else p=s;return d.memoizedState=d.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},d.queue=r,r=r.dispatch=LR.bind(null,je,r),[d.memoizedState,r]},useRef:function(r){var s=dn();return r={current:r},s.memoizedState=r},useState:function(r){r=Oh(r);var s=r.queue,l=z0.bind(null,je,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Ph,useDeferredValue:function(r,s){var l=dn();return Ah(l,r,s)},useTransition:function(){var r=Oh(!1);return r=N0.bind(null,je,r.queue,!0,!1),dn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var d=je,p=dn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ct===null)throw Error(i(349));(Ve&124)!==0||c0(d,s,l)}p.memoizedState=l;var g={value:l,getSnapshot:s};return p.queue=g,E0(d0.bind(null,d,g,r),[r]),d.flags|=2048,js(9,lu(),u0.bind(null,d,g,l,s),null),l},useId:function(){var r=dn(),s=ct.identifierPrefix;if(Ze){var l=Ki,d=Qi;l=(d&~(1<<32-xn(d)-1)).toString(32)+l,s=""+s+"R"+l,l=au++,0<l&&(s+="H"+l.toString(32)),s+=""}else l=_R++,s=""+s+"r"+l.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:Dh,useFormState:S0,useActionState:S0,useOptimistic:function(r){var s=dn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Nh.bind(null,je,!0,l),l.dispatch=s,[r,s]},useMemoCache:Eh,useCacheRefresh:function(){return dn().memoizedState=NR.bind(null,je)}},F0={readContext:Wt,use:su,useCallback:A0,useContext:Wt,useEffect:x0,useImperativeHandle:P0,useInsertionEffect:R0,useLayoutEffect:O0,useMemo:M0,useReducer:ou,useRef:w0,useState:function(){return ou(Xi)},useDebugValue:Ph,useDeferredValue:function(r,s){var l=Mt();return D0(l,it.memoizedState,r,s)},useTransition:function(){var r=ou(Xi)[0],s=Mt().memoizedState;return[typeof r=="boolean"?r:vl(r),s]},useSyncExternalStore:l0,useId:U0,useHostTransitionStatus:Dh,useFormState:T0,useActionState:T0,useOptimistic:function(r,s){var l=Mt();return p0(l,it,r,s)},useMemoCache:Eh,useCacheRefresh:I0},jR={readContext:Wt,use:su,useCallback:A0,useContext:Wt,useEffect:x0,useImperativeHandle:P0,useInsertionEffect:R0,useLayoutEffect:O0,useMemo:M0,useReducer:Rh,useRef:w0,useState:function(){return Rh(Xi)},useDebugValue:Ph,useDeferredValue:function(r,s){var l=Mt();return it===null?Ah(l,r,s):D0(l,it.memoizedState,r,s)},useTransition:function(){var r=Rh(Xi)[0],s=Mt().memoizedState;return[typeof r=="boolean"?r:vl(r),s]},useSyncExternalStore:l0,useId:U0,useHostTransitionStatus:Dh,useFormState:C0,useActionState:C0,useOptimistic:function(r,s){var l=Mt();return it!==null?p0(l,it,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Eh,useCacheRefresh:I0},Us=null,Sl=0;function fu(r){var s=Sl;return Sl+=1,Us===null&&(Us=[]),e0(Us,r,s)}function Tl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function hu(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function V0(r){var s=r._init;return s(r._payload)}function G0(r){function s(X,Q){if(r){var Z=X.deletions;Z===null?(X.deletions=[Q],X.flags|=16):Z.push(Q)}}function l(X,Q){if(!r)return null;for(;Q!==null;)s(X,Q),Q=Q.sibling;return null}function d(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function p(X,Q){return X=Gi(X,Q),X.index=0,X.sibling=null,X}function g(X,Q,Z){return X.index=Z,r?(Z=X.alternate,Z!==null?(Z=Z.index,Z<Q?(X.flags|=67108866,Q):Z):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function x(X){return r&&X.alternate===null&&(X.flags|=67108866),X}function A(X,Q,Z,de){return Q===null||Q.tag!==6?(Q=th(Z,X.mode,de),Q.return=X,Q):(Q=p(Q,Z),Q.return=X,Q)}function z(X,Q,Z,de){var Ce=Z.type;return Ce===C?le(X,Q,Z.props.children,de,Z.key):Q!==null&&(Q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&V0(Ce)===Q.type)?(Q=p(Q,Z.props),Tl(Q,Z),Q.return=X,Q):(Q=Jc(Z.type,Z.key,Z.props,null,X.mode,de),Tl(Q,Z),Q.return=X,Q)}function ee(X,Q,Z,de){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==Z.containerInfo||Q.stateNode.implementation!==Z.implementation?(Q=nh(Z,X.mode,de),Q.return=X,Q):(Q=p(Q,Z.children||[]),Q.return=X,Q)}function le(X,Q,Z,de,Ce){return Q===null||Q.tag!==7?(Q=Ca(Z,X.mode,de,Ce),Q.return=X,Q):(Q=p(Q,Z),Q.return=X,Q)}function he(X,Q,Z){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=th(""+Q,X.mode,Z),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Z=Jc(Q.type,Q.key,Q.props,null,X.mode,Z),Tl(Z,Q),Z.return=X,Z;case k:return Q=nh(Q,X.mode,Z),Q.return=X,Q;case K:var de=Q._init;return Q=de(Q._payload),he(X,Q,Z)}if(ge(Q)||J(Q))return Q=Ca(Q,X.mode,Z,null),Q.return=X,Q;if(typeof Q.then=="function")return he(X,fu(Q),Z);if(Q.$$typeof===I)return he(X,$c(X,Q),Z);hu(X,Q)}return null}function te(X,Q,Z,de){var Ce=Q!==null?Q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ce!==null?null:A(X,Q,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return Z.key===Ce?z(X,Q,Z,de):null;case k:return Z.key===Ce?ee(X,Q,Z,de):null;case K:return Ce=Z._init,Z=Ce(Z._payload),te(X,Q,Z,de)}if(ge(Z)||J(Z))return Ce!==null?null:le(X,Q,Z,de,null);if(typeof Z.then=="function")return te(X,Q,fu(Z),de);if(Z.$$typeof===I)return te(X,Q,$c(X,Z),de);hu(X,Z)}return null}function ie(X,Q,Z,de,Ce){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return X=X.get(Z)||null,A(Q,X,""+de,Ce);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return X=X.get(de.key===null?Z:de.key)||null,z(Q,X,de,Ce);case k:return X=X.get(de.key===null?Z:de.key)||null,ee(Q,X,de,Ce);case K:var Ue=de._init;return de=Ue(de._payload),ie(X,Q,Z,de,Ce)}if(ge(de)||J(de))return X=X.get(Z)||null,le(Q,X,de,Ce,null);if(typeof de.then=="function")return ie(X,Q,Z,fu(de),Ce);if(de.$$typeof===I)return ie(X,Q,Z,$c(Q,de),Ce);hu(Q,de)}return null}function Pe(X,Q,Z,de){for(var Ce=null,Ue=null,we=Q,Oe=Q=0,Ht=null;we!==null&&Oe<Z.length;Oe++){we.index>Oe?(Ht=we,we=null):Ht=we.sibling;var Xe=te(X,we,Z[Oe],de);if(Xe===null){we===null&&(we=Ht);break}r&&we&&Xe.alternate===null&&s(X,we),Q=g(Xe,Q,Oe),Ue===null?Ce=Xe:Ue.sibling=Xe,Ue=Xe,we=Ht}if(Oe===Z.length)return l(X,we),Ze&&Ea(X,Oe),Ce;if(we===null){for(;Oe<Z.length;Oe++)we=he(X,Z[Oe],de),we!==null&&(Q=g(we,Q,Oe),Ue===null?Ce=we:Ue.sibling=we,Ue=we);return Ze&&Ea(X,Oe),Ce}for(we=d(we);Oe<Z.length;Oe++)Ht=ie(we,X,Oe,Z[Oe],de),Ht!==null&&(r&&Ht.alternate!==null&&we.delete(Ht.key===null?Oe:Ht.key),Q=g(Ht,Q,Oe),Ue===null?Ce=Ht:Ue.sibling=Ht,Ue=Ht);return r&&we.forEach(function(Fr){return s(X,Fr)}),Ze&&Ea(X,Oe),Ce}function xe(X,Q,Z,de){if(Z==null)throw Error(i(151));for(var Ce=null,Ue=null,we=Q,Oe=Q=0,Ht=null,Xe=Z.next();we!==null&&!Xe.done;Oe++,Xe=Z.next()){we.index>Oe?(Ht=we,we=null):Ht=we.sibling;var Fr=te(X,we,Xe.value,de);if(Fr===null){we===null&&(we=Ht);break}r&&we&&Fr.alternate===null&&s(X,we),Q=g(Fr,Q,Oe),Ue===null?Ce=Fr:Ue.sibling=Fr,Ue=Fr,we=Ht}if(Xe.done)return l(X,we),Ze&&Ea(X,Oe),Ce;if(we===null){for(;!Xe.done;Oe++,Xe=Z.next())Xe=he(X,Xe.value,de),Xe!==null&&(Q=g(Xe,Q,Oe),Ue===null?Ce=Xe:Ue.sibling=Xe,Ue=Xe);return Ze&&Ea(X,Oe),Ce}for(we=d(we);!Xe.done;Oe++,Xe=Z.next())Xe=ie(we,X,Oe,Xe.value,de),Xe!==null&&(r&&Xe.alternate!==null&&we.delete(Xe.key===null?Oe:Xe.key),Q=g(Xe,Q,Oe),Ue===null?Ce=Xe:Ue.sibling=Xe,Ue=Xe);return r&&we.forEach(function(UO){return s(X,UO)}),Ze&&Ea(X,Oe),Ce}function at(X,Q,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===C&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:e:{for(var Ce=Z.key;Q!==null;){if(Q.key===Ce){if(Ce=Z.type,Ce===C){if(Q.tag===7){l(X,Q.sibling),de=p(Q,Z.props.children),de.return=X,X=de;break e}}else if(Q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===K&&V0(Ce)===Q.type){l(X,Q.sibling),de=p(Q,Z.props),Tl(de,Z),de.return=X,X=de;break e}l(X,Q);break}else s(X,Q);Q=Q.sibling}Z.type===C?(de=Ca(Z.props.children,X.mode,de,Z.key),de.return=X,X=de):(de=Jc(Z.type,Z.key,Z.props,null,X.mode,de),Tl(de,Z),de.return=X,X=de)}return x(X);case k:e:{for(Ce=Z.key;Q!==null;){if(Q.key===Ce)if(Q.tag===4&&Q.stateNode.containerInfo===Z.containerInfo&&Q.stateNode.implementation===Z.implementation){l(X,Q.sibling),de=p(Q,Z.children||[]),de.return=X,X=de;break e}else{l(X,Q);break}else s(X,Q);Q=Q.sibling}de=nh(Z,X.mode,de),de.return=X,X=de}return x(X);case K:return Ce=Z._init,Z=Ce(Z._payload),at(X,Q,Z,de)}if(ge(Z))return Pe(X,Q,Z,de);if(J(Z)){if(Ce=J(Z),typeof Ce!="function")throw Error(i(150));return Z=Ce.call(Z),xe(X,Q,Z,de)}if(typeof Z.then=="function")return at(X,Q,fu(Z),de);if(Z.$$typeof===I)return at(X,Q,$c(X,Z),de);hu(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Q!==null&&Q.tag===6?(l(X,Q.sibling),de=p(Q,Z),de.return=X,X=de):(l(X,Q),de=th(Z,X.mode,de),de.return=X,X=de),x(X)):l(X,Q)}return function(X,Q,Z,de){try{Sl=0;var Ce=at(X,Q,Z,de);return Us=null,Ce}catch(we){if(we===dl||we===tu)throw we;var Ue=On(29,we,null,X.mode);return Ue.lanes=de,Ue.return=X,Ue}finally{}}}var Is=G0(!0),Q0=G0(!1),Vn=M(null),Ci=null;function Or(r){var s=r.alternate;$(Lt,Lt.current&1),$(Vn,r),Ci===null&&(s===null||Ds.current!==null||s.memoizedState!==null)&&(Ci=r)}function K0(r){if(r.tag===22){if($(Lt,Lt.current),$(Vn,r),Ci===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Ci=r)}}else _r()}function _r(){$(Lt,Lt.current),$(Vn,Vn.current)}function Wi(r){G(Vn),Ci===r&&(Ci=null),G(Lt)}var Lt=M(0);function pu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||wp(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Lh(r,s,l,d){s=r.memoizedState,l=l(d,s),l=l==null?s:m({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var jh={enqueueSetState:function(r,s,l){r=r._reactInternals;var d=Mn(),p=Er(d);p.payload=s,l!=null&&(p.callback=l),s=xr(r,p,d),s!==null&&(Dn(s,r,d),hl(s,r,d))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var d=Mn(),p=Er(d);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=xr(r,p,d),s!==null&&(Dn(s,r,d),hl(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Mn(),d=Er(l);d.tag=2,s!=null&&(d.callback=s),s=xr(r,d,l),s!==null&&(Dn(s,r,l),hl(s,r,l))}};function Y0(r,s,l,d,p,g,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,x):s.prototype&&s.prototype.isPureReactComponent?!il(l,d)||!il(p,g):!0}function J0(r,s,l,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==r&&jh.enqueueReplaceState(s,s.state,null)}function Ma(r,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(r=r.defaultProps){l===s&&(l=m({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}var mu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function X0(r){mu(r)}function W0(r){console.error(r)}function Z0(r){mu(r)}function gu(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function $0(r,s,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Uh(r,s,l){return l=Er(l),l.tag=3,l.payload={element:null},l.callback=function(){gu(r,s)},l}function eb(r){return r=Er(r),r.tag=3,r}function tb(r,s,l,d){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=d.value;r.payload=function(){return p(g)},r.callback=function(){$0(s,l,d)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){$0(s,l,d),typeof p!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var A=d.stack;this.componentDidCatch(d.value,{componentStack:A!==null?A:""})})}function UR(r,s,l,d,p){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&ll(s,l,p,!0),l=Vn.current,l!==null){switch(l.tag){case 13:return Ci===null?op():l.alternate===null&&St===0&&(St=3),l.flags&=-257,l.flags|=65536,l.lanes=p,d===fh?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),cp(r,d,p)),!1;case 22:return l.flags|=65536,d===fh?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),cp(r,d,p)),!1}throw Error(i(435,l.tag))}return cp(r,d,p),op(),!1}if(Ze)return s=Vn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,d!==ah&&(r=Error(i(422),{cause:d}),ol(Bn(r,l)))):(d!==ah&&(s=Error(i(423),{cause:d}),ol(Bn(s,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,d=Bn(d,l),p=Uh(r.stateNode,d,p),mh(r,p),St!==4&&(St=2)),!1;var g=Error(i(520),{cause:d});if(g=Bn(g,l),Ol===null?Ol=[g]:Ol.push(g),St!==4&&(St=2),s===null)return!0;d=Bn(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Uh(l.stateNode,d,r),mh(l,r),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Lr===null||!Lr.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=eb(p),tb(p,r,l,d),mh(l,p),!1}l=l.return}while(l!==null);return!1}var nb=Error(i(461)),Bt=!1;function Vt(r,s,l,d){s.child=r===null?Q0(s,null,l,d):Is(s,r.child,l,d)}function ib(r,s,l,d,p){l=l.render;var g=s.ref;if("ref"in d){var x={};for(var A in d)A!=="ref"&&(x[A]=d[A])}else x=d;return _a(s),d=Sh(r,s,l,x,g,p),A=Th(),r!==null&&!Bt?(kh(r,s,p),Zi(r,s,p)):(Ze&&A&&ih(s),s.flags|=1,Vt(r,s,d,p),s.child)}function rb(r,s,l,d,p){if(r===null){var g=l.type;return typeof g=="function"&&!eh(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,ab(r,s,g,d,p)):(r=Jc(l.type,null,d,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Gh(r,p)){var x=g.memoizedProps;if(l=l.compare,l=l!==null?l:il,l(x,d)&&r.ref===s.ref)return Zi(r,s,p)}return s.flags|=1,r=Gi(g,d),r.ref=s.ref,r.return=s,s.child=r}function ab(r,s,l,d,p){if(r!==null){var g=r.memoizedProps;if(il(g,d)&&r.ref===s.ref)if(Bt=!1,s.pendingProps=d=g,Gh(r,p))(r.flags&131072)!==0&&(Bt=!0);else return s.lanes=r.lanes,Zi(r,s,p)}return Ih(r,s,l,d,p)}function sb(r,s,l){var d=s.pendingProps,p=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=g!==null?g.baseLanes|l:l,r!==null){for(p=s.child=r.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;s.childLanes=g&~d}else s.childLanes=0,s.child=null;return ob(r,s,d,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&eu(s,g!==null?g.cachePool:null),g!==null?a0(s,g):vh(),K0(s);else return s.lanes=s.childLanes=536870912,ob(r,s,g!==null?g.baseLanes|l:l,l)}else g!==null?(eu(s,g.cachePool),a0(s,g),_r(),s.memoizedState=null):(r!==null&&eu(s,null),vh(),_r());return Vt(r,s,p,l),s.child}function ob(r,s,l,d){var p=dh();return p=p===null?null:{parent:Nt._currentValue,pool:p},s.memoizedState={baseLanes:l,cachePool:p},r!==null&&eu(s,null),vh(),K0(s),r!==null&&ll(r,s,d,!0),null}function vu(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function Ih(r,s,l,d,p){return _a(s),l=Sh(r,s,l,d,void 0,p),d=Th(),r!==null&&!Bt?(kh(r,s,p),Zi(r,s,p)):(Ze&&d&&ih(s),s.flags|=1,Vt(r,s,l,p),s.child)}function lb(r,s,l,d,p,g){return _a(s),s.updateQueue=null,l=o0(s,d,l,p),s0(r),d=Th(),r!==null&&!Bt?(kh(r,s,g),Zi(r,s,g)):(Ze&&d&&ih(s),s.flags|=1,Vt(r,s,l,g),s.child)}function cb(r,s,l,d,p){if(_a(s),s.stateNode===null){var g=Os,x=l.contextType;typeof x=="object"&&x!==null&&(g=Wt(x)),g=new l(d,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=jh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=d,g.state=s.memoizedState,g.refs={},hh(s),x=l.contextType,g.context=typeof x=="object"&&x!==null?Wt(x):Os,g.state=s.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Lh(s,l,x,d),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&jh.enqueueReplaceState(g,g.state,null),ml(s,d,g,p),pl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(r===null){g=s.stateNode;var A=s.memoizedProps,z=Ma(l,A);g.props=z;var ee=g.context,le=l.contextType;x=Os,typeof le=="object"&&le!==null&&(x=Wt(le));var he=l.getDerivedStateFromProps;le=typeof he=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,le||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||ee!==x)&&J0(s,g,d,x),wr=!1;var te=s.memoizedState;g.state=te,ml(s,d,g,p),pl(),ee=s.memoizedState,A||te!==ee||wr?(typeof he=="function"&&(Lh(s,l,he,d),ee=s.memoizedState),(z=wr||Y0(s,l,z,d,te,ee,x))?(le||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=ee),g.props=d,g.state=ee,g.context=x,d=z):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{g=s.stateNode,ph(r,s),x=s.memoizedProps,le=Ma(l,x),g.props=le,he=s.pendingProps,te=g.context,ee=l.contextType,z=Os,typeof ee=="object"&&ee!==null&&(z=Wt(ee)),A=l.getDerivedStateFromProps,(ee=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==he||te!==z)&&J0(s,g,d,z),wr=!1,te=s.memoizedState,g.state=te,ml(s,d,g,p),pl();var ie=s.memoizedState;x!==he||te!==ie||wr||r!==null&&r.dependencies!==null&&Zc(r.dependencies)?(typeof A=="function"&&(Lh(s,l,A,d),ie=s.memoizedState),(le=wr||Y0(s,l,le,d,te,ie,z)||r!==null&&r.dependencies!==null&&Zc(r.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,ie,z),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,ie,z)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ie),g.props=d,g.state=ie,g.context=z,d=le):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),d=!1)}return g=d,vu(r,s),d=(s.flags&128)!==0,g||d?(g=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&d?(s.child=Is(s,r.child,null,p),s.child=Is(s,null,l,p)):Vt(r,s,l,p),s.memoizedState=g.state,r=s.child):r=Zi(r,s,p),r}function ub(r,s,l,d){return sl(),s.flags|=256,Vt(r,s,l,d),s.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bh(r){return{baseLanes:r,cachePool:Wy()}}function qh(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Gn),r}function db(r,s,l){var d=s.pendingProps,p=!1,g=(s.flags&128)!==0,x;if((x=g)||(x=r!==null&&r.memoizedState===null?!1:(Lt.current&2)!==0),x&&(p=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ze){if(p?Or(s):_r(),Ze){var A=bt,z;if(z=A){e:{for(z=A,A=ki;z.nodeType!==8;){if(!A){A=null;break e}if(z=ni(z.nextSibling),z===null){A=null;break e}}A=z}A!==null?(s.memoizedState={dehydrated:A,treeContext:wa!==null?{id:Qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},z=On(18,null,null,0),z.stateNode=A,z.return=s,s.child=z,rn=s,bt=null,z=!0):z=!1}z||Ra(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return wp(A)?s.lanes=32:s.lanes=536870912,null;Wi(s)}return A=d.children,d=d.fallback,p?(_r(),p=s.mode,A=yu({mode:"hidden",children:A},p),d=Ca(d,p,l,null),A.return=s,d.return=s,A.sibling=d,s.child=A,p=s.child,p.memoizedState=Bh(l),p.childLanes=qh(r,x,l),s.memoizedState=zh,d):(Or(s),Hh(s,A))}if(z=r.memoizedState,z!==null&&(A=z.dehydrated,A!==null)){if(g)s.flags&256?(Or(s),s.flags&=-257,s=Fh(r,s,l)):s.memoizedState!==null?(_r(),s.child=r.child,s.flags|=128,s=null):(_r(),p=d.fallback,A=s.mode,d=yu({mode:"visible",children:d.children},A),p=Ca(p,A,l,null),p.flags|=2,d.return=s,p.return=s,d.sibling=p,s.child=d,Is(s,r.child,null,l),d=s.child,d.memoizedState=Bh(l),d.childLanes=qh(r,x,l),s.memoizedState=zh,s=p);else if(Or(s),wp(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var ee=x.dgst;x=ee,d=Error(i(419)),d.stack="",d.digest=x,ol({value:d,source:null,stack:null}),s=Fh(r,s,l)}else if(Bt||ll(r,s,l,!1),x=(l&r.childLanes)!==0,Bt||x){if(x=ct,x!==null&&(d=l&-l,d=(d&42)!==0?1:Ef(d),d=(d&(x.suspendedLanes|l))!==0?0:d,d!==0&&d!==z.retryLane))throw z.retryLane=d,Rs(r,d),Dn(x,r,d),nb;A.data==="$?"||op(),s=Fh(r,s,l)}else A.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=z.treeContext,bt=ni(A.nextSibling),rn=s,Ze=!0,xa=null,ki=!1,r!==null&&(Hn[Fn++]=Qi,Hn[Fn++]=Ki,Hn[Fn++]=wa,Qi=r.id,Ki=r.overflow,wa=s),s=Hh(s,d.children),s.flags|=4096);return s}return p?(_r(),p=d.fallback,A=s.mode,z=r.child,ee=z.sibling,d=Gi(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,ee!==null?p=Gi(ee,p):(p=Ca(p,A,l,null),p.flags|=2),p.return=s,d.return=s,d.sibling=p,s.child=d,d=p,p=s.child,A=r.child.memoizedState,A===null?A=Bh(l):(z=A.cachePool,z!==null?(ee=Nt._currentValue,z=z.parent!==ee?{parent:ee,pool:ee}:z):z=Wy(),A={baseLanes:A.baseLanes|l,cachePool:z}),p.memoizedState=A,p.childLanes=qh(r,x,l),s.memoizedState=zh,d):(Or(s),l=r.child,r=l.sibling,l=Gi(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=l,s.memoizedState=null,l)}function Hh(r,s){return s=yu({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function yu(r,s){return r=On(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Fh(r,s,l){return Is(s,r.child,null,l),r=Hh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fb(r,s,l){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),oh(r.return,s,l)}function Vh(r,s,l,d,p){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=l,g.tailMode=p)}function hb(r,s,l){var d=s.pendingProps,p=d.revealOrder,g=d.tail;if(Vt(r,s,d.children,l),d=Lt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fb(r,l,s);else if(r.tag===19)fb(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch($(Lt,d),p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&pu(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Vh(s,!1,p,l,g);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&pu(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Vh(s,!0,l,null,g);break;case"together":Vh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Zi(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Nr|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(ll(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=Gi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Gi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function Gh(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Zc(r)))}function IR(r,s,l){switch(s.tag){case 3:Te(s,s.stateNode.containerInfo),Cr(s,Nt,r.memoizedState.cache),sl();break;case 27:case 5:Me(s);break;case 4:Te(s,s.stateNode.containerInfo);break;case 10:Cr(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(Or(s),s.flags|=128,null):(l&s.child.childLanes)!==0?db(r,s,l):(Or(s),r=Zi(r,s,l),r!==null?r.sibling:null);Or(s);break;case 19:var p=(r.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(ll(r,s,l,!1),d=(l&s.childLanes)!==0),p){if(d)return hb(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),$(Lt,Lt.current),d)break;return null;case 22:case 23:return s.lanes=0,sb(r,s,l);case 24:Cr(s,Nt,r.memoizedState.cache)}return Zi(r,s,l)}function pb(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Bt=!0;else{if(!Gh(r,l)&&(s.flags&128)===0)return Bt=!1,IR(r,s,l);Bt=(r.flags&131072)!==0}else Bt=!1,Ze&&(s.flags&1048576)!==0&&Vy(s,Wc,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var d=s.elementType,p=d._init;if(d=p(d._payload),s.type=d,typeof d=="function")eh(d)?(r=Ma(d,r),s.tag=1,s=cb(null,s,d,r,l)):(s.tag=0,s=Ih(null,s,d,r,l));else{if(d!=null){if(p=d.$$typeof,p===j){s.tag=11,s=ib(null,s,d,r,l);break e}else if(p===U){s.tag=14,s=rb(null,s,d,r,l);break e}}throw s=W(d)||d,Error(i(306,s,""))}}return s;case 0:return Ih(r,s,s.type,s.pendingProps,l);case 1:return d=s.type,p=Ma(d,s.pendingProps),cb(r,s,d,p,l);case 3:e:{if(Te(s,s.stateNode.containerInfo),r===null)throw Error(i(387));d=s.pendingProps;var g=s.memoizedState;p=g.element,ph(r,s),ml(s,d,null,l);var x=s.memoizedState;if(d=x.cache,Cr(s,Nt,d),d!==g.cache&&lh(s,[Nt],l,!0),pl(),d=x.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=ub(r,s,d,l);break e}else if(d!==p){p=Bn(Error(i(424)),s),ol(p),s=ub(r,s,d,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(bt=ni(r.firstChild),rn=s,Ze=!0,xa=null,ki=!0,l=Q0(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(sl(),d===p){s=Zi(r,s,l);break e}Vt(r,s,d,l)}s=s.child}return s;case 26:return vu(r,s),r===null?(l=yS(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ze||(l=s.type,r=s.pendingProps,d=Mu(oe.current).createElement(l),d[Xt]=s,d[cn]=r,Qt(d,l,r),zt(d),s.stateNode=d):s.memoizedState=yS(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Me(s),r===null&&Ze&&(d=s.stateNode=mS(s.type,s.pendingProps,oe.current),rn=s,ki=!0,p=bt,Ir(s.type)?(Ep=p,bt=ni(d.firstChild)):bt=p),Vt(r,s,s.pendingProps.children,l),vu(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ze&&((p=d=bt)&&(d=fO(d,s.type,s.pendingProps,ki),d!==null?(s.stateNode=d,rn=s,bt=ni(d.firstChild),ki=!1,p=!0):p=!1),p||Ra(s)),Me(s),p=s.type,g=s.pendingProps,x=r!==null?r.memoizedProps:null,d=g.children,Tp(p,g)?d=null:x!==null&&Tp(p,x)&&(s.flags|=32),s.memoizedState!==null&&(p=Sh(r,s,PR,null,null,l),Ul._currentValue=p),vu(r,s),Vt(r,s,d,l),s.child;case 6:return r===null&&Ze&&((r=l=bt)&&(l=hO(l,s.pendingProps,ki),l!==null?(s.stateNode=l,rn=s,bt=null,r=!0):r=!1),r||Ra(s)),null;case 13:return db(r,s,l);case 4:return Te(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Is(s,null,d,l):Vt(r,s,d,l),s.child;case 11:return ib(r,s,s.type,s.pendingProps,l);case 7:return Vt(r,s,s.pendingProps,l),s.child;case 8:return Vt(r,s,s.pendingProps.children,l),s.child;case 12:return Vt(r,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,Cr(s,s.type,d.value),Vt(r,s,d.children,l),s.child;case 9:return p=s.type._context,d=s.pendingProps.children,_a(s),p=Wt(p),d=d(p),s.flags|=1,Vt(r,s,d,l),s.child;case 14:return rb(r,s,s.type,s.pendingProps,l);case 15:return ab(r,s,s.type,s.pendingProps,l);case 19:return hb(r,s,l);case 31:return d=s.pendingProps,l=s.mode,d={mode:d.mode,children:d.children},r===null?(l=yu(d,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=Gi(r.child,d),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return sb(r,s,l);case 24:return _a(s),d=Wt(Nt),r===null?(p=dh(),p===null&&(p=ct,g=ch(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),s.memoizedState={parent:d,cache:p},hh(s),Cr(s,Nt,p)):((r.lanes&l)!==0&&(ph(r,s),ml(s,null,null,l),pl()),p=r.memoizedState,g=s.memoizedState,p.parent!==d?(p={parent:d,cache:d},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Cr(s,Nt,d)):(d=g.cache,Cr(s,Nt,d),d!==p.cache&&lh(s,[Nt],l,!0))),Vt(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function $i(r){r.flags|=4}function mb(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!CS(s)){if(s=Vn.current,s!==null&&((Ve&4194048)===Ve?Ci!==null:(Ve&62914560)!==Ve&&(Ve&536870912)===0||s!==Ci))throw fl=fh,Zy;r.flags|=8192}}function bu(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Kv():536870912,r.lanes|=s,Hs|=s)}function kl(r,s){if(!Ze)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=d,r.childLanes=l,s}function zR(r,s,l){var d=s.pendingProps;switch(rh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return l=s.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Ji(Nt),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(al(s)?$i(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ky())),mt(s),null;case 26:return l=s.memoizedState,r===null?($i(s),l!==null?(mt(s),mb(s,l)):(mt(s),s.flags&=-16777217)):l?l!==r.memoizedState?($i(s),mt(s),mb(s,l)):(mt(s),s.flags&=-16777217):(r.memoizedProps!==d&&$i(s),mt(s),s.flags&=-16777217),null;case 27:Qe(s),l=oe.current;var p=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==d&&$i(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return mt(s),null}r=ne.current,al(s)?Gy(s):(r=mS(p,d,l),s.stateNode=r,$i(s))}return mt(s),null;case 5:if(Qe(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&$i(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(r=ne.current,al(s))Gy(s);else{switch(p=Mu(oe.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?p.createElement(l,{is:d.is}):p.createElement(l)}}r[Xt]=s,r[cn]=d;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=r;e:switch(Qt(r,l,d),l){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&$i(s)}}return mt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==d&&$i(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(r=oe.current,al(s)){if(r=s.stateNode,l=s.memoizedProps,d=null,p=rn,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}r[Xt]=s,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||lS(r.nodeValue,l)),r||Ra(s)}else r=Mu(r).createTextNode(d),r[Xt]=s,s.stateNode=r}return mt(s),null;case 13:if(d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=al(s),d!==null&&d.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Xt]=s}else sl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),p=!1}else p=Ky(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(Wi(s),s):(Wi(s),null)}if(Wi(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=d!==null,r=r!==null&&r.memoizedState!==null,l){d=s.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var g=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==p&&(d.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),bu(s,s.updateQueue),mt(s),null;case 4:return Re(),r===null&&gp(s.stateNode.containerInfo),mt(s),null;case 10:return Ji(s.type),mt(s),null;case 19:if(G(Lt),p=s.memoizedState,p===null)return mt(s),null;if(d=(s.flags&128)!==0,g=p.rendering,g===null)if(d)kl(p,!1);else{if(St!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=pu(r),g!==null){for(s.flags|=128,kl(p,!1),r=g.updateQueue,s.updateQueue=r,bu(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)Fy(l,r),l=l.sibling;return $(Lt,Lt.current&1|2),s.child}r=r.sibling}p.tail!==null&&_e()>ku&&(s.flags|=128,d=!0,kl(p,!1),s.lanes=4194304)}else{if(!d)if(r=pu(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,bu(s,r),kl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Ze)return mt(s),null}else 2*_e()-p.renderingStartTime>ku&&l!==536870912&&(s.flags|=128,d=!0,kl(p,!1),s.lanes=4194304);p.isBackwards?(g.sibling=s.child,s.child=g):(r=p.last,r!==null?r.sibling=g:s.child=g,p.last=g)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=_e(),s.sibling=null,r=Lt.current,$(Lt,d?r&1|2:r&1),s):(mt(s),null);case 22:case 23:return Wi(s),yh(),d=s.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),l=s.updateQueue,l!==null&&bu(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),r!==null&&G(Pa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ji(Nt),mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function BR(r,s){switch(rh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ji(Nt),Re(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Qe(s),null;case 13:if(Wi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return G(Lt),null;case 4:return Re(),null;case 10:return Ji(s.type),null;case 22:case 23:return Wi(s),yh(),r!==null&&G(Pa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function gb(r,s){switch(rh(s),s.tag){case 3:Ji(Nt),Re();break;case 26:case 27:case 5:Qe(s);break;case 4:Re();break;case 13:Wi(s);break;case 19:G(Lt);break;case 10:Ji(s.type);break;case 22:case 23:Wi(s),yh(),r!==null&&G(Pa);break;case 24:Ji(Nt)}}function Cl(r,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&r)===r){d=void 0;var g=l.create,x=l.inst;d=g(),x.destroy=d}l=l.next}while(l!==p)}}catch(A){ot(s,s.return,A)}}function Pr(r,s,l){try{var d=s.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var g=p.next;d=g;do{if((d.tag&r)===r){var x=d.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,p=s;var z=l,ee=A;try{ee()}catch(le){ot(p,z,le)}}}d=d.next}while(d!==g)}}catch(le){ot(s,s.return,le)}}function vb(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{r0(s,l)}catch(d){ot(r,r.return,d)}}}function yb(r,s,l){l.props=Ma(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){ot(r,s,d)}}function wl(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(p){ot(r,s,p)}}function wi(r,s){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(p){ot(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){ot(r,s,p)}else l.current=null}function bb(r){var s=r.type,l=r.memoizedProps,d=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(p){ot(r,r.return,p)}}function Qh(r,s,l){try{var d=r.stateNode;oO(d,r.type,l,s),d[cn]=s}catch(p){ot(r,r.return,p)}}function Sb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ir(r.type)||r.tag===4}function Kh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Sb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ir(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yh(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Au));else if(d!==4&&(d===27&&Ir(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Yh(r,s,l),r=r.sibling;r!==null;)Yh(r,s,l),r=r.sibling}function Su(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(d!==4&&(d===27&&Ir(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Su(r,s,l),r=r.sibling;r!==null;)Su(r,s,l),r=r.sibling}function Tb(r){var s=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Qt(s,d,l),s[Xt]=r,s[cn]=l}catch(g){ot(r,r.return,g)}}var er=!1,Ot=!1,Jh=!1,kb=typeof WeakSet=="function"?WeakSet:Set,qt=null;function qR(r,s){if(r=r.containerInfo,bp=Iu,r=Dy(r),Kf(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var x=0,A=-1,z=-1,ee=0,le=0,he=r,te=null;t:for(;;){for(var ie;he!==l||p!==0&&he.nodeType!==3||(A=x+p),he!==g||d!==0&&he.nodeType!==3||(z=x+d),he.nodeType===3&&(x+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===r)break t;if(te===l&&++ee===p&&(A=x),te===g&&++le===d&&(z=x),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}l=A===-1||z===-1?null:{start:A,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sp={focusedElem:r,selectionRange:l},Iu=!1,qt=s;qt!==null;)if(s=qt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,qt=r;else for(;qt!==null;){switch(s=qt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=s,p=g.memoizedProps,g=g.memoizedState,d=l.stateNode;try{var Pe=Ma(l.type,p,l.elementType===l.type);r=d.getSnapshotBeforeUpdate(Pe,g),d.__reactInternalSnapshotBeforeUpdate=r}catch(xe){ot(l,l.return,xe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Cp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,qt=r;break}qt=s.return}}function Cb(r,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ar(r,l),d&4&&Cl(5,l);break;case 1:if(Ar(r,l),d&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(x){ot(l,l.return,x)}else{var p=Ma(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ot(l,l.return,x)}}d&64&&vb(l),d&512&&wl(l,l.return);break;case 3:if(Ar(r,l),d&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{r0(r,s)}catch(x){ot(l,l.return,x)}}break;case 27:s===null&&d&4&&Tb(l);case 26:case 5:Ar(r,l),s===null&&d&4&&bb(l),d&512&&wl(l,l.return);break;case 12:Ar(r,l);break;case 13:Ar(r,l),d&4&&xb(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=XR.bind(null,l),pO(r,l))));break;case 22:if(d=l.memoizedState!==null||er,!d){s=s!==null&&s.memoizedState!==null||Ot,p=er;var g=Ot;er=d,(Ot=s)&&!g?Mr(r,l,(l.subtreeFlags&8772)!==0):Ar(r,l),er=p,Ot=g}break;case 30:break;default:Ar(r,l)}}function wb(r){var s=r.alternate;s!==null&&(r.alternate=null,wb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Of(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ft=null,fn=!1;function tr(r,s,l){for(l=l.child;l!==null;)Eb(r,s,l),l=l.sibling}function Eb(r,s,l){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(va,l)}catch{}switch(l.tag){case 26:Ot||wi(l,s),tr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ot||wi(l,s);var d=ft,p=fn;Ir(l.type)&&(ft=l.stateNode,fn=!1),tr(r,s,l),Dl(l.stateNode),ft=d,fn=p;break;case 5:Ot||wi(l,s);case 6:if(d=ft,p=fn,ft=null,tr(r,s,l),ft=d,fn=p,ft!==null)if(fn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(l.stateNode)}catch(g){ot(l,s,g)}else try{ft.removeChild(l.stateNode)}catch(g){ot(l,s,g)}break;case 18:ft!==null&&(fn?(r=ft,hS(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ql(r)):hS(ft,l.stateNode));break;case 4:d=ft,p=fn,ft=l.stateNode.containerInfo,fn=!0,tr(r,s,l),ft=d,fn=p;break;case 0:case 11:case 14:case 15:Ot||Pr(2,l,s),Ot||Pr(4,l,s),tr(r,s,l);break;case 1:Ot||(wi(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&yb(l,s,d)),tr(r,s,l);break;case 21:tr(r,s,l);break;case 22:Ot=(d=Ot)||l.memoizedState!==null,tr(r,s,l),Ot=d;break;default:tr(r,s,l)}}function xb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ql(r)}catch(l){ot(s,s.return,l)}}function HR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new kb),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new kb),s;default:throw Error(i(435,r.tag))}}function Xh(r,s){var l=HR(r);s.forEach(function(d){var p=WR.bind(null,r,d);l.has(d)||(l.add(d),d.then(p,p))})}function _n(r,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d],g=r,x=s,A=x;e:for(;A!==null;){switch(A.tag){case 27:if(Ir(A.type)){ft=A.stateNode,fn=!1;break e}break;case 5:ft=A.stateNode,fn=!1;break e;case 3:case 4:ft=A.stateNode.containerInfo,fn=!0;break e}A=A.return}if(ft===null)throw Error(i(160));Eb(g,x,p),ft=null,fn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Rb(s,r),s=s.sibling}var ti=null;function Rb(r,s){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:_n(s,r),Pn(r),d&4&&(Pr(3,r,r.return),Cl(3,r),Pr(5,r,r.return));break;case 1:_n(s,r),Pn(r),d&512&&(Ot||l===null||wi(l,l.return)),d&64&&er&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var p=ti;if(_n(s,r),Pn(r),d&512&&(Ot||l===null||wi(l,l.return)),d&4){var g=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){e:{d=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Yo]||g[Xt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(d),p.head.insertBefore(g,p.querySelector("head > title"))),Qt(g,d,l),g[Xt]=r,zt(g),d=g;break e;case"link":var x=TS("link","href",p).get(d+(l.href||""));if(x){for(var A=0;A<x.length;A++)if(g=x[A],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(A,1);break t}}g=p.createElement(d),Qt(g,d,l),p.head.appendChild(g);break;case"meta":if(x=TS("meta","content",p).get(d+(l.content||""))){for(A=0;A<x.length;A++)if(g=x[A],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(A,1);break t}}g=p.createElement(d),Qt(g,d,l),p.head.appendChild(g);break;default:throw Error(i(468,d))}g[Xt]=r,zt(g),d=g}r.stateNode=d}else kS(p,r.type,r.stateNode);else r.stateNode=SS(p,d,r.memoizedProps);else g!==d?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,d===null?kS(p,r.type,r.stateNode):SS(p,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Qh(r,r.memoizedProps,l.memoizedProps)}break;case 27:_n(s,r),Pn(r),d&512&&(Ot||l===null||wi(l,l.return)),l!==null&&d&4&&Qh(r,r.memoizedProps,l.memoizedProps);break;case 5:if(_n(s,r),Pn(r),d&512&&(Ot||l===null||wi(l,l.return)),r.flags&32){p=r.stateNode;try{Ss(p,"")}catch(ie){ot(r,r.return,ie)}}d&4&&r.stateNode!=null&&(p=r.memoizedProps,Qh(r,p,l!==null?l.memoizedProps:p)),d&1024&&(Jh=!0);break;case 6:if(_n(s,r),Pn(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(ie){ot(r,r.return,ie)}}break;case 3:if(Lu=null,p=ti,ti=Du(s.containerInfo),_n(s,r),ti=p,Pn(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ql(s.containerInfo)}catch(ie){ot(r,r.return,ie)}Jh&&(Jh=!1,Ob(r));break;case 4:d=ti,ti=Du(r.stateNode.containerInfo),_n(s,r),Pn(r),ti=d;break;case 12:_n(s,r),Pn(r);break;case 13:_n(s,r),Pn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(np=_e()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Xh(r,d)));break;case 22:p=r.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,ee=er,le=Ot;if(er=ee||p,Ot=le||z,_n(s,r),Ot=le,er=ee,Pn(r),d&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(l===null||z||er||Ot||Da(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){z=l=s;try{if(g=z.stateNode,p)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=z.stateNode;var he=z.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ie){ot(z,z.return,ie)}}}else if(s.tag===6){if(l===null){z=s;try{z.stateNode.nodeValue=p?"":z.memoizedProps}catch(ie){ot(z,z.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Xh(r,l))));break;case 19:_n(s,r),Pn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Xh(r,d)));break;case 30:break;case 21:break;default:_n(s,r),Pn(r)}}function Pn(r){var s=r.flags;if(s&2){try{for(var l,d=r.return;d!==null;){if(Sb(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,g=Kh(r);Su(r,g,p);break;case 5:var x=l.stateNode;l.flags&32&&(Ss(x,""),l.flags&=-33);var A=Kh(r);Su(r,A,x);break;case 3:case 4:var z=l.stateNode.containerInfo,ee=Kh(r);Yh(r,ee,z);break;default:throw Error(i(161))}}catch(le){ot(r,r.return,le)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Ob(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Ob(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Ar(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Cb(r,s.alternate,s),s=s.sibling}function Da(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Pr(4,s,s.return),Da(s);break;case 1:wi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&yb(s,s.return,l),Da(s);break;case 27:Dl(s.stateNode);case 26:case 5:wi(s,s.return),Da(s);break;case 22:s.memoizedState===null&&Da(s);break;case 30:Da(s);break;default:Da(s)}r=r.sibling}}function Mr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,p=r,g=s,x=g.flags;switch(g.tag){case 0:case 11:case 15:Mr(p,g,l),Cl(4,g);break;case 1:if(Mr(p,g,l),d=g,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ee){ot(d,d.return,ee)}if(d=g,p=d.updateQueue,p!==null){var A=d.stateNode;try{var z=p.shared.hiddenCallbacks;if(z!==null)for(p.shared.hiddenCallbacks=null,p=0;p<z.length;p++)i0(z[p],A)}catch(ee){ot(d,d.return,ee)}}l&&x&64&&vb(g),wl(g,g.return);break;case 27:Tb(g);case 26:case 5:Mr(p,g,l),l&&d===null&&x&4&&bb(g),wl(g,g.return);break;case 12:Mr(p,g,l);break;case 13:Mr(p,g,l),l&&x&4&&xb(p,g);break;case 22:g.memoizedState===null&&Mr(p,g,l),wl(g,g.return);break;case 30:break;default:Mr(p,g,l)}s=s.sibling}}function Wh(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&cl(l))}function Zh(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cl(r))}function Ei(r,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_b(r,s,l,d),s=s.sibling}function _b(r,s,l,d){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Ei(r,s,l,d),p&2048&&Cl(9,s);break;case 1:Ei(r,s,l,d);break;case 3:Ei(r,s,l,d),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cl(r)));break;case 12:if(p&2048){Ei(r,s,l,d),r=s.stateNode;try{var g=s.memoizedProps,x=g.id,A=g.onPostCommit;typeof A=="function"&&A(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(z){ot(s,s.return,z)}}else Ei(r,s,l,d);break;case 13:Ei(r,s,l,d);break;case 23:break;case 22:g=s.stateNode,x=s.alternate,s.memoizedState!==null?g._visibility&2?Ei(r,s,l,d):El(r,s):g._visibility&2?Ei(r,s,l,d):(g._visibility|=2,zs(r,s,l,d,(s.subtreeFlags&10256)!==0)),p&2048&&Wh(x,s);break;case 24:Ei(r,s,l,d),p&2048&&Zh(s.alternate,s);break;default:Ei(r,s,l,d)}}function zs(r,s,l,d,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,x=s,A=l,z=d,ee=x.flags;switch(x.tag){case 0:case 11:case 15:zs(g,x,A,z,p),Cl(8,x);break;case 23:break;case 22:var le=x.stateNode;x.memoizedState!==null?le._visibility&2?zs(g,x,A,z,p):El(g,x):(le._visibility|=2,zs(g,x,A,z,p)),p&&ee&2048&&Wh(x.alternate,x);break;case 24:zs(g,x,A,z,p),p&&ee&2048&&Zh(x.alternate,x);break;default:zs(g,x,A,z,p)}s=s.sibling}}function El(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,d=s,p=d.flags;switch(d.tag){case 22:El(l,d),p&2048&&Wh(d.alternate,d);break;case 24:El(l,d),p&2048&&Zh(d.alternate,d);break;default:El(l,d)}s=s.sibling}}var xl=8192;function Bs(r){if(r.subtreeFlags&xl)for(r=r.child;r!==null;)Pb(r),r=r.sibling}function Pb(r){switch(r.tag){case 26:Bs(r),r.flags&xl&&r.memoizedState!==null&&RO(ti,r.memoizedState,r.memoizedProps);break;case 5:Bs(r);break;case 3:case 4:var s=ti;ti=Du(r.stateNode.containerInfo),Bs(r),ti=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=xl,xl=16777216,Bs(r),xl=s):Bs(r));break;default:Bs(r)}}function Ab(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Rl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];qt=d,Db(d,r)}Ab(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Mb(r),r=r.sibling}function Mb(r){switch(r.tag){case 0:case 11:case 15:Rl(r),r.flags&2048&&Pr(9,r,r.return);break;case 3:Rl(r);break;case 12:Rl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Tu(r)):Rl(r);break;default:Rl(r)}}function Tu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];qt=d,Db(d,r)}Ab(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Pr(8,s,s.return),Tu(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Tu(s));break;default:Tu(s)}r=r.sibling}}function Db(r,s){for(;qt!==null;){var l=qt;switch(l.tag){case 0:case 11:case 15:Pr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:cl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,qt=d;else e:for(l=r;qt!==null;){d=qt;var p=d.sibling,g=d.return;if(wb(d),d===l){qt=null;break e}if(p!==null){p.return=g,qt=p;break e}qt=g}}}var FR={getCacheForType:function(r){var s=Wt(Nt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},VR=typeof WeakMap=="function"?WeakMap:Map,tt=0,ct=null,Ie=null,Ve=0,nt=0,An=null,Dr=!1,qs=!1,$h=!1,nr=0,St=0,Nr=0,Na=0,ep=0,Gn=0,Hs=0,Ol=null,hn=null,tp=!1,np=0,ku=1/0,Cu=null,Lr=null,Gt=0,jr=null,Fs=null,Vs=0,ip=0,rp=null,Nb=null,_l=0,ap=null;function Mn(){if((tt&2)!==0&&Ve!==0)return Ve&-Ve;if(H.T!==null){var r=As;return r!==0?r:fp()}return Xv()}function Lb(){Gn===0&&(Gn=(Ve&536870912)===0||Ze?Qv():536870912);var r=Vn.current;return r!==null&&(r.flags|=32),Gn}function Dn(r,s,l){(r===ct&&(nt===2||nt===9)||r.cancelPendingCommit!==null)&&(Gs(r,0),Ur(r,Ve,Gn,!1)),Ko(r,l),((tt&2)===0||r!==ct)&&(r===ct&&((tt&2)===0&&(Na|=l),St===4&&Ur(r,Ve,Gn,!1)),xi(r))}function jb(r,s,l){if((tt&6)!==0)throw Error(i(327));var d=!l&&(s&124)===0&&(s&r.expiredLanes)===0||Qo(r,s),p=d?KR(r,s):lp(r,s,!0),g=d;do{if(p===0){qs&&!d&&Ur(r,s,0,!1);break}else{if(l=r.current.alternate,g&&!GR(l)){p=lp(r,s,!1),g=!1;continue}if(p===2){if(g=s,r.errorRecoveryDisabledLanes&g)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var A=r;p=Ol;var z=A.current.memoizedState.isDehydrated;if(z&&(Gs(A,x).flags|=256),x=lp(A,x,!1),x!==2){if($h&&!z){A.errorRecoveryDisabledLanes|=g,Na|=g,p=4;break e}g=hn,hn=p,g!==null&&(hn===null?hn=g:hn.push.apply(hn,g))}p=x}if(g=!1,p!==2)continue}}if(p===1){Gs(r,0),Ur(r,s,0,!0);break}e:{switch(d=r,g=p,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ur(d,s,Gn,!Dr);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=np+300-_e(),10<p)){if(Ur(d,s,Gn,!Dr),Nc(d,0,!0)!==0)break e;d.timeoutHandle=dS(Ub.bind(null,d,l,hn,Cu,tp,s,Gn,Na,Hs,Dr,g,2,-0,0),p);break e}Ub(d,l,hn,Cu,tp,s,Gn,Na,Hs,Dr,g,0,-0,0)}}break}while(!0);xi(r)}function Ub(r,s,l,d,p,g,x,A,z,ee,le,he,te,ie){if(r.timeoutHandle=-1,he=s.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:xO},Pb(s),he=OO(),he!==null)){r.cancelPendingCommit=he(Vb.bind(null,r,s,g,l,d,p,x,A,z,le,1,te,ie)),Ur(r,g,x,!ee);return}Vb(r,s,g,l,d,p,x,A,z)}function GR(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var p=l[d],g=p.getSnapshot;p=p.value;try{if(!Rn(g(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ur(r,s,l,d){s&=~ep,s&=~Na,r.suspendedLanes|=s,r.pingedLanes&=~s,d&&(r.warmLanes|=s),d=r.expirationTimes;for(var p=s;0<p;){var g=31-xn(p),x=1<<g;d[g]=-1,p&=~x}l!==0&&Yv(r,l,s)}function wu(){return(tt&6)===0?(Pl(0),!1):!0}function sp(){if(Ie!==null){if(nt===0)var r=Ie.return;else r=Ie,Yi=Oa=null,Ch(r),Us=null,Sl=0,r=Ie;for(;r!==null;)gb(r.alternate,r),r=r.return;Ie=null}}function Gs(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,cO(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),sp(),ct=r,Ie=l=Gi(r.current,null),Ve=s,nt=0,An=null,Dr=!1,qs=Qo(r,s),$h=!1,Hs=Gn=ep=Na=Nr=St=0,hn=Ol=null,tp=!1,(s&8)!==0&&(s|=s&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=s;0<d;){var p=31-xn(d),g=1<<p;s|=r[p],d&=~g}return nr=s,Qc(),l}function Ib(r,s){je=null,H.H=du,s===dl||s===tu?(s=t0(),nt=3):s===Zy?(s=t0(),nt=4):nt=s===nb?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,An=s,Ie===null&&(St=1,gu(r,Bn(s,r.current)))}function zb(){var r=H.H;return H.H=du,r===null?du:r}function Bb(){var r=H.A;return H.A=FR,r}function op(){St=4,Dr||(Ve&4194048)!==Ve&&Vn.current!==null||(qs=!0),(Nr&134217727)===0&&(Na&134217727)===0||ct===null||Ur(ct,Ve,Gn,!1)}function lp(r,s,l){var d=tt;tt|=2;var p=zb(),g=Bb();(ct!==r||Ve!==s)&&(Cu=null,Gs(r,s)),s=!1;var x=St;e:do try{if(nt!==0&&Ie!==null){var A=Ie,z=An;switch(nt){case 8:sp(),x=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(s=!0);var ee=nt;if(nt=0,An=null,Qs(r,A,z,ee),l&&qs){x=0;break e}break;default:ee=nt,nt=0,An=null,Qs(r,A,z,ee)}}QR(),x=St;break}catch(le){Ib(r,le)}while(!0);return s&&r.shellSuspendCounter++,Yi=Oa=null,tt=d,H.H=p,H.A=g,Ie===null&&(ct=null,Ve=0,Qc()),x}function QR(){for(;Ie!==null;)qb(Ie)}function KR(r,s){var l=tt;tt|=2;var d=zb(),p=Bb();ct!==r||Ve!==s?(Cu=null,ku=_e()+500,Gs(r,s)):qs=Qo(r,s);e:do try{if(nt!==0&&Ie!==null){s=Ie;var g=An;t:switch(nt){case 1:nt=0,An=null,Qs(r,s,g,1);break;case 2:case 9:if($y(g)){nt=0,An=null,Hb(s);break}s=function(){nt!==2&&nt!==9||ct!==r||(nt=7),xi(r)},g.then(s,s);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:$y(g)?(nt=0,An=null,Hb(s)):(nt=0,An=null,Qs(r,s,g,7));break;case 5:var x=null;switch(Ie.tag){case 26:x=Ie.memoizedState;case 5:case 27:var A=Ie;if(!x||CS(x)){nt=0,An=null;var z=A.sibling;if(z!==null)Ie=z;else{var ee=A.return;ee!==null?(Ie=ee,Eu(ee)):Ie=null}break t}}nt=0,An=null,Qs(r,s,g,5);break;case 6:nt=0,An=null,Qs(r,s,g,6);break;case 8:sp(),St=6;break e;default:throw Error(i(462))}}YR();break}catch(le){Ib(r,le)}while(!0);return Yi=Oa=null,H.H=d,H.A=p,tt=l,Ie!==null?0:(ct=null,Ve=0,Qc(),St)}function YR(){for(;Ie!==null&&!Je();)qb(Ie)}function qb(r){var s=pb(r.alternate,r,nr);r.memoizedProps=r.pendingProps,s===null?Eu(r):Ie=s}function Hb(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=lb(l,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=lb(l,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:Ch(s);default:gb(l,s),s=Ie=Fy(s,nr),s=pb(l,s,nr)}r.memoizedProps=r.pendingProps,s===null?Eu(r):Ie=s}function Qs(r,s,l,d){Yi=Oa=null,Ch(s),Us=null,Sl=0;var p=s.return;try{if(UR(r,p,s,l,Ve)){St=1,gu(r,Bn(l,r.current)),Ie=null;return}}catch(g){if(p!==null)throw Ie=p,g;St=1,gu(r,Bn(l,r.current)),Ie=null;return}s.flags&32768?(Ze||d===1?r=!0:qs||(Ve&536870912)!==0?r=!1:(Dr=r=!0,(d===2||d===9||d===3||d===6)&&(d=Vn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Fb(s,r)):Eu(s)}function Eu(r){var s=r;do{if((s.flags&32768)!==0){Fb(s,Dr);return}r=s.return;var l=zR(s.alternate,s,nr);if(l!==null){Ie=l;return}if(s=s.sibling,s!==null){Ie=s;return}Ie=s=r}while(s!==null);St===0&&(St=5)}function Fb(r,s){do{var l=BR(r.alternate,r);if(l!==null){l.flags&=32767,Ie=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){Ie=r;return}Ie=r=l}while(r!==null);St=6,Ie=null}function Vb(r,s,l,d,p,g,x,A,z){r.cancelPendingCommit=null;do xu();while(Gt!==0);if((tt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Zf,xx(r,l,g,x,A,z),r===ct&&(Ie=ct=null,Ve=0),Fs=s,jr=r,Vs=l,ip=g,rp=p,Nb=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,ZR(It,function(){return Jb(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=H.T,H.T=null,p=w.p,w.p=2,x=tt,tt|=4;try{qR(r,s,l)}finally{tt=x,w.p=p,H.T=d}}Gt=1,Gb(),Qb(),Kb()}}function Gb(){if(Gt===1){Gt=0;var r=jr,s=Fs,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var d=w.p;w.p=2;var p=tt;tt|=4;try{Rb(s,r);var g=Sp,x=Dy(r.containerInfo),A=g.focusedElem,z=g.selectionRange;if(x!==A&&A&&A.ownerDocument&&My(A.ownerDocument.documentElement,A)){if(z!==null&&Kf(A)){var ee=z.start,le=z.end;if(le===void 0&&(le=ee),"selectionStart"in A)A.selectionStart=ee,A.selectionEnd=Math.min(le,A.value.length);else{var he=A.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Pe=A.textContent.length,xe=Math.min(z.start,Pe),at=z.end===void 0?xe:Math.min(z.end,Pe);!ie.extend&&xe>at&&(x=at,at=xe,xe=x);var X=Ay(A,xe),Q=Ay(A,at);if(X&&Q&&(ie.rangeCount!==1||ie.anchorNode!==X.node||ie.anchorOffset!==X.offset||ie.focusNode!==Q.node||ie.focusOffset!==Q.offset)){var Z=he.createRange();Z.setStart(X.node,X.offset),ie.removeAllRanges(),xe>at?(ie.addRange(Z),ie.extend(Q.node,Q.offset)):(Z.setEnd(Q.node,Q.offset),ie.addRange(Z))}}}}for(he=[],ie=A;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<he.length;A++){var de=he[A];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Iu=!!bp,Sp=bp=null}finally{tt=p,w.p=d,H.T=l}}r.current=s,Gt=2}}function Qb(){if(Gt===2){Gt=0;var r=jr,s=Fs,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var d=w.p;w.p=2;var p=tt;tt|=4;try{Cb(r,s.alternate,s)}finally{tt=p,w.p=d,H.T=l}}Gt=3}}function Kb(){if(Gt===4||Gt===3){Gt=0,Et();var r=jr,s=Fs,l=Vs,d=Nb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,Fs=jr=null,Yb(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Lr=null),xf(l),s=s.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(va,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=H.T,p=w.p,w.p=2,H.T=null;try{for(var g=r.onRecoverableError,x=0;x<d.length;x++){var A=d[x];g(A.value,{componentStack:A.stack})}}finally{H.T=s,w.p=p}}(Vs&3)!==0&&xu(),xi(r),p=r.pendingLanes,(l&4194090)!==0&&(p&42)!==0?r===ap?_l++:(_l=0,ap=r):_l=0,Pl(0)}}function Yb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,cl(s)))}function xu(r){return Gb(),Qb(),Kb(),Jb()}function Jb(){if(Gt!==5)return!1;var r=jr,s=ip;ip=0;var l=xf(Vs),d=H.T,p=w.p;try{w.p=32>l?32:l,H.T=null,l=rp,rp=null;var g=jr,x=Vs;if(Gt=0,Fs=jr=null,Vs=0,(tt&6)!==0)throw Error(i(331));var A=tt;if(tt|=4,Mb(g.current),_b(g,g.current,x,l),tt=A,Pl(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(va,g)}catch{}return!0}finally{w.p=p,H.T=d,Yb(r,s)}}function Xb(r,s,l){s=Bn(l,s),s=Uh(r.stateNode,s,2),r=xr(r,s,2),r!==null&&(Ko(r,2),xi(r))}function ot(r,s,l){if(r.tag===3)Xb(r,r,l);else for(;s!==null;){if(s.tag===3){Xb(s,r,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Lr===null||!Lr.has(d))){r=Bn(l,r),l=eb(2),d=xr(s,l,2),d!==null&&(tb(l,d,s,r),Ko(d,2),xi(d));break}}s=s.return}}function cp(r,s,l){var d=r.pingCache;if(d===null){d=r.pingCache=new VR;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(l)||($h=!0,p.add(l),r=JR.bind(null,r,s,l),s.then(r,r))}function JR(r,s,l){var d=r.pingCache;d!==null&&d.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ct===r&&(Ve&l)===l&&(St===4||St===3&&(Ve&62914560)===Ve&&300>_e()-np?(tt&2)===0&&Gs(r,0):ep|=l,Hs===Ve&&(Hs=0)),xi(r)}function Wb(r,s){s===0&&(s=Kv()),r=Rs(r,s),r!==null&&(Ko(r,s),xi(r))}function XR(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Wb(r,l)}function WR(r,s){var l=0;switch(r.tag){case 13:var d=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),Wb(r,l)}function ZR(r,s){return qe(r,s)}var Ru=null,Ks=null,up=!1,Ou=!1,dp=!1,La=0;function xi(r){r!==Ks&&r.next===null&&(Ks===null?Ru=Ks=r:Ks=Ks.next=r),Ou=!0,up||(up=!0,eO())}function Pl(r,s){if(!dp&&Ou){dp=!0;do for(var l=!1,d=Ru;d!==null;){if(r!==0){var p=d.pendingLanes;if(p===0)var g=0;else{var x=d.suspendedLanes,A=d.pingedLanes;g=(1<<31-xn(42|r)+1)-1,g&=p&~(x&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,tS(d,g))}else g=Ve,g=Nc(d,d===ct?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||Qo(d,g)||(l=!0,tS(d,g));d=d.next}while(l);dp=!1}}function $R(){Zb()}function Zb(){Ou=up=!1;var r=0;La!==0&&(lO()&&(r=La),La=0);for(var s=_e(),l=null,d=Ru;d!==null;){var p=d.next,g=$b(d,s);g===0?(d.next=null,l===null?Ru=p:l.next=p,p===null&&(Ks=l)):(l=d,(r!==0||(g&3)!==0)&&(Ou=!0)),d=p}Pl(r)}function $b(r,s){for(var l=r.suspendedLanes,d=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var x=31-xn(g),A=1<<x,z=p[x];z===-1?((A&l)===0||(A&d)!==0)&&(p[x]=Ex(A,s)):z<=s&&(r.expiredLanes|=A),g&=~A}if(s=ct,l=Ve,l=Nc(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===s&&(nt===2||nt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Ne(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Qo(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(d!==null&&Ne(d),xf(l)){case 2:case 8:l=Pt;break;case 32:l=It;break;case 268435456:l=ma;break;default:l=It}return d=eS.bind(null,r),l=qe(l,d),r.callbackPriority=s,r.callbackNode=l,s}return d!==null&&d!==null&&Ne(d),r.callbackPriority=2,r.callbackNode=null,2}function eS(r,s){if(Gt!==0&&Gt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(xu()&&r.callbackNode!==l)return null;var d=Ve;return d=Nc(r,r===ct?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(jb(r,d,s),$b(r,_e()),r.callbackNode!=null&&r.callbackNode===l?eS.bind(null,r):null)}function tS(r,s){if(xu())return null;jb(r,s,!0)}function eO(){uO(function(){(tt&6)!==0?qe(xt,$R):Zb()})}function fp(){return La===0&&(La=Qv()),La}function nS(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:zc(""+r)}function iS(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function tO(r,s,l,d,p){if(s==="submit"&&l&&l.stateNode===p){var g=nS((p[cn]||null).action),x=d.submitter;x&&(s=(s=x[cn]||null)?nS(s.formAction):x.getAttribute("formAction"),s!==null&&(g=s,x=null));var A=new Fc("action","action",null,d,p);r.push({event:A,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(La!==0){var z=x?iS(p,x):new FormData(p);Mh(l,{pending:!0,data:z,method:p.method,action:g},null,z)}}else typeof g=="function"&&(A.preventDefault(),z=x?iS(p,x):new FormData(p),Mh(l,{pending:!0,data:z,method:p.method,action:g},g,z))},currentTarget:p}]})}}for(var hp=0;hp<Wf.length;hp++){var pp=Wf[hp],nO=pp.toLowerCase(),iO=pp[0].toUpperCase()+pp.slice(1);ei(nO,"on"+iO)}ei(jy,"onAnimationEnd"),ei(Uy,"onAnimationIteration"),ei(Iy,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(SR,"onTransitionRun"),ei(TR,"onTransitionStart"),ei(kR,"onTransitionCancel"),ei(zy,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function rS(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],p=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var x=d.length-1;0<=x;x--){var A=d[x],z=A.instance,ee=A.currentTarget;if(A=A.listener,z!==g&&p.isPropagationStopped())break e;g=A,p.currentTarget=ee;try{g(p)}catch(le){mu(le)}p.currentTarget=null,g=z}else for(x=0;x<d.length;x++){if(A=d[x],z=A.instance,ee=A.currentTarget,A=A.listener,z!==g&&p.isPropagationStopped())break e;g=A,p.currentTarget=ee;try{g(p)}catch(le){mu(le)}p.currentTarget=null,g=z}}}}function ze(r,s){var l=s[Rf];l===void 0&&(l=s[Rf]=new Set);var d=r+"__bubble";l.has(d)||(aS(s,r,2,!1),l.add(d))}function mp(r,s,l){var d=0;s&&(d|=4),aS(l,r,d,s)}var _u="_reactListening"+Math.random().toString(36).slice(2);function gp(r){if(!r[_u]){r[_u]=!0,Zv.forEach(function(l){l!=="selectionchange"&&(rO.has(l)||mp(l,!1,r),mp(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[_u]||(s[_u]=!0,mp("selectionchange",!1,s))}}function aS(r,s,l,d){switch(_S(s)){case 2:var p=AO;break;case 8:p=MO;break;default:p=Pp}l=p.bind(null,s,l,r),p=void 0,!If||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function vp(r,s,l,d,p){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var A=d.stateNode.containerInfo;if(A===p)break;if(x===4)for(x=d.return;x!==null;){var z=x.tag;if((z===3||z===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;A!==null;){if(x=ps(A),x===null)return;if(z=x.tag,z===5||z===6||z===26||z===27){d=g=x;continue e}A=A.parentNode}}d=d.return}fy(function(){var ee=g,le=jf(l),he=[];e:{var te=By.get(r);if(te!==void 0){var ie=Fc,Pe=r;switch(r){case"keypress":if(qc(l)===0)break e;case"keydown":case"keyup":ie=Zx;break;case"focusin":Pe="focus",ie=Hf;break;case"focusout":Pe="blur",ie=Hf;break;case"beforeblur":case"afterblur":ie=Hf;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=my;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=tR;break;case jy:case Uy:case Iy:ie=Fx;break;case zy:ie=iR;break;case"scroll":case"scrollend":ie=Ix;break;case"wheel":ie=aR;break;case"copy":case"cut":case"paste":ie=Gx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=vy;break;case"toggle":case"beforetoggle":ie=oR}var xe=(s&4)!==0,at=!xe&&(r==="scroll"||r==="scrollend"),X=xe?te!==null?te+"Capture":null:te;xe=[];for(var Q=ee,Z;Q!==null;){var de=Q;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||X===null||(de=Xo(Q,X),de!=null&&xe.push(Ml(Q,de,Z))),at)break;Q=Q.return}0<xe.length&&(te=new ie(te,Pe,null,l,le),he.push({event:te,listeners:xe}))}}if((s&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",te&&l!==Lf&&(Pe=l.relatedTarget||l.fromElement)&&(ps(Pe)||Pe[hs]))break e;if((ie||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Pe=l.relatedTarget||l.toElement,ie=ee,Pe=Pe?ps(Pe):null,Pe!==null&&(at=o(Pe),xe=Pe.tag,Pe!==at||xe!==5&&xe!==27&&xe!==6)&&(Pe=null)):(ie=null,Pe=ee),ie!==Pe)){if(xe=my,de="onMouseLeave",X="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&(xe=vy,de="onPointerLeave",X="onPointerEnter",Q="pointer"),at=ie==null?te:Jo(ie),Z=Pe==null?te:Jo(Pe),te=new xe(de,Q+"leave",ie,l,le),te.target=at,te.relatedTarget=Z,de=null,ps(le)===ee&&(xe=new xe(X,Q+"enter",Pe,l,le),xe.target=Z,xe.relatedTarget=at,de=xe),at=de,ie&&Pe)t:{for(xe=ie,X=Pe,Q=0,Z=xe;Z;Z=Ys(Z))Q++;for(Z=0,de=X;de;de=Ys(de))Z++;for(;0<Q-Z;)xe=Ys(xe),Q--;for(;0<Z-Q;)X=Ys(X),Z--;for(;Q--;){if(xe===X||X!==null&&xe===X.alternate)break t;xe=Ys(xe),X=Ys(X)}xe=null}else xe=null;ie!==null&&sS(he,te,ie,xe,!1),Pe!==null&&at!==null&&sS(he,at,Pe,xe,!0)}}e:{if(te=ee?Jo(ee):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var Ce=Ey;else if(Cy(te))if(xy)Ce=vR;else{Ce=mR;var Ue=pR}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Nf(ee.elementType)&&(Ce=Ey):Ce=gR;if(Ce&&(Ce=Ce(r,ee))){wy(he,Ce,l,le);break e}Ue&&Ue(r,te,ee),r==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Df(te,"number",te.value)}switch(Ue=ee?Jo(ee):window,r){case"focusin":(Cy(Ue)||Ue.contentEditable==="true")&&(ws=Ue,Yf=ee,rl=null);break;case"focusout":rl=Yf=ws=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,Ny(he,l,le);break;case"selectionchange":if(bR)break;case"keydown":case"keyup":Ny(he,l,le)}var we;if(Vf)e:{switch(r){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Cs?Ty(r,l)&&(Oe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(yy&&l.locale!=="ko"&&(Cs||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Cs&&(we=hy()):(kr=le,zf="value"in kr?kr.value:kr.textContent,Cs=!0)),Ue=Pu(ee,Oe),0<Ue.length&&(Oe=new gy(Oe,r,null,l,le),he.push({event:Oe,listeners:Ue}),we?Oe.data=we:(we=ky(l),we!==null&&(Oe.data=we)))),(we=cR?uR(r,l):dR(r,l))&&(Oe=Pu(ee,"onBeforeInput"),0<Oe.length&&(Ue=new gy("onBeforeInput","beforeinput",null,l,le),he.push({event:Ue,listeners:Oe}),Ue.data=we)),tO(he,r,ee,l,le)}rS(he,s)})}function Ml(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Pu(r,s){for(var l=s+"Capture",d=[];r!==null;){var p=r,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Xo(r,l),p!=null&&d.unshift(Ml(r,p,g)),p=Xo(r,s),p!=null&&d.push(Ml(r,p,g))),r.tag===3)return d;r=r.return}return[]}function Ys(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function sS(r,s,l,d,p){for(var g=s._reactName,x=[];l!==null&&l!==d;){var A=l,z=A.alternate,ee=A.stateNode;if(A=A.tag,z!==null&&z===d)break;A!==5&&A!==26&&A!==27||ee===null||(z=ee,p?(ee=Xo(l,g),ee!=null&&x.unshift(Ml(l,ee,z))):p||(ee=Xo(l,g),ee!=null&&x.push(Ml(l,ee,z)))),l=l.return}x.length!==0&&r.push({event:s,listeners:x})}var aO=/\r\n?/g,sO=/\u0000|\uFFFD/g;function oS(r){return(typeof r=="string"?r:""+r).replace(aO,`
`).replace(sO,"")}function lS(r,s){return s=oS(s),oS(r)===s}function Au(){}function rt(r,s,l,d,p,g){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Ss(r,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Ss(r,""+d);break;case"className":jc(r,"class",d);break;case"tabIndex":jc(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":jc(r,l,d);break;case"style":uy(r,d,g);break;case"data":if(s!=="object"){jc(r,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=zc(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&rt(r,s,"name",p.name,p,null),rt(r,s,"formEncType",p.formEncType,p,null),rt(r,s,"formMethod",p.formMethod,p,null),rt(r,s,"formTarget",p.formTarget,p,null)):(rt(r,s,"encType",p.encType,p,null),rt(r,s,"method",p.method,p,null),rt(r,s,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=zc(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=Au);break;case"onScroll":d!=null&&ze("scroll",r);break;case"onScrollEnd":d!=null&&ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=zc(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":ze("beforetoggle",r),ze("toggle",r),Lc(r,"popover",d);break;case"xlinkActuate":Fi(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Fi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Fi(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Fi(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Fi(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Fi(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Fi(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Fi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Fi(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Lc(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=jx.get(l)||l,Lc(r,l,d))}}function yp(r,s,l,d,p,g){switch(l){case"style":uy(r,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof d=="string"?Ss(r,d):(typeof d=="number"||typeof d=="bigint")&&Ss(r,""+d);break;case"onScroll":d!=null&&ze("scroll",r);break;case"onScrollEnd":d!=null&&ze("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Au);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$v.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),g=r[cn]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(s,g,p),typeof d=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,d,p);break e}l in r?r[l]=d:d===!0?r.setAttribute(l,""):Lc(r,l,d)}}}function Qt(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",r),ze("load",r);var d=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var x=l[g];if(x!=null)switch(g){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,g,x,l,null)}}p&&rt(r,s,"srcSet",l.srcSet,l,null),d&&rt(r,s,"src",l.src,l,null);return;case"input":ze("invalid",r);var A=g=x=p=null,z=null,ee=null;for(d in l)if(l.hasOwnProperty(d)){var le=l[d];if(le!=null)switch(d){case"name":p=le;break;case"type":x=le;break;case"checked":z=le;break;case"defaultChecked":ee=le;break;case"value":g=le;break;case"defaultValue":A=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,s));break;default:rt(r,s,d,le,l,null)}}sy(r,g,A,z,ee,x,p,!1),Uc(r);return;case"select":ze("invalid",r),d=x=g=null;for(p in l)if(l.hasOwnProperty(p)&&(A=l[p],A!=null))switch(p){case"value":g=A;break;case"defaultValue":x=A;break;case"multiple":d=A;default:rt(r,s,p,A,l,null)}s=g,l=x,r.multiple=!!d,s!=null?bs(r,!!d,s,!1):l!=null&&bs(r,!!d,l,!0);return;case"textarea":ze("invalid",r),g=p=d=null;for(x in l)if(l.hasOwnProperty(x)&&(A=l[x],A!=null))switch(x){case"value":d=A;break;case"defaultValue":p=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:rt(r,s,x,A,l,null)}ly(r,d,p,g),Uc(r);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:rt(r,s,z,d,l,null)}return;case"dialog":ze("beforetoggle",r),ze("toggle",r),ze("cancel",r),ze("close",r);break;case"iframe":case"object":ze("load",r);break;case"video":case"audio":for(d=0;d<Al.length;d++)ze(Al[d],r);break;case"image":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"embed":case"source":case"link":ze("error",r),ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(d=l[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,ee,d,l,null)}return;default:if(Nf(s)){for(le in l)l.hasOwnProperty(le)&&(d=l[le],d!==void 0&&yp(r,s,le,d,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(d=l[A],d!=null&&rt(r,s,A,d,l,null))}function oO(r,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,x=null,A=null,z=null,ee=null,le=null;for(ie in l){var he=l[ie];if(l.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":z=he;default:d.hasOwnProperty(ie)||rt(r,s,ie,null,d,he)}}for(var te in d){var ie=d[te];if(he=l[te],d.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":g=ie;break;case"name":p=ie;break;case"checked":ee=ie;break;case"defaultChecked":le=ie;break;case"value":x=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:ie!==he&&rt(r,s,te,ie,d,he)}}Mf(r,x,A,z,ee,le,g,p);return;case"select":ie=x=A=te=null;for(g in l)if(z=l[g],l.hasOwnProperty(g)&&z!=null)switch(g){case"value":break;case"multiple":ie=z;default:d.hasOwnProperty(g)||rt(r,s,g,null,d,z)}for(p in d)if(g=d[p],z=l[p],d.hasOwnProperty(p)&&(g!=null||z!=null))switch(p){case"value":te=g;break;case"defaultValue":A=g;break;case"multiple":x=g;default:g!==z&&rt(r,s,p,g,d,z)}s=A,l=x,d=ie,te!=null?bs(r,!!l,te,!1):!!d!=!!l&&(s!=null?bs(r,!!l,s,!0):bs(r,!!l,l?[]:"",!1));return;case"textarea":ie=te=null;for(A in l)if(p=l[A],l.hasOwnProperty(A)&&p!=null&&!d.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:rt(r,s,A,null,d,p)}for(x in d)if(p=d[x],g=l[x],d.hasOwnProperty(x)&&(p!=null||g!=null))switch(x){case"value":te=p;break;case"defaultValue":ie=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==g&&rt(r,s,x,p,d,g)}oy(r,te,ie);return;case"option":for(var Pe in l)if(te=l[Pe],l.hasOwnProperty(Pe)&&te!=null&&!d.hasOwnProperty(Pe))switch(Pe){case"selected":r.selected=!1;break;default:rt(r,s,Pe,null,d,te)}for(z in d)if(te=d[z],ie=l[z],d.hasOwnProperty(z)&&te!==ie&&(te!=null||ie!=null))switch(z){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:rt(r,s,z,te,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in l)te=l[xe],l.hasOwnProperty(xe)&&te!=null&&!d.hasOwnProperty(xe)&&rt(r,s,xe,null,d,te);for(ee in d)if(te=d[ee],ie=l[ee],d.hasOwnProperty(ee)&&te!==ie&&(te!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:rt(r,s,ee,te,d,ie)}return;default:if(Nf(s)){for(var at in l)te=l[at],l.hasOwnProperty(at)&&te!==void 0&&!d.hasOwnProperty(at)&&yp(r,s,at,void 0,d,te);for(le in d)te=d[le],ie=l[le],!d.hasOwnProperty(le)||te===ie||te===void 0&&ie===void 0||yp(r,s,le,te,d,ie);return}}for(var X in l)te=l[X],l.hasOwnProperty(X)&&te!=null&&!d.hasOwnProperty(X)&&rt(r,s,X,null,d,te);for(he in d)te=d[he],ie=l[he],!d.hasOwnProperty(he)||te===ie||te==null&&ie==null||rt(r,s,he,te,d,ie)}var bp=null,Sp=null;function Mu(r){return r.nodeType===9?r:r.ownerDocument}function cS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uS(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Tp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kp=null;function lO(){var r=window.event;return r&&r.type==="popstate"?r===kp?!1:(kp=r,!0):(kp=null,!1)}var dS=typeof setTimeout=="function"?setTimeout:void 0,cO=typeof clearTimeout=="function"?clearTimeout:void 0,fS=typeof Promise=="function"?Promise:void 0,uO=typeof queueMicrotask=="function"?queueMicrotask:typeof fS<"u"?function(r){return fS.resolve(null).then(r).catch(dO)}:dS;function dO(r){setTimeout(function(){throw r})}function Ir(r){return r==="head"}function hS(r,s){var l=s,d=0,p=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<d&&8>d){l=d;var x=r.ownerDocument;if(l&1&&Dl(x.documentElement),l&2&&Dl(x.body),l&4)for(l=x.head,Dl(l),x=l.firstChild;x;){var A=x.nextSibling,z=x.nodeName;x[Yo]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=A}}if(p===0){r.removeChild(g),ql(s);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:d=l.charCodeAt(0)-48;else d=0;l=g}while(l);ql(s)}function Cp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Cp(l),Of(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function fO(r,s,l,d){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Yo])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=ni(r.nextSibling),r===null)break}return null}function hO(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=ni(r.nextSibling),r===null))return null;return r}function wp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function pO(r,s){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Ep=null;function pS(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function mS(r,s,l){switch(s=Mu(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Dl(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Of(r)}var Qn=new Map,gS=new Set;function Du(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ir=w.d;w.d={f:mO,r:gO,D:vO,C:yO,L:bO,m:SO,X:kO,S:TO,M:CO};function mO(){var r=ir.f(),s=wu();return r||s}function gO(r){var s=ms(r);s!==null&&s.tag===5&&s.type==="form"?j0(s):ir.r(r)}var Js=typeof document>"u"?null:document;function vS(r,s,l){var d=Js;if(d&&typeof s=="string"&&s){var p=zn(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),gS.has(p)||(gS.add(p),r={rel:r,crossOrigin:l,href:s},d.querySelector(p)===null&&(s=d.createElement("link"),Qt(s,"link",r),zt(s),d.head.appendChild(s)))}}function vO(r){ir.D(r),vS("dns-prefetch",r,null)}function yO(r,s){ir.C(r,s),vS("preconnect",r,s)}function bO(r,s,l){ir.L(r,s,l);var d=Js;if(d&&r&&s){var p='link[rel="preload"][as="'+zn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+zn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+zn(l.imageSizes)+'"]')):p+='[href="'+zn(r)+'"]';var g=p;switch(s){case"style":g=Xs(r);break;case"script":g=Ws(r)}Qn.has(g)||(r=m({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Qn.set(g,r),d.querySelector(p)!==null||s==="style"&&d.querySelector(Nl(g))||s==="script"&&d.querySelector(Ll(g))||(s=d.createElement("link"),Qt(s,"link",r),zt(s),d.head.appendChild(s)))}}function SO(r,s){ir.m(r,s);var l=Js;if(l&&r){var d=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+zn(d)+'"][href="'+zn(r)+'"]',g=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ws(r)}if(!Qn.has(g)&&(r=m({rel:"modulepreload",href:r},s),Qn.set(g,r),l.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ll(g)))return}d=l.createElement("link"),Qt(d,"link",r),zt(d),l.head.appendChild(d)}}}function TO(r,s,l){ir.S(r,s,l);var d=Js;if(d&&r){var p=gs(d).hoistableStyles,g=Xs(r);s=s||"default";var x=p.get(g);if(!x){var A={loading:0,preload:null};if(x=d.querySelector(Nl(g)))A.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Qn.get(g))&&xp(r,l);var z=x=d.createElement("link");zt(z),Qt(z,"link",r),z._p=new Promise(function(ee,le){z.onload=ee,z.onerror=le}),z.addEventListener("load",function(){A.loading|=1}),z.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Nu(x,s,d)}x={type:"stylesheet",instance:x,count:1,state:A},p.set(g,x)}}}function kO(r,s){ir.X(r,s);var l=Js;if(l&&r){var d=gs(l).hoistableScripts,p=Ws(r),g=d.get(p);g||(g=l.querySelector(Ll(p)),g||(r=m({src:r,async:!0},s),(s=Qn.get(p))&&Rp(r,s),g=l.createElement("script"),zt(g),Qt(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function CO(r,s){ir.M(r,s);var l=Js;if(l&&r){var d=gs(l).hoistableScripts,p=Ws(r),g=d.get(p);g||(g=l.querySelector(Ll(p)),g||(r=m({src:r,async:!0,type:"module"},s),(s=Qn.get(p))&&Rp(r,s),g=l.createElement("script"),zt(g),Qt(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function yS(r,s,l,d){var p=(p=oe.current)?Du(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Xs(l.href),l=gs(p).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Xs(l.href);var g=gs(p).hoistableStyles,x=g.get(r);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,x),(g=p.querySelector(Nl(r)))&&!g._p&&(x.instance=g,x.state.loading=5),Qn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(r,l),g||wO(p,r,l,x.state))),s&&d===null)throw Error(i(528,""));return x}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ws(l),l=gs(p).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Xs(r){return'href="'+zn(r)+'"'}function Nl(r){return'link[rel="stylesheet"]['+r+"]"}function bS(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function wO(r,s,l,d){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=r.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Qt(s,"link",l),zt(s),r.head.appendChild(s))}function Ws(r){return'[src="'+zn(r)+'"]'}function Ll(r){return"script[async]"+r}function SS(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=r.querySelector('style[data-href~="'+zn(l.href)+'"]');if(d)return s.instance=d,zt(d),d;var p=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),zt(d),Qt(d,"style",p),Nu(d,l.precedence,r),s.instance=d;case"stylesheet":p=Xs(l.href);var g=r.querySelector(Nl(p));if(g)return s.state.loading|=4,s.instance=g,zt(g),g;d=bS(l),(p=Qn.get(p))&&xp(d,p),g=(r.ownerDocument||r).createElement("link"),zt(g);var x=g;return x._p=new Promise(function(A,z){x.onload=A,x.onerror=z}),Qt(g,"link",d),s.state.loading|=4,Nu(g,l.precedence,r),s.instance=g;case"script":return g=Ws(l.src),(p=r.querySelector(Ll(g)))?(s.instance=p,zt(p),p):(d=l,(p=Qn.get(g))&&(d=m({},l),Rp(d,p)),r=r.ownerDocument||r,p=r.createElement("script"),zt(p),Qt(p,"link",d),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Nu(d,l.precedence,r));return s.instance}function Nu(r,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,g=p,x=0;x<d.length;x++){var A=d[x];if(A.dataset.precedence===s)g=A;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function xp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Rp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Lu=null;function TS(r,s,l){if(Lu===null){var d=new Map,p=Lu=new Map;p.set(l,d)}else p=Lu,d=p.get(l),d||(d=new Map,p.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var g=l[p];if(!(g[Yo]||g[Xt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(s)||"";x=r+x;var A=d.get(x);A?A.push(g):d.set(x,[g])}}return d}function kS(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function EO(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function CS(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var jl=null;function xO(){}function RO(r,s,l){if(jl===null)throw Error(i(475));var d=jl;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Xs(l.href),g=r.querySelector(Nl(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=ju.bind(d),r.then(d,d)),s.state.loading|=4,s.instance=g,zt(g);return}g=r.ownerDocument||r,l=bS(l),(p=Qn.get(p))&&xp(l,p),g=g.createElement("link"),zt(g);var x=g;x._p=new Promise(function(A,z){x.onload=A,x.onerror=z}),Qt(g,"link",l),s.instance=g}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=ju.bind(d),r.addEventListener("load",s),r.addEventListener("error",s))}}function OO(){if(jl===null)throw Error(i(475));var r=jl;return r.stylesheets&&r.count===0&&Op(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&Op(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function ju(){if(this.count--,this.count===0){if(this.stylesheets)Op(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Uu=null;function Op(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Uu=new Map,s.forEach(_O,r),Uu=null,ju.call(r))}function _O(r,s){if(!(s.state.loading&4)){var l=Uu.get(r);if(l)var d=l.get(null);else{l=new Map,Uu.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var x=p[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),d=x)}d&&l.set(null,d)}p=s.instance,x=p.getAttribute("data-precedence"),g=l.get(x)||d,g===d&&l.set(null,p),l.set(x,p),this.count++,d=ju.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var Ul={$$typeof:I,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function PO(r,s,l,d,p,g,x,A){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wf(0),this.hiddenUpdates=wf(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function wS(r,s,l,d,p,g,x,A,z,ee,le,he){return r=new PO(r,s,l,x,A,z,ee,he),s=1,g===!0&&(s|=24),g=On(3,null,null,s),r.current=g,g.stateNode=r,s=ch(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:d,isDehydrated:l,cache:s},hh(g),r}function ES(r){return r?(r=Os,r):Os}function xS(r,s,l,d,p,g){p=ES(p),d.context===null?d.context=p:d.pendingContext=p,d=Er(s),d.payload={element:l},g=g===void 0?null:g,g!==null&&(d.callback=g),l=xr(r,d,s),l!==null&&(Dn(l,r,s),hl(l,r,s))}function RS(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function _p(r,s){RS(r,s),(r=r.alternate)&&RS(r,s)}function OS(r){if(r.tag===13){var s=Rs(r,67108864);s!==null&&Dn(s,r,67108864),_p(r,67108864)}}var Iu=!0;function AO(r,s,l,d){var p=H.T;H.T=null;var g=w.p;try{w.p=2,Pp(r,s,l,d)}finally{w.p=g,H.T=p}}function MO(r,s,l,d){var p=H.T;H.T=null;var g=w.p;try{w.p=8,Pp(r,s,l,d)}finally{w.p=g,H.T=p}}function Pp(r,s,l,d){if(Iu){var p=Ap(d);if(p===null)vp(r,s,d,zu,l),PS(r,d);else if(NO(p,r,s,l,d))d.stopPropagation();else if(PS(r,d),s&4&&-1<DO.indexOf(r)){for(;p!==null;){var g=ms(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=ya(g.pendingLanes);if(x!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var z=1<<31-xn(x);A.entanglements[1]|=z,x&=~z}xi(g),(tt&6)===0&&(ku=_e()+500,Pl(0))}}break;case 13:A=Rs(g,2),A!==null&&Dn(A,g,2),wu(),_p(g,2)}if(g=Ap(d),g===null&&vp(r,s,d,zu,l),g===p)break;p=g}p!==null&&d.stopPropagation()}else vp(r,s,d,null,l)}}function Ap(r){return r=jf(r),Mp(r)}var zu=null;function Mp(r){if(zu=null,r=ps(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=c(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return zu=r,null}function _S(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case xt:return 2;case Pt:return 8;case It:case Hi:return 32;case ma:return 268435456;default:return 32}default:return 32}}var Dp=!1,zr=null,Br=null,qr=null,Il=new Map,zl=new Map,Hr=[],DO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PS(r,s){switch(r){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Il.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(s.pointerId)}}function Bl(r,s,l,d,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},s!==null&&(s=ms(s),s!==null&&OS(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function NO(r,s,l,d,p){switch(s){case"focusin":return zr=Bl(zr,r,s,l,d,p),!0;case"dragenter":return Br=Bl(Br,r,s,l,d,p),!0;case"mouseover":return qr=Bl(qr,r,s,l,d,p),!0;case"pointerover":var g=p.pointerId;return Il.set(g,Bl(Il.get(g)||null,r,s,l,d,p)),!0;case"gotpointercapture":return g=p.pointerId,zl.set(g,Bl(zl.get(g)||null,r,s,l,d,p)),!0}return!1}function AS(r){var s=ps(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){r.blockedOn=s,Rx(r.priority,function(){if(l.tag===13){var d=Mn();d=Ef(d);var p=Rs(l,d);p!==null&&Dn(p,l,d),_p(l,d)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Bu(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Ap(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Lf=d,l.target.dispatchEvent(d),Lf=null}else return s=ms(l),s!==null&&OS(s),r.blockedOn=l,!1;s.shift()}return!0}function MS(r,s,l){Bu(r)&&l.delete(s)}function LO(){Dp=!1,zr!==null&&Bu(zr)&&(zr=null),Br!==null&&Bu(Br)&&(Br=null),qr!==null&&Bu(qr)&&(qr=null),Il.forEach(MS),zl.forEach(MS)}function qu(r,s){r.blockedOn===s&&(r.blockedOn=null,Dp||(Dp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,LO)))}var Hu=null;function DS(r){Hu!==r&&(Hu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hu===r&&(Hu=null);for(var s=0;s<r.length;s+=3){var l=r[s],d=r[s+1],p=r[s+2];if(typeof d!="function"){if(Mp(d||l)===null)continue;break}var g=ms(l);g!==null&&(r.splice(s,3),s-=3,Mh(g,{pending:!0,data:p,method:l.method,action:d},d,p))}}))}function ql(r){function s(z){return qu(z,r)}zr!==null&&qu(zr,r),Br!==null&&qu(Br,r),qr!==null&&qu(qr,r),Il.forEach(s),zl.forEach(s);for(var l=0;l<Hr.length;l++){var d=Hr[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Hr.length&&(l=Hr[0],l.blockedOn===null);)AS(l),l.blockedOn===null&&Hr.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var p=l[d],g=l[d+1],x=p[cn]||null;if(typeof g=="function")x||DS(l);else if(x){var A=null;if(g&&g.hasAttribute("formAction")){if(p=g,x=g[cn]||null)A=x.formAction;else if(Mp(p)!==null)continue}else A=x.action;typeof A=="function"?l[d+1]=A:(l.splice(d,3),d-=3),DS(l)}}}function Np(r){this._internalRoot=r}Fu.prototype.render=Np.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=Mn();xS(l,d,r,s,null,null)},Fu.prototype.unmount=Np.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;xS(r.current,2,null,r,null,null),wu(),s[hs]=null}};function Fu(r){this._internalRoot=r}Fu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xv();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Hr.length&&s!==0&&s<Hr[l].priority;l++);Hr.splice(l,0,r),l===0&&AS(r)}};var NS=e.version;if(NS!=="19.1.0")throw Error(i(527,NS,"19.1.0"));w.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var jO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{va=Vu.inject(jO),yt=Vu}catch{}}return Fl.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,d="",p=X0,g=W0,x=Z0,A=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=wS(r,1,!1,null,null,l,d,p,g,x,A,null),r[hs]=s.current,gp(r),new Np(s)},Fl.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var d=!1,p="",g=X0,x=W0,A=Z0,z=null,ee=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(z=l.unstable_transitionCallbacks),l.formState!==void 0&&(ee=l.formState)),s=wS(r,1,!0,s,l??null,d,p,g,x,A,z,ee),s.context=ES(null),l=s.current,d=Mn(),d=Ef(d),p=Er(d),p.callback=null,xr(l,p,d),l=d,s.current.lanes=l,Ko(s,l),xi(s),r[hs]=s.current,gp(r),new Fu(s)},Fl.version="19.1.0",Fl}var GS;function KO(){if(GS)return Ip.exports;GS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ip.exports=QO(),Ip.exports}var YO=KO(),Vl={},QS;function JO(){if(QS)return Vl;QS=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.parse=c,Vl.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,k){const C=new o,S=b.length;if(S<2)return C;const O=(k==null?void 0:k.decode)||m;let _=0;do{const L=b.indexOf("=",_);if(L===-1)break;const I=b.indexOf(";",_),j=I===-1?S:I;if(L>j){_=b.lastIndexOf(";",L-1)+1;continue}const E=u(b,_,L),D=f(b,L,E),U=b.slice(E,D);if(C[U]===void 0){let K=u(b,L+1,j),N=f(b,j,K);const P=O(b.slice(K,N));C[U]=P}_=j+1}while(_<S);return C}function u(b,k,C){do{const S=b.charCodeAt(k);if(S!==32&&S!==9)return k}while(++k<C);return C}function f(b,k,C){for(;k>C;){const S=b.charCodeAt(--k);if(S!==32&&S!==9)return k+1}return C}function h(b,k,C){const S=(C==null?void 0:C.encode)||encodeURIComponent;if(!t.test(b))throw new TypeError(`argument name is invalid: ${b}`);const O=S(k);if(!e.test(O))throw new TypeError(`argument val is invalid: ${k}`);let _=b+"="+O;if(!C)return _;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);_+="; Max-Age="+C.maxAge}if(C.domain){if(!n.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);_+="; Domain="+C.domain}if(C.path){if(!i.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);_+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);_+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(_+="; HttpOnly"),C.secure&&(_+="; Secure"),C.partitioned&&(_+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return _}function m(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return a.call(b)==="[object Date]"}return Vl}JO();var KS="popstate";function XO(t={}){function e(i,a){let{pathname:o,search:c,hash:u}=i.location;return Mm("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:lc(a)}return ZO(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WO(){return Math.random().toString(36).substring(2,10)}function YS(t,e){return{usr:t.state,key:t.key,idx:e}}function Mm(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:n,key:e&&e.key||i||WO()}}function lc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function ZO(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,u="POP",f=null,h=m();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function m(){return(c.state||{idx:null}).idx}function v(){u="POP";let O=m(),_=O==null?null:O-h;h=O,f&&f({action:u,location:S.location,delta:_})}function b(O,_){u="PUSH";let L=Mm(S.location,O,_);h=m()+1;let I=YS(L,h),j=S.createHref(L);try{c.pushState(I,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(j)}o&&f&&f({action:u,location:S.location,delta:1})}function k(O,_){u="REPLACE";let L=Mm(S.location,O,_);h=m();let I=YS(L,h),j=S.createHref(L);c.replaceState(I,"",j),o&&f&&f({action:u,location:S.location,delta:0})}function C(O){let _=a.location.origin!=="null"?a.location.origin:a.location.href,L=typeof O=="string"?O:lc(O);return L=L.replace(/ $/,"%20"),pt(_,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,_)}let S={get action(){return u},get location(){return t(a,c)},listen(O){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(KS,v),f=O,()=>{a.removeEventListener(KS,v),f=null}},createHref(O){return e(a,O)},createURL:C,encodeLocation(O){let _=C(O);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:b,replace:k,go(O){return c.go(O)}};return S}function xk(t,e,n="/"){return $O(t,e,n,!1)}function $O(t,e,n,i){let a=typeof e=="string"?Lo(e):e,o=fr(a.pathname||"/",n);if(o==null)return null;let c=Rk(t);e2(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=d2(o);u=c2(c[f],h,i)}return u}function Rk(t,e=[],n=[],i=""){let a=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(pt(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let h=ur([i,f.relativePath]),m=n.concat(f);o.children&&o.children.length>0&&(pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Rk(o.children,e,m,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:o2(h,o.index),routesMeta:m})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let f of Ok(o.path))a(o,c,f)}),e}function Ok(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=Ok(i.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&u.push(...c),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function e2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:l2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var t2=/^:[\w-]+$/,n2=3,i2=2,r2=1,a2=10,s2=-2,JS=t=>t==="*";function o2(t,e){let n=t.split("/"),i=n.length;return n.some(JS)&&(i+=s2),e&&(i+=i2),n.filter(a=>!JS(a)).reduce((a,o)=>a+(t2.test(o)?n2:o===""?r2:a2),i)}function l2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function c2(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",c=[];for(let u=0;u<i.length;++u){let f=i[u],h=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",v=Cd({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),b=f.route;if(!v&&h&&n&&!i[i.length-1].route.index&&(v=Cd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:ur([o,v.pathname]),pathnameBase:m2(ur([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=ur([o,v.pathnameBase]))}return c}function Cd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=u2(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((h,{paramName:m,isOptional:v},b)=>{if(m==="*"){let C=u[b]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const k=u[b];return v&&!k?h[m]=void 0:h[m]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:t}}function u2(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(i.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function d2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function fr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function f2(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Lo(t):t;return{pathname:n?n.startsWith("/")?n:h2(n,e):e,search:g2(i),hash:v2(a)}}function h2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Hp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function p2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gg(t){let e=p2(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Qg(t,e,n,i=!1){let a;typeof t=="string"?a=Lo(t):(a={...t},pt(!a.pathname||!a.pathname.includes("?"),Hp("?","pathname","search",a)),pt(!a.pathname||!a.pathname.includes("#"),Hp("#","pathname","hash",a)),pt(!a.search||!a.search.includes("#"),Hp("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=n;else{let v=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}u=v>=0?e[v]:"/"}let f=f2(a,u),h=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}var ur=t=>t.join("/").replace(/\/\/+/g,"/"),m2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function y2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var _k=["POST","PUT","PATCH","DELETE"];new Set(_k);var b2=["GET",..._k];new Set(b2);var jo=T.createContext(null);jo.displayName="DataRouter";var Wd=T.createContext(null);Wd.displayName="DataRouterState";var Pk=T.createContext({isTransitioning:!1});Pk.displayName="ViewTransition";var S2=T.createContext(new Map);S2.displayName="Fetchers";var T2=T.createContext(null);T2.displayName="Await";var vi=T.createContext(null);vi.displayName="Navigation";var kc=T.createContext(null);kc.displayName="Location";var yi=T.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var Kg=T.createContext(null);Kg.displayName="RouteError";function k2(t,{relative:e}={}){pt(Uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(vi),{hash:a,pathname:o,search:c}=Cc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:ur([n,o])),i.createHref({pathname:u,search:c,hash:a})}function Uo(){return T.useContext(kc)!=null}function Ii(){return pt(Uo(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(kc).location}var Ak="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mk(t){T.useContext(vi).static||T.useLayoutEffect(t)}function vr(){let{isDataRoute:t}=T.useContext(yi);return t?L2():C2()}function C2(){pt(Uo(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(jo),{basename:e,navigator:n}=T.useContext(vi),{matches:i}=T.useContext(yi),{pathname:a}=Ii(),o=JSON.stringify(Gg(i)),c=T.useRef(!1);return Mk(()=>{c.current=!0}),T.useCallback((f,h={})=>{if(fi(c.current,Ak),!c.current)return;if(typeof f=="number"){n.go(f);return}let m=Qg(f,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ur([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,o,a,t])}T.createContext(null);function Zd(){let{matches:t}=T.useContext(yi),e=t[t.length-1];return e?e.params:{}}function Cc(t,{relative:e}={}){let{matches:n}=T.useContext(yi),{pathname:i}=Ii(),a=JSON.stringify(Gg(n));return T.useMemo(()=>Qg(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function w2(t,e){return Dk(t,e)}function Dk(t,e,n,i){var L;pt(Uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=T.useContext(vi),{matches:c}=T.useContext(yi),u=c[c.length-1],f=u?u.params:{},h=u?u.pathname:"/",m=u?u.pathnameBase:"/",v=u&&u.route;{let I=v&&v.path||"";Nk(h,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let b=Ii(),k;if(e){let I=typeof e=="string"?Lo(e):e;pt(m==="/"||((L=I.pathname)==null?void 0:L.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${I.pathname}" was given in the \`location\` prop.`),k=I}else k=b;let C=k.pathname||"/",S=C;if(m!=="/"){let I=m.replace(/^\//,"").split("/");S="/"+C.replace(/^\//,"").split("/").slice(I.length).join("/")}let O=!o&&n&&n.matches&&n.matches.length>0?n.matches:xk(t,{pathname:S});fi(v||O!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),fi(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=_2(O&&O.map(I=>Object.assign({},I,{params:Object.assign({},f,I.params),pathname:ur([m,a.encodeLocation?a.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?m:ur([m,a.encodeLocation?a.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),c,n,i);return e&&_?T.createElement(kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},_):_}function E2(){let t=N2(),e=y2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:o},"ErrorBoundary")," or"," ",T.createElement("code",{style:o},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:a},n):null,c)}var x2=T.createElement(E2,null),R2=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(yi.Provider,{value:this.props.routeContext},T.createElement(Kg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function O2({routeContext:t,match:e,children:n}){let i=T.useContext(jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(yi.Provider,{value:t},n)}function _2(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let f=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);pt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:v}=n,b=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,h,m)=>{let v,b=!1,k=null,C=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,k=h.route.errorElement||x2,c&&(u<0&&m===0?(Nk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):u===m&&(b=!0,C=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,m+1)),O=()=>{let _;return v?_=k:b?_=C:h.route.Component?_=T.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=f,T.createElement(O2,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?T.createElement(R2,{location:n.location,revalidation:n.revalidation,component:k,error:v,children:O(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):O()},null)}function Yg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P2(t){let e=T.useContext(jo);return pt(e,Yg(t)),e}function A2(t){let e=T.useContext(Wd);return pt(e,Yg(t)),e}function M2(t){let e=T.useContext(yi);return pt(e,Yg(t)),e}function Jg(t){let e=M2(t),n=e.matches[e.matches.length-1];return pt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function D2(){return Jg("useRouteId")}function N2(){var i;let t=T.useContext(Kg),e=A2("useRouteError"),n=Jg("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function L2(){let{router:t}=P2("useNavigate"),e=Jg("useNavigate"),n=T.useRef(!1);return Mk(()=>{n.current=!0}),T.useCallback(async(a,o={})=>{fi(n.current,Ak),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var XS={};function Nk(t,e,n){!e&&!XS[t]&&(XS[t]=!0,fi(!1,n))}T.memo(j2);function j2({routes:t,future:e,state:n}){return Dk(t,void 0,n,e)}function Lk({to:t,replace:e,state:n,relative:i}){pt(Uo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(vi);fi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=T.useContext(yi),{pathname:c}=Ii(),u=vr(),f=Qg(t,Gg(o),c,i==="path"),h=JSON.stringify(f);return T.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:i})},[u,h,i,e,n]),null}function Kt(t){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function U2({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){pt(!Uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof n=="string"&&(n=Lo(n));let{pathname:f="/",search:h="",hash:m="",state:v=null,key:b="default"}=n,k=T.useMemo(()=>{let C=fr(f,c);return C==null?null:{location:{pathname:C,search:h,hash:m,state:v,key:b},navigationType:i}},[c,f,h,m,v,b,i]);return fi(k!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:T.createElement(vi.Provider,{value:u},T.createElement(kc.Provider,{children:e,value:k}))}function I2({children:t,location:e}){return w2(Dm(t),e)}function Dm(t,e=[]){let n=[];return T.Children.forEach(t,(i,a)=>{if(!T.isValidElement(i))return;let o=[...e,a];if(i.type===T.Fragment){n.push.apply(n,Dm(i.props.children,o));return}pt(i.type===Kt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Dm(i.props.children,o)),n.push(c)}),n}var td="get",nd="application/x-www-form-urlencoded";function $d(t){return t!=null&&typeof t.tagName=="string"}function z2(t){return $d(t)&&t.tagName.toLowerCase()==="button"}function B2(t){return $d(t)&&t.tagName.toLowerCase()==="form"}function q2(t){return $d(t)&&t.tagName.toLowerCase()==="input"}function H2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function F2(t,e){return t.button===0&&(!e||e==="_self")&&!H2(t)}var Ku=null;function V2(){if(Ku===null)try{new FormData(document.createElement("form"),0),Ku=!1}catch{Ku=!0}return Ku}var G2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fp(t){return t!=null&&!G2.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nd}"`),null):t}function Q2(t,e){let n,i,a,o,c;if(B2(t)){let u=t.getAttribute("action");i=u?fr(u,e):null,n=t.getAttribute("method")||td,a=Fp(t.getAttribute("enctype"))||nd,o=new FormData(t)}else if(z2(t)||q2(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||u.getAttribute("action");if(i=f?fr(f,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||td,a=Fp(t.getAttribute("formenctype"))||Fp(u.getAttribute("enctype"))||nd,o=new FormData(u,t),!V2()){let{name:h,type:m,value:v}=t;if(m==="image"){let b=h?`${h}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else h&&o.append(h,v)}}else{if($d(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=td,i=null,a=nd,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:c}}function Xg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function K2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Y2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function J2(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await K2(o,n);return c.links?c.links():[]}return[]}));return $2(i.flat(1).filter(Y2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function WS(t,e,n,i,a,o){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,u=(f,h)=>{var m;return n[h].pathname!==f.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,h)=>c(f,h)||u(f,h)):o==="data"?e.filter((f,h)=>{var v;let m=i.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(c(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function X2(t,e,{includeHydrateFallback:n}={}){return W2(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function W2(t){return[...new Set(t)]}function Z2(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function $2(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(Z2(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}var e_=new Set([100,101,204,205]);function t_(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&fr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function jk(){let t=T.useContext(jo);return Xg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function n_(){let t=T.useContext(Wd);return Xg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Wg=T.createContext(void 0);Wg.displayName="FrameworkContext";function Uk(){let t=T.useContext(Wg);return Xg(t,"You must render this element inside a <HydratedRouter> element"),t}function i_(t,e){let n=T.useContext(Wg),[i,a]=T.useState(!1),[o,c]=T.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:m,onTouchStart:v}=e,b=T.useRef(null);T.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let S=_=>{_.forEach(L=>{c(L.isIntersecting)})},O=new IntersectionObserver(S,{threshold:.5});return b.current&&O.observe(b.current),()=>{O.disconnect()}}},[t]),T.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let k=()=>{a(!0)},C=()=>{a(!1),c(!1)};return n?t!=="intent"?[o,b,{}]:[o,b,{onFocus:Gl(u,k),onBlur:Gl(f,C),onMouseEnter:Gl(h,k),onMouseLeave:Gl(m,C),onTouchStart:Gl(v,k)}]:[!1,b,{}]}function Gl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function r_({page:t,...e}){let{router:n}=jk(),i=T.useMemo(()=>xk(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?T.createElement(s_,{page:t,matches:i,...e}):null}function a_(t){let{manifest:e,routeModules:n}=Uk(),[i,a]=T.useState([]);return T.useEffect(()=>{let o=!1;return J2(t,e,n).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,n]),i}function s_({page:t,matches:e,...n}){let i=Ii(),{manifest:a,routeModules:o}=Uk(),{basename:c}=jk(),{loaderData:u,matches:f}=n_(),h=T.useMemo(()=>WS(t,e,f,a,i,"data"),[t,e,f,a,i]),m=T.useMemo(()=>WS(t,e,f,a,i,"assets"),[t,e,f,a,i]),v=T.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let C=new Set,S=!1;if(e.forEach(_=>{var I;let L=a.routes[_.route.id];!L||!L.hasLoader||(!h.some(j=>j.route.id===_.route.id)&&_.route.id in u&&((I=o[_.route.id])!=null&&I.shouldRevalidate)||L.hasClientLoader?S=!0:C.add(_.route.id))}),C.size===0)return[];let O=t_(t,c);return S&&C.size>0&&O.searchParams.set("_routes",e.filter(_=>C.has(_.route.id)).map(_=>_.route.id).join(",")),[O.pathname+O.search]},[c,u,i,a,h,e,t,o]),b=T.useMemo(()=>X2(m,a),[m,a]),k=a_(m);return T.createElement(T.Fragment,null,v.map(C=>T.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),b.map(C=>T.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),k.map(({key:C,link:S})=>T.createElement("link",{key:C,...S})))}function o_(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ik=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ik&&(window.__reactRouterVersion="7.5.3")}catch{}function l_({basename:t,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=XO({window:n,v5Compat:!0}));let a=i.current,[o,c]=T.useState({action:a.action,location:a.location}),u=T.useCallback(f=>{T.startTransition(()=>c(f))},[c]);return T.useLayoutEffect(()=>a.listen(u),[a,u]),T.createElement(U2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:m,viewTransition:v,...b},k){let{basename:C}=T.useContext(vi),S=typeof h=="string"&&zk.test(h),O,_=!1;if(typeof h=="string"&&S&&(O=h,Ik))try{let N=new URL(window.location.href),P=h.startsWith("//")?new URL(N.protocol+h):new URL(h),V=fr(P.pathname,C);P.origin===N.origin&&V!=null?h=V+P.search+P.hash:_=!0}catch{fi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=k2(h,{relative:a}),[I,j,E]=i_(i,b),D=f_(h,{replace:c,state:u,target:f,preventScrollReset:m,relative:a,viewTransition:v});function U(N){e&&e(N),N.defaultPrevented||D(N)}let K=T.createElement("a",{...b,...E,href:O||L,onClick:_||o?e:U,ref:o_(k,j),target:f,"data-discover":!S&&n==="render"?"true":void 0});return I&&!S?T.createElement(T.Fragment,null,K,T.createElement(r_,{page:L})):K});yn.displayName="Link";var c_=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:u,children:f,...h},m){let v=Cc(c,{relative:h.relative}),b=Ii(),k=T.useContext(Wd),{navigator:C,basename:S}=T.useContext(vi),O=k!=null&&v_(v)&&u===!0,_=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,L=b.pathname,I=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(L=L.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&S&&(I=fr(I,S)||I);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let E=L===_||!a&&L.startsWith(_)&&L.charAt(j)==="/",D=I!=null&&(I===_||!a&&I.startsWith(_)&&I.charAt(_.length)==="/"),U={isActive:E,isPending:D,isTransitioning:O},K=E?e:void 0,N;typeof i=="function"?N=i(U):N=[i,E?"active":null,D?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(U):o;return T.createElement(yn,{...h,"aria-current":K,className:N,ref:m,style:P,to:c,viewTransition:u},typeof f=="function"?f(U):f)});c_.displayName="NavLink";var u_=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:c=td,action:u,onSubmit:f,relative:h,preventScrollReset:m,viewTransition:v,...b},k)=>{let C=m_(),S=g_(u,{relative:h}),O=c.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&zk.test(u),L=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let j=I.nativeEvent.submitter,E=(j==null?void 0:j.getAttribute("formmethod"))||c;C(j||I.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:a,state:o,relative:h,preventScrollReset:m,viewTransition:v})};return T.createElement("form",{ref:k,method:O,action:S,onSubmit:i?f:L,...b,"data-discover":!_&&t==="render"?"true":void 0})});u_.displayName="Form";function d_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bk(t){let e=T.useContext(jo);return pt(e,d_(t)),e}function f_(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:c}={}){let u=vr(),f=Ii(),h=Cc(t,{relative:o});return T.useCallback(m=>{if(F2(m,e)){m.preventDefault();let v=n!==void 0?n:lc(f)===lc(h);u(t,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[f,u,h,n,i,e,t,a,o,c])}var h_=0,p_=()=>`__${String(++h_)}__`;function m_(){let{router:t}=Bk("useSubmit"),{basename:e}=T.useContext(vi),n=D2();return T.useCallback(async(i,a={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=Q2(i,e);if(a.navigate===!1){let m=a.fetcherKey||p_();await t.fetch(m,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:h,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function g_(t,{relative:e}={}){let{basename:n}=T.useContext(vi),i=T.useContext(yi);pt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Cc(t||".",{relative:e})},c=Ii();if(t==null){o.search=c.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(m=>m==="")){u.delete("index"),f.filter(v=>v).forEach(v=>u.append("index",v));let m=u.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ur([n,o.pathname])),lc(o)}function v_(t,e={}){let n=T.useContext(Pk);pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Bk("useViewTransitionState"),a=Cc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=fr(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=fr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Cd(a.pathname,c)!=null||Cd(a.pathname,o)!=null}new TextEncoder;[...e_];const ts=({title:t,children:e,footerLink:n,footerText:i,footerLinkText:a})=>R.jsxs("div",{className:"max-w-4xl w-full mx-auto bg-gray-800 rounded-xl shadow-lg p-8",children:[t&&R.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-6 text-center",children:t}),e,i&&n&&R.jsxs("p",{className:"mt-6 text-center text-gray-400",children:[i," ",R.jsx(yn,{to:n,className:"text-blue-500 hover:underline",children:a})]})]});var qk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZS=Ya.createContext&&Ya.createContext(qk),y_=["attr","size","title"];function b_(t,e){if(t==null)return{};var n=S_(t,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function S_(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wd.apply(this,arguments)}function $S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$S(Object(n),!0).forEach(function(i){T_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function T_(t,e,n){return e=k_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k_(t){var e=C_(t,"string");return typeof e=="symbol"?e:e+""}function C_(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hk(t){return t&&t.map((e,n)=>Ya.createElement(e.tag,Ed({key:n},e.attr),Hk(e.child)))}function $n(t){return e=>Ya.createElement(w_,wd({attr:Ed({},t.attr)},e),Hk(t.child))}function w_(t){var e=n=>{var{attr:i,size:a,title:o}=t,c=b_(t,y_),u=a||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),Ya.createElement("svg",wd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,c,{className:f,style:Ed(Ed({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Ya.createElement("title",null,o),t.children)};return ZS!==void 0?Ya.createElement(ZS.Consumer,null,n=>e(n)):e(qk)}function E_(t){return $n({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function x_(t){return $n({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function R_(t){return $n({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function O_(t){return $n({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function __(t){return $n({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function P_(t){return $n({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function A_(t){return $n({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function M_(t){return $n({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"},child:[]}]})(t)}function D_(t){return $n({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"},child:[]}]})(t)}const Fk=({label:t,type:e="text",name:n,value:i,onChange:a,error:o,isPassword:c=!1,required:u=!1})=>{const[f,h]=T.useState(!1),m=c&&f?"text":e,v=e==="checkbox",b=e==="textarea",k=e==="file";return R.jsxs("div",{className:"flex flex-col space-y-1",children:[v?R.jsxs("label",{className:"inline-flex items-center space-x-2 mt-2",children:[R.jsx("input",{type:"checkbox",name:n,checked:!!i,onChange:C=>a({target:{name:n,value:C.target.checked}}),className:"form-checkbox h-5 w-5 text-purple-600"}),R.jsx("span",{className:"text-white text-sm",children:t})]}):R.jsxs(R.Fragment,{children:[R.jsx("label",{htmlFor:n,className:"text-sm text-gray-300",children:t}),R.jsxs("div",{className:"relative",children:[b?R.jsx("textarea",{id:n,name:n,value:i,onChange:a,rows:3,required:u,className:"w-full px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):R.jsx("input",{id:n,name:n,type:m,value:k?void 0:i,onChange:a,accept:k?"application/pdf":void 0,required:u,className:"w-full px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),c&&R.jsx("button",{type:"button",onClick:()=>h(C=>!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 focus:outline-none bg-gray-800",children:f?R.jsx(__,{className:"text-gray-300 bg-none"}):R.jsx(P_,{className:"text-gray-300 bg-none"})})]})]}),o&&R.jsx("span",{className:"text-red-500 text-xs",children:o})]})},Eo=()=>R.jsx("div",{className:"flex justify-center items-center",children:R.jsxs("svg",{className:"w-5 h-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[R.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),R.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-8 8 8 8 0 01-8-8z"})]})}),xo=({label:t,isLoading:e,onClick:n,disabled:i,type:a="button"})=>R.jsx("button",{type:a,onClick:n,disabled:i||e,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-600 transition-colors cursor-pointer",children:e?R.jsx(Eo,{}):t}),yr=({fields:t,onSubmit:e,buttonLabel:n,isLoading:i,errors:a,handleChange:o})=>R.jsxs("form",{onSubmit:e,className:"bg-gray-900 p-6 rounded-xl shadow-lg space-y-6",children:[R.jsx("div",{className:`grid grid-cols-1 gap-4 ${t.length>6?"md:grid-cols-2":""}`,children:t.map(c=>R.jsx(Fk,{label:c.label,type:c.type,name:c.name,value:c.value,onChange:o,error:a[c.name],isPassword:c.isPassword,required:c.required},c.name))}),R.jsx("div",{className:"pt-2",children:R.jsx(xo,{label:n,isLoading:i,type:"submit"})})]});var Io=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ns=typeof window>"u"||"Deno"in globalThis;function Jn(){}function N_(t,e){return typeof t=="function"?t(e):t}function Nm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vk(t,e){return Math.max(t+(e||0)-Date.now(),0)}function io(t,e){return typeof t=="function"?t(e):t}function li(t,e){return typeof t=="function"?t(e):t}function e1(t,e){const{type:n="all",exact:i,fetchStatus:a,predicate:o,queryKey:c,stale:u}=t;if(c){if(i){if(e.queryHash!==Zg(c,e.options))return!1}else if(!cc(e.queryKey,c))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||o&&!o(e))}function t1(t,e){const{exact:n,status:i,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(is(e.options.mutationKey)!==is(o))return!1}else if(!cc(e.options.mutationKey,o))return!1}return!(i&&e.state.status!==i||a&&!a(e))}function Zg(t,e){return((e==null?void 0:e.queryKeyHashFn)||is)(t)}function is(t){return JSON.stringify(t,(e,n)=>Lm(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function cc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>cc(t[n],e[n])):!1}function Gk(t,e){if(t===e)return t;const n=n1(t)&&n1(e);if(n||Lm(t)&&Lm(e)){const i=n?t:Object.keys(t),a=i.length,o=n?e:Object.keys(e),c=o.length,u=n?[]:{};let f=0;for(let h=0;h<c;h++){const m=n?h:o[h];(!n&&i.includes(m)||n)&&t[m]===void 0&&e[m]===void 0?(u[m]=void 0,f++):(u[m]=Gk(t[m],e[m]),u[m]===t[m]&&t[m]!==void 0&&f++)}return a===c&&f===a?t:u}return e}function xd(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function n1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lm(t){if(!i1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!i1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function i1(t){return Object.prototype.toString.call(t)==="[object Object]"}function L_(t){return new Promise(e=>{setTimeout(e,t)})}function jm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Gk(t,e):e}function j_(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function U_(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var $g=Symbol();function Qk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$g?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ba,Jr,fo,mk,I_=(mk=class extends Io{constructor(){super();Ee(this,Ba);Ee(this,Jr);Ee(this,fo);ke(this,fo,e=>{if(!ns&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,Jr)||this.setEventListener(F(this,fo))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Jr))==null||e.call(this),ke(this,Jr,void 0))}setEventListener(e){var n;ke(this,fo,e),(n=F(this,Jr))==null||n.call(this),ke(this,Jr,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){F(this,Ba)!==e&&(ke(this,Ba,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,Ba)=="boolean"?F(this,Ba):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ba=new WeakMap,Jr=new WeakMap,fo=new WeakMap,mk),ev=new I_,ho,Xr,po,gk,z_=(gk=class extends Io{constructor(){super();Ee(this,ho,!0);Ee(this,Xr);Ee(this,po);ke(this,po,e=>{if(!ns&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){F(this,Xr)||this.setEventListener(F(this,po))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Xr))==null||e.call(this),ke(this,Xr,void 0))}setEventListener(e){var n;ke(this,po,e),(n=F(this,Xr))==null||n.call(this),ke(this,Xr,e(this.setOnline.bind(this)))}setOnline(e){F(this,ho)!==e&&(ke(this,ho,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return F(this,ho)}},ho=new WeakMap,Xr=new WeakMap,po=new WeakMap,gk),Rd=new z_;function Um(){let t,e;const n=new Promise((a,o)=>{t=a,e=o});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),t(a)},n.reject=a=>{i({status:"rejected",reason:a}),e(a)},n}function B_(t){return Math.min(1e3*2**t,3e4)}function Kk(t){return(t??"online")==="online"?Rd.isOnline():!0}var Yk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Vp(t){return t instanceof Yk}function Jk(t){let e=!1,n=0,i=!1,a;const o=Um(),c=S=>{var O;i||(b(new Yk(S)),(O=t.abort)==null||O.call(t))},u=()=>{e=!0},f=()=>{e=!1},h=()=>ev.isFocused()&&(t.networkMode==="always"||Rd.isOnline())&&t.canRun(),m=()=>Kk(t.networkMode)&&t.canRun(),v=S=>{var O;i||(i=!0,(O=t.onSuccess)==null||O.call(t,S),a==null||a(),o.resolve(S))},b=S=>{var O;i||(i=!0,(O=t.onError)==null||O.call(t,S),a==null||a(),o.reject(S))},k=()=>new Promise(S=>{var O;a=_=>{(i||h())&&S(_)},(O=t.onPause)==null||O.call(t)}).then(()=>{var S;a=void 0,i||(S=t.onContinue)==null||S.call(t)}),C=()=>{if(i)return;let S;const O=n===0?t.initialPromise:void 0;try{S=O??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(v).catch(_=>{var D;if(i)return;const L=t.retry??(ns?0:3),I=t.retryDelay??B_,j=typeof I=="function"?I(n,_):I,E=L===!0||typeof L=="number"&&n<L||typeof L=="function"&&L(n,_);if(e||!E){b(_);return}n++,(D=t.onFail)==null||D.call(t,n,_),L_(j).then(()=>h()?void 0:k()).then(()=>{e?b(_):C()})})};return{promise:o,cancel:c,continue:()=>(a==null||a(),o),cancelRetry:u,continueRetry:f,canStart:m,start:()=>(m()?C():k().then(C),o)}}var q_=t=>setTimeout(t,0);function H_(){let t=[],e=0,n=u=>{u()},i=u=>{u()},a=q_;const o=u=>{e?t.push(u):a(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&a(()=>{i(()=>{u.forEach(f=>{n(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||c()}return f},batchCalls:u=>(...f)=>{o(()=>{u(...f)})},schedule:o,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{i=u},setScheduler:u=>{a=u}}}var Ut=H_(),qa,vk,Xk=(vk=class{constructor(){Ee(this,qa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nm(this.gcTime)&&ke(this,qa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ns?1/0:5*60*1e3))}clearGcTimeout(){F(this,qa)&&(clearTimeout(F(this,qa)),ke(this,qa,void 0))}},qa=new WeakMap,vk),mo,go,Yn,Ha,$t,yc,Fa,ai,rr,yk,F_=(yk=class extends Xk{constructor(e){super();Ee(this,ai);Ee(this,mo);Ee(this,go);Ee(this,Yn);Ee(this,Ha);Ee(this,$t);Ee(this,yc);Ee(this,Fa);ke(this,Fa,!1),ke(this,yc,e.defaultOptions),this.setOptions(e.options),this.observers=[],ke(this,Ha,e.client),ke(this,Yn,F(this,Ha).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ke(this,mo,V_(this.options)),this.state=e.state??F(this,mo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,$t))==null?void 0:e.promise}setOptions(e){this.options={...F(this,yc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,Yn).remove(this)}setData(e,n){const i=jm(this.state.data,e,this.options);return Le(this,ai,rr).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){Le(this,ai,rr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,a;const n=(i=F(this,$t))==null?void 0:i.promise;return(a=F(this,$t))==null||a.cancel(e),n?n.then(Jn).catch(Jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,mo))}isActive(){return this.observers.some(e=>li(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$g||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Vk(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,$t))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,$t))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,Yn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(F(this,$t)&&(F(this,Fa)?F(this,$t).cancel({revert:!0}):F(this,$t).cancelRetry()),this.scheduleGc()),F(this,Yn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Le(this,ai,rr).call(this,{type:"invalidate"})}fetch(e,n){var f,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,$t))return F(this,$t).continueRetry(),F(this,$t).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const i=new AbortController,a=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(ke(this,Fa,!0),i.signal)})},o=()=>{const v=Qk(this.options,n),b={client:F(this,Ha),queryKey:this.queryKey,meta:this.meta};return a(b),ke(this,Fa,!1),this.options.persister?this.options.persister(v,b,this):v(b)},c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,Ha),state:this.state,fetchFn:o};a(c),(f=this.options.behavior)==null||f.onFetch(c,this),ke(this,go,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Le(this,ai,rr).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta});const u=v=>{var b,k,C,S;Vp(v)&&v.silent||Le(this,ai,rr).call(this,{type:"error",error:v}),Vp(v)||((k=(b=F(this,Yn).config).onError)==null||k.call(b,v,this),(S=(C=F(this,Yn).config).onSettled)==null||S.call(C,this.state.data,v,this)),this.scheduleGc()};return ke(this,$t,Jk({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:v=>{var b,k,C,S;if(v===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(O){u(O);return}(k=(b=F(this,Yn).config).onSuccess)==null||k.call(b,v,this),(S=(C=F(this,Yn).config).onSettled)==null||S.call(C,v,this.state.error,this),this.scheduleGc()},onError:u,onFail:(v,b)=>{Le(this,ai,rr).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{Le(this,ai,rr).call(this,{type:"pause"})},onContinue:()=>{Le(this,ai,rr).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),F(this,$t).start()}},mo=new WeakMap,go=new WeakMap,Yn=new WeakMap,Ha=new WeakMap,$t=new WeakMap,yc=new WeakMap,Fa=new WeakMap,ai=new WeakSet,rr=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Wk(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Vp(a)&&a.revert&&F(this,go)?{...F(this,go),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Ut.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),F(this,Yn).notify({query:this,type:"updated",action:e})})},yk);function Wk(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function V_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Pi,bk,G_=(bk=class extends Io{constructor(e={}){super();Ee(this,Pi);this.config=e,ke(this,Pi,new Map)}build(e,n,i){const a=n.queryKey,o=n.queryHash??Zg(a,n);let c=this.get(o);return c||(c=new F_({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){F(this,Pi).has(e.queryHash)||(F(this,Pi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,Pi).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,Pi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ut.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,Pi).get(e)}getAll(){return[...F(this,Pi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>e1(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>e1(e,i)):n}notify(e){Ut.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ut.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ut.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pi=new WeakMap,bk),Ai,an,Va,Mi,Qr,Sk,Q_=(Sk=class extends Xk{constructor(e){super();Ee(this,Mi);Ee(this,Ai);Ee(this,an);Ee(this,Va);this.mutationId=e.mutationId,ke(this,an,e.mutationCache),ke(this,Ai,[]),this.state=e.state||Zk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,Ai).includes(e)||(F(this,Ai).push(e),this.clearGcTimeout(),F(this,an).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ke(this,Ai,F(this,Ai).filter(n=>n!==e)),this.scheduleGc(),F(this,an).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,Ai).length||(this.state.status==="pending"?this.scheduleGc():F(this,an).remove(this))}continue(){var e;return((e=F(this,Va))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,u,f,h,m,v,b,k,C,S,O,_,L,I,j,E,D,U,K;const n=()=>{Le(this,Mi,Qr).call(this,{type:"continue"})};ke(this,Va,Jk({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,P)=>{Le(this,Mi,Qr).call(this,{type:"failed",failureCount:N,error:P})},onPause:()=>{Le(this,Mi,Qr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,an).canRun(this)}));const i=this.state.status==="pending",a=!F(this,Va).canStart();try{if(i)n();else{Le(this,Mi,Qr).call(this,{type:"pending",variables:e,isPaused:a}),await((c=(o=F(this,an).config).onMutate)==null?void 0:c.call(o,e,this));const P=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e));P!==this.state.context&&Le(this,Mi,Qr).call(this,{type:"pending",context:P,variables:e,isPaused:a})}const N=await F(this,Va).start();return await((m=(h=F(this,an).config).onSuccess)==null?void 0:m.call(h,N,e,this.state.context,this)),await((b=(v=this.options).onSuccess)==null?void 0:b.call(v,N,e,this.state.context)),await((C=(k=F(this,an).config).onSettled)==null?void 0:C.call(k,N,null,this.state.variables,this.state.context,this)),await((O=(S=this.options).onSettled)==null?void 0:O.call(S,N,null,e,this.state.context)),Le(this,Mi,Qr).call(this,{type:"success",data:N}),N}catch(N){try{throw await((L=(_=F(this,an).config).onError)==null?void 0:L.call(_,N,e,this.state.context,this)),await((j=(I=this.options).onError)==null?void 0:j.call(I,N,e,this.state.context)),await((D=(E=F(this,an).config).onSettled)==null?void 0:D.call(E,void 0,N,this.state.variables,this.state.context,this)),await((K=(U=this.options).onSettled)==null?void 0:K.call(U,void 0,N,e,this.state.context)),N}finally{Le(this,Mi,Qr).call(this,{type:"error",error:N})}}finally{F(this,an).runNext(this)}}},Ai=new WeakMap,an=new WeakMap,Va=new WeakMap,Mi=new WeakSet,Qr=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ut.batch(()=>{F(this,Ai).forEach(i=>{i.onMutationUpdate(e)}),F(this,an).notify({mutation:this,type:"updated",action:e})})},Sk);function Zk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sr,si,bc,Tk,K_=(Tk=class extends Io{constructor(e={}){super();Ee(this,sr);Ee(this,si);Ee(this,bc);this.config=e,ke(this,sr,new Set),ke(this,si,new Map),ke(this,bc,0)}build(e,n,i){const a=new Q_({mutationCache:this,mutationId:++Gu(this,bc)._,options:e.defaultMutationOptions(n),state:i});return this.add(a),a}add(e){F(this,sr).add(e);const n=Yu(e);if(typeof n=="string"){const i=F(this,si).get(n);i?i.push(e):F(this,si).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,sr).delete(e)){const n=Yu(e);if(typeof n=="string"){const i=F(this,si).get(n);if(i)if(i.length>1){const a=i.indexOf(e);a!==-1&&i.splice(a,1)}else i[0]===e&&F(this,si).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Yu(e);if(typeof n=="string"){const i=F(this,si).get(n),a=i==null?void 0:i.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){var i;const n=Yu(e);if(typeof n=="string"){const a=(i=F(this,si).get(n))==null?void 0:i.find(o=>o!==e&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ut.batch(()=>{F(this,sr).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,sr).clear(),F(this,si).clear()})}getAll(){return Array.from(F(this,sr))}find(e){const n={exact:!0,...e};return this.getAll().find(i=>t1(n,i))}findAll(e={}){return this.getAll().filter(n=>t1(e,n))}notify(e){Ut.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ut.batch(()=>Promise.all(e.map(n=>n.continue().catch(Jn))))}},sr=new WeakMap,si=new WeakMap,bc=new WeakMap,Tk);function Yu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function r1(t){return{onFetch:(e,n)=>{var m,v,b,k,C;const i=e.options,a=(b=(v=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:v.fetchMore)==null?void 0:b.direction,o=((k=e.state.data)==null?void 0:k.pages)||[],c=((C=e.state.data)==null?void 0:C.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const h=async()=>{let S=!1;const O=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},_=Qk(e.options,e.fetchOptions),L=async(I,j,E)=>{if(S)return Promise.reject();if(j==null&&I.pages.length)return Promise.resolve(I);const D={client:e.client,queryKey:e.queryKey,pageParam:j,direction:E?"backward":"forward",meta:e.options.meta};O(D);const U=await _(D),{maxPages:K}=e.options,N=E?U_:j_;return{pages:N(I.pages,U,K),pageParams:N(I.pageParams,j,K)}};if(a&&o.length){const I=a==="backward",j=I?Y_:a1,E={pages:o,pageParams:c},D=j(i,E);u=await L(E,D,I)}else{const I=t??o.length;do{const j=f===0?c[0]??i.initialPageParam:a1(i,u);if(f>0&&j==null)break;u=await L(u,j),f++}while(f<I)}return u};e.options.persister?e.fetchFn=()=>{var S,O;return(O=(S=e.options).persister)==null?void 0:O.call(S,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function a1(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function Y_(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var Tt,Wr,Zr,vo,yo,$r,bo,So,kk,J_=(kk=class{constructor(t={}){Ee(this,Tt);Ee(this,Wr);Ee(this,Zr);Ee(this,vo);Ee(this,yo);Ee(this,$r);Ee(this,bo);Ee(this,So);ke(this,Tt,t.queryCache||new G_),ke(this,Wr,t.mutationCache||new K_),ke(this,Zr,t.defaultOptions||{}),ke(this,vo,new Map),ke(this,yo,new Map),ke(this,$r,0)}mount(){Gu(this,$r)._++,F(this,$r)===1&&(ke(this,bo,ev.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Tt).onFocus())})),ke(this,So,Rd.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Tt).onOnline())})))}unmount(){var t,e;Gu(this,$r)._--,F(this,$r)===0&&((t=F(this,bo))==null||t.call(this),ke(this,bo,void 0),(e=F(this,So))==null||e.call(this),ke(this,So,void 0))}isFetching(t){return F(this,Tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,Wr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Tt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,Tt).build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(io(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return F(this,Tt).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),a=F(this,Tt).get(i.queryHash),o=a==null?void 0:a.state.data,c=N_(e,o);if(c!==void 0)return F(this,Tt).build(this,i).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Ut.batch(()=>F(this,Tt).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Tt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,Tt);Ut.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,Tt);return Ut.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=Ut.batch(()=>F(this,Tt).findAll(t).map(a=>a.cancel(n)));return Promise.all(i).then(Jn).catch(Jn)}invalidateQueries(t,e={}){return Ut.batch(()=>(F(this,Tt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=Ut.batch(()=>F(this,Tt).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(Jn)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(Jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,Tt).build(this,e);return n.isStaleByTime(io(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Jn).catch(Jn)}fetchInfiniteQuery(t){return t.behavior=r1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Jn).catch(Jn)}ensureInfiniteQueryData(t){return t.behavior=r1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rd.isOnline()?F(this,Wr).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Tt)}getMutationCache(){return F(this,Wr)}getDefaultOptions(){return F(this,Zr)}setDefaultOptions(t){ke(this,Zr,t)}setQueryDefaults(t,e){F(this,vo).set(is(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,vo).values()],n={};return e.forEach(i=>{cc(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){F(this,yo).set(is(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,yo).values()],n={};return e.forEach(i=>{cc(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,Zr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$g&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,Zr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Tt).clear(),F(this,Wr).clear()}},Tt=new WeakMap,Wr=new WeakMap,Zr=new WeakMap,vo=new WeakMap,yo=new WeakMap,$r=new WeakMap,bo=new WeakMap,So=new WeakMap,kk),mn,Fe,Sc,sn,Ga,To,ea,ta,Tc,ko,Co,Qa,Ka,na,wo,et,nc,Im,zm,Bm,qm,Hm,Fm,Vm,$k,Ck,X_=(Ck=class extends Io{constructor(e,n){super();Ee(this,et);Ee(this,mn);Ee(this,Fe);Ee(this,Sc);Ee(this,sn);Ee(this,Ga);Ee(this,To);Ee(this,ea);Ee(this,ta);Ee(this,Tc);Ee(this,ko);Ee(this,Co);Ee(this,Qa);Ee(this,Ka);Ee(this,na);Ee(this,wo,new Set);this.options=n,ke(this,mn,e),ke(this,ta,null),ke(this,ea,Um()),this.options.experimental_prefetchInRender||F(this,ea).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(F(this,Fe).addObserver(this),s1(F(this,Fe),this.options)?Le(this,et,nc).call(this):this.updateResult(),Le(this,et,qm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gm(F(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gm(F(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Le(this,et,Hm).call(this),Le(this,et,Fm).call(this),F(this,Fe).removeObserver(this)}setOptions(e){const n=this.options,i=F(this,Fe);if(this.options=F(this,mn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof li(this.options.enabled,F(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Le(this,et,Vm).call(this),F(this,Fe).setOptions(this.options),n._defaulted&&!xd(this.options,n)&&F(this,mn).getQueryCache().notify({type:"observerOptionsUpdated",query:F(this,Fe),observer:this});const a=this.hasListeners();a&&o1(F(this,Fe),i,this.options,n)&&Le(this,et,nc).call(this),this.updateResult(),a&&(F(this,Fe)!==i||li(this.options.enabled,F(this,Fe))!==li(n.enabled,F(this,Fe))||io(this.options.staleTime,F(this,Fe))!==io(n.staleTime,F(this,Fe)))&&Le(this,et,Im).call(this);const o=Le(this,et,zm).call(this);a&&(F(this,Fe)!==i||li(this.options.enabled,F(this,Fe))!==li(n.enabled,F(this,Fe))||o!==F(this,na))&&Le(this,et,Bm).call(this,o)}getOptimisticResult(e){const n=F(this,mn).getQueryCache().build(F(this,mn),e),i=this.createResult(n,e);return Z_(this,i)&&(ke(this,sn,i),ke(this,To,this.options),ke(this,Ga,F(this,Fe).state)),i}getCurrentResult(){return F(this,sn)}trackResult(e,n){return new Proxy(e,{get:(i,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(i,a))})}trackProp(e){F(this,wo).add(e)}getCurrentQuery(){return F(this,Fe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=F(this,mn).defaultQueryOptions(e),i=F(this,mn).getQueryCache().build(F(this,mn),n);return i.fetch().then(()=>this.createResult(i,n))}fetch(e){return Le(this,et,nc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),F(this,sn)))}createResult(e,n){var N;const i=F(this,Fe),a=this.options,o=F(this,sn),c=F(this,Ga),u=F(this,To),h=e!==i?e.state:F(this,Sc),{state:m}=e;let v={...m},b=!1,k;if(n._optimisticResults){const P=this.hasListeners(),V=!P&&s1(e,n),J=P&&o1(e,i,n,a);(V||J)&&(v={...v,...Wk(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:C,errorUpdatedAt:S,status:O}=v;k=v.data;let _=!1;if(n.placeholderData!==void 0&&k===void 0&&O==="pending"){let P;o!=null&&o.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(P=o.data,_=!0):P=typeof n.placeholderData=="function"?n.placeholderData((N=F(this,Co))==null?void 0:N.state.data,F(this,Co)):n.placeholderData,P!==void 0&&(O="success",k=jm(o==null?void 0:o.data,P,n),b=!0)}if(n.select&&k!==void 0&&!_)if(o&&k===(c==null?void 0:c.data)&&n.select===F(this,Tc))k=F(this,ko);else try{ke(this,Tc,n.select),k=n.select(k),k=jm(o==null?void 0:o.data,k,n),ke(this,ko,k),ke(this,ta,null)}catch(P){ke(this,ta,P)}F(this,ta)&&(C=F(this,ta),k=F(this,ko),S=Date.now(),O="error");const L=v.fetchStatus==="fetching",I=O==="pending",j=O==="error",E=I&&L,D=k!==void 0,K={status:O,fetchStatus:v.fetchStatus,isPending:I,isSuccess:O==="success",isError:j,isInitialLoading:E,isLoading:E,data:k,dataUpdatedAt:v.dataUpdatedAt,error:C,errorUpdatedAt:S,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>h.dataUpdateCount||v.errorUpdateCount>h.errorUpdateCount,isFetching:L,isRefetching:L&&!I,isLoadingError:j&&!D,isPaused:v.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:j&&D,isStale:tv(e,n),refetch:this.refetch,promise:F(this,ea)};if(this.options.experimental_prefetchInRender){const P=Y=>{K.status==="error"?Y.reject(K.error):K.data!==void 0&&Y.resolve(K.data)},V=()=>{const Y=ke(this,ea,K.promise=Um());P(Y)},J=F(this,ea);switch(J.status){case"pending":e.queryHash===i.queryHash&&P(J);break;case"fulfilled":(K.status==="error"||K.data!==J.value)&&V();break;case"rejected":(K.status!=="error"||K.error!==J.reason)&&V();break}}return K}updateResult(){const e=F(this,sn),n=this.createResult(F(this,Fe),this.options);if(ke(this,Ga,F(this,Fe).state),ke(this,To,this.options),F(this,Ga).data!==void 0&&ke(this,Co,F(this,Fe)),xd(n,e))return;ke(this,sn,n);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!F(this,wo).size)return!0;const c=new Set(o??F(this,wo));return this.options.throwOnError&&c.add("error"),Object.keys(F(this,sn)).some(u=>{const f=u;return F(this,sn)[f]!==e[f]&&c.has(f)})};Le(this,et,$k).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Le(this,et,qm).call(this)}},mn=new WeakMap,Fe=new WeakMap,Sc=new WeakMap,sn=new WeakMap,Ga=new WeakMap,To=new WeakMap,ea=new WeakMap,ta=new WeakMap,Tc=new WeakMap,ko=new WeakMap,Co=new WeakMap,Qa=new WeakMap,Ka=new WeakMap,na=new WeakMap,wo=new WeakMap,et=new WeakSet,nc=function(e){Le(this,et,Vm).call(this);let n=F(this,Fe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Jn)),n},Im=function(){Le(this,et,Hm).call(this);const e=io(this.options.staleTime,F(this,Fe));if(ns||F(this,sn).isStale||!Nm(e))return;const i=Vk(F(this,sn).dataUpdatedAt,e)+1;ke(this,Qa,setTimeout(()=>{F(this,sn).isStale||this.updateResult()},i))},zm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(F(this,Fe)):this.options.refetchInterval)??!1},Bm=function(e){Le(this,et,Fm).call(this),ke(this,na,e),!(ns||li(this.options.enabled,F(this,Fe))===!1||!Nm(F(this,na))||F(this,na)===0)&&ke(this,Ka,setInterval(()=>{(this.options.refetchIntervalInBackground||ev.isFocused())&&Le(this,et,nc).call(this)},F(this,na)))},qm=function(){Le(this,et,Im).call(this),Le(this,et,Bm).call(this,Le(this,et,zm).call(this))},Hm=function(){F(this,Qa)&&(clearTimeout(F(this,Qa)),ke(this,Qa,void 0))},Fm=function(){F(this,Ka)&&(clearInterval(F(this,Ka)),ke(this,Ka,void 0))},Vm=function(){const e=F(this,mn).getQueryCache().build(F(this,mn),this.options);if(e===F(this,Fe))return;const n=F(this,Fe);ke(this,Fe,e),ke(this,Sc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},$k=function(e){Ut.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(F(this,sn))}),F(this,mn).getQueryCache().notify({query:F(this,Fe),type:"observerResultsUpdated"})})},Ck);function W_(t,e){return li(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function s1(t,e){return W_(t,e)||t.state.data!==void 0&&Gm(t,e,e.refetchOnMount)}function Gm(t,e,n){if(li(e.enabled,t)!==!1){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&tv(t,e)}return!1}function o1(t,e,n,i){return(t!==e||li(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&tv(t,n)}function tv(t,e){return li(e.enabled,t)!==!1&&t.isStaleByTime(io(e.staleTime,t))}function Z_(t,e){return!xd(t.getCurrentResult(),e)}var ia,ra,gn,or,dr,id,Qm,wk,$_=(wk=class extends Io{constructor(n,i){super();Ee(this,dr);Ee(this,ia);Ee(this,ra);Ee(this,gn);Ee(this,or);ke(this,ia,n),this.setOptions(i),this.bindMethods(),Le(this,dr,id).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const i=this.options;this.options=F(this,ia).defaultMutationOptions(n),xd(this.options,i)||F(this,ia).getMutationCache().notify({type:"observerOptionsUpdated",mutation:F(this,gn),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&is(i.mutationKey)!==is(this.options.mutationKey)?this.reset():((a=F(this,gn))==null?void 0:a.state.status)==="pending"&&F(this,gn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=F(this,gn))==null||n.removeObserver(this)}onMutationUpdate(n){Le(this,dr,id).call(this),Le(this,dr,Qm).call(this,n)}getCurrentResult(){return F(this,ra)}reset(){var n;(n=F(this,gn))==null||n.removeObserver(this),ke(this,gn,void 0),Le(this,dr,id).call(this),Le(this,dr,Qm).call(this)}mutate(n,i){var a;return ke(this,or,i),(a=F(this,gn))==null||a.removeObserver(this),ke(this,gn,F(this,ia).getMutationCache().build(F(this,ia),this.options)),F(this,gn).addObserver(this),F(this,gn).execute(n)}},ia=new WeakMap,ra=new WeakMap,gn=new WeakMap,or=new WeakMap,dr=new WeakSet,id=function(){var i;const n=((i=F(this,gn))==null?void 0:i.state)??Zk();ke(this,ra,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qm=function(n){Ut.batch(()=>{var i,a,o,c,u,f,h,m;if(F(this,or)&&this.hasListeners()){const v=F(this,ra).variables,b=F(this,ra).context;(n==null?void 0:n.type)==="success"?((a=(i=F(this,or)).onSuccess)==null||a.call(i,n.data,v,b),(c=(o=F(this,or)).onSettled)==null||c.call(o,n.data,null,v,b)):(n==null?void 0:n.type)==="error"&&((f=(u=F(this,or)).onError)==null||f.call(u,n.error,v,b),(m=(h=F(this,or)).onSettled)==null||m.call(h,void 0,n.error,v,b))}this.listeners.forEach(v=>{v(F(this,ra))})})},wk),eC=T.createContext(void 0),Un=t=>{const e=T.useContext(eC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},eP=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),R.jsx(eC.Provider,{value:t,children:e})),tC=T.createContext(!1),tP=()=>T.useContext(tC);tC.Provider;function nP(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var iP=T.createContext(nP()),rP=()=>T.useContext(iP);function nC(t,e){return typeof t=="function"?t(...e):!!t}function Km(){}var aP=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},sP=t=>{T.useEffect(()=>{t.clearReset()},[t])},oP=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(a&&t.data===void 0||nC(n,[t.error,i])),lP=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},cP=(t,e)=>t.isLoading&&t.isFetching&&!e,uP=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,l1=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function dP(t,e,n){var v,b,k,C,S;const i=Un(),a=tP(),o=rP(),c=i.defaultQueryOptions(t);(b=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||b.call(v,c),c._optimisticResults=a?"isRestoring":"optimistic",lP(c),aP(c,o),sP(o);const u=!i.getQueryCache().get(c.queryHash),[f]=T.useState(()=>new e(i,c)),h=f.getOptimisticResult(c),m=!a&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(O=>{const _=m?f.subscribe(Ut.batchCalls(O)):Km;return f.updateResult(),_},[f,m]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),T.useEffect(()=>{f.setOptions(c)},[c,f]),uP(c,h))throw l1(c,f,o);if(oP({result:h,errorResetBoundary:o,throwOnError:c.throwOnError,query:i.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw h.error;if((C=(k=i.getDefaultOptions().queries)==null?void 0:k._experimental_afterQuery)==null||C.call(k,c,h),c.experimental_prefetchInRender&&!ns&&cP(h,a)){const O=u?l1(c,f,o):(S=i.getQueryCache().get(c.queryHash))==null?void 0:S.promise;O==null||O.catch(Km).finally(()=>{f.updateResult()})}return c.notifyOnChangeProps?h:f.trackResult(h)}function zo(t,e){return dP(t,X_)}function bi(t,e){const n=Un(),[i]=T.useState(()=>new $_(n,t));T.useEffect(()=>{i.setOptions(t)},[i,t]);const a=T.useSyncExternalStore(T.useCallback(c=>i.subscribe(Ut.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=T.useCallback((c,u)=>{i.mutate(c,u).catch(Km)},[i]);if(a.error&&nC(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}function iC(t,e){return function(){return t.apply(e,arguments)}}const{toString:fP}=Object.prototype,{getPrototypeOf:nv}=Object,{iterator:ef,toStringTag:rC}=Symbol,tf=(t=>e=>{const n=fP.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Si=t=>(t=t.toLowerCase(),e=>tf(e)===t),nf=t=>e=>typeof e===t,{isArray:Bo}=Array,uc=nf("undefined");function hP(t){return t!==null&&!uc(t)&&t.constructor!==null&&!uc(t.constructor)&&Tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const aC=Si("ArrayBuffer");function pP(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&aC(t.buffer),e}const mP=nf("string"),Tn=nf("function"),sC=nf("number"),rf=t=>t!==null&&typeof t=="object",gP=t=>t===!0||t===!1,rd=t=>{if(tf(t)!=="object")return!1;const e=nv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(rC in t)&&!(ef in t)},vP=Si("Date"),yP=Si("File"),bP=Si("Blob"),SP=Si("FileList"),TP=t=>rf(t)&&Tn(t.pipe),kP=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tn(t.append)&&((e=tf(t))==="formdata"||e==="object"&&Tn(t.toString)&&t.toString()==="[object FormData]"))},CP=Si("URLSearchParams"),[wP,EP,xP,RP]=["ReadableStream","Request","Response","Headers"].map(Si),OP=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,a;if(typeof t!="object"&&(t=[t]),Bo(t))for(i=0,a=t.length;i<a;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),c=o.length;let u;for(i=0;i<c;i++)u=o[i],e.call(null,t[u],u,t)}}function oC(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,a;for(;i-- >0;)if(a=n[i],e===a.toLowerCase())return a;return null}const za=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lC=t=>!uc(t)&&t!==za;function Ym(){const{caseless:t}=lC(this)&&this||{},e={},n=(i,a)=>{const o=t&&oC(e,a)||a;rd(e[o])&&rd(i)?e[o]=Ym(e[o],i):rd(i)?e[o]=Ym({},i):Bo(i)?e[o]=i.slice():e[o]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&wc(arguments[i],n);return e}const _P=(t,e,n,{allOwnKeys:i}={})=>(wc(e,(a,o)=>{n&&Tn(a)?t[o]=iC(a,n):t[o]=a},{allOwnKeys:i}),t),PP=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),AP=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},MP=(t,e,n,i)=>{let a,o,c;const u={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)c=a[o],(!i||i(c,t,e))&&!u[c]&&(e[c]=t[c],u[c]=!0);t=n!==!1&&nv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},DP=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},NP=t=>{if(!t)return null;if(Bo(t))return t;let e=t.length;if(!sC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},LP=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nv(Uint8Array)),jP=(t,e)=>{const i=(t&&t[ef]).call(t);let a;for(;(a=i.next())&&!a.done;){const o=a.value;e.call(t,o[0],o[1])}},UP=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},IP=Si("HTMLFormElement"),zP=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),c1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),BP=Si("RegExp"),cC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};wc(n,(a,o)=>{let c;(c=e(a,o,t))!==!1&&(i[o]=c||a)}),Object.defineProperties(t,i)},qP=t=>{cC(t,(e,n)=>{if(Tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Tn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},HP=(t,e)=>{const n={},i=a=>{a.forEach(o=>{n[o]=!0})};return Bo(t)?i(t):i(String(t).split(e)),n},FP=()=>{},VP=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function GP(t){return!!(t&&Tn(t.append)&&t[rC]==="FormData"&&t[ef])}const QP=t=>{const e=new Array(10),n=(i,a)=>{if(rf(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[a]=i;const o=Bo(i)?[]:{};return wc(i,(c,u)=>{const f=n(c,a+1);!uc(f)&&(o[u]=f)}),e[a]=void 0,o}}return i};return n(t,0)},KP=Si("AsyncFunction"),YP=t=>t&&(rf(t)||Tn(t))&&Tn(t.then)&&Tn(t.catch),uC=((t,e)=>t?setImmediate:e?((n,i)=>(za.addEventListener("message",({source:a,data:o})=>{a===za&&o===n&&i.length&&i.shift()()},!1),a=>{i.push(a),za.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Tn(za.postMessage)),JP=typeof queueMicrotask<"u"?queueMicrotask.bind(za):typeof process<"u"&&process.nextTick||uC,XP=t=>t!=null&&Tn(t[ef]),se={isArray:Bo,isArrayBuffer:aC,isBuffer:hP,isFormData:kP,isArrayBufferView:pP,isString:mP,isNumber:sC,isBoolean:gP,isObject:rf,isPlainObject:rd,isReadableStream:wP,isRequest:EP,isResponse:xP,isHeaders:RP,isUndefined:uc,isDate:vP,isFile:yP,isBlob:bP,isRegExp:BP,isFunction:Tn,isStream:TP,isURLSearchParams:CP,isTypedArray:LP,isFileList:SP,forEach:wc,merge:Ym,extend:_P,trim:OP,stripBOM:PP,inherits:AP,toFlatObject:MP,kindOf:tf,kindOfTest:Si,endsWith:DP,toArray:NP,forEachEntry:jP,matchAll:UP,isHTMLForm:IP,hasOwnProperty:c1,hasOwnProp:c1,reduceDescriptors:cC,freezeMethods:qP,toObjectSet:HP,toCamelCase:zP,noop:FP,toFiniteNumber:VP,findKey:oC,global:za,isContextDefined:lC,isSpecCompliantForm:GP,toJSONObject:QP,isAsyncFn:KP,isThenable:YP,setImmediate:uC,asap:JP,isIterable:XP};function Ae(t,e,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}se.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const dC=Ae.prototype,fC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fC[t]={value:t}});Object.defineProperties(Ae,fC);Object.defineProperty(dC,"isAxiosError",{value:!0});Ae.from=(t,e,n,i,a,o)=>{const c=Object.create(dC);return se.toFlatObject(t,c,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),Ae.call(c,t.message,e,n,i,a),c.cause=t,c.name=t.name,o&&Object.assign(c,o),c};const WP=null;function Jm(t){return se.isPlainObject(t)||se.isArray(t)}function hC(t){return se.endsWith(t,"[]")?t.slice(0,-2):t}function u1(t,e,n){return t?t.concat(e).map(function(a,o){return a=hC(a),!n&&o?"["+a+"]":a}).join(n?".":""):e}function ZP(t){return se.isArray(t)&&!t.some(Jm)}const $P=se.toFlatObject(se,{},null,function(e){return/^is[A-Z]/.test(e)});function af(t,e,n){if(!se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,O){return!se.isUndefined(O[S])});const i=n.metaTokens,a=n.visitor||m,o=n.dots,c=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(a))throw new TypeError("visitor must be a function");function h(C){if(C===null)return"";if(se.isDate(C))return C.toISOString();if(!f&&se.isBlob(C))throw new Ae("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(C)||se.isTypedArray(C)?f&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function m(C,S,O){let _=C;if(C&&!O&&typeof C=="object"){if(se.endsWith(S,"{}"))S=i?S:S.slice(0,-2),C=JSON.stringify(C);else if(se.isArray(C)&&ZP(C)||(se.isFileList(C)||se.endsWith(S,"[]"))&&(_=se.toArray(C)))return S=hC(S),_.forEach(function(I,j){!(se.isUndefined(I)||I===null)&&e.append(c===!0?u1([S],j,o):c===null?S:S+"[]",h(I))}),!1}return Jm(C)?!0:(e.append(u1(O,S,o),h(C)),!1)}const v=[],b=Object.assign($P,{defaultVisitor:m,convertValue:h,isVisitable:Jm});function k(C,S){if(!se.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(C),se.forEach(C,function(_,L){(!(se.isUndefined(_)||_===null)&&a.call(e,_,se.isString(L)?L.trim():L,S,b))===!0&&k(_,S?S.concat(L):[L])}),v.pop()}}if(!se.isObject(t))throw new TypeError("data must be an object");return k(t),e}function d1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function iv(t,e){this._pairs=[],t&&af(t,this,e)}const pC=iv.prototype;pC.append=function(e,n){this._pairs.push([e,n])};pC.toString=function(e){const n=e?function(i){return e.call(this,i,d1)}:d1;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function e5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mC(t,e,n){if(!e)return t;const i=n&&n.encode||e5;se.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(e,n):o=se.isURLSearchParams(e)?e.toString():new iv(e,n).toString(i),o){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class f1{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,function(i){i!==null&&e(i)})}}const gC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},t5=typeof URLSearchParams<"u"?URLSearchParams:iv,n5=typeof FormData<"u"?FormData:null,i5=typeof Blob<"u"?Blob:null,r5={isBrowser:!0,classes:{URLSearchParams:t5,FormData:n5,Blob:i5},protocols:["http","https","file","blob","url","data"]},rv=typeof window<"u"&&typeof document<"u",Xm=typeof navigator=="object"&&navigator||void 0,a5=rv&&(!Xm||["ReactNative","NativeScript","NS"].indexOf(Xm.product)<0),s5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",o5=rv&&window.location.href||"http://localhost",l5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rv,hasStandardBrowserEnv:a5,hasStandardBrowserWebWorkerEnv:s5,navigator:Xm,origin:o5},Symbol.toStringTag,{value:"Module"})),en={...l5,...r5};function c5(t,e){return af(t,new en.classes.URLSearchParams,Object.assign({visitor:function(n,i,a,o){return en.isNode&&se.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function u5(t){return se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function d5(t){const e={},n=Object.keys(t);let i;const a=n.length;let o;for(i=0;i<a;i++)o=n[i],e[o]=t[o];return e}function vC(t){function e(n,i,a,o){let c=n[o++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),f=o>=n.length;return c=!c&&se.isArray(a)?a.length:c,f?(se.hasOwnProp(a,c)?a[c]=[a[c],i]:a[c]=i,!u):((!a[c]||!se.isObject(a[c]))&&(a[c]=[]),e(n,i,a[c],o)&&se.isArray(a[c])&&(a[c]=d5(a[c])),!u)}if(se.isFormData(t)&&se.isFunction(t.entries)){const n={};return se.forEachEntry(t,(i,a)=>{e(u5(i),a,n,0)}),n}return null}function f5(t,e,n){if(se.isString(t))try{return(e||JSON.parse)(t),se.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Ec={transitional:gC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,o=se.isObject(e);if(o&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return a?JSON.stringify(vC(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e)||se.isReadableStream(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return c5(e,this.formSerializer).toString();if((u=se.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return af(u?{"files[]":e}:e,f&&new f,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),f5(e)):e}],transformResponse:[function(e){const n=this.transitional||Ec.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(se.isResponse(e)||se.isReadableStream(e))return e;if(e&&se.isString(e)&&(i&&!this.responseType||a)){const c=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Ae.from(u,Ae.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],t=>{Ec.headers[t]={}});const h5=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p5=t=>{const e={};let n,i,a;return t&&t.split(`
`).forEach(function(c){a=c.indexOf(":"),n=c.substring(0,a).trim().toLowerCase(),i=c.substring(a+1).trim(),!(!n||e[n]&&h5[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},h1=Symbol("internals");function Ql(t){return t&&String(t).trim().toLowerCase()}function ad(t){return t===!1||t==null?t:se.isArray(t)?t.map(ad):String(t)}function m5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const g5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Gp(t,e,n,i,a){if(se.isFunction(i))return i.call(this,e,n);if(a&&(e=n),!!se.isString(e)){if(se.isString(i))return e.indexOf(i)!==-1;if(se.isRegExp(i))return i.test(e)}}function v5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function y5(t,e){const n=se.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(a,o,c){return this[i].call(this,e,a,o,c)},configurable:!0})})}let kn=class{constructor(e){e&&this.set(e)}set(e,n,i){const a=this;function o(u,f,h){const m=Ql(f);if(!m)throw new Error("header name must be a non-empty string");const v=se.findKey(a,m);(!v||a[v]===void 0||h===!0||h===void 0&&a[v]!==!1)&&(a[v||f]=ad(u))}const c=(u,f)=>se.forEach(u,(h,m)=>o(h,m,f));if(se.isPlainObject(e)||e instanceof this.constructor)c(e,n);else if(se.isString(e)&&(e=e.trim())&&!g5(e))c(p5(e),n);else if(se.isObject(e)&&se.isIterable(e)){let u={},f,h;for(const m of e){if(!se.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[h=m[0]]=(f=u[h])?se.isArray(f)?[...f,m[1]]:[f,m[1]]:m[1]}c(u,n)}else e!=null&&o(n,e,i);return this}get(e,n){if(e=Ql(e),e){const i=se.findKey(this,e);if(i){const a=this[i];if(!n)return a;if(n===!0)return m5(a);if(se.isFunction(n))return n.call(this,a,i);if(se.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ql(e),e){const i=se.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Gp(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let a=!1;function o(c){if(c=Ql(c),c){const u=se.findKey(i,c);u&&(!n||Gp(i,i[u],u,n))&&(delete i[u],a=!0)}}return se.isArray(e)?e.forEach(o):o(e),a}clear(e){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const o=n[i];(!e||Gp(this,this[o],o,e,!0))&&(delete this[o],a=!0)}return a}normalize(e){const n=this,i={};return se.forEach(this,(a,o)=>{const c=se.findKey(i,o);if(c){n[c]=ad(a),delete n[o];return}const u=e?v5(o):String(o).trim();u!==o&&delete n[o],n[u]=ad(a),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return se.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=e&&se.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[h1]=this[h1]={accessors:{}}).accessors,a=this.prototype;function o(c){const u=Ql(c);i[u]||(y5(a,c),i[u]=!0)}return se.isArray(e)?e.forEach(o):o(e),this}};kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(kn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});se.freezeMethods(kn);function Qp(t,e){const n=this||Ec,i=e||n,a=kn.from(i.headers);let o=i.data;return se.forEach(t,function(u){o=u.call(n,o,a.normalize(),e?e.status:void 0)}),a.normalize(),o}function yC(t){return!!(t&&t.__CANCEL__)}function qo(t,e,n){Ae.call(this,t??"canceled",Ae.ERR_CANCELED,e,n),this.name="CanceledError"}se.inherits(qo,Ae,{__CANCEL__:!0});function bC(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Ae("Request failed with status code "+n.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function b5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function S5(t,e){t=t||10;const n=new Array(t),i=new Array(t);let a=0,o=0,c;return e=e!==void 0?e:1e3,function(f){const h=Date.now(),m=i[o];c||(c=h),n[a]=f,i[a]=h;let v=o,b=0;for(;v!==a;)b+=n[v++],v=v%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),h-c<e)return;const k=m&&h-m;return k?Math.round(b*1e3/k):void 0}}function T5(t,e){let n=0,i=1e3/e,a,o;const c=(h,m=Date.now())=>{n=m,a=null,o&&(clearTimeout(o),o=null),t.apply(null,h)};return[(...h)=>{const m=Date.now(),v=m-n;v>=i?c(h,m):(a=h,o||(o=setTimeout(()=>{o=null,c(a)},i-v)))},()=>a&&c(a)]}const Od=(t,e,n=3)=>{let i=0;const a=S5(50,250);return T5(o=>{const c=o.loaded,u=o.lengthComputable?o.total:void 0,f=c-i,h=a(f),m=c<=u;i=c;const v={loaded:c,total:u,progress:u?c/u:void 0,bytes:f,rate:h||void 0,estimated:h&&u&&m?(u-c)/h:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(v)},n)},p1=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},m1=t=>(...e)=>se.asap(()=>t(...e)),k5=en.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,en.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(en.origin),en.navigator&&/(msie|trident)/i.test(en.navigator.userAgent)):()=>!0,C5=en.hasStandardBrowserEnv?{write(t,e,n,i,a,o){const c=[t+"="+encodeURIComponent(e)];se.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),se.isString(i)&&c.push("path="+i),se.isString(a)&&c.push("domain="+a),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function E5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function SC(t,e,n){let i=!w5(e);return t&&(i||n==!1)?E5(t,e):e}const g1=t=>t instanceof kn?{...t}:t;function rs(t,e){e=e||{};const n={};function i(h,m,v,b){return se.isPlainObject(h)&&se.isPlainObject(m)?se.merge.call({caseless:b},h,m):se.isPlainObject(m)?se.merge({},m):se.isArray(m)?m.slice():m}function a(h,m,v,b){if(se.isUndefined(m)){if(!se.isUndefined(h))return i(void 0,h,v,b)}else return i(h,m,v,b)}function o(h,m){if(!se.isUndefined(m))return i(void 0,m)}function c(h,m){if(se.isUndefined(m)){if(!se.isUndefined(h))return i(void 0,h)}else return i(void 0,m)}function u(h,m,v){if(v in e)return i(h,m);if(v in t)return i(void 0,h)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(h,m,v)=>a(g1(h),g1(m),v,!0)};return se.forEach(Object.keys(Object.assign({},t,e)),function(m){const v=f[m]||a,b=v(t[m],e[m],m);se.isUndefined(b)&&v!==u||(n[m]=b)}),n}const TC=t=>{const e=rs({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:c,auth:u}=e;e.headers=c=kn.from(c),e.url=mC(SC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(se.isFormData(n)){if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[h,...m]=f?f.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([h||"multipart/form-data",...m].join("; "))}}if(en.hasStandardBrowserEnv&&(i&&se.isFunction(i)&&(i=i(e)),i||i!==!1&&k5(e.url))){const h=a&&o&&C5.read(o);h&&c.set(a,h)}return e},x5=typeof XMLHttpRequest<"u",R5=x5&&function(t){return new Promise(function(n,i){const a=TC(t);let o=a.data;const c=kn.from(a.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:h}=a,m,v,b,k,C;function S(){k&&k(),C&&C(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let O=new XMLHttpRequest;O.open(a.method.toUpperCase(),a.url,!0),O.timeout=a.timeout;function _(){if(!O)return;const I=kn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),E={data:!u||u==="text"||u==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:I,config:t,request:O};bC(function(U){n(U),S()},function(U){i(U),S()},E),O=null}"onloadend"in O?O.onloadend=_:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(_)},O.onabort=function(){O&&(i(new Ae("Request aborted",Ae.ECONNABORTED,t,O)),O=null)},O.onerror=function(){i(new Ae("Network Error",Ae.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let j=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const E=a.transitional||gC;a.timeoutErrorMessage&&(j=a.timeoutErrorMessage),i(new Ae(j,E.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,t,O)),O=null},o===void 0&&c.setContentType(null),"setRequestHeader"in O&&se.forEach(c.toJSON(),function(j,E){O.setRequestHeader(E,j)}),se.isUndefined(a.withCredentials)||(O.withCredentials=!!a.withCredentials),u&&u!=="json"&&(O.responseType=a.responseType),h&&([b,C]=Od(h,!0),O.addEventListener("progress",b)),f&&O.upload&&([v,k]=Od(f),O.upload.addEventListener("progress",v),O.upload.addEventListener("loadend",k)),(a.cancelToken||a.signal)&&(m=I=>{O&&(i(!I||I.type?new qo(null,t,O):I),O.abort(),O=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const L=b5(a.url);if(L&&en.protocols.indexOf(L)===-1){i(new Ae("Unsupported protocol "+L+":",Ae.ERR_BAD_REQUEST,t));return}O.send(o||null)})},O5=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,a;const o=function(h){if(!a){a=!0,u();const m=h instanceof Error?h:this.reason;i.abort(m instanceof Ae?m:new qo(m instanceof Error?m.message:m))}};let c=e&&setTimeout(()=>{c=null,o(new Ae(`timeout ${e} of ms exceeded`,Ae.ETIMEDOUT))},e);const u=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),t=null)};t.forEach(h=>h.addEventListener("abort",o));const{signal:f}=i;return f.unsubscribe=()=>se.asap(u),f}},_5=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,a;for(;i<n;)a=i+e,yield t.slice(i,a),i=a},P5=async function*(t,e){for await(const n of A5(t))yield*_5(n,e)},A5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},v1=(t,e,n,i)=>{const a=P5(t,e);let o=0,c,u=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:h,value:m}=await a.next();if(h){u(),f.close();return}let v=m.byteLength;if(n){let b=o+=v;n(b)}f.enqueue(new Uint8Array(m))}catch(h){throw u(h),h}},cancel(f){return u(f),a.return()}},{highWaterMark:2})},sf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kC=sf&&typeof ReadableStream=="function",M5=sf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),CC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},D5=kC&&CC(()=>{let t=!1;const e=new Request(en.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),y1=64*1024,Wm=kC&&CC(()=>se.isReadableStream(new Response("").body)),_d={stream:Wm&&(t=>t.body)};sf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!_d[e]&&(_d[e]=se.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Ae(`Response type '${e}' is not supported`,Ae.ERR_NOT_SUPPORT,i)})})})(new Response);const N5=async t=>{if(t==null)return 0;if(se.isBlob(t))return t.size;if(se.isSpecCompliantForm(t))return(await new Request(en.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(se.isArrayBufferView(t)||se.isArrayBuffer(t))return t.byteLength;if(se.isURLSearchParams(t)&&(t=t+""),se.isString(t))return(await M5(t)).byteLength},L5=async(t,e)=>{const n=se.toFiniteNumber(t.getContentLength());return n??N5(e)},j5=sf&&(async t=>{let{url:e,method:n,data:i,signal:a,cancelToken:o,timeout:c,onDownloadProgress:u,onUploadProgress:f,responseType:h,headers:m,withCredentials:v="same-origin",fetchOptions:b}=TC(t);h=h?(h+"").toLowerCase():"text";let k=O5([a,o&&o.toAbortSignal()],c),C;const S=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let O;try{if(f&&D5&&n!=="get"&&n!=="head"&&(O=await L5(m,i))!==0){let E=new Request(e,{method:"POST",body:i,duplex:"half"}),D;if(se.isFormData(i)&&(D=E.headers.get("content-type"))&&m.setContentType(D),E.body){const[U,K]=p1(O,Od(m1(f)));i=v1(E.body,y1,U,K)}}se.isString(v)||(v=v?"include":"omit");const _="credentials"in Request.prototype;C=new Request(e,{...b,signal:k,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:i,duplex:"half",credentials:_?v:void 0});let L=await fetch(C);const I=Wm&&(h==="stream"||h==="response");if(Wm&&(u||I&&S)){const E={};["status","statusText","headers"].forEach(N=>{E[N]=L[N]});const D=se.toFiniteNumber(L.headers.get("content-length")),[U,K]=u&&p1(D,Od(m1(u),!0))||[];L=new Response(v1(L.body,y1,U,()=>{K&&K(),S&&S()}),E)}h=h||"text";let j=await _d[se.findKey(_d,h)||"text"](L,t);return!I&&S&&S(),await new Promise((E,D)=>{bC(E,D,{data:j,headers:kn.from(L.headers),status:L.status,statusText:L.statusText,config:t,request:C})})}catch(_){throw S&&S(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,t,C),{cause:_.cause||_}):Ae.from(_,_&&_.code,t,C)}}),Zm={http:WP,xhr:R5,fetch:j5};se.forEach(Zm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const b1=t=>`- ${t}`,U5=t=>se.isFunction(t)||t===null||t===!1,wC={getAdapter:t=>{t=se.isArray(t)?t:[t];const{length:e}=t;let n,i;const a={};for(let o=0;o<e;o++){n=t[o];let c;if(i=n,!U5(n)&&(i=Zm[(c=String(n)).toLowerCase()],i===void 0))throw new Ae(`Unknown adapter '${c}'`);if(i)break;a[c||"#"+o]=i}if(!i){const o=Object.entries(a).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?o.length>1?`since :
`+o.map(b1).join(`
`):" "+b1(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Zm};function Kp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qo(null,t)}function S1(t){return Kp(t),t.headers=kn.from(t.headers),t.data=Qp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wC.getAdapter(t.adapter||Ec.adapter)(t).then(function(i){return Kp(t),i.data=Qp.call(t,t.transformResponse,i),i.headers=kn.from(i.headers),i},function(i){return yC(i)||(Kp(t),i&&i.response&&(i.response.data=Qp.call(t,t.transformResponse,i.response),i.response.headers=kn.from(i.response.headers))),Promise.reject(i)})}const EC="1.9.0",of={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{of[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const T1={};of.transitional=function(e,n,i){function a(o,c){return"[Axios v"+EC+"] Transitional option '"+o+"'"+c+(i?". "+i:"")}return(o,c,u)=>{if(e===!1)throw new Ae(a(c," has been removed"+(n?" in "+n:"")),Ae.ERR_DEPRECATED);return n&&!T1[c]&&(T1[c]=!0,console.warn(a(c," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,c,u):!0}};of.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function I5(t,e,n){if(typeof t!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let a=i.length;for(;a-- >0;){const o=i[a],c=e[o];if(c){const u=t[o],f=u===void 0||c(u,o,t);if(f!==!0)throw new Ae("option "+o+" must be "+f,Ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const sd={assertOptions:I5,validators:of},Ri=sd.validators;let Ja=class{constructor(e){this.defaults=e||{},this.interceptors={request:new f1,response:new f1}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=rs(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:o}=n;i!==void 0&&sd.assertOptions(i,{silentJSONParsing:Ri.transitional(Ri.boolean),forcedJSONParsing:Ri.transitional(Ri.boolean),clarifyTimeoutError:Ri.transitional(Ri.boolean)},!1),a!=null&&(se.isFunction(a)?n.paramsSerializer={serialize:a}:sd.assertOptions(a,{encode:Ri.function,serialize:Ri.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),sd.assertOptions(n,{baseUrl:Ri.spelling("baseURL"),withXsrfToken:Ri.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=o&&se.merge(o.common,o[n.method]);o&&se.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),n.headers=kn.concat(c,o);const u=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(f=f&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let m,v=0,b;if(!f){const C=[S1.bind(this),void 0];for(C.unshift.apply(C,u),C.push.apply(C,h),b=C.length,m=Promise.resolve(n);v<b;)m=m.then(C[v++],C[v++]);return m}b=u.length;let k=n;for(v=0;v<b;){const C=u[v++],S=u[v++];try{k=C(k)}catch(O){S.call(this,O);break}}try{m=S1.call(this,k)}catch(C){return Promise.reject(C)}for(v=0,b=h.length;v<b;)m=m.then(h[v++],h[v++]);return m}getUri(e){e=rs(this.defaults,e);const n=SC(e.baseURL,e.url,e.allowAbsoluteUrls);return mC(n,e.params,e.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(e){Ja.prototype[e]=function(n,i){return this.request(rs(i||{},{method:e,url:n,data:(i||{}).data}))}});se.forEach(["post","put","patch"],function(e){function n(i){return function(o,c,u){return this.request(rs(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}Ja.prototype[e]=n(),Ja.prototype[e+"Form"]=n(!0)});let z5=class xC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(a=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](a);i._listeners=null}),this.promise.then=a=>{let o;const c=new Promise(u=>{i.subscribe(u),o=u}).then(a);return c.cancel=function(){i.unsubscribe(o)},c},e(function(o,c,u){i.reason||(i.reason=new qo(o,c,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new xC(function(a){e=a}),cancel:e}}};function B5(t){return function(n){return t.apply(null,n)}}function q5(t){return se.isObject(t)&&t.isAxiosError===!0}const $m={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($m).forEach(([t,e])=>{$m[e]=t});function RC(t){const e=new Ja(t),n=iC(Ja.prototype.request,e);return se.extend(n,Ja.prototype,e,{allOwnKeys:!0}),se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(a){return RC(rs(t,a))},n}const He=RC(Ec);He.Axios=Ja;He.CanceledError=qo;He.CancelToken=z5;He.isCancel=yC;He.VERSION=EC;He.toFormData=af;He.AxiosError=Ae;He.Cancel=He.CanceledError;He.all=function(e){return Promise.all(e)};He.spread=B5;He.isAxiosError=q5;He.mergeConfig=rs;He.AxiosHeaders=kn;He.formToJSON=t=>vC(se.isHTMLForm(t)?new FormData(t):t);He.getAdapter=wC.getAdapter;He.HttpStatusCode=$m;He.default=He;const{Axios:YU,AxiosError:JU,CanceledError:XU,isCancel:WU,CancelToken:ZU,VERSION:$U,all:eI,Cancel:tI,isAxiosError:nI,spread:iI,toFormData:rI,AxiosHeaders:aI,HttpStatusCode:sI,formToJSON:oI,getAdapter:lI,mergeConfig:cI}=He,on="https://keshav.webzinny.com",dc=He.create({baseURL:`${on}/api/v1`,withCredentials:!1}),H5=()=>localStorage.getItem("accessToken");dc.interceptors.request.use(t=>{const e=H5();return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const av=He.create({baseURL:`${on}/api/v1`,withCredentials:!1}),F5=async()=>{var e;const t=V5();try{const n=await av.post("/auth/refresh-jwt",{token:t}),{jwtToken:i,refreshToken:a}=n.data;if(i&&a)G5(i),localStorage.setItem("refreshToken",a);else throw new Error("Invalid response from refresh endpoint");return i}catch(n){throw new Error(((e=n.response)==null?void 0:e.data)||"Unable to refresh token")}},V5=()=>localStorage.getItem("refreshToken"),G5=t=>{localStorage.setItem("accessToken",t)};dc.interceptors.response.use(t=>t,async t=>{var o,c,u;const e=t.config,n=(o=t.response)==null?void 0:o.status,i=(u=(c=t.response)==null?void 0:c.data)==null?void 0:u.message;if((n===440||n===401&&i==="TOKEN_EXPIRED")&&!e._retry){e._retry=!0;try{const f=await F5();return e.headers.Authorization=`Bearer ${f}`,dc(e)}catch(f){console.log(f),alert("Session expired. Please log in again."),OC(),window.location.href="/login"}}return Promise.reject(t)});const Q5=async t=>(await av.post("/auth/signup",t)).data,K5=async t=>{const e=await av.post("/auth/signin",t);return e.data.jwtToken&&(localStorage.setItem("accessToken",e.data.jwtToken),localStorage.setItem("refreshToken",e.data.refreshToken)),e.data},Y5=async t=>(await dc.get(`/users/${t}`)).data,J5=async t=>{const{email:e,...n}=t;return(await dc.put(`/users/${e}`,n)).data},OC=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail")},X5=()=>{const t=Un();return bi({mutationFn:Q5,onSuccess:e=>{localStorage.setItem("userEmail",e.username),localStorage.setItem("accessToken",e.jwtToken),localStorage.setItem("refreshToken",e.refreshToken),t.invalidateQueries(["user"])},onError:e=>{console.error("Sign-in error:",e)}})},_C=t=>{const{data:e,isLoading:n}=lf(t),i=(e==null?void 0:e.gitHubUrl)||"",a=(e==null?void 0:e.linkedInUrl)||"",o=(e==null?void 0:e.panCard)||"";return{isComplete:!!i&&!!a&&!!o,isLoading:n,gitHubUrl:i,linkedInUrl:a,panCard:o}},W5=()=>{const t=Un();return bi({mutationFn:K5,onSuccess:e=>{localStorage.setItem("userEmail",e.username),localStorage.setItem("accessToken",e.jwtToken),localStorage.setItem("refreshToken",e.refreshToken),t.setQueryData(["user",e.username],e)},onError:()=>{t.invalidateQueries(["user"])}})},lf=t=>zo({queryKey:["user",t],queryFn:()=>Y5(t),enabled:!!t,staleTime:1/0,retry:1}),Z5=()=>{const t=Un();return bi({mutationFn:J5,onMutate:async e=>{const n=t.getQueryData(["user",e.email]);return t.setQueryData(["user",e.email],{...n,...e}),{previousUserData:n}},onError:(e,n,i)=>{t.setQueryData(["user",n.email],i.previousUserData)},onSettled:e=>{t.invalidateQueries(["user",e.email])}})},PC="/assets/logo-BZvmiqk0.png",$5="/assets/profile-B5yqDnbx.jpg",eA="/assets/register-o5akGY65.jpg",tA="/assets/login-HvYggJ5N.jpg",Xa=({children:t,className:e=""})=>{const n=T.useRef(),[i,a]=T.useState(!1);return T.useEffect(()=>{const o=new IntersectionObserver(([c])=>{c.isIntersecting&&(a(!0),o.unobserve(c.target))},{threshold:.2});return n.current&&o.observe(n.current),()=>o.disconnect()},[]),R.jsx("section",{ref:n,className:`transition-all duration-700 ease-out transform ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-8"} ${e}`,children:t})},nA=()=>{const[t,e]=T.useState({email:"",password:""}),[n,i]=T.useState({}),a=vr(),{mutate:o,isLoading:c}=W5(),u=m=>{e({...t,[m.target.name]:m.target.value}),i({...n,[m.target.name]:""})},f=m=>{m.preventDefault(),o(t,{onSuccess:()=>a("/",{state:{from:"login"}}),onError:v=>{var k,C,S;let b="Invalid credentials";((k=v==null?void 0:v.response)==null?void 0:k.status)===404?b="No user found with this email. Please sign up.":((C=v==null?void 0:v.response)==null?void 0:C.status)===401?b="Incorrect password. Please try again.":((S=v==null?void 0:v.response)==null?void 0:S.status)===409&&(b="User Already Exist please login"),i({general:b})}})},h=[{label:"Email",type:"email",name:"email",value:t.email},{label:"Password",type:"password",name:"password",value:t.password,isPassword:!0}];return R.jsx("div",{className:"h-fit flex items-center justify-center bg-gray-900 px-4 md:p-32",children:R.jsxs(Xa,{className:"flex md:flex-row items-center gap-8 bg-gray-800 md:p-8 rounded-xl shadow-lg w-full max-w-5xl",children:[R.jsx("img",{src:tA,alt:"Profile",className:" hidden md:block w-full md:w-1/2 h-auto rounded-lg object-cover"}),R.jsxs(ts,{title:"Login",footerText:"Don't have an account?",footerLink:"/signup",footerLinkText:"Sign Up",children:[R.jsx(yr,{fields:h,onSubmit:f,buttonLabel:"Sign In",isLoading:c,errors:n,handleChange:u}),n.general&&R.jsx("p",{className:"text-red-500 text-center mt-2",children:n.general})]})]})})},iA=()=>{const[t,e]=T.useState({name:"",email:"",password:""}),n=vr(),[i,a]=T.useState({}),{mutate:o,isLoading:c}=X5(),u=m=>{e({...t,[m.target.name]:m.target.value}),a({...i,[m.target.name]:""})},f=m=>{m.preventDefault(),o(t,{onSuccess:()=>n("/",{state:{from:"signup"}}),onError:v=>a({general:v.message||"Sign-up failed"})})},h=[{label:"Full Name",type:"text",name:"name",value:t.name},{label:"Email",type:"email",name:"email",value:t.email},{label:"Password",type:"password",name:"password",value:t.password,isPassword:!0}];return R.jsx("div",{className:"h-fit flex items-center justify-center bg-gray-900 px-4 md:p-32",children:R.jsxs(Xa,{className:"flex flex-col md:flex-row items-center gap-8 bg-gray-800 md:p-8 rounded-xl shadow-lg w-full max-w-5xl",children:[R.jsx("img",{src:eA,alt:"Profile",className:"hidden md:block w-full md:w-1/2 h-auto rounded-lg object-cover"}),R.jsxs(ts,{title:"Sign Up",footerText:"Already have an account?",footerLink:"/login",footerLinkText:"Sign In",children:[R.jsx(yr,{fields:h,onSubmit:f,buttonLabel:"Sign Up",isLoading:c,errors:i,handleChange:u}),i.general&&R.jsx("p",{className:"text-red-500 text-center mt-2",children:i.general})]})]})})},Ho=()=>localStorage.getItem("accessToken"),rA=async t=>{const e=Ho(),n=localStorage.getItem("userEmail");if(!e){console.error("Token is not available yet");return}return(await He.post(`${on}/api/jobs`,t,{params:{email:n},headers:{Authorization:`Bearer ${e}`}})).data},aA=async()=>{const t=Ho();return t?(await He.get(`${on}/api/jobs`,{headers:{Authorization:`Bearer ${t}`}})).data:void 0},sA=async t=>{const e=Ho();return e?(await He.get(`${on}/api/jobs/my-jobs`,{params:{email:t},headers:{Authorization:`Bearer ${e}`}})).data:void 0},oA=async t=>{const e=Ho();return e?(await He.get(`${on}/api/jobs/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data:void 0},lA=async({updatedJob:t,email:e})=>{const{id:n,...i}=t,a=Ho();return a?(await He.put(`${on}/api/jobs/${n}`,i,{params:{email:e},headers:{Authorization:`Bearer ${a}`}})).data:void 0},cA=async({jobId:t,email:e})=>{console.log(t);const n=Ho();return n?(await He.delete(`${on}/api/jobs/${t}`,{params:{email:e},headers:{Authorization:`Bearer ${n}`}})).data:void 0},uA=()=>{const t=Un();return bi({mutationFn:rA,onSuccess:()=>{t.invalidateQueries(["jobs"])}})},dA=()=>zo({queryKey:["jobs"],queryFn:aA}),fA=t=>zo({queryKey:["jobs",t],queryFn:()=>sA(t),enabled:!!t}),sv=t=>zo({queryKey:["job",t],queryFn:()=>oA(t),enabled:!!t}),hA=()=>{const t=Un();return bi({mutationFn:lA,onMutate:async e=>{const n=t.getQueryData(["job",e.id]);return t.setQueryData(["job",e.id],{...n,...e}),{previousJobData:n}},onError:(e,n,i)=>{t.setQueryData(["job",n.id],i.previousJobData)},onSettled:e=>{t.invalidateQueries(["job",e.id]),t.invalidateQueries(["jobs"])}})},pA=()=>{const t=Un();return bi({mutationFn:cA,onSuccess:()=>{t.invalidateQueries(["jobs"])}})},mA=({email:t})=>{const[e,n]=T.useState({title:"",description:"",eligibility:"",category:"",type:"Full-Time",location:"",experienceLevel:"Entry",skills:"",isRemote:!1,salary:"",deadline:"",tags:""}),[i,a]=T.useState({}),{mutate:o,isLoading:c}=uA(),{isComplete:u,isLoading:f}=_C(t),h=b=>{const{name:k,value:C,type:S,checked:O}=b.target;n({...e,[k]:S==="checkbox"?O:C}),a(_=>({..._,[k]:""}))},m=b=>{if(b.preventDefault(),!e.deadline){a({deadline:"Deadline is required."});return}const k=e.skills.split(",").map(S=>S.trim()).filter(Boolean),C=e.tags.split(",").map(S=>S.trim()).filter(Boolean);o({...e,skills:k,tags:C,email:t},{onSuccess:()=>{n({title:"",description:"",eligibility:"",category:"",type:"Full-Time",location:"",experienceLevel:"Entry",skills:"",isRemote:!1,salary:"",deadline:"",tags:""}),a({success:"Job posted successfully!"})},onError:S=>{var _;const O=((_=S==null?void 0:S.response)==null?void 0:_.data)||"Failed to post job.";a({general:O})}})};if(f)return R.jsx(Eo,{});if(!u)return R.jsx("div",{className:"text-center text-red-500 font-medium mt-6",children:" Please complete your profile (GitHub, LinkedIn, PAN) before posting a job."});const v=[{label:"Job Title",name:"title",type:"text",value:e.title},{label:"Category",name:"category",type:"text",value:e.category},{label:"Description",name:"description",type:"textarea",value:e.description},{label:"Eligibility",name:"eligibility",type:"textarea",value:e.eligibility},{label:"Job Type",name:"type",type:"text",value:e.type},{label:"Location",name:"location",type:"text",value:e.location},{label:"Experience Level",name:"experienceLevel",type:"text",value:e.experienceLevel},{label:"Skills (comma-separated)",name:"skills",type:"text",value:e.skills},{label:"Tags (comma-separated)",name:"tags",type:"text",value:e.tags},{label:"Remote",name:"isRemote",type:"checkbox",value:e.isRemote},{label:"Salary (LPA)",name:"salary",type:"text",value:e.salary},{label:"Deadline",name:"deadline",type:"datetime-local",value:e.deadline}];return R.jsxs("div",{children:[R.jsx(yr,{fields:v,onSubmit:m,buttonLabel:"Post Job",isLoading:c,errors:i,handleChange:h}),i.success&&R.jsx("p",{className:"text-green-500 text-center mt-2",children:i.success}),i.general&&R.jsx("p",{className:"text-red-500 text-center mt-2",children:i.general})]})},gA=()=>{const t=localStorage.getItem("userEmail")||"",{data:e,isLoading:n}=lf(t);return n?R.jsx(Eo,{}):!e||e.role!=="HR"?R.jsx(Lk,{to:"/",replace:!0}):R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:R.jsx(ts,{title:"Post a Job",footerText:"Back to dashboard?",footerLink:"/dashboard",footerLinkText:"Dashboard",children:R.jsx(mA,{email:t})})})},vA=({filters:t,setFilters:e})=>{const[n,i]=T.useState(!1),a=u=>{e({...t,[u.target.name]:u.target.value})},o=u=>{u.preventDefault()},c=[{label:"Search",type:"text",name:"search",value:t.search},{label:"Title",type:"text",name:"title",value:t.title},{label:"Eligibility",type:"text",name:"eligibility",value:t.eligibility},{label:"Email",type:"email",name:"email",value:t.email},{label:"Deadline After",type:"date",name:"deadlineAfter",value:t.deadlineAfter}];return R.jsxs("div",{className:"w-full md:w-1/4 md:pr-4",children:[R.jsxs("button",{className:"md:hidden flex items-center text-white bg-blue-600 px-3 py-2 rounded-lg mb-4 shadow hover:bg-blue-700 transition",onClick:()=>i(!n),children:[R.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4h18M3 12h18M3 20h18"})}),R.jsx("span",{className:"font-semibold text-sm",children:"Filters"})]}),R.jsxs("div",{className:`md:block ${n?"block":"hidden"} bg-gray-800 p-4 rounded-lg shadow-md transition-all duration-300`,children:[R.jsx(yr,{fields:c,onSubmit:o,buttonLabel:"Apply Filters",isLoading:!1,errors:{},handleChange:a}),R.jsxs("div",{className:"mt-4",children:[R.jsx("label",{className:"block text-sm text-gray-300 font-medium mb-1",children:"Sort By"}),R.jsxs("select",{name:"sort",value:t.sort,onChange:a,className:"w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[R.jsx("option",{value:"latest",children:"Latest Jobs"}),R.jsx("option",{value:"oldest",children:"Oldest Jobs"})]})]})]})]})},yA=({job:t})=>{const e=t.description.length>100?`${t.description.slice(0,100)}...`:t.description;return R.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-4 hover:bg-gray-700 ",children:R.jsxs(yn,{to:`/jobs/${t.id}`,className:"no-underline hover:no-underline focus:no-underline",children:[R.jsxs("h1",{className:"text-xl mb-2",children:[" ",t.companyName]}),R.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:t.title}),R.jsx("p",{className:"text-gray-400 text-sm mt-1",children:e}),R.jsxs("div",{className:"flex justify-between mt-2 text-gray-500 text-sm",children:[R.jsxs("span",{children:["Category: ",t.category]}),R.jsxs("span",{children:["Posted: ",new Date(t.createdAt).toLocaleDateString()]})]})]})})},bA=({jobs:t,page:e,setPage:n})=>{const a=Math.ceil(t.length/5),o=t.slice(e*5,(e+1)*5),c=()=>{n(f=>Math.max(0,f-1))},u=()=>{n(f=>Math.min(a-1,f+1))};return R.jsxs("div",{className:"flex-1",children:[o.length>0?o.map(f=>R.jsx(yA,{job:f},f.id)):R.jsx("p",{className:"text-gray-400 text-center",children:"No jobs Found"}),R.jsxs("div",{className:"flex w-full justify-center gap-4 mt-4",children:[R.jsx("div",{className:"w-20",children:R.jsx(xo,{label:"Prev",isLoading:!1,onClick:c,disabled:e===0})}),R.jsxs("span",{className:"text-sm text-gray-400 px-4 py-2 bg-gray-800 mx-2 rounded",children:["Page ",e+1," of ",a]}),R.jsx("div",{className:"w-20 ",children:R.jsx(xo,{label:"Next",isLoading:!1,onClick:u,disabled:e>=a-1})})]})]})},SA=()=>{const[t,e]=T.useState({search:"",title:"",eligibility:"",email:"",deadlineAfter:"",sort:"latest"}),[n,i]=T.useState(0);T.useEffect(()=>{i(0)},[t]);const{data:a=[],isLoading:o}=dA(),c=a.filter(u=>(t.search?u.title.toLowerCase().includes(t.search.toLowerCase())||u.description.toLowerCase().includes(t.search.toLowerCase()):!0)&&(t.title?u.title.toLowerCase().includes(t.title.toLowerCase()):!0)&&(t.eligibility?u.eligibility.toLowerCase().includes(t.eligibility.toLowerCase()):!0)&&(t.email?u.email.toLowerCase().includes(t.email.toLowerCase()):!0)&&(t.deadlineAfter?new Date(u.deadline)>=new Date(t.deadlineAfter):!0)).sort((u,f)=>t.sort==="latest"?new Date(f.createdAt)-new Date(u.createdAt):new Date(u.createdAt)-new Date(f.createdAt));return o?R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-gray-100",children:"Loading..."}):R.jsx("div",{className:"min-h-fit bg-gradient-to-r from-black via-black/60 to-black/10 p-4 md:p-8 md:px-32 mb-2",children:R.jsxs(Xa,{className:"flex flex-col md:flex-row",children:[R.jsx(vA,{filters:t,setFilters:e}),R.jsx(bA,{jobs:c,page:n,setPage:i})]})})},TA=({eligibility:t})=>{const e=t?t.split("..").map(n=>n.trim()).filter(n=>n.length>0):[];return R.jsx("ul",{className:"list-disc list-inside text-gray-300",children:e.map((n,i)=>R.jsx("li",{children:n},i))})},Kn=({label:t,value:e})=>R.jsxs("p",{children:[R.jsxs("span",{className:"font-medium text-blue-400",children:[t,":"]})," ",R.jsx("span",{className:"text-gray-300",children:e||"N/A"})]}),k1=({items:t})=>Array.isArray(t)&&t.length>0?R.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((e,n)=>R.jsx("span",{className:"bg-gray-700 text-xs px-3 py-1 rounded-full text-white",children:e},n))}):R.jsx("p",{className:"text-sm text-gray-400",children:"No items available"}),kA=()=>{const{jobId:t}=Zd(),{data:e,isLoading:n}=sv(t);return n?R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-950 text-white",children:"Loading job details..."}):e?R.jsx("div",{className:"min-h-screen flex justify-center bg-gray-950 p-4 md:p-10 text-gray-300",children:R.jsx(ts,{title:e.title,children:R.jsxs("div",{className:"animate-fadeIn space-y-6",children:[R.jsx("p",{className:"leading-relaxed text-sm",children:e.description}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Eligibility"}),R.jsx(TA,{eligibility:e.eligibility})]}),R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[R.jsx(Kn,{label:"Company",value:e.companyName}),R.jsx(Kn,{label:"Location",value:e.location}),R.jsx(Kn,{label:"Remote",value:e.isRemote?"Yes":"No"}),R.jsx(Kn,{label:"Interview Mode",value:e.interviewMode}),R.jsx(Kn,{label:"Experience Level",value:e.experienceLevel}),R.jsx(Kn,{label:"Job Type",value:e.type}),R.jsx(Kn,{label:"Salary",value:e.salary||"Will Be Disclosed Later"}),R.jsx(Kn,{label:"Deadline",value:new Date(e.deadline).toLocaleString()}),R.jsx(Kn,{label:"Posted On",value:new Date(e.createdAt).toLocaleDateString()}),R.jsx(Kn,{label:"Status",value:e.status}),R.jsx(Kn,{label:"Applicants Count",value:e.applicantsCount}),R.jsx(Kn,{label:"Posted By",value:`${e.hrName} (${e.email})`})]}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-md font-semibold text-blue-400 mb-2",children:"Skills Required"}),R.jsx(k1,{items:e.skills})]}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-md font-semibold text-blue-400 mb-2",children:"Tags"}),R.jsx(k1,{items:e.tags})]}),R.jsx("div",{className:"text-center mt-6",children:R.jsx(yn,{to:`/jobs/${t}/apply`,children:R.jsx(xo,{label:"Apply Now",isLoading:!1})})})]})})}):R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-gray-100",children:R.jsx("p",{children:"Job not found."})})},cs=()=>localStorage.getItem("accessToken"),CA=async t=>{const e=cs();return(await He.post(`${on}/api/applied-jobs/apply`,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data},wA=async({applicantEmail:t,jobId:e,status:n})=>{const i=cs();return(await He.put(`${on}/api/applied-jobs/update-status`,null,{params:{applicantEmail:t,jobId:e,status:n},headers:{Authorization:`Bearer ${i}`}})).data},EA=async t=>{const e=cs();return(await He.post(`${on}/api/job-offers/send`,t,{headers:{Authorization:`Bearer ${e}`}})).data},xA=async({hrEmail:t,jobId:e,applicantEmail:n,roomId:i,time:a})=>{const o=cs();return o?(await He.post(`${on}/api/applied-jobs/user`,null,{params:{hrEmail:t,jobId:e,applicantEmail:n,roomId:i,time:a},headers:{Authorization:`Bearer ${o}`}})).data:"token is not defined"},RA=async t=>{const e=cs();return(await He.delete(`${on}/api/applied-jobs/withdraw`,{params:{id:t},headers:{Authorization:`Bearer ${e}`}})).data},OA=async t=>{const e=cs();return(await He.get(`${on}/api/applied-jobs/applicants/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data},_A=async t=>{const e=cs();return(await He.get(`${on}/api/applied-jobs/user`,{params:{email:t},headers:{Authorization:`Bearer ${e}`}})).data},PA=()=>{const t=Un();return bi({mutationFn:CA,onSuccess:()=>{t.invalidateQueries(["appliedJobs"])}})},AA=()=>{const t=Un();return bi({mutationFn:wA,onSuccess:e=>{t.invalidateQueries(["appliedJobs",e])}})},MA=()=>{const t=Un();return bi({mutationFn:RA,onSuccess:()=>{t.invalidateQueries({queryKey:["appliedJobs"]})}})},DA=()=>{const t=Un();return bi({mutationFn:EA,onSuccess:()=>{t.invalidateQueries(["jobOffers"]),t.invalidateQueries(["appliedJobs"])}})},NA=()=>{const t=Un();return bi({mutationFn:xA,onSuccess:()=>{t.invalidateQueries(["appliedJobs"])}})},LA=t=>zo({queryKey:["appliedJobs",t],queryFn:()=>_A(t),enabled:!!t}),jA=t=>zo({queryKey:["appliedJobs",t],queryFn:()=>OA(t),enabled:!!t}),UA=()=>{const{jobId:t}=Zd(),e=localStorage.getItem("userEmail"),{isComplete:n,isLoading:i,gitHubUrl:a,linkedInUrl:o,panCard:c}=_C(e),[u,f]=T.useState({resume:"",portfolioUrl:"",expectedSalary:"",noticePeriod:"",currentLocation:"",experienceLevel:""}),[h,m]=T.useState({}),{mutate:v,isLoading:b}=PA(),k=O=>{const{name:_,value:L}=O.target;f(I=>({...I,[_]:L})),m(I=>({...I,[_]:"",general:""}))},C=async O=>{O.preventDefault(),m({});try{if(!u.resume||!u.resume.includes("drive.google.com"))throw new Error("Please provide a valid Google Drive resume link.");v({applicantEmail:e,resumeUrl:u.resume,jobId:t,portfolioUrl:u.portfolioUrl,expectedSalary:u.expectedSalary,noticePeriod:u.noticePeriod,currentLocation:u.currentLocation,experienceLevel:u.experienceLevel},{onSuccess:()=>{f({resume:"",portfolioUrl:"",expectedSalary:"",noticePeriod:"",currentLocation:"",experienceLevel:""}),alert(" Application submitted successfully!"),setTimeout(()=>window.location.reload(),100)},onError:_=>{var I,j,E;const L=((j=(I=_==null?void 0:_.response)==null?void 0:I.data)==null?void 0:j.message)||((E=_==null?void 0:_.response)==null?void 0:E.data)||(_==null?void 0:_.message)||"Something went wrong. Please try again.";m({general:L})}})}catch(_){m({general:_.message||"Something went wrong."})}},S=[{label:"Resume URL (Google Drive)",type:"url",name:"resume",value:u.resume,required:!0},{label:"Portfolio URL (optional)",type:"url",name:"portfolioUrl",value:u.portfolioUrl,required:!1},{label:"Expected Salary (/month)",type:"number",name:"expectedSalary",value:u.expectedSalary,required:!1},{label:"Notice Period / Availability",type:"text",name:"noticePeriod",value:u.noticePeriod,required:!1},{label:"Current Location",type:"text",name:"currentLocation",value:u.currentLocation,required:!0},{label:"Experience Level",type:"select",name:"experienceLevel",value:u.experienceLevel,options:["","Fresher","01 years","13 years","3+ years"],required:!0}];return i?R.jsx(Eo,{}):b?R.jsx(Eo,{}):n?R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-4",children:R.jsxs(ts,{title:"Apply for Job",children:[R.jsxs("div",{className:"bg-gray-800 text-gray-200 text-sm p-4 rounded mb-4",children:[R.jsxs("p",{children:[R.jsx("strong",{children:"Email:"})," ",e]}),R.jsxs("p",{children:[R.jsx("strong",{children:"PAN Card:"})," ",c]}),R.jsxs("p",{children:[R.jsx("strong",{children:"GitHub:"})," ",R.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:"text-blue-400 underline",children:a})]}),R.jsxs("p",{children:[R.jsx("strong",{children:"LinkedIn:"})," ",R.jsx("a",{href:o,target:"_blank",rel:"noreferrer",className:"text-blue-400 underline",children:o})]})]}),R.jsx(yr,{fields:S,onSubmit:C,buttonLabel:"Submit Application",isLoading:b,errors:h,handleChange:k}),h.success&&R.jsx("p",{className:"text-green-500 text-center mt-2",children:h.success}),h.general&&R.jsx("p",{className:"text-red-500 text-center mt-2",children:h.general})]})}):R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-4",children:R.jsx(ts,{title:"Profile Incomplete",children:R.jsx("p",{className:"text-red-400 text-sm text-center",children:" Please complete your profile (GitHub, LinkedIn, PAN) before applying for jobs."})})})},AC=({activeSection:t,setActiveSection:e,sections:n})=>{const[i,a]=T.useState(!1),o=vr(),c=()=>{OC(),o("/login",{replace:!0}),window.location.reload()};return R.jsxs("aside",{className:`w-full  md:w-64 bg-transparent md:bg-gray-800/70 md:backdrop-blur-md
     text-white h-full px-6 py-8 shadow-lg rounded-3xl relative md:top-24 md:left-24`,children:[R.jsxs("button",{className:"md:hidden flex items-center mb-6 text-white",onClick:()=>a(!i),children:[R.jsx("svg",{className:"w-7 h-7 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),R.jsx("span",{className:"font-bold text-lg",children:"Menu"})]}),R.jsxs("div",{className:`${i?"block":"hidden"} md:block transition-all`,children:[R.jsx("ul",{className:"space-y-5",children:n.map(u=>R.jsx("li",{children:R.jsxs("button",{onClick:()=>e(u.name),className:`flex items-center w-full px-4 py-3 rounded-xl text-left transition-all
                   duration-300 ease-in-out font-medium text-sm tracking-wide ${t===u.name?"bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg scale-[1.02]":"hover:bg-gray-700"}`,children:[R.jsx("svg",{className:"w-5 h-5 mr-3 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{d:u.icon})}),R.jsx("span",{children:u.name})]})},u.name))}),R.jsx("div",{className:"mt-10",children:R.jsx("button",{onClick:c,className:`w-full px-4 py-3 rounded-xl cursor-pointer bg-red-500 hover:bg-red-600 text-white font-semibold 
            text-sm shadow-md transition-all duration-300`,children:"Logout"})})]})]})},MC=({userEmail:t,Role:e})=>{const{data:n,isLoading:i}=lf(t),a=Z5(),[o,c]=T.useState({companyName:e.toLowerCase()==="hr"?"":"none",gitHubUrl:"",linkedInUrl:"",panCard:""}),[u,f]=T.useState({}),[h,m]=T.useState(null);T.useEffect(()=>{n&&c({companyName:n.companyName||"",gitHubUrl:n.gitHubUrl||"",linkedInUrl:n.linkedInUrl||"",panCard:n.panCard||""})},[n]);const v=S=>{const{name:O,value:_}=S.target;c(L=>({...L,[O]:_})),f(L=>({...L,[O]:""})),m(null)},b=S=>{S.preventDefault(),m(null),a.mutate({email:t,...o},{onSuccess:()=>{m({type:"success",message:"Profile updated successfully."})},onError:O=>{var L,I;console.log(O);const _=((I=(L=O==null?void 0:O.response)==null?void 0:L.data)==null?void 0:I.message)||"Something went wrong. Please try again.";m({type:"error",message:_}),_.includes("GitHub")?f(j=>({...j,gitHubUrl:_})):_.includes("LinkedIn")?f(j=>({...j,linkedInUrl:_})):_.includes("PAN")&&f(j=>({...j,panCard:_}))}})},k=o.gitHubUrl&&o.linkedInUrl&&o.panCard,C=[{label:"GitHub URL",name:"gitHubUrl",type:"text",value:o.gitHubUrl},{label:"LinkedIn URL",name:"linkedInUrl",type:"text",value:o.linkedInUrl},{label:"PAN Card",name:"panCard",type:"text",value:o.panCard}];return e.toLowerCase()==="hr"&&C.push({label:"Company Name",name:"companyName",type:"text",value:o.companyName}),i||!n?R.jsx(Eo,{}):R.jsxs("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black p-6 rounded-2xl shadow-2xl max-w-lg mx-auto text-center",children:[R.jsx("img",{src:$5,alt:"Profile",className:"w-28 h-28 rounded-full mx-auto mb-4 border-4 border-purple-500 shadow-lg"}),R.jsx("h2",{className:"text-2xl text-white font-bold mb-1",children:"Welcome to your dashboard!"}),R.jsxs("p",{className:"text-gray-400",children:["Email: ",t]}),R.jsxs("span",{className:"mt-2 inline-block bg-purple-700 text-white text-sm px-4 py-1 rounded-full shadow",children:["Role: ",e]}),R.jsxs("div",{className:"mt-6 text-left",children:[h&&R.jsx("div",{className:`text-sm mb-4 rounded px-3 py-2 ${h.type==="error"?"bg-red-700 text-red-100":"bg-green-700 text-green-100"}`,children:typeof h.message=="object"?h.message.message:h.message}),R.jsx(yr,{fields:C,onSubmit:b,buttonLabel:"Update Profile",isLoading:a.isLoading,errors:u,handleChange:v})]}),!k&&R.jsxs("p",{className:"text-red-500 mt-4 text-sm",children:["Please complete your profile to"," ",e==="HR"?"post jobs":"apply for jobs","."]})]})},IA=({hrEmail:t,setSelectedJobId:e,onJobClick:n})=>{const{data:i=[],isLoading:a,error:o}=fA(t);return a?R.jsx("p",{className:"text-gray-400",children:"Loading jobs..."}):o?R.jsxs("p",{className:"text-red-500",children:["Error loading jobs: ",o.message]}):R.jsxs("div",{className:"w-full",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:[R.jsx("h2",{className:"text-xl text-white font-semibold mb-2 sm:mb-0",children:"Jobs"}),R.jsx(yn,{to:"/post-job",children:R.jsx("button",{className:"w-full sm:w-auto py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ Create a Job"})})]}),i.length>0?R.jsx("ul",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:i.map(c=>R.jsxs("li",{onClick:()=>{e(c.id),n(c.id)},className:"p-4 bg-gray-800 rounded-lg border border-gray-700 hover:border-blue-500 transition cursor-pointer",children:[R.jsx("h3",{className:"text-gray-100 font-medium text-base md:text-lg",children:c.title}),R.jsx("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:c.description}),R.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Posted: ",new Date(c.createdAt).toLocaleDateString()]})]},c.id))}):R.jsx("p",{className:"text-gray-400",children:"No jobs posted yet."})]})},zA=({applicant:t,jobId:e})=>{const n=vr(),{data:i}=sv(e),{mutate:a}=AA(),{mutate:o}=NA(),c=localStorage.getItem("roomId"),u=localStorage.getItem("time"),f=m=>{a({applicantEmail:t.applicantEmail,jobId:i.id,status:m},{onSuccess:()=>{n(`/offer/${t.applicantEmail}/${e}`)}})},h=()=>{if(!c)return alert("Please create a Room ID first."),n("/profile/hr");if(!u)return alert("Please enter a date and time."),n("/profile/hr");o({applicantEmail:t.applicantEmail,hrEmail:i.email,jobId:i.id,roomId:c,time:u},{onSuccess:()=>{n(`/interviews/${c}`)}})};return R.jsxs("div",{className:"p-6 bg-gray-900 rounded-lg shadow-xl max-w-4xl mx-auto space-y-6",children:[R.jsx("div",{className:"text-2xl font-bold text-white",children:i==null?void 0:i.title}),R.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar bg-gray-800 p-4 rounded-md text-sm text-gray-300",children:i==null?void 0:i.description}),R.jsxs("div",{className:"mt-4",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Applicant Information"}),R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[R.jsxs("div",{className:"bg-gray-800 p-3 rounded-md text-gray-300 flex flex-col",children:[R.jsx("span",{className:"mb-1",children:"Email:"}),R.jsx("span",{className:"text-gray-100 break-words",children:t.applicantEmail})]}),R.jsxs("div",{className:"bg-gray-800 p-3 rounded-md text-gray-300 flex flex-col",children:[R.jsx("span",{className:"mb-1",children:"Resume:"}),R.jsx("a",{href:t.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline break-words",children:"View Resume"})]})]})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 mt-6",children:[R.jsxs("button",{onClick:()=>f("accepted"),className:"flex items-center justify-center py-2 px-4 bg-blue-600 cursor-pointer text-white rounded-lg hover:bg-blue-700 transition",children:[R.jsx(M_,{className:"mr-2"})," Send Offer"]}),R.jsxs("button",{onClick:()=>f("rejected"),className:"flex items-center justify-center py-2 px-4 cursor-pointer bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:[R.jsx(D_,{className:"mr-2"})," Reject"]})]}),R.jsx("div",{className:"mt-4",children:R.jsx("button",{onClick:h,className:"w-full py-2 px-4 bg-blue-600 cursor-pointer text-white rounded-lg hover:bg-blue-700 transition",children:"Schedule Interview"})})]})},BA=()=>{const t=localStorage.getItem("userEmail"),{data:e,isLoading:n,isError:i,error:a}=jA(t);return n?R.jsx("p",{children:"Loading applicants..."}):i?R.jsxs("p",{children:["Error: ",a.message]}):(e==null?void 0:e.length)===0?R.jsx("p",{children:"No applicants are present."}):R.jsx("div",{className:"space-y-4",children:e==null?void 0:e.map(o=>R.jsx(zA,{applicant:o,jobId:o.jobId},o.id))})},qA=He.create({baseURL:"/room"}),HA=(t,e)=>qA.post("/get-token",{roomName:t,userName:e});var C1={};function FA(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var VA=Object.defineProperty,GA=(t,e,n)=>e in t?VA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w1=(t,e,n)=>GA(t,typeof e!="symbol"?e+"":e,n);let bn=class{constructor(){w1(this,"_locking"),w1(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(a=>e=()=>{this._locks-=1,a()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function Ct(t,e){if(!t)throw new Error(e)}const QA=34028234663852886e22,KA=-34028234663852886e22,YA=4294967295,JA=2147483647,XA=-2147483648;function od(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>JA||t<XA)throw new Error("invalid int 32: "+t)}function eg(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>YA||t<0)throw new Error("invalid uint 32: "+t)}function DC(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>QA||t<KA))throw new Error("invalid float 32: "+t)}const NC=Symbol("@bufbuild/protobuf/enum-type");function WA(t){const e=t[NC];return Ct(e,"missing enum type on enum object"),e}function LC(t,e,n,i){t[NC]=jC(e,n.map(a=>({no:a.no,name:a.name,localName:t[a.no]})))}function jC(t,e,n){const i=Object.create(null),a=Object.create(null),o=[];for(const c of e){const u=UC(c);o.push(u),i[c.name]=u,a[c.no]=u}return{typeName:t,values:o,findName(c){return i[c]},findNumber(c){return a[c]}}}function ZA(t,e,n){const i={};for(const a of e){const o=UC(a);i[o.localName]=o.no,i[o.no]=o.localName}return LC(i,t,e),i}function UC(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class ov{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),a=i.runtime.bin,o=a.makeReadOptions(n);return a.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const i=this.getType(),a=i.runtime.json,o=a.makeReadOptions(n);return a.readMessage(i,e,o,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(a){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(a instanceof Error?a.message:String(a)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,a=i.makeWriteOptions(e),o=a.writerFactory();return i.writeMessage(this,o,a),o.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,a=i.makeWriteOptions(e);return i.writeMessage(this,a)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function $A(t,e,n,i){var a;const o=(a=i==null?void 0:i.localName)!==null&&a!==void 0?a:e.substring(e.lastIndexOf(".")+1),c={[o]:function(u){t.util.initFields(this),t.util.initPartial(u,this)}}[o];return Object.setPrototypeOf(c.prototype,new ov),Object.assign(c,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(u,f){return new c().fromBinary(u,f)},fromJson(u,f){return new c().fromJson(u,f)},fromJsonString(u,f){return new c().fromJsonString(u,f)},equals(u,f){return t.util.equals(c,u,f)}}),c}function eM(){let t=0,e=0;for(let i=0;i<28;i+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<i,(a&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Yp(t,e,n){for(let o=0;o<28;o=o+7){const c=t>>>o,u=!(!(c>>>7)&&e==0),f=(u?c|128:c)&255;if(n.push(f),!u)return}const i=t>>>28&15|(e&7)<<4,a=e>>3!=0;if(n.push((a?i|128:i)&255),!!a){for(let o=3;o<31;o=o+7){const c=e>>>o,u=!!(c>>>7),f=(u?c|128:c)&255;if(n.push(f),!u)return}n.push(e>>>31&1)}}const ld=4294967296;function E1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,a=0;function o(c,u){const f=Number(t.slice(c,u));a*=n,i=i*n+f,i>=ld&&(a=a+(i/ld|0),i=i%ld)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?zC(i,a):lv(i,a)}function tM(t,e){let n=lv(t,e);const i=n.hi&2147483648;i&&(n=zC(n.lo,n.hi));const a=IC(n.lo,n.hi);return i?"-"+a:a}function IC(t,e){if({lo:t,hi:e}=nM(t,e),e<=2097151)return String(ld*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,a=e>>16&65535;let o=n+i*6777216+a*6710656,c=i+a*8147497,u=a*2;const f=1e7;return o>=f&&(c+=Math.floor(o/f),o%=f),c>=f&&(u+=Math.floor(c/f),c%=f),u.toString()+x1(c)+x1(o)}function nM(t,e){return{lo:t>>>0,hi:e>>>0}}function lv(t,e){return{lo:t|0,hi:e|0}}function zC(t,e){return e=~e,t?t=~t+1:e+=1,lv(t,e)}const x1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function R1(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function iM(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function rM(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof C1!="object"||C1.BUF_BIGINT_DISABLE!=="1")){const a=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),c=BigInt("0"),u=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(f){const h=typeof f=="bigint"?f:BigInt(f);if(h>o||h<a)throw new Error("int64 invalid: ".concat(f));return h},uParse(f){const h=typeof f=="bigint"?f:BigInt(f);if(h>u||h<c)throw new Error("uint64 invalid: ".concat(f));return h},enc(f){return t.setBigInt64(0,this.parse(f),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(f){return t.setBigInt64(0,this.uParse(f),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(f,h){return t.setInt32(0,f,!0),t.setInt32(4,h,!0),t.getBigInt64(0,!0)},uDec(f,h){return t.setInt32(0,f,!0),t.setInt32(4,h,!0),t.getBigUint64(0,!0)}}}const n=a=>Ct(/^-?[0-9]+$/.test(a),"int64 invalid: ".concat(a)),i=a=>Ct(/^[0-9]+$/.test(a),"uint64 invalid: ".concat(a));return{zero:"0",supported:!1,parse(a){return typeof a!="string"&&(a=a.toString()),n(a),a},uParse(a){return typeof a!="string"&&(a=a.toString()),i(a),a},enc(a){return typeof a!="string"&&(a=a.toString()),n(a),E1(a)},uEnc(a){return typeof a!="string"&&(a=a.toString()),i(a),E1(a)},dec(a,o){return tM(a,o)},uDec(a,o){return IC(a,o)}}}const ht=rM();var pe;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(pe||(pe={}));var ca;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(ca||(ca={}));function Vr(t,e,n){if(e===n)return!0;if(t==pe.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return e==n}return!1}function Ro(t,e){switch(t){case pe.BOOL:return!1;case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return e==0?ht.zero:"0";case pe.DOUBLE:case pe.FLOAT:return 0;case pe.BYTES:return new Uint8Array(0);case pe.STRING:return"";default:return 0}}function BC(t,e){switch(t){case pe.BOOL:return e===!1;case pe.STRING:return e==="";case pe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var _t;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(_t||(_t={}));class aM{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let a=0;a<this.chunks.length;a++)e+=this.chunks[a].length;let n=new Uint8Array(e),i=0;for(let a=0;a<this.chunks.length;a++)n.set(this.chunks[a],i),i+=this.chunks[a].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(eg(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return od(e),R1(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){DC(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){eg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){od(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return od(e),e=(e<<1^e>>31)>>>0,R1(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),a=ht.enc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),a=ht.uEnc(e);return i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),this.raw(n)}int64(e){let n=ht.enc(e);return Yp(n.lo,n.hi,this.buf),this}sint64(e){let n=ht.enc(e),i=n.hi>>31,a=n.lo<<1^i,o=(n.hi<<1|n.lo>>>31)^i;return Yp(a,o,this.buf),this}uint64(e){let n=ht.uEnc(e);return Yp(n.lo,n.hi,this.buf),this}}class sM{constructor(e,n){this.varint64=eM,this.uint32=iM,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case _t.Varint:for(;this.buf[this.pos++]&128;);break;case _t.Bit64:this.pos+=4;case _t.Bit32:this.pos+=4;break;case _t.LengthDelimited:let a=this.uint32();this.pos+=a;break;case _t.StartGroup:for(;;){const[o,c]=this.tag();if(c===_t.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(c,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return ht.dec(...this.varint64())}uint64(){return ht.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,ht.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ht.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ht.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function oM(t,e,n,i){let a;return{typeName:e,extendee:n,get field(){if(!a){const o=typeof i=="function"?i():i;o.name=e.split(".").pop(),o.jsonName="[".concat(e,"]"),a=t.util.newFieldList([o]).list()[0]}return a},runtime:t}}function qC(t){const e=t.field.localName,n=Object.create(null);return n[e]=lM(t),[n,()=>n[e]]}function lM(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Ro(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function cM(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),cf=[];for(let t=0;t<lr.length;t++)cf[lr[t].charCodeAt(0)]=t;cf[45]=lr.indexOf("+");cf[95]=lr.indexOf("/");const HC={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,a=0,o,c=0;for(let u=0;u<t.length;u++){if(o=cf[t.charCodeAt(u)],o===void 0)switch(t[u]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:c=o,a=1;break;case 1:n[i++]=c<<2|(o&48)>>4,c=o,a=2;break;case 2:n[i++]=(c&15)<<4|(o&60)>>2,c=o,a=3;break;case 3:n[i++]=(c&3)<<6|o,a=0;break}}if(a==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,a=0;for(let o=0;o<t.length;o++)switch(i=t[o],n){case 0:e+=lr[i>>2],a=(i&3)<<4,n=1;break;case 1:e+=lr[a|i>>4],a=(i&15)<<2,n=2;break;case 2:e+=lr[a|i>>6],e+=lr[i&63],n=0;break}return n&&(e+=lr[a],e+="=",n==1&&(e+="=")),e}};function uM(t,e,n){VC(e,t);const i=e.runtime.bin.makeReadOptions(n),a=cM(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,c]=qC(e);for(const u of a)e.runtime.bin.readField(o,i.readerFactory(u.data),e.field,u.wireType,i);return c()}function dM(t,e,n,i){VC(e,t);const a=e.runtime.bin.makeReadOptions(i),o=e.runtime.bin.makeWriteOptions(i);if(FC(t,e)){const h=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of h)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const c=o.writerFactory();let u=e.field;!u.opt&&!u.repeated&&(u.kind=="enum"||u.kind=="scalar")&&(u=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(u,n,c,o);const f=a.readerFactory(c.finish());for(;f.pos<f.len;){const[h,m]=f.tag(),v=f.skip(m,h);t.getType().runtime.bin.onUnknownField(t,h,m,v)}}function FC(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function VC(t,e){Ct(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function GC(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!BC(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function O1(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Ro(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Wa(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(ov.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function QC(t,e){return Wa(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}pe.DOUBLE,pe.FLOAT,pe.INT64,pe.UINT64,pe.INT32,pe.UINT32,pe.BOOL,pe.STRING,pe.BYTES;const _1={ignoreUnknownFields:!1},P1={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function fM(t){return t?Object.assign(Object.assign({},_1),t):_1}function hM(t){return t?Object.assign(Object.assign({},P1),t):P1}const Pd=Symbol(),cd=Symbol();function pM(){return{makeReadOptions:fM,makeWriteOptions:hM,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(_i(e)));i=i??new t;const a=new Map,o=n.typeRegistry;for(const[c,u]of Object.entries(e)){const f=t.fields.findJsonName(c);if(f){if(f.oneof){if(u===null&&f.kind=="scalar")continue;const h=a.get(f.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(f.oneof.name,'" present: "').concat(h,'", "').concat(c,'"'));a.set(f.oneof,c)}A1(i,u,f,n,t)}else{let h=!1;if(o!=null&&o.findExtension&&c.startsWith("[")&&c.endsWith("]")){const m=o.findExtension(c.substring(1,c.length-1));if(m&&m.extendee.typeName==t.typeName){h=!0;const[v,b]=qC(m);A1(v,u,m.field,n,m),dM(i,m,b(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let a;try{for(a of n.fields.byNumber()){if(!GC(a,t)){if(a.req)throw"required field not set";if(!e.emitDefaultValues||!gM(a))continue}const c=a.oneof?t[a.oneof.localName].value:t[a.localName],u=M1(a,c,e);u!==void 0&&(i[e.useProtoFieldName?a.name:a.jsonName]=u)}const o=e.typeRegistry;if(o!=null&&o.findExtensionFor)for(const c of n.runtime.bin.listUnknownFields(t)){const u=o.findExtensionFor(n.typeName,c.no);if(u&&FC(t,u)){const f=uM(t,u,e),h=M1(u.field,f,e);h!==void 0&&(i[u.field.jsonName]=h)}}}catch(o){const c=a?"cannot encode field ".concat(n.typeName,".").concat(a.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),u=o instanceof Error?o.message:String(o);throw new Error(c+(u.length>0?": ".concat(u):""))}return i},readScalar(t,e,n){return rc(t,e,n??ca.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||BC(t,e)))return ud(t,e)},debug:_i}}function _i(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function A1(t,e,n,i,a){let o=n.localName;if(n.repeated){if(Ct(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(e)));const c=t[o];for(const u of e){if(u===null)throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(u)));switch(n.kind){case"message":c.push(n.T.fromJson(u,i));break;case"enum":const f=Jp(n.T,u,i.ignoreUnknownFields,!0);f!==cd&&c.push(f);break;case"scalar":try{c.push(rc(n.T,u,n.L,!0))}catch(h){let m="cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(u));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(e)));const c=t[o];for(const[u,f]of Object.entries(e)){if(f===null)throw new Error("cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=mM(n.K,u)}catch(m){let v="cannot decode map key for field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(e));throw m instanceof Error&&m.message.length>0&&(v+=": ".concat(m.message)),new Error(v)}switch(n.V.kind){case"message":c[h]=n.V.T.fromJson(f,i);break;case"enum":const m=Jp(n.V.T,f,i.ignoreUnknownFields,!0);m!==cd&&(c[h]=m);break;case"scalar":try{c[h]=rc(n.V.T,f,ca.BIGINT,!0)}catch(v){let b="cannot decode map value for field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(e));throw v instanceof Error&&v.message.length>0&&(b+=": ".concat(v.message)),new Error(b)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const c=n.T;if(e===null&&c.typeName!="google.protobuf.Value")return;let u=t[o];Wa(u)?u.fromJson(e,i):(t[o]=u=c.fromJson(e,i),c.fieldWrapper&&!n.oneof&&(t[o]=c.fieldWrapper.unwrapField(u)));break;case"enum":const f=Jp(n.T,e,i.ignoreUnknownFields,!1);switch(f){case Pd:O1(n,t);break;case cd:break;default:t[o]=f;break}break;case"scalar":try{const h=rc(n.T,e,n.L,!1);switch(h){case Pd:O1(n,t);break;default:t[o]=h;break}}catch(h){let m="cannot decode field ".concat(a.typeName,".").concat(n.name," from JSON: ").concat(_i(e));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}function mM(t,e){if(t===pe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return rc(t,e,ca.BIGINT,!0).toString()}function rc(t,e,n,i){if(e===null)return i?Ro(t,n):Pd;switch(t){case pe.DOUBLE:case pe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const a=Number(e);if(Number.isNaN(a)||!Number.isFinite(a))break;return t==pe.FLOAT&&DC(a),a;case pe.INT32:case pe.FIXED32:case pe.SFIXED32:case pe.SINT32:case pe.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==pe.UINT32||t==pe.FIXED32?eg(o):od(o),o;case pe.INT64:case pe.SFIXED64:case pe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const c=ht.parse(e);return n?c.toString():c;case pe.FIXED64:case pe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const u=ht.uParse(e);return n?u.toString():u;case pe.BOOL:if(typeof e!="boolean")break;return e;case pe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case pe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return HC.dec(e)}throw new Error}function Jp(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:Pd;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const a=t.findName(e);if(a!==void 0)return a.no;if(n)return cd;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(_i(e)))}function gM(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function M1(t,e,n){if(t.kind=="map"){Ct(typeof e=="object"&&e!=null);const i={},a=Object.entries(e);switch(t.V.kind){case"scalar":for(const[c,u]of a)i[c.toString()]=ud(t.V.T,u);break;case"message":for(const[c,u]of a)i[c.toString()]=u.toJson(n);break;case"enum":const o=t.V.T;for(const[c,u]of a)i[c.toString()]=Xp(o,u,n.enumAsInteger);break}return n.emitDefaultValues||a.length>0?i:void 0}if(t.repeated){Ct(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let a=0;a<e.length;a++)i.push(ud(t.T,e[a]));break;case"enum":for(let a=0;a<e.length;a++)i.push(Xp(t.T,e[a],n.enumAsInteger));break;case"message":for(let a=0;a<e.length;a++)i.push(e[a].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return ud(t.T,e);case"enum":return Xp(t.T,e,n.enumAsInteger);case"message":return QC(t.T,e).toJson(n)}}function Xp(t,e,n){var i;if(Ct(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const a=t.findNumber(e);return(i=a==null?void 0:a.name)!==null&&i!==void 0?i:e}function ud(t,e){switch(t){case pe.INT32:case pe.SFIXED32:case pe.SINT32:case pe.FIXED32:case pe.UINT32:return Ct(typeof e=="number"),e;case pe.FLOAT:case pe.DOUBLE:return Ct(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case pe.STRING:return Ct(typeof e=="string"),e;case pe.BOOL:return Ct(typeof e=="boolean"),e;case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return Ct(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case pe.BYTES:return Ct(e instanceof Uint8Array),HC.enc(e)}}const Zs=Symbol("@bufbuild/protobuf/unknown-fields"),D1={readUnknownFields:!0,readerFactory:t=>new sM(t)},N1={writeUnknownFields:!0,writerFactory:()=>new aM};function vM(t){return t?Object.assign(Object.assign({},D1),t):D1}function yM(t){return t?Object.assign(Object.assign({},N1),t):N1}function bM(){return{makeReadOptions:vM,makeWriteOptions:yM,listUnknownFields(t){var e;return(e=t[Zs])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Zs]},writeUnknownFields(t,e){const i=t[Zs];if(i)for(const a of i)e.tag(a.no,a.wireType).raw(a.data)},onUnknownField(t,e,n,i){const a=t;Array.isArray(a[Zs])||(a[Zs]=[]),a[Zs].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,a){const o=t.getType(),c=a?e.len:e.pos+n;let u,f;for(;e.pos<c&&([u,f]=e.tag(),!(a===!0&&f==_t.EndGroup));){const h=o.fields.find(u);if(!h){const m=e.skip(f,u);i.readUnknownFields&&this.onUnknownField(t,u,f,m);continue}L1(t,e,h,f,i)}if(a&&(f!=_t.EndGroup||u!==n))throw new Error("invalid end group tag")},readField:L1,writeMessage(t,e,n){const i=t.getType();for(const a of i.fields.byNumber()){if(!GC(a,t)){if(a.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(a.name," to binary: required field not set"));continue}const o=a.oneof?t[a.oneof.localName].value:t[a.localName];j1(a,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&j1(t,e,n,i)}}}function L1(t,e,n,i,a){let{repeated:o,localName:c}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=c&&delete t.value,t.case=c,c="value"),n.kind){case"scalar":case"enum":const u=n.kind=="enum"?pe.INT32:n.T;let f=Ad;if(n.kind=="scalar"&&n.L>0&&(f=TM),o){let b=t[c];if(i==_t.LengthDelimited&&u!=pe.STRING&&u!=pe.BYTES){let C=e.uint32()+e.pos;for(;e.pos<C;)b.push(f(e,u))}else b.push(f(e,u))}else t[c]=f(e,u);break;case"message":const h=n.T;o?t[c].push(dd(e,new h,a,n)):Wa(t[c])?dd(e,t[c],a,n):(t[c]=dd(e,new h,a,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(t[c]=h.fieldWrapper.unwrapField(t[c])));break;case"map":let[m,v]=SM(n,e,a);t[c][m]=v;break}}function dd(t,e,n,i){const a=e.getType().runtime.bin,o=i==null?void 0:i.delimited;return a.readMessage(e,t,o?i.no:t.uint32(),n,o),e}function SM(t,e,n){const i=e.uint32(),a=e.pos+i;let o,c;for(;e.pos<a;){const[u]=e.tag();switch(u){case 1:o=Ad(e,t.K);break;case 2:switch(t.V.kind){case"scalar":c=Ad(e,t.V.T);break;case"enum":c=e.int32();break;case"message":c=dd(e,new t.V.T,n,void 0);break}break}}if(o===void 0&&(o=Ro(t.K,ca.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),c===void 0)switch(t.V.kind){case"scalar":c=Ro(t.V.T,ca.BIGINT);break;case"enum":c=t.V.T.values[0].no;break;case"message":c=new t.V.T;break}return[o,c]}function TM(t,e){const n=Ad(t,e);return typeof n=="bigint"?n.toString():n}function Ad(t,e){switch(e){case pe.STRING:return t.string();case pe.BOOL:return t.bool();case pe.DOUBLE:return t.double();case pe.FLOAT:return t.float();case pe.INT32:return t.int32();case pe.INT64:return t.int64();case pe.UINT64:return t.uint64();case pe.FIXED64:return t.fixed64();case pe.BYTES:return t.bytes();case pe.FIXED32:return t.fixed32();case pe.SFIXED32:return t.sfixed32();case pe.SFIXED64:return t.sfixed64();case pe.SINT64:return t.sint64();case pe.UINT32:return t.uint32();case pe.SINT32:return t.sint32()}}function j1(t,e,n,i){Ct(e!==void 0);const a=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?pe.INT32:t.T;if(a)if(Ct(Array.isArray(e)),t.packed)CM(n,o,t.no,e);else for(const c of e)ac(n,o,t.no,c);else ac(n,o,t.no,e);break;case"message":if(a){Ct(Array.isArray(e));for(const c of e)U1(n,i,t,c)}else U1(n,i,t,e);break;case"map":Ct(typeof e=="object"&&e!=null);for(const[c,u]of Object.entries(e))kM(n,i,t,c,u);break}}function kM(t,e,n,i,a){t.tag(n.no,_t.LengthDelimited),t.fork();let o=i;switch(n.K){case pe.INT32:case pe.FIXED32:case pe.UINT32:case pe.SFIXED32:case pe.SINT32:o=Number.parseInt(i);break;case pe.BOOL:Ct(i=="true"||i=="false"),o=i=="true";break}switch(ac(t,n.K,1,o),n.V.kind){case"scalar":ac(t,n.V.T,2,a);break;case"enum":ac(t,pe.INT32,2,a);break;case"message":Ct(a!==void 0),t.tag(2,_t.LengthDelimited).bytes(a.toBinary(e));break}t.join()}function U1(t,e,n,i){const a=QC(n.T,i);n.delimited?t.tag(n.no,_t.StartGroup).raw(a.toBinary(e)).tag(n.no,_t.EndGroup):t.tag(n.no,_t.LengthDelimited).bytes(a.toBinary(e))}function ac(t,e,n,i){Ct(i!==void 0);let[a,o]=KC(e);t.tag(n,a)[o](i)}function CM(t,e,n,i){if(!i.length)return;t.tag(n,_t.LengthDelimited).fork();let[,a]=KC(e);for(let o=0;o<i.length;o++)t[a](i[o]);t.join()}function KC(t){let e=_t.Varint;switch(t){case pe.BYTES:case pe.STRING:e=_t.LengthDelimited;break;case pe.DOUBLE:case pe.FIXED64:case pe.SFIXED64:e=_t.Bit64;break;case pe.FIXED32:case pe.SFIXED32:case pe.FLOAT:e=_t.Bit32;break}const n=pe[t].toLowerCase();return[e,n]}function wM(){return{setEnumType:LC,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const a=i.localName,o=e,c=t;if(c[a]!=null)switch(i.kind){case"oneof":const u=c[a].case;if(u===void 0)continue;const f=i.findField(u);let h=c[a].value;f&&f.kind=="message"&&!Wa(h,f.T)?h=new f.T(h):f&&f.kind==="scalar"&&f.T===pe.BYTES&&(h=Kl(h)),o[a]={case:u,value:h};break;case"scalar":case"enum":let m=c[a];i.T===pe.BYTES&&(m=i.repeated?m.map(Kl):Kl(m)),o[a]=m;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===pe.BYTES)for(const[k,C]of Object.entries(c[a]))o[a][k]=Kl(C);else Object.assign(o[a],c[a]);break;case"message":const b=i.V.T;for(const k of Object.keys(c[a])){let C=c[a][k];b.fieldWrapper||(C=new b(C)),o[a][k]=C}break}break;case"message":const v=i.T;if(i.repeated)o[a]=c[a].map(b=>Wa(b,v)?b:new v(b));else{const b=c[a];v.fieldWrapper?v.typeName==="google.protobuf.BytesValue"?o[a]=Kl(b):o[a]=b:o[a]=Wa(b,v)?b:new v(b)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const a=e[i.localName],o=n[i.localName];if(i.repeated){if(a.length!==o.length)return!1;switch(i.kind){case"message":return a.every((c,u)=>i.T.equals(c,o[u]));case"scalar":return a.every((c,u)=>Vr(i.T,c,o[u]));case"enum":return a.every((c,u)=>Vr(pe.INT32,c,o[u]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":return i.T.equals(a,o);case"enum":return Vr(pe.INT32,a,o);case"scalar":return Vr(i.T,a,o);case"oneof":if(a.case!==o.case)return!1;const c=i.findField(a.case);if(c===void 0)return!0;switch(c.kind){case"message":return c.T.equals(a.value,o.value);case"enum":return Vr(pe.INT32,a.value,o.value);case"scalar":return Vr(c.T,a.value,o.value)}throw new Error("oneof cannot contain ".concat(c.kind));case"map":const u=Object.keys(a).concat(Object.keys(o));switch(i.V.kind){case"message":const f=i.V.T;return u.every(m=>f.equals(a[m],o[m]));case"enum":return u.every(m=>Vr(pe.INT32,a[m],o[m]));case"scalar":const h=i.V.T;return u.every(m=>Vr(h,a[m],o[m]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const a of e.fields.byMember()){const o=t[a.localName];let c;if(a.repeated)c=o.map(Ju);else if(a.kind=="map"){c=i[a.localName];for(const[u,f]of Object.entries(o))c[u]=Ju(f)}else a.kind=="oneof"?c=a.findField(o.case)?{case:o.case,value:Ju(o.value)}:{case:void 0}:c=Ju(o);i[a.localName]=c}for(const a of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,a.no,a.wireType,a.data);return n}}}function Ju(t){if(t===void 0)return t;if(Wa(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Kl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function EM(t,e,n){return{syntax:t,json:pM(),bin:bM(),util:Object.assign(Object.assign({},wM()),{newFieldList:e,initFields:n}),makeMessageType(i,a,o){return $A(this,i,a,o)},makeEnum:ZA,makeEnumType:jC,getEnumType:WA,makeExtension(i,a,o){return oM(this,i,a,o)}}}class xM{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function YC(t,e){const n=JC(t);return e?n:MM(AM(n))}function RM(t){return YC(t,!1)}const OM=JC;function JC(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let a=t.charAt(i);switch(a){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),e=!1;break;default:e&&(e=!1,a=a.toUpperCase()),n.push(a);break}}return n.join("")}const _M=new Set(["constructor","toString","toJSON","valueOf"]),PM=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),XC=t=>"".concat(t,"$"),AM=t=>PM.has(t)?XC(t):t,MM=t=>_M.has(t)?XC(t):t;class DM{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=RM(e)}addField(e){Ct(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function NM(t,e){var n,i,a,o,c,u;const f=[];let h;for(const m of typeof t=="function"?t():t){const v=m;if(v.localName=YC(m.name,m.oneof!==void 0),v.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:OM(m.name),v.repeated=(i=m.repeated)!==null&&i!==void 0?i:!1,m.kind=="scalar"&&(v.L=(a=m.L)!==null&&a!==void 0?a:ca.BIGINT),v.delimited=(o=m.delimited)!==null&&o!==void 0?o:!1,v.req=(c=m.req)!==null&&c!==void 0?c:!1,v.opt=(u=m.opt)!==null&&u!==void 0?u:!1,m.packed===void 0&&(v.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=pe.BYTES&&m.T!=pe.STRING),m.oneof!==void 0){const b=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!h||h.name!=b)&&(h=new DM(b)),v.oneof=h,h.addField(v)}f.push(v)}return f}const ae=EM("proto3",t=>new xM(t,e=>NM(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Ro(e.T,e.L);break}}});class vn extends ov{constructor(e){super(),this.seconds=ht.zero,this.nanos=0,ae.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ae.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const a=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(a))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ht.parse(a/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const a=(this.nanos+1e9).toString().substring(1);a.substring(3)==="000000"?i="."+a.substring(0,3)+"Z":a.substring(6)==="000"?i="."+a.substring(0,6)+"Z":i="."+a+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return vn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new vn({seconds:ht.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new vn().fromBinary(e,n)}static fromJson(e,n){return new vn().fromJson(e,n)}static fromJsonString(e,n){return new vn().fromJsonString(e,n)}static equals(e,n){return ae.util.equals(vn,e,n)}}vn.runtime=ae;vn.typeName="google.protobuf.Timestamp";vn.fields=ae.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const LM=ae.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:vn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:jM,repeated:!0},{no:5,name:"events",kind:"message",T:IM,repeated:!0}]),jM=ae.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:UM,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),UM=ae.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:vn},{no:3,name:"value",kind:"scalar",T:2}]),IM=ae.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:vn},{no:7,name:"normalized_end_timestamp",kind:"message",T:vn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),WC=ae.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),ci=ae.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Dt=ae.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),ro=ae.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),ic=ae.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),fc=ae.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),di=ae.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),$s=ae.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),zM=ae.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Di=ae.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),cv=ae.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Md,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:cw}]),Md=ae.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),BM=ae.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ae.getEnumType(Dt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),hc=ae.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ae.getEnumType(tg)},{no:4,name:"tracks",kind:"message",T:to,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:BM},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ae.getEnumType(Dd)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ae.getEnumType(di)},{no:18,name:"kind_details",kind:"enum",T:ae.getEnumType(qM),repeated:!0}]),tg=ae.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Dd=ae.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),qM=ae.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Ln=ae.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),HM=ae.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Za,repeated:!0}]),to=ae.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ae.getEnumType(ci)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ae.getEnumType(Dt)},{no:10,name:"layers",kind:"message",T:Za,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:HM,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ae.getEnumType(Ln)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:cw},{no:19,name:"audio_features",kind:"enum",T:ae.getEnumType(Di),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ae.getEnumType(WC)}]),Za=ae.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ae.getEnumType(ro)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),pn=ae.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ae.getEnumType(Ye)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:$C,oneof:"value"},{no:3,name:"speaker",kind:"message",T:FM,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:ew,oneof:"value"},{no:7,name:"transcription",kind:"message",T:VM,oneof:"value"},{no:8,name:"metrics",kind:"message",T:LM,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:ng,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:tw,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:nw,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:iw,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:rg,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:ag,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:sg,oneof:"value"}]),Ye=ae.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),FM=ae.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:ZC,repeated:!0}]),ZC=ae.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),$C=ae.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),ew=ae.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),VM=ae.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:GM,repeated:!0}]),GM=ae.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),ng=ae.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),tw=ae.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),nw=ae.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),iw=ae.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:rw,oneof:"value"}]),rw=ae.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),aw=ae.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),QM=ae.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ae.getEnumType(sw)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),sw=ae.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),KM=ae.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ae.getEnumType(ow)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),ow=ae.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),lw=ae.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:I1},{no:2,name:"screen",kind:"message",T:I1},{no:3,name:"resume_connection",kind:"enum",T:ae.getEnumType(fc)},{no:4,name:"disabled_codecs",kind:"message",T:YM},{no:5,name:"force_relay",kind:"enum",T:ae.getEnumType(fc)}]),I1=ae.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ae.getEnumType(fc)}]),YM=ae.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Md,repeated:!0},{no:2,name:"publish",kind:"message",T:Md,repeated:!0}]),cw=ae.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),ig=ae.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),uw=ae.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ae.getEnumType(ig)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),dw=ae.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),rg=ae.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ae.getEnumType(Ln)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:uw,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:dw,oneof:"content_header"}],{localName:"DataStream_Header"}),ag=ae.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),sg=ae.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),ui=ae.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),og=ae.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),JM=ae.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),XM=ae.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:as,oneof:"message"},{no:2,name:"answer",kind:"message",T:as,oneof:"message"},{no:3,name:"trickle",kind:"message",T:uv,oneof:"message"},{no:4,name:"add_track",kind:"message",T:cg,oneof:"message"},{no:5,name:"mute",kind:"message",T:dv,oneof:"message"},{no:6,name:"subscription",kind:"message",T:uf,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:fw,oneof:"message"},{no:8,name:"leave",kind:"message",T:df,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:pw,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:yw,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:bw,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Oi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:mw,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Tw,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:hw,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:t3,oneof:"message"}]),z1=ae.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:WM,oneof:"message"},{no:2,name:"answer",kind:"message",T:as,oneof:"message"},{no:3,name:"offer",kind:"message",T:as,oneof:"message"},{no:4,name:"trickle",kind:"message",T:uv,oneof:"message"},{no:5,name:"update",kind:"message",T:e3,oneof:"message"},{no:6,name:"track_published",kind:"message",T:fv,oneof:"message"},{no:8,name:"leave",kind:"message",T:df,oneof:"message"},{no:9,name:"mute",kind:"message",T:dv,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:n3,oneof:"message"},{no:11,name:"room_update",kind:"message",T:i3,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:a3,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:o3,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:c3,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:u3,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:$M,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ZM,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:d3,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:p3,oneof:"message"},{no:22,name:"request_response",kind:"message",T:m3,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:g3,oneof:"message"}]),lg=ae.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),cg=ae.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ae.getEnumType(ci)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ae.getEnumType(Dt)},{no:9,name:"layers",kind:"message",T:Za,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:lg,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ae.getEnumType(Ln)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ae.getEnumType(WC)}]),uv=ae.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ae.getEnumType(ui)},{no:3,name:"final",kind:"scalar",T:8}]),dv=ae.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),WM=ae.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:cv},{no:2,name:"participant",kind:"message",T:hc},{no:3,name:"other_participants",kind:"message",T:hc,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:gw,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:lw},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:QM},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Md,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),ZM=ae.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:gw,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:lw}]),fv=ae.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:to}]),$M=ae.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),as=ae.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),e3=ae.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:hc,repeated:!0}]),uf=ae.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:aw,repeated:!0}]),fw=ae.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ae.getEnumType(ro)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),hw=ae.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ae.getEnumType(Di),repeated:!0}]),t3=ae.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),df=ae.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ae.getEnumType(di)},{no:3,name:"action",kind:"enum",T:ae.getEnumType(ao)},{no:4,name:"regions",kind:"message",T:f3}]),ao=ae.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),pw=ae.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Za,repeated:!0}]),mw=ae.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),gw=ae.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),n3=ae.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:ZC,repeated:!0}]),i3=ae.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:cv}]),r3=ae.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ae.getEnumType(ic)},{no:3,name:"score",kind:"scalar",T:2}]),a3=ae.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:r3,repeated:!0}]),s3=ae.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ae.getEnumType(og)}]),o3=ae.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:s3,repeated:!0}]),hv=ae.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ae.getEnumType(ro)},{no:2,name:"enabled",kind:"scalar",T:8}]),l3=ae.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:hv,repeated:!0}]),c3=ae.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:hv,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:l3,repeated:!0}]),vw=ae.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),yw=ae.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:vw,repeated:!0}]),u3=ae.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),bw=ae.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:as},{no:2,name:"subscription",kind:"message",T:uf},{no:3,name:"publish_tracks",kind:"message",T:fv,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Sw,repeated:!0},{no:5,name:"offer",kind:"message",T:as},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),Sw=ae.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ae.getEnumType(ui)}]),Oi=ae.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ae.getEnumType(JM),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),Tw=ae.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),d3=ae.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),f3=ae.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:h3,repeated:!0}]),h3=ae.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),p3=ae.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ae.getEnumType(zM)}]),m3=ae.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ae.getEnumType(pv)},{no:3,name:"message",kind:"scalar",T:9}]),pv=ae.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),g3=ae.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function v3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fd={exports:{}},y3=fd.exports,B1;function b3(){return B1||(B1=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(y3,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],o={},c=null;function u(S,O){var _=S[O];if(typeof _.bind=="function")return _.bind(S);try{return Function.prototype.bind.call(_,S)}catch{return function(){return Function.prototype.apply.apply(_,[S,arguments])}}}function f(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?f:console[S]!==void 0?u(console,S):console.log!==void 0?u(console,"log"):e}function m(){for(var S=this.getLevel(),O=0;O<a.length;O++){var _=a[O];this[_]=O<S?e:this.methodFactory(_,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function v(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function b(S,O,_){return h(S)||v.apply(this,arguments)}function k(S,O){var _=this,L,I,j,E="loglevel";typeof S=="string"?E+=":"+S:typeof S=="symbol"&&(E=void 0);function D(V){var J=(a[V]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=J;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+J+";"}catch{}}}function U(){var V;if(!(typeof window===n||!E)){try{V=window.localStorage[E]}catch{}if(typeof V===n)try{var J=window.document.cookie,Y=encodeURIComponent(E),W=J.indexOf(Y+"=");W!==-1&&(V=/^([^;]+)/.exec(J.slice(W+Y.length+1))[1])}catch{}return _.levels[V]===void 0&&(V=void 0),V}}function K(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E)}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(V){var J=V;if(typeof J=="string"&&_.levels[J.toUpperCase()]!==void 0&&(J=_.levels[J.toUpperCase()]),typeof J=="number"&&J>=0&&J<=_.levels.SILENT)return J;throw new TypeError("log.setLevel() called with invalid level: "+V)}_.name=S,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=O||b,_.getLevel=function(){return j??I??L},_.setLevel=function(V,J){return j=N(V),J!==!1&&D(j),m.call(_)},_.setDefaultLevel=function(V){I=N(V),U()||_.setLevel(V,!1)},_.resetLevel=function(){j=null,K(),m.call(_)},_.enableAll=function(V){_.setLevel(_.levels.TRACE,V)},_.disableAll=function(V){_.setLevel(_.levels.SILENT,V)},_.rebuild=function(){if(c!==_&&(L=N(c.getLevel())),m.call(_),c===_)for(var V in o)o[V].rebuild()},L=N(c?c.getLevel():"WARN");var P=U();P!=null&&(j=N(P)),m.call(_)}c=new k,c.getLogger=function(O){if(typeof O!="symbol"&&typeof O!="string"||O==="")throw new TypeError("You must supply a name when creating a logger.");var _=o[O];return _||(_=o[O]=new k(O,c.methodFactory)),_};var C=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=C),c},c.getLoggers=function(){return o},c.default=c,c})}(fd)),fd.exports}var ff=b3(),ug;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(ug||(ug={}));var hi;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(hi||(hi={}));let Be=ff.getLogger("livekit");Object.values(hi).map(t=>ff.getLogger(t));Be.setDefaultLevel(ug.info);function hr(t){const e=ff.getLogger(t);return e.setDefaultLevel(Be.getLevel()),e}const S3=ff.getLogger("lk-e2ee"),Yl=7e3,T3=[0,300,2*2*300,3*3*300,4*4*300,Yl,Yl,Yl,Yl,Yl];class k3{constructor(e){this._retryDelays=e!==void 0?[...e]:T3}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function C3(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function B(t,e,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function u(m){try{h(i.next(m))}catch(v){c(v)}}function f(m){try{h(i.throw(m))}catch(v){c(v)}}function h(m){m.done?o(m.value):a(m.value).then(u,f)}h((i=i.apply(t,e||[])).next())})}function q1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof q1=="function"?q1(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(u,f){c=t[o](c),a(u,f,c.done,c.value)})}}function a(o,c,u,f){Promise.resolve(f).then(function(h){o({value:h,done:u})},c)}}var Xu={exports:{}},H1;function w3(){if(H1)return Xu.exports;H1=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(E,D,U){return Function.prototype.apply.call(E,D,U)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function i(j){console&&console.warn&&console.warn(j)}var a=Number.isNaN||function(E){return E!==E};function o(){o.init.call(this)}Xu.exports=o,Xu.exports.once=_,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(j){if(typeof j!="number"||j<0||a(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");c=j}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||a(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function f(j){return j._maxListeners===void 0?o.defaultMaxListeners:j._maxListeners}o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(E){for(var D=[],U=1;U<arguments.length;U++)D.push(arguments[U]);var K=E==="error",N=this._events;if(N!==void 0)K=K&&N.error===void 0;else if(!K)return!1;if(K){var P;if(D.length>0&&(P=D[0]),P instanceof Error)throw P;var V=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw V.context=P,V}var J=N[E];if(J===void 0)return!1;if(typeof J=="function")e(J,this,D);else for(var Y=J.length,W=C(J,Y),U=0;U<Y;++U)e(W[U],this,D);return!0};function h(j,E,D,U){var K,N,P;if(u(D),N=j._events,N===void 0?(N=j._events=Object.create(null),j._eventsCount=0):(N.newListener!==void 0&&(j.emit("newListener",E,D.listener?D.listener:D),N=j._events),P=N[E]),P===void 0)P=N[E]=D,++j._eventsCount;else if(typeof P=="function"?P=N[E]=U?[D,P]:[P,D]:U?P.unshift(D):P.push(D),K=f(j),K>0&&P.length>K&&!P.warned){P.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=j,V.type=E,V.count=P.length,i(V)}return j}o.prototype.addListener=function(E,D){return h(this,E,D,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(E,D){return h(this,E,D,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(j,E,D){var U={fired:!1,wrapFn:void 0,target:j,type:E,listener:D},K=m.bind(U);return K.listener=D,U.wrapFn=K,K}o.prototype.once=function(E,D){return u(D),this.on(E,v(this,E,D)),this},o.prototype.prependOnceListener=function(E,D){return u(D),this.prependListener(E,v(this,E,D)),this},o.prototype.removeListener=function(E,D){var U,K,N,P,V;if(u(D),K=this._events,K===void 0)return this;if(U=K[E],U===void 0)return this;if(U===D||U.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete K[E],K.removeListener&&this.emit("removeListener",E,U.listener||D));else if(typeof U!="function"){for(N=-1,P=U.length-1;P>=0;P--)if(U[P]===D||U[P].listener===D){V=U[P].listener,N=P;break}if(N<0)return this;N===0?U.shift():S(U,N),U.length===1&&(K[E]=U[0]),K.removeListener!==void 0&&this.emit("removeListener",E,V||D)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(E){var D,U,K;if(U=this._events,U===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete U[E]),this;if(arguments.length===0){var N=Object.keys(U),P;for(K=0;K<N.length;++K)P=N[K],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=U[E],typeof D=="function")this.removeListener(E,D);else if(D!==void 0)for(K=D.length-1;K>=0;K--)this.removeListener(E,D[K]);return this};function b(j,E,D){var U=j._events;if(U===void 0)return[];var K=U[E];return K===void 0?[]:typeof K=="function"?D?[K.listener||K]:[K]:D?O(K):C(K,K.length)}o.prototype.listeners=function(E){return b(this,E,!0)},o.prototype.rawListeners=function(E){return b(this,E,!1)},o.listenerCount=function(j,E){return typeof j.listenerCount=="function"?j.listenerCount(E):k.call(j,E)},o.prototype.listenerCount=k;function k(j){var E=this._events;if(E!==void 0){var D=E[j];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function C(j,E){for(var D=new Array(E),U=0;U<E;++U)D[U]=j[U];return D}function S(j,E){for(;E+1<j.length;E++)j[E]=j[E+1];j.pop()}function O(j){for(var E=new Array(j.length),D=0;D<E.length;++D)E[D]=j[D].listener||j[D];return E}function _(j,E){return new Promise(function(D,U){function K(P){j.removeListener(E,N),U(P)}function N(){typeof j.removeListener=="function"&&j.removeListener("error",K),D([].slice.call(arguments))}I(j,E,N,{once:!0}),E!=="error"&&L(j,K,{once:!0})})}function L(j,E,D){typeof j.on=="function"&&I(j,"error",E,D)}function I(j,E,D,U){if(typeof j.on=="function")U.once?j.once(E,D):j.on(E,D);else if(typeof j.addEventListener=="function")j.addEventListener(E,function K(N){U.once&&j.removeEventListener(E,K),D(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return Xu.exports}var zi=w3();let kw=!0,Cw=!0;function hd(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseInt(i[n],10)}function us(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,a=i.addEventListener;i.addEventListener=function(c,u){if(c!==e)return a.apply(this,arguments);const f=h=>{const m=n(h);m&&(u.handleEvent?u.handleEvent(m):u(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,f),a.apply(this,[c,f])};const o=i.removeEventListener;i.removeEventListener=function(c,u){if(c!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(u))return o.apply(this,arguments);const f=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[c,f])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function E3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(kw=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function x3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Cw=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function ww(){if(typeof window=="object"){if(kw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mv(t,e){Cw&&console.warn(t+" is deprecated, please use "+e+" instead.")}function R3(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=hd(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=hd(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=hd(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function F1(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ew(t){return F1(t)?Object.keys(t).reduce(function(e,n){const i=F1(t[n]),a=i?Ew(t[n]):t[n],o=i&&!Object.keys(a).length;return a===void 0||o?e:Object.assign(e,{[n]:a})},{}):t}function dg(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?dg(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(a=>{dg(t,t.get(a),n)})}))}function V1(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const o=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&o.push(c)}),o.forEach(c=>{t.forEach(u=>{u.type===i&&u.trackId===c.id&&dg(t,u,a)})}),a}const G1=ww;function xw(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const f={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const m=typeof u[h]=="object"?u[h]:{ideal:u[h]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const v=function(b,k){return b?b+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(m.ideal!==void 0){f.optional=f.optional||[];let b={};typeof m.ideal=="number"?(b[v("min",h)]=m.ideal,f.optional.push(b),b={},b[v("max",h)]=m.ideal,f.optional.push(b)):(b[v("",h)]=m.ideal,f.optional.push(b))}m.exact!==void 0&&typeof m.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[v("",h)]=m.exact):["min","max"].forEach(b=>{m[b]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[v(b,h)]=m[b])})}),u.advanced&&(f.optional=(f.optional||[]).concat(u.advanced)),f},a=function(u,f){if(e.version>=61)return f(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(m,v,b){v in m&&!(b in m)&&(m[b]=m[v],delete m[v])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=i(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const m=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete u.video.facingMode;let v;if(h.exact==="environment"||h.ideal==="environment"?v=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(v=["front"]),v)return n.mediaDevices.enumerateDevices().then(b=>{b=b.filter(C=>C.kind==="videoinput");let k=b.find(C=>v.some(S=>C.label.toLowerCase().includes(S)));return!k&&b.length&&v.includes("back")&&(k=b[b.length-1]),k&&(u.video.deviceId=h.exact?{exact:k.deviceId}:{ideal:k.deviceId}),u.video=i(u.video),G1("chrome: "+JSON.stringify(u)),f(u)})}u.video=i(u.video)}return G1("chrome: "+JSON.stringify(u)),f(u)},o=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(u,f,h){a(u,m=>{n.webkitGetUserMedia(m,f,v=>{h&&h(o(v))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return a(f,h=>u(h).then(m=>{if(h.audio&&!m.getAudioTracks().length||h.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(v=>{v.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(o(m))))}}}function Rw(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Ow(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===a.track.id):o={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=o,c.transceiver={receiver:o},c.streams=[i.stream],this.dispatchEvent(c)}),i.stream.getTracks().forEach(a=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===a.id):o={track:a};const c=new Event("track");c.track=a,c.receiver=o,c.transceiver={receiver:o},c.streams=[i.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else us(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function _w(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=a.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,f){let h=a.apply(this,arguments);return h||(h=e(this,u),this._senders.push(h)),h};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const f=this._senders.indexOf(u);f!==-1&&this._senders.splice(f,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(c=>{const u=this._senders.find(f=>f.track===c);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Pw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(c=>c._pc=this),o});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>V1(c,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(o=>o._pc=this),a}),us(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>V1(o,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,o,c;return this.getSenders().forEach(u=>{u.track===i&&(a?c=!0:a=u)}),this.getReceivers().forEach(u=>(u.track===i&&(o?c=!0:o=u),u.track===i)),c||a&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Aw(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(f)===-1&&this._shimmedLocalStreams[u.id].push(f):this._shimmedLocalStreams[u.id]=[u,f],f};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(h=>{if(this.getSenders().find(v=>v.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[c.id]=[c].concat(f)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],i.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const f=this._shimmedLocalStreams[u].indexOf(c);f!==-1&&this._shimmedLocalStreams[u].splice(f,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),a.apply(this,arguments)}}function Mw(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Aw(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(v=>this._reverseStreams[v.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(v=>{if(this.getSenders().find(k=>k.track===v))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const v=new t.MediaStream(m.getTracks());this._streams[m.id]=v,this._reverseStreams[v.id]=m,m=v}i.apply(this,[m])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const b=[].slice.call(arguments,1);if(b.length!==1||!b[0].getTracks().find(S=>S===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[v.id];if(C)C.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new t.MediaStream([m]);this._streams[v.id]=S,this._reverseStreams[S.id]=v,this.addStream(S)}return this.getSenders().find(S=>S.track===m)};function o(h,m){let v=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(b=>{const k=h._reverseStreams[b],C=h._streams[k.id];v=v.replace(new RegExp(C.id,"g"),k.id)}),new RTCSessionDescription({type:m.type,sdp:v})}function c(h,m){let v=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(b=>{const k=h._reverseStreams[b],C=h._streams[k.id];v=v.replace(new RegExp(k.id,"g"),C.id)}),new RTCSessionDescription({type:m.type,sdp:v})}["createOffer","createAnswer"].forEach(function(h){const m=t.RTCPeerConnection.prototype[h],v={[h](){const b=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[C=>{const S=o(this,C);b[0].apply(null,[S])},C=>{b[1]&&b[1].apply(null,C)},arguments[2]]):m.apply(this,arguments).then(C=>o(this,C))}};t.RTCPeerConnection.prototype[h]=v[h]});const u=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=c(this,arguments[0]),u.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const h=f.get.apply(this);return h.type===""?h:o(this,h)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let b;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(S=>m.track===S)&&(b=this._streams[k])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function fg(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function Dw(t,e){us(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var Q1=Object.freeze({__proto__:null,fixNegotiationNeeded:Dw,shimAddTrackRemoveTrack:Mw,shimAddTrackRemoveTrackWithNative:Aw,shimGetSendersWithDtmf:_w,shimGetUserMedia:xw,shimMediaStream:Rw,shimOnTrack:Ow,shimPeerConnection:fg,shimSenderReceiverGetStats:Pw});function Nw(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,o,c){mv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(o,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(c,u,f){u in c&&!(f in c)&&(c[f]=c[u],delete c[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),o(c)},i&&i.prototype.getSettings){const c=i.prototype.getSettings;i.prototype.getSettings=function(){const u=c.apply(this,arguments);return a(u,"mozAutoGainControl","autoGainControl"),a(u,"mozNoiseSuppression","noiseSuppression"),u}}if(i&&i.prototype.applyConstraints){const c=i.prototype.applyConstraints;i.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u,"autoGainControl","mozAutoGainControl"),a(u,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[u])}}}}function O3(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function Lw(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hg(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const o=t.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=c[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,c,u]=arguments;return i.apply(this,[o||null]).then(f=>{if(e.version<53&&!c)try{f.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;f.forEach((m,v)=>{f.set(v,Object.assign({},m,{type:n[m.type]||m.type}))})}return f}).then(c,u)}}function jw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(o=>o._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Uw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i}),us(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Iw(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){mv("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function zw(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Bw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(a){const{sender:c}=o,u=c.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=i,c.sendEncodings=i,this.setParametersPromises.push(c.setParameters(u).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return o})}function qw(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function Hw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Fw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var K1=Object.freeze({__proto__:null,shimAddTransceiver:Bw,shimCreateAnswer:Fw,shimCreateOffer:Hw,shimGetDisplayMedia:O3,shimGetParameters:qw,shimGetUserMedia:Nw,shimOnTrack:Lw,shimPeerConnection:hg,shimRTCDataChannel:zw,shimReceiverGetStats:Uw,shimRemoveStream:Iw,shimSenderGetStats:jw});function Vw(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>e.call(this,a,i)),i.getVideoTracks().forEach(a=>e.call(this,a,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return o&&o.forEach(u=>{this._localStreams?this._localStreams.includes(u)||this._localStreams.push(u):this._localStreams=[u]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(o=>{a.includes(o.track)&&this.removeTrack(o)})})}}function Gw(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(o=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(o)>=0)return;i._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,i.dispatchEvent(c)})}),e.apply(i,arguments)}}}function Qw(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,a=e.setLocalDescription,o=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(h,m){const v=arguments.length>=2?arguments[2]:arguments[0],b=n.apply(this,[v]);return m?(b.then(h,m),Promise.resolve()):b},e.createAnswer=function(h,m){const v=arguments.length>=2?arguments[2]:arguments[0],b=i.apply(this,[v]);return m?(b.then(h,m),Promise.resolve()):b};let u=function(f,h,m){const v=a.apply(this,[f]);return m?(v.then(h,m),Promise.resolve()):v};e.setLocalDescription=u,u=function(f,h,m){const v=o.apply(this,[f]);return m?(v.then(h,m),Promise.resolve()):v},e.setRemoteDescription=u,u=function(f,h,m){const v=c.apply(this,[f]);return m?(v.then(h,m),Promise.resolve()):v},e.addIceCandidate=u}function Kw(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>i(Yw(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,a,o){e.mediaDevices.getUserMedia(i).then(a,o)}).bind(e))}function Yw(t){return t&&t.video!==void 0?Object.assign({},t,{video:Ew(t.video)}):t}function Jw(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const o=[];for(let c=0;c<i.iceServers.length;c++){let u=i.iceServers[c];u.urls===void 0&&u.url?(mv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(i.iceServers[c])}i.iceServers=o}return new e(i,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Xw(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ww(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const o=this.getTransceivers().find(c=>c.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Zw(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Y1=Object.freeze({__proto__:null,shimAudioContext:Zw,shimCallbacksAPI:Qw,shimConstraints:Yw,shimCreateOfferLegacy:Ww,shimGetUserMedia:Kw,shimLocalStreamsAPI:Vw,shimRTCIceServerUrls:Jw,shimRemoteStreamsAPI:Gw,shimTrackEventTransceiver:Xw}),Wp={exports:{}},J1;function _3(){return J1||(J1=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,o)=>(o>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(a=>a.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const a={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let o=8;o<i.length;o+=2)switch(i[o]){case"raddr":a.relatedAddress=i[o+1];break;case"rport":a.relatedPort=parseInt(i[o+1],10);break;case"tcptype":a.tcpType=i[o+1];break;case"ufrag":a.ufrag=i[o+1],a.usernameFragment=i[o+1];break;default:a[i[o]]===void 0&&(a[i[o]]=i[o+1]);break}return a},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const a=n.component;a==="rtp"?i.push(1):a==="rtcp"?i.push(2):i.push(a),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const o=n.type;return i.push("typ"),i.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const a={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),a.name=i[0],a.clockRate=parseInt(i[1],10),a.channels=i.length===3?parseInt(i[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let a;const o=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<o.length;c++)a=o[c].trim().split("="),i[a[0].trim()]=a[1];return i},e.writeFmtp=function(n){let i="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?o.push(c+"="+n.parameters[c]):o.push(c)}),i+="a=fmtp:"+a+" "+o.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{i+="a=rtcp-fb:"+a+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,i),10)},o=n.indexOf(":",i);return o>-1?(a.attribute=n.substring(i+1,o),a.value=n.substring(o+1)):a.attribute=n.substring(i+1),a},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(a=>parseInt(a,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let a="a=setup:"+i+`\r
`;return n.fingerprints.forEach(o=>{a+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),a},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const a=e.matchPrefix(n+i,"a=ice-ufrag:")[0],o=e.matchPrefix(n+i,"a=ice-pwd:")[0];return a&&o?{usernameFragment:a.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");i.profile=o[2];for(let u=3;u<o.length;u++){const f=o[u],h=e.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(h){const m=e.parseRtpMap(h),v=e.matchPrefix(n,"a=fmtp:"+f+" ");switch(m.parameters=v.length?e.parseFmtp(v[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(e.parseRtcpFb),i.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(u=>{i.headerExtensions.push(e.parseExtmap(u))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(u=>{c.forEach(f=>{u.rtcpFeedback.find(m=>m.type===f.type&&m.parameter===f.parameter)||u.rtcpFeedback.push(f)})}),i},e.writeRtpDescription=function(n,i){let a="";a+="m="+n+" ",a+=i.codecs.length>0?"9":"0",a+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=i.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let o=0;return i.codecs.forEach(c=>{c.maxptime>o&&(o=c.maxptime)}),o>0&&(a+="a=maxptime:"+o+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(n){const i=[],a=e.parseRtpParameters(n),o=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(n,"a=ssrc:").map(b=>e.parseSsrcMedia(b)).filter(b=>b.attribute==="cname"),f=u.length>0&&u[0].ssrc;let h;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(b=>b.substring(17).split(" ").map(C=>parseInt(C,10)));m.length>0&&m[0].length>1&&m[0][0]===f&&(h=m[0][1]),a.codecs.forEach(b=>{if(b.name.toUpperCase()==="RTX"&&b.parameters.apt){let k={ssrc:f,codecPayloadType:parseInt(b.parameters.apt,10)};f&&h&&(k.rtx={ssrc:h}),i.push(k),o&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:f,mechanism:c?"red+ulpfec":"red"},i.push(k))}}),i.length===0&&f&&i.push({ssrc:f});let v=e.matchPrefix(n,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substring(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substring(5),10)*1e3*.95-50*40*8:v=void 0,i.forEach(b=>{b.maxBitrate=v})),i},e.parseRtcpParameters=function(n){const i={},a=e.matchPrefix(n,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];a&&(i.cname=a.value,i.ssrc=a.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=o.length>0,i.compound=o.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return i.mux=c.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return i=a[0].substring(7).split(" "),{stream:i[0],track:i[1]};const o=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(o.length>0)return i=o[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let o;a.length>0&&(o=parseInt(a[0].substring(19),10)),isNaN(o)&&(o=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:i.fmt,maxMessageSize:o};const u=e.matchPrefix(n,"a=sctpmap:");if(u.length>0){const f=u[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,i){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&a.push("a=max-message-size:"+i.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,a){let o;const c=i!==void 0?i:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+o+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const a=e.splitLines(n);for(let o=0;o<a.length;o++)switch(a[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[o].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let a=0;a<i.length;a++)if(i[a].length<2||i[a].charAt(1)!=="=")return!1;return!0},t.exports=e}(Wp)),Wp.exports}var $w=_3(),so=v3($w),P3=FA({__proto__:null,default:so},[$w]);function pd(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const a=new e(i),o=so.parseCandidate(i.candidate);for(const c in o)c in a||Object.defineProperty(a,c,{value:o[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,us(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function pg(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||us(t,"icecandidate",e=>{if(e.candidate){const n=so.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function md(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const f=so.splitSections(u.sdp);return f.shift(),f.some(h=>{const m=so.parseMLine(h);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(u){const f=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const h=parseInt(f[1],10);return h!==h?-1:h},a=function(u){let f=65536;return e.browser==="firefox"&&(e.version<57?u===-1?f=16384:f=2147483637:e.version<60?f=e.version===57?65535:65536:f=2147483637),f},o=function(u,f){let h=65536;e.browser==="firefox"&&e.version===57&&(h=65535);const m=so.matchPrefix(u.sdp,"a=max-message-size:");return m.length>0?h=parseInt(m[0].substring(19),10):e.browser==="firefox"&&f!==-1&&(h=2147483637),h},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=i(arguments[0]),h=a(f),m=o(arguments[0],f);let v;h===0&&m===0?v=Number.POSITIVE_INFINITY:h===0||m===0?v=Math.max(h,m):v=Math.min(h,m);const b={};Object.defineProperty(b,"maxMessageSize",{get(){return v}}),this._sctp=b}return c.apply(this,arguments)}}function gd(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,a){const o=i.send;i.send=function(){const u=arguments[0],f=u.length||u.size||u.byteLength;if(i.readyState==="open"&&a.sctp&&f>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},us(t,"datachannel",i=>(e(i.channel,i.target),i))}function mg(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const o=a.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const c=new Event("connectionstatechange",a);o.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function gg(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:o}):a.sdp=o}return n.apply(this,arguments)}}function vd(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function yd(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}var A3=Object.freeze({__proto__:null,removeExtmapAllowMixed:gg,shimAddIceCandidateNullOrEmpty:vd,shimConnectionState:mg,shimMaxMessageSize:md,shimParameterlessSetLocalDescription:yd,shimRTCIceCandidate:pd,shimRTCIceCandidateRelayProtocol:pg,shimSendThrowTypeError:gd});function M3(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=ww,i=R3(t),a={browserDetails:i,commonShim:A3,extractVersion:hd,disableLog:E3,disableWarnings:x3,sdp:P3};switch(i.browser){case"chrome":if(!Q1||!fg||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=Q1,vd(t,i),yd(t),xw(t,i),Rw(t),fg(t,i),Ow(t),Mw(t,i),_w(t),Pw(t),Dw(t,i),pd(t),pg(t),mg(t),md(t,i),gd(t),gg(t,i);break;case"firefox":if(!K1||!hg||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=K1,vd(t,i),yd(t),Nw(t,i),hg(t,i),Lw(t),Iw(t),jw(t),Uw(t),zw(t),Bw(t),qw(t),Hw(t),Fw(t),pd(t),mg(t),md(t,i),gd(t);break;case"safari":if(!Y1||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=Y1,vd(t,i),yd(t),Jw(t),Ww(t),Qw(t),Vw(t),Gw(t),Xw(t),Kw(t),Zw(t),pd(t),pg(t),md(t,i),gd(t),gg(t,i);break;default:n("Unsupported browser!");break}return a}M3({window:typeof window>"u"?void 0:window});const D3=10,Wu="lk_e2ee",N3="LKFrameEncryptionKey",L3={sharedKey:!1,ratchetSalt:N3,ratchetWindowSize:8,failureTolerance:D3,keyringSize:16};var sa;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(sa||(sa={}));var X1;(function(t){t.KeyRatcheted="keyRatcheted"})(X1||(X1={}));var aa;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(aa||(aa={}));var W1;(function(t){t.Error="cryptorError"})(W1||(W1={}));function j3(){return U3()||vg()}function vg(){return typeof window.RTCRtpScriptTransform<"u"}function U3(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class dI extends zi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i)=>{Be.debug("key ratcheted event received",{material:n,keyIndex:i})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},L3),e),this.on(sa.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const a={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),a),this.emit(sa.SetKey,a)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(sa.RatchetRequest,e,n)}}class fa extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Ge;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest"})(Ge||(Ge={}));class lt extends fa{constructor(e,n,i,a){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=a,this.reasonName=Ge[n]}}class gv extends fa{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class cr extends fa{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class I3 extends fa{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class jt extends fa{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class yg extends fa{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class Zp extends fa{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class Z1 extends fa{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:pv[n]}}var Nd;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Nd||(Nd={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Nd||(Nd={}));var $1;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})($1||($1={}));var ce;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(ce||(ce={}));var ue;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage"})(ue||(ue={}));var be;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected"})(be||(be={}));var ye;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate"})(ye||(ye={}));function z3(t){return typeof t>"u"?t:typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const B3=/version\/(\d+(\.?_?\d+)+)/i;let $p;function pi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if($p===void 0||e){const i=q3.find(a=>{let{test:o}=a;return o.test(n)});$p=i==null?void 0:i.describe(n)}return $p}const q3=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:bd(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:em(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:bd(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:em(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:bd(B3,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:em(t)}}}];function bd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function em(t){return t.includes("mac os")?bd(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var H3="2.11.4";const F3=H3,V3=15;class Yt{}Yt.setTimeout=function(){return setTimeout(...arguments)};Yt.setInterval=function(){return setInterval(...arguments)};Yt.clearTimeout=function(){return clearTimeout(...arguments)};Yt.clearInterval=function(){return clearInterval(...arguments)};const G3=5e3,Jl=[];var Wn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Wn||(Wn={}));class re extends zi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var a;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=re.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Be,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),G3):this.handleAppVisibilityChanged()},this.log=hr((a=i.loggerName)!==null&&a!==void 0?a:hi.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=re.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),$e(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===re.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===re.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Jl.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Jl.splice(Jl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),no(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),a=i.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(a?ye.AudioPlaybackStarted:ye.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(a?ye.AudioPlaybackFailed:ye.VideoPlaybackFailed,o):o.name==="AbortError"?Be.debug("".concat(a?"audio":"video"," playback aborted, likely due to new play request")):Be.warn("could not playback ".concat(a?"audio":"video"),o),a&&e&&i.some(c=>c.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ye.ElementAttached,e),e}detach(e){try{if(e){oo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(ye.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{oo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(ye.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=hr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Jl.forEach(i=>{i.parentElement||(n=!1)}),n&&Jl.push(e)}}handleAppVisibilityChanged(){return B(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===re.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Sn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Sn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function no(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(a=>{n.removeTrack(a)}),n.addTrack(t)),(!ua()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(ua()||Oo())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function oo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function a(h){switch(h){case e.Audio:return ci.AUDIO;case e.Video:return ci.VIDEO;default:return ci.DATA}}t.kindToProto=a;function o(h){switch(h){case ci.AUDIO:return e.Audio;case ci.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function c(h){switch(h){case n.Camera:return Dt.CAMERA;case n.Microphone:return Dt.MICROPHONE;case n.ScreenShare:return Dt.SCREEN_SHARE;case n.ScreenShareAudio:return Dt.SCREEN_SHARE_AUDIO;default:return Dt.UNKNOWN}}t.sourceToProto=c;function u(h){switch(h){case Dt.CAMERA:return n.Camera;case Dt.MICROPHONE:return n.Microphone;case Dt.SCREEN_SHARE:return n.ScreenShare;case Dt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=u;function f(h){switch(h){case og.ACTIVE:return i.Active;case og.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=f})(re||(re={}));class st{constructor(e,n,i,a,o){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:a,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const Q3=["vp8","h264"],K3=["vp8","h264","vp9","av1"];function Y3(t){return!!Q3.find(e=>e===t)}var eT;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(eT||(eT={}));var bg;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(bg||(bg={}));const pc={h90:new st(160,90,9e4,20),h180:new st(320,180,16e4,20),h216:new st(384,216,18e4,20),h360:new st(640,360,45e4,20),h540:new st(960,540,8e5,25),h720:new st(1280,720,17e5,30),h1080:new st(1920,1080,3e6,30),h1440:new st(2560,1440,5e6,30),h2160:new st(3840,2160,8e6,30)},Sg={h120:new st(160,120,7e4,20),h180:new st(240,180,125e3,20),h240:new st(320,240,14e4,20),h360:new st(480,360,33e4,20),h480:new st(640,480,5e5,20),h540:new st(720,540,6e5,25),h720:new st(960,720,13e5,30),h1080:new st(1440,1080,23e5,30),h1440:new st(1920,1440,38e5,30)},vv={h360fps3:new st(640,360,2e5,3,"medium"),h360fps15:new st(640,360,4e5,15,"medium"),h720fps5:new st(1280,720,8e5,5,"medium"),h720fps15:new st(1280,720,15e5,15,"medium"),h720fps30:new st(1280,720,2e6,30,"medium"),h1080fps15:new st(1920,1080,25e5,15,"medium"),h1080fps30:new st(1920,1080,5e6,30,"medium"),original:new st(0,0,7e6,30,"medium")},J3="|",tT="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function X3(t){const e=t.split(J3);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Cn(t){return B(this,void 0,void 0,function*(){return new Promise(e=>Yt.setTimeout(e,t))})}function Tg(){return"addTransceiver"in RTCPeerConnection.prototype}function kg(){return"addTrack"in RTCPeerConnection.prototype}function W3(){if(!("getCapabilities"in RTCRtpSender)||ua())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function Z3(){if(!("getCapabilities"in RTCRtpSender)||Oo())return!1;if(ua()){const n=pi();if(n!=null&&n.version&&ss(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function sc(t){return t==="av1"||t==="vp9"}function Cg(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}function $3(){return typeof RTCPeerConnection>"u"?!1:Tg()||kg()}function Oo(){var t;return((t=pi())===null||t===void 0?void 0:t.name)==="Firefox"}function ua(){var t;return((t=pi())===null||t===void 0?void 0:t.name)==="Safari"}function eD(){const t=pi();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function eE(){var t,e;return Sn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function tD(){const t=pi(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&ss(e,t.osVersion)>=0?!0:t.name==="Safari"&&ss(e,t.version)>=0}function Sn(){return typeof document<"u"}function Li(){return navigator.product=="ReactNative"}function wg(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function tE(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function nE(){if(!Li())return;let t=tE();if(t)return t.platform}function nT(){if(Sn())return window.devicePixelRatio;if(Li()){let t=tE();if(t)return t.devicePixelRatio}return 1}function ss(t,e){const n=t.split("."),i=e.split("."),a=Math.min(n.length,i.length);for(let o=0;o<a;++o){const c=parseInt(n[o],10),u=parseInt(i[o],10);if(c>u)return 1;if(c<u)return-1;if(o===a-1&&c===u)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function nD(t){for(const e of t)e.target.handleResize(e)}function iD(t){for(const e of t)e.target.handleVisibilityChanged(e)}let tm=null;const iT=()=>(tm||(tm=new ResizeObserver(nD)),tm);let nm=null;const rT=()=>(nm||(nm=new IntersectionObserver(iD,{root:null,rootMargin:"0px"})),nm);function rD(){var t;const e=new KM({sdk:ow.JS,protocol:V3,version:F3});return Li()&&(e.os=(t=nE())!==null&&t!==void 0?t:""),e}function aT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=document.createElement("canvas");a.width=t,a.height=e;const o=a.getContext("2d");o==null||o.fillRect(0,0,a.width,a.height),i&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const c=a.captureStream(),[u]=c.getTracks();if(!u)throw Error("Could not get empty media stream video track");return u.enabled=n,u}let Xl;function im(){if(!Xl){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[Xl]=i.stream.getAudioTracks(),!Xl)throw Error("Could not get empty media stream audio track");Xl.enabled=!1}return Xl.clone()}class iE{constructor(e,n){this.onFinally=n,this.promise=new Promise((i,a)=>B(this,void 0,void 0,function*(){this.resolve=i,this.reject=a,e&&(yield e(i,a))})).finally(()=>{var i;return(i=this.onFinally)===null||i===void 0?void 0:i.call(this)})}}function aD(t){return K3.includes(t)}function oa(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function sD(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Eg(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function oD(t,e){return t.segments.map(n=>{let{id:i,text:a,language:o,startTime:c,endTime:u,final:f}=n;var h;const m=(h=e.get(i))!==null&&h!==void 0?h:Date.now(),v=Date.now();return f?e.delete(i):e.set(i,m),{id:i,text:a,startTime:Number.parseInt(c.toString()),endTime:Number.parseInt(u.toString()),final:f,language:o,firstReceivedTime:m,lastReceivedTime:v}})}function lD(t){const{id:e,timestamp:n,message:i,editTimestamp:a}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:a?Number.parseInt(a.toString()):void 0,message:i}}function sT(t){switch(t.reason){case Ge.LeaveRequest:return t.context;case Ge.Cancelled:return di.CLIENT_INITIATED;case Ge.NotAllowed:return di.USER_REJECTED;case Ge.ServerUnreachable:return di.JOIN_FAILURE;default:return di.UNKNOWN_REASON}}function Sd(t){return t!==void 0?Number(t):void 0}function Ua(t){return t!==void 0?BigInt(t):void 0}function $a(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function pr(t){return!!t&&t.kind==re.Kind.Audio}function Fo(t){return!!t&&t.kind==re.Kind.Video}function Gr(t){return $a(t)&&Fo(t)}function Ia(t){return $a(t)&&pr(t)}function xg(t){return!!t&&!t.isLocal}function cD(t){return!!t&&!t.isLocal}function rm(t){return xg(t)&&Fo(t)}function uD(t){return t.isLocal}function dD(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let a=e;for(;a>0;){const o=i[a];if(o!==void 0&&(o&192)!==128)break;a--}n.push(i.slice(0,a)),i=i.slice(a)}return i.length>0&&n.push(i),n}function rE(t,e,n){var i,a,o,c;const{optionsWithoutProcessor:u,audioProcessor:f,videoProcessor:h}=oE(t??{}),m=e==null?void 0:e.processor,v=n==null?void 0:n.processor,b=u??{};return b.audio===!0&&(b.audio={}),b.video===!0&&(b.video={}),b.audio&&(Rg(b.audio,e),(i=(o=b.audio).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(f||m)&&(b.audio.processor=f??m)),b.video&&(Rg(b.video,n),(a=(c=b.video).deviceId)!==null&&a!==void 0||(c.deviceId={ideal:"default"}),(h||v)&&(b.video.processor=h??v)),b}function Rg(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function yv(t){var e,n,i,a;const o={};if(t.video)if(typeof t.video=="object"){const c={},u=c,f=t.video;Object.keys(f).forEach(h=>{switch(h){case"resolution":Rg(u,f.resolution);break;default:u[h]=f[h]}}),o.video=c,(e=(i=o.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else o.video=t.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return t.audio?typeof t.audio=="object"?(o.audio=t.audio,(n=(a=o.audio).deviceId)!==null&&n!==void 0||(a.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function aE(t){return B(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=sE();if(i){const a=i.createAnalyser();a.fftSize=2048;const o=a.frequencyBinCount,c=new Uint8Array(o);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(a),yield Cn(n),a.getByteTimeDomainData(c);const f=c.some(h=>h!==128&&h!==0);return i.close(),!f}return!1}()})}function sE(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>B(this,void 0,void 0,function*(){var a;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}(a=window.document.body)===null||a===void 0||a.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function fD(t){return t==="audioinput"?re.Source.Microphone:t==="videoinput"?re.Source.Camera:re.Source.Unknown}function oT(t){return t===re.Source.Microphone?"audioinput":t===re.Source.Camera?"videoinput":void 0}function hD(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,ua()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Td(t){return t.split("/")[1].toLowerCase()}function pD(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new fv({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function $e(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?$e(t.track):{})}}function mD(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function gD(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],a={};for(const o of i)t[o]!==e[o]&&(a[o]=(n=e[o])!==null&&n!==void 0?n:"");return a}function oE(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:z3(e)}}function vD(t){switch(t){case Dt.CAMERA:return re.Source.Camera;case Dt.MICROPHONE:return re.Source.Microphone;case Dt.SCREEN_SHARE:return re.Source.ScreenShare;case Dt.SCREEN_SHARE_AUDIO:return re.Source.ScreenShareAudio;default:return re.Source.Unknown}}class yD extends zi.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,a;const{kind:o,data:c}=n.data;switch(o){case"error":Be.error(c.error.message),this.emit(aa.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(u=>{this.postKey(u)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(aa.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const u=(a=this.room)===null||a===void 0?void 0:a.getParticipantByIdentity(c.participantIdentity);if(!u)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(aa.ParticipantEncryptionStatusChanged,c.enabled,u)}break;case"ratchetKey":this.keyProvider.emit(sa.KeyRatcheted,c.material,c.keyIndex);break}},this.onWorkerError=n=>{Be.error("e2ee worker encountered an error:",{error:n.error}),this.emit(aa.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!j3())throw new gv("tried to setup end-to-end encryption on an unsupported browser");if(Be.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:S3.getLevel()}};this.worker&&(Be.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Be.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Be.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(be.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ce.TrackPublished,(i,a)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Ln.NONE,a.identity)),e.on(ce.ConnectionStateChanged,i=>{i===We.Connected&&e.remoteParticipants.forEach(a=>{a.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Ln.NONE,a.identity)})})}).on(ce.TrackUnsubscribed,(i,a,o)=>{var c;const u={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:i.mediaStreamID}};(c=this.worker)===null||c===void 0||c.postMessage(u)}).on(ce.TrackSubscribed,(i,a,o)=>{this.setupE2EEReceiver(i,o.identity,a.trackInfo)}).on(ce.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ue.LocalTrackPublished,i=>B(this,void 0,void 0,function*(){this.setupE2EESender(i.track,i.track.sender)})),n.on(sa.SetKey,i=>this.postKey(i)).on(sa.RatchetRequest,(i,a)=>this.postRatchetRequest(i,a))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:a}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const c={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:a}};this.worker.postMessage(c)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!(i!=null&&i.mimeType)||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Td(i.mimeType):void 0)}}setupE2EESender(e,n){if(!$a(e)||!n){n||Be.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,a){return B(this,void 0,void 0,function*(){if(this.worker){if(vg()){const o={kind:"decode",participantIdentity:i,trackId:n,codec:a};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Wu in e&&a){const f={kind:"updateCodec",data:{trackId:n,codec:a,participantIdentity:i}};this.worker.postMessage(f);return}let o=e.writableStream,c=e.readableStream;if(!o||!c){const f=e.createEncodedStreams();e.writableStream=f.writable,o=f.writable,e.readableStream=f.readable,c=f.readable}const u={kind:"decode",data:{readableStream:c,writableStream:o,trackId:n,codec:a,participantIdentity:i}};this.worker.postMessage(u,[c,o])}e[Wu]=!0}})}handleSender(e,n,i){var a;if(!(Wu in e||!this.worker)){if(!(!((a=this.room)===null||a===void 0)&&a.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(vg()){Be.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Be.info("initialize encoded streams");const o=e.createEncodedStreams(),c={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(c,[o.readable,o.writable])}e[Wu]=!0}}}const am="default";class Ft{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Ft),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;if(((o=Ft.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){Be.debug("awaiting getUserMedia promise");try{n?yield Ft.userMediaPromiseMap.get(n):yield Promise.all(Ft.userMediaPromiseMap.values())}catch{Be.warn("error waiting for media permissons")}}let c=yield navigator.mediaDevices.enumerateDevices();if(a&&!(ua()&&i.hasDeviceInUse(n))&&(c.filter(f=>f.kind===n).length===0||c.some(f=>{const h=f.label==="",m=n?f.kind===n:!0;return h&&m}))){const f={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(f);c=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(m=>{m.stop()})}return i._previousDevices=c,n&&(c=c.filter(u=>u.kind===n)),c}()})}normalizeDeviceId(e,n,i){return B(this,void 0,void 0,function*(){if(n!==am)return n;const a=yield this.getDevices(e),o=a.find(u=>u.deviceId===am);if(!o){Be.warn("could not reliably determine default device");return}const c=a.find(u=>u.deviceId!==am&&u.groupId===(i??o.groupId));if(!c){Be.warn("could not reliably determine default device");return}return c==null?void 0:c.deviceId})}hasDeviceInUse(e){return e?Ft.userMediaPromiseMap.has(e):Ft.userMediaPromiseMap.size>0}}Ft.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Ft.userMediaPromiseMap=new Map;var oc;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(oc||(oc={}));class bD{constructor(){this.pendingTasks=new Map,this.taskMutex=new bn,this.nextTaskIndex=0}run(e){return B(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:oc.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=oc.RUNNING,yield e()}finally{n.status=oc.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return B(this,void 0,void 0,function*(){return this.run(()=>B(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function SD(t,e){const n=new URL(sD(t));return e.forEach((i,a)=>{n.searchParams.set(a,i)}),lE(n,"rtc")}function TD(t){const e=new URL(Eg(t));return lE(e,"validate")}function kD(t){return t.endsWith("/")?t:"".concat(t,"/")}function lE(t,e){return t.pathname="".concat(kD(t.pathname)).concat(e),t.toString()}const CD=["syncState","trickle","offer","answer","simulate","leave"];function wD(t){const e=CD.indexOf(t.case)>=0;return Be.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var dt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(dt||(dt={}));class bv{get currentState(){return this.state}get isDisconnected(){return this.state===dt.DISCONNECTING||this.state===dt.DISCONNECTED}get isEstablishingConnection(){return this.state===dt.CONNECTING||this.state===dt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=dt.DISCONNECTED,this.log=Be,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=hr((i=n.loggerName)!==null&&i!==void 0?i:hi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new bD,this.queuedRequests=[],this.closingLock=new bn,this.connectionLock=new bn,this.state=dt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,a){return B(this,void 0,void 0,function*(){return this.state=dt.CONNECTING,this.options=i,yield this.connect(e,n,i,a)})}reconnect(e,n,i,a){return B(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=dt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:a}))})}connect(e,n,i,a){this.connectOptions=i;const o=rD(),c=ED(n,o,i),u=SD(e,c),f=TD(u);return new Promise((h,m)=>B(this,void 0,void 0,function*(){const v=yield this.connectionLock.lock();try{const b=()=>B(this,void 0,void 0,function*(){this.close(),clearTimeout(k),m(new lt("room connection has been cancelled (signal)",Ge.Cancelled))}),k=setTimeout(()=>{this.close(),m(new lt("room connection has timed out (signal)",Ge.ServerUnreachable))},i.websocketTimeout);a!=null&&a.aborted&&b(),a==null||a.addEventListener("abort",b);const C=new URL(u);C.searchParams.has("access_token")&&C.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(C),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(u),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(k)},this.ws.onerror=S=>B(this,void 0,void 0,function*(){if(this.state!==dt.CONNECTED){this.state=dt.DISCONNECTED,clearTimeout(k);try{const O=yield fetch(f);if(O.status.toFixed(0).startsWith("4")){const _=yield O.text();m(new lt(_,Ge.NotAllowed,O.status))}else m(new lt("Encountered unknown websocket error during connection: ".concat(S.toString()),Ge.InternalError,O.status))}catch(O){m(new lt(O instanceof Error?O.message:"server was not reachable",Ge.ServerUnreachable))}return}this.handleWSError(S)}),this.ws.onmessage=S=>B(this,void 0,void 0,function*(){var O,_,L;let I;if(typeof S.data=="string"){const j=JSON.parse(S.data);I=z1.fromJson(j,{ignoreUnknownFields:!0})}else if(S.data instanceof ArrayBuffer)I=z1.fromBinary(new Uint8Array(S.data));else{this.log.error("could not decode websocket message: ".concat(typeof S.data),this.logContext);return}if(this.state!==dt.CONNECTED){let j=!1;if(((O=I.message)===null||O===void 0?void 0:O.case)==="join"?(this.state=dt.CONNECTED,a==null||a.removeEventListener("abort",b),this.pingTimeoutDuration=I.message.value.pingTimeout,this.pingIntervalDuration=I.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),h(I.message.value)):this.state===dt.RECONNECTING&&I.message.case!=="leave"?(this.state=dt.CONNECTED,a==null||a.removeEventListener("abort",b),this.startPingInterval(),((_=I.message)===null||_===void 0?void 0:_.case)==="reconnect"?h(I.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),h(void 0),j=!0)):this.isEstablishingConnection&&I.message.case==="leave"?m(new lt("Received leave request while trying to (re)connect",Ge.LeaveRequest,void 0,I.message.value.reason)):i.reconnect||m(new lt("did not receive join response, got ".concat((L=I.message)===null||L===void 0?void 0:L.case," instead"),Ge.InternalError)),!j)return}this.signalLatency&&(yield Cn(this.signalLatency)),this.handleSignalResponse(I)}),this.ws.onclose=S=>{this.isEstablishingConnection&&m(new lt("Websocket got closed during a (re)connection attempt",Ge.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:S.reason,code:S.code,wasClean:S.wasClean,state:this.state})),this.handleOnClose(S.reason)}}finally{v()}}))}close(){return B(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=dt.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const a=new Promise(o=>{e.ws?e.ws.onclose=()=>{o()}:o()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([a,Cn(250)])),e.ws=void 0}}finally{n&&(e.state=dt.DISCONNECTED),i()}}()})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Ld(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Ld(e)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new uv({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new dv({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return B(this,arguments,void 0,function(i,a){var o=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const u=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new mw({requestId:u,metadata:i,name:a,attributes:c})}),u}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new pw({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new yw({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:ht.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Tw({timestamp:ht.parse(Date.now()),rtt:ht.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new hw({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new df({reason:di.CLIENT_INITIATED,action:ao.DISCONNECT})})}sendRequest(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!a&&!wD(n)&&i.state===dt.RECONNECTING){i.queuedRequests.push(()=>B(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(a||(yield i.requestQueue.flush()),i.signalLatency&&(yield Cn(i.signalLatency)),!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),i.logContext);return}const c=new XM({message:n});try{i.useJSON?i.ws.send(c.toJsonString()):i.ws.send(c.toBinary())}catch(u){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:u}))}}()})}handleSignalResponse(e){var n,i;const a=e.message;if(a==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(a.case==="answer"){const c=lT(a.value);this.onAnswer&&this.onAnswer(c)}else if(a.case==="offer"){const c=lT(a.value);this.onOffer&&this.onOffer(c)}else if(a.case==="trickle"){const c=JSON.parse(a.value.candidateInit);this.onTrickle&&this.onTrickle(c,a.value.target)}else a.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=a.value.participants)!==null&&n!==void 0?n:[]):a.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(a.value):a.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=a.value.speakers)!==null&&i!==void 0?i:[]):a.case==="leave"?this.onLeave&&this.onLeave(a.value):a.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(a.value.sid,a.value.muted):a.case==="roomUpdate"?this.onRoomUpdate&&a.value.room&&this.onRoomUpdate(a.value.room):a.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(a.value):a.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(a.value):a.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(a.value):a.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(a.value):a.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(a.value):a.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(a.value):a.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(a.value):a.case==="pong"||(a.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(a.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):a.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(a.value):a.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(a.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:a.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return B(this,void 0,void 0,function*(){if(this.state===dt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Yt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Yt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Yt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Yt.clearInterval(this.pingInterval)}}function lT(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Ld(t){return new as({sdp:t.sdp,type:t.type})}function ED(t,e,n){var i;const a=new URLSearchParams;return a.set("access_token",t),n.reconnect&&(a.set("reconnect","1"),n.sid&&a.set("sid",n.sid)),a.set("auto_subscribe",n.autoSubscribe?"1":"0"),a.set("sdk",Li()?"reactnative":"js"),a.set("version",e.version),a.set("protocol",e.protocol.toString()),e.deviceModel&&a.set("device_model",e.deviceModel),e.os&&a.set("os",e.os),e.osVersion&&a.set("os_version",e.osVersion),e.browser&&a.set("browser",e.browser),e.browserVersion&&a.set("browser_version",e.browserVersion),n.adaptiveStream&&a.set("adaptive_stream","1"),n.reconnectReason&&a.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&a.set("network",navigator.connection.type),a}var ii={},sm={},om={exports:{}},cT;function Sv(){if(cT)return om.exports;cT=1;var t=om.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),om.exports}var uT;function xD(){return uT||(uT=1,function(t){var e=function(u){return String(Number(u))===u?Number(u):u},n=function(u,f,h,m){if(m&&!h)f[m]=e(u[1]);else for(var v=0;v<h.length;v+=1)u[v+1]!=null&&(f[h[v]]=e(u[v+1]))},i=function(u,f,h){var m=u.name&&u.names;u.push&&!f[u.push]?f[u.push]=[]:m&&!f[u.name]&&(f[u.name]={});var v=u.push?{}:m?f[u.name]:f;n(h.match(u.reg),v,u.names,u.name),u.push&&f[u.push].push(v)},a=Sv(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(u){var f={},h=[],m=f;return u.split(/(\r\n|\r|\n)/).filter(o).forEach(function(v){var b=v[0],k=v.slice(2);b==="m"&&(h.push({rtp:[],fmtp:[]}),m=h[h.length-1]);for(var C=0;C<(a[b]||[]).length;C+=1){var S=a[b][C];if(S.reg.test(k))return i(S,m,k)}}),f.media=h,f};var c=function(u,f){var h=f.split(/=(.+)/,2);return h.length===2?u[h[0]]=e(h[1]):h.length===1&&f.length>1&&(u[h[0]]=void 0),u};t.parseParams=function(u){return u.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(u){return u.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(u){for(var f=[],h=u.split(" ").map(e),m=0;m<h.length;m+=3)f.push({component:h[m],ip:h[m+1],port:h[m+2]});return f},t.parseImageAttributes=function(u){return u.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(c,{})})},t.parseSimulcastStreamList=function(u){return u.split(";").map(function(f){return f.split(",").map(function(h){var m,v=!1;return h[0]!=="~"?m=e(h):(m=e(h.substring(1,h.length)),v=!0),{scid:m,paused:v}})})}}(sm)),sm}var lm,dT;function RD(){if(dT)return lm;dT=1;var t=Sv(),e=/%[sdv%]/g,n=function(c){var u=1,f=arguments,h=f.length;return c.replace(e,function(m){if(u>=h)return m;var v=f[u];switch(u+=1,m){case"%%":return"%";case"%s":return String(v);case"%d":return Number(v);case"%v":return""}})},i=function(c,u,f){var h=u.format instanceof Function?u.format(u.push?f:f[u.name]):u.format,m=[c+"="+h];if(u.names)for(var v=0;v<u.names.length;v+=1){var b=u.names[v];u.name?m.push(f[u.name][b]):m.push(f[u.names[v]])}else m.push(f[u.name]);return n.apply(null,m)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return lm=function(c,u){u=u||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(v){v.payloads==null&&(v.payloads="")});var f=u.outerOrder||a,h=u.innerOrder||o,m=[];return f.forEach(function(v){t[v].forEach(function(b){b.name in c&&c[b.name]!=null?m.push(i(v,b,c)):b.push in c&&c[b.push]!=null&&c[b.push].forEach(function(k){m.push(i(v,b,k))})})}),c.media.forEach(function(v){m.push(i("m",t.m[0],v)),h.forEach(function(b){t[b].forEach(function(k){k.name in v&&v[k.name]!=null?m.push(i(b,k,v)):k.push in v&&v[k.push]!=null&&v[k.push].forEach(function(C){m.push(i(b,k,C))})})})}),m.join(`\r
`)+`\r
`},lm}var fT;function OD(){if(fT)return ii;fT=1;var t=xD(),e=RD(),n=Sv();return ii.grammar=n,ii.write=e,ii.parse=t.parse,ii.parseParams=t.parseParams,ii.parseFmtpConfig=t.parseFmtpConfig,ii.parsePayloads=t.parsePayloads,ii.parseRemoteCandidates=t.parseRemoteCandidates,ii.parseImageAttributes=t.parseImageAttributes,ii.parseSimulcastStreamList=t.parseSimulcastStreamList,ii}var Kr=OD();function Tv(t,e,n){var i,a,o;e===void 0&&(e=50),n===void 0&&(n={});var c=(i=n.isImmediate)!=null&&i,u=(a=n.callback)!=null&&a,f=n.maxWait,h=Date.now(),m=[];function v(){if(f!==void 0){var k=Date.now()-h;if(k+e>=f)return f-k}return e}var b=function(){var k=[].slice.call(arguments),C=this;return new Promise(function(S,O){var _=c&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,h=Date.now(),!c){var I=t.apply(C,k);u&&u(I),m.forEach(function(j){return(0,j.resolve)(I)}),m=[]}},v()),_){var L=t.apply(C,k);return u&&u(L),S(L)}m.push({resolve:S,reject:O})})};return b.cancel=function(k){o!==void 0&&clearTimeout(o),m.forEach(function(C){return(0,C.reject)(k)}),m=[]},b}const _D=.7,PD=20,lo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class hT extends zi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=Be,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Tv(a=>B(this,void 0,void 0,function*(){this.emit(lo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(a)a(o);else throw o}}),PD),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=hr((i=n.loggerName)!==null&&i!==void 0?i:hi.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return B(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return B(this,void 0,void 0,function*(){var n;let i;if(e.type==="offer"){let{stereoMids:a,nackMids:o}=AD(e);this.remoteStereoMids=a,this.remoteNackMids=o}else if(e.type==="answer"){const a=Kr.parse((n=e.sdp)!==null&&n!==void 0?n:"");a.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(c=>{if(!c.transceiver||o.mid!=c.transceiver.mid)return!1;let u=0;if(o.rtp.some(h=>h.codec.toUpperCase()===c.codec.toUpperCase()?(u=h.payload,!0):!1),u===0)return!0;let f=!1;for(const h of o.fmtp)if(h.payload===u){h.config=h.config.split(";").filter(m=>!m.includes("maxaveragebitrate")).join(";"),c.maxbr>0&&(h.config+=";maxaveragebitrate=".concat(c.maxbr*1e3)),f=!0;break}return f||c.maxbr>0&&o.fmtp.push({payload:u,config:"maxaveragebitrate=".concat(c.maxbr*1e3)}),!0})}),i=Kr.write(a)}yield this.setMungedSDP(e,i,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(lo.NegotiationComplete),e.sdp&&Kr.parse(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(lo.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){return B(this,void 0,void 0,function*(){var n;if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const i=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:i.sdp},this.logContext));const a=Kr.parse((n=i.sdp)!==null&&n!==void 0?n:"");a.media.forEach(o=>{mT(o),o.type==="audio"?pT(o,[],[]):o.type==="video"&&this.trackBitrates.some(c=>{if(!o.msid||!c.cid||!o.msid.includes(c.cid))return!1;let u=0;if(o.rtp.some(h=>h.codec.toUpperCase()===c.codec.toUpperCase()?(u=h.payload,!0):!1),u===0||(sc(c.codec)&&this.ensureVideoDDExtensionForSVC(o,a),c.codec!=="av1"))return!0;const f=Math.round(c.maxbr*_D);for(const h of o.fmtp)if(h.payload===u){h.config.includes("x-google-start-bitrate")||(h.config+=";x-google-start-bitrate=".concat(f));break}return!0})}),yield this.setMungedSDP(i,Kr.write(a)),this.onOffer(i)})}createAndSetAnswer(){return B(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=Kr.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(a=>{mT(a),a.type==="audio"&&pT(a,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Kr.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new jt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new jt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return B(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,a=new Map;if((yield this._pc.getStats()).forEach(u=>{switch(u.type){case"transport":n=u.selectedCandidatePairId;break;case"candidate-pair":n===""&&u.selected&&(n=u.id),i.set(u.id,u);break;case"remote-candidate":a.set(u.id,"".concat(u.address,":").concat(u.port));break}}),n==="")return;const c=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(c!==void 0)return a.get(c)})}setMungedSDP(e,n,i){return B(this,void 0,void 0,function*(){if(n){const a=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=a}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(a){let o="unknown error";a instanceof Error?o=a.message:typeof a=="string"&&(o=a);const c={error:o,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(c.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:c})),new yg(o)}})}ensureVideoDDExtensionForSVC(e,n){var i,a;if(!((i=e.ext)===null||i===void 0?void 0:i.some(c=>c.uri===tT))){if(this.ddExtID===0){let c=0;n.media.forEach(u=>{var f;u.type==="video"&&((f=u.ext)===null||f===void 0||f.forEach(h=>{h.value>c&&(c=h.value)}))}),this.ddExtID=c+1}(a=e.ext)===null||a===void 0||a.push({value:this.ddExtID,uri:tT})}}}function pT(t,e,n){let i=0;t.rtp.some(a=>a.codec==="opus"?(i=a.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(a=>a.payload===i&&a.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(a=>a.payload===i?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function AD(t){var e;const n=[],i=[],a=Kr.parse((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return a.media.forEach(c=>{var u;c.type==="audio"&&(c.rtp.some(f=>f.codec==="opus"?(o=f.payload,!0):!1),!((u=c.rtcpFb)===null||u===void 0)&&u.some(f=>f.payload===o&&f.type==="nack")&&i.push(c.mid),c.fmtp.some(f=>f.payload===o?(f.config.includes("sprop-stereo=1")&&n.push(c.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function mT(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const Og="vp8",MD={audioPreset:bg.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:vv.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Og,backupCodec:!0},cE={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},uE={deviceId:{ideal:"default"},resolution:pc.h720.resolution},DD={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new k3,disconnectOnPageLeave:!0,webAudioMix:!1},kv={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var kt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(kt||(kt={}));class ND{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var a;this.peerConnectionTimeout=kv.peerConnectionTimeout,this.log=Be,this.updateState=()=>{var o;const c=this.state,u=this.requiredTransports.map(f=>f.getConnectionState());u.every(f=>f==="connected")?this.state=kt.CONNECTED:u.some(f=>f==="failed")?this.state=kt.FAILED:u.some(f=>f==="connecting")?this.state=kt.CONNECTING:u.every(f=>f==="closed")?this.state=kt.CLOSED:u.some(f=>f==="closed")?this.state=kt.CLOSING:u.every(f=>f==="new")&&(this.state=kt.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(kt[c]," to ").concat(kt[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=hr((a=i.loggerName)!==null&&a!==void 0?a:hi.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new hT(e,i),this.subscriber=new hT(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,o,ui.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,o,ui.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var c;(c=this.onDataChannel)===null||c===void 0||c.call(this,o)},this.subscriber.onTrack=o=>{var c;(c=this.onTrack)===null||c===void 0||c.call(this,o)},this.publisher.onOffer=o=>{var c;(c=this.onPublisherOffer)===null||c===void 0||c.call(this,o)},this.state=kt.NEW,this.connectionLock=new bn,this.remoteOfferLock=new bn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return B(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return B(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return B(this,void 0,void 0,function*(){n===ui.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return B(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const n=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()}finally{n()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return B(this,void 0,void 0,function*(){var i;const a=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(o=>this.ensureTransportConnected(o,e,n)))}finally{a()}})}negotiate(e){return B(this,void 0,void 0,function*(){return new Promise((n,i)=>B(this,void 0,void 0,function*(){const a=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(a),i("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(lo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(lo.NegotiationComplete,()=>{clearTimeout(a),n()})}),yield this.publisher.negotiate(c=>{clearTimeout(a),i(c)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ui.PUBLISHER?this.publisher.getConnectedAddress():e===ui.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return B(this,arguments,void 0,function(i,a){var o=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((f,h)=>B(o,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),Yt.clearTimeout(v),h(new lt("room connection has been cancelled",Ge.Cancelled))};a!=null&&a.signal.aborted&&m(),a==null||a.signal.addEventListener("abort",m);const v=Yt.setTimeout(()=>{a==null||a.signal.removeEventListener("abort",m),h(new lt("could not establish pc connection",Ge.InternalError))},c);for(;this.state!==kt.CONNECTED;)if(yield Cn(50),a!=null&&a.signal.aborted){h(new lt("room connection has been cancelled",Ge.Cancelled));return}Yt.clearTimeout(v),a==null||a.signal.removeEventListener("abort",m),f()}))}()})}}class wt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=gT(n,wt.MAX_MESSAGE_BYTES),this.data=i?gT(i,wt.MAX_DATA_BYTES):void 0}static fromProto(e){return new wt(e.code,e.message,e.data)}toProto(){return new rw({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new wt(wt.ErrorCode[e],wt.ErrorMessage[e],n)}}wt.MAX_MESSAGE_BYTES=256;wt.MAX_DATA_BYTES=15360;wt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};wt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const dE=15360;function Cv(t){return new TextEncoder().encode(t).length}function gT(t,e){if(Cv(t)<=e)return t;let n=0,i=t.length;const a=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);a.encode(t.slice(0,o)).length<=e?n=o:i=o-1}return t.slice(0,n)}const wv=2e3;function hf(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const LD=1e3;class fE extends re{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,n,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Tv(()=>B(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>B(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ye.Ended,this)},this.reacquireTrack=!1,this.providedByUser=a,this.muteLock=new bn,this.pauseUpstreamLock=new bn,this.processorLock=new bn,this.restartLock=new bn,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==re.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return B(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{oo(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let a;if(this.processor&&e){const o=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(no(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),a=this.processor.processedTrack}finally{o()}}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(a??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{no(a??e,o)}))})}waitForDimensions(){return B(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:LD;return function*(){var i;if(e.kind===re.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=pi())===null||i===void 0?void 0:i.os)==="iOS"&&(yield Cn(10));const a=Date.now();for(;Date.now()-a<n;){const o=e.dimensions;if(o)return o;yield Cn(50)}throw new cr("unable to get track dimensions after timeout")}()})}setDeviceId(e){return B(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===oa(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),oa(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return B(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===re.Source.ScreenShare)return;const{deviceId:i,groupId:a}=e._mediaStreamTrack.getSettings(),o=e.kind===re.Kind.Audio?"audioinput":"videoinput";return n?Ft.getInstance().normalizeDeviceId(o,i,a):i}()})}mute(){return B(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return B(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return B(this,void 0,void 0,function*(){if(!this.sender)throw new cr("unable to replace an unpublished track");let i,a;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,a=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),a&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return B(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:a}=e,o=C3(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const c={audio:!1,video:!1};this.kind===re.Kind.Video?c.video=i||a?{deviceId:i,facingMode:a}:!0:c.audio=i?{deviceId:i}:!0,this.attachedElements.forEach(h=>{oo(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const f=(yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];return yield f.applyConstraints(o),f.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(f),this._constraints=e,this.emit(ye.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ye.Muted:ye.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eE()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return B(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ye.UpstreamPaused,this);const i=pi();if((i==null?void 0:i.name)==="Safari"&&ss(i.version,"12.0")<0)throw new gv("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return B(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ye.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return B(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;const c=yield i.processorLock.lock();try{i.log.debug("setting up processor",i.logContext);const u=document.createElement(i.kind),f={kind:i.kind,track:i._mediaStreamTrack,element:u,audioContext:i.audioContext};if(yield n.init(f),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.stopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(no(i._mediaStreamTrack,u),u.muted=!0,u.play().catch(h=>i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:h}))),i.processor=n,i.processorElement=u,i.processor.processedTrack){for(const h of i.attachedElements)h!==i.processorElement&&a&&(oo(i._mediaStreamTrack,h),no(i.processor.processedTrack,h));yield(o=i.sender)===null||o===void 0?void 0:o.replaceTrack(i.processor.processedTrack)}i.emit(ye.TrackProcessorUpdate,i.processor)}finally{c()}}()})}getProcessor(){return this.processor}stopProcessor(){return B(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,a;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((a=e.processorElement)===null||a===void 0||a.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ye.TrackProcessorUpdate))}()})}}class jd extends fE{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,re.Kind.Audio,n,i,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>B(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let c;try{c=yield this.getSenderStats()}catch(u){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}c&&this.prevStats&&(this._currentBitrate=hf(c,this.prevStats)),this.prevStats=c}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ye.AudioTrackFeatureUpdate,this,Di.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ye.AudioTrackFeatureUpdate,this,Di.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=a,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===re.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==oa(this._constraints.deviceId);return this.source===re.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return B(this,void 0,void 0,function*(){let n;if(e){const i=yv({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return B(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){Sn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},wv)))}setProcessor(e){return B(this,void 0,void 0,function*(){var n;const i=yield this.processorLock.lock();try{if(!Li()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const a={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(a),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ye.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return B(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(a=>{a.type==="outbound-rtp"&&(i={type:"audio",streamId:a.id,packetsSent:a.packetsSent,packetsLost:a.packetsLost,bytesSent:a.bytesSent,timestamp:a.timestamp,roundTripTime:a.roundTripTime,jitter:a.jitter})}),i})}checkForSilence(){return B(this,void 0,void 0,function*(){const e=yield aE(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ye.AudioSilenceDetected)),e})}}function jD(t,e,n){switch(t.kind){case"audio":return new jd(t,e,!1,void 0,n);case"video":return new Id(t,e,!1,n);default:throw new cr("unsupported track type: ".concat(t.kind))}}const UD=Object.values(pc),ID=Object.values(Sg),zD=Object.values(vv),BD=[pc.h180,pc.h360],qD=[Sg.h180,Sg.h360],HD=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,a;return new st(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((a=n.fps)!==null&&a!==void 0?a:30))))),n.fps,t.encoding.priority)}),_g=["q","h","f"];function Pg(t,e,n,i){var a,o;let c=i==null?void 0:i.videoEncoding;t&&(c=i==null?void 0:i.screenShareEncoding);const u=i==null?void 0:i.simulcast,f=i==null?void 0:i.scalabilityMode,h=i==null?void 0:i.videoCodec;if(!c&&!u&&!f||!e||!n)return[{}];c||(c=VD(t,e,n,h),Be.debug("using video encoding",c));const m=c.maxFramerate,v=new st(e,n,c.maxBitrate,c.maxFramerate,c.priority);if(f&&sc(h)){const C=new Ud(f),S=[];if(C.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(f));const O=pi();if(ua()||Li()||(O==null?void 0:O.name)==="Chrome"&&ss(O==null?void 0:O.version,"113")<0){const _=C.suffix=="h"?2:3;for(let L=0;L<C.spatial;L+=1)S.push({rid:_g[2-L],maxBitrate:c.maxBitrate/Math.pow(_,L),maxFramerate:v.encoding.maxFramerate});S[0].scalabilityMode=f}else S.push({maxBitrate:c.maxBitrate,maxFramerate:v.encoding.maxFramerate,scalabilityMode:f});return v.encoding.priority&&(S[0].priority=v.encoding.priority,S[0].networkPriority=v.encoding.priority),Be.debug("using svc encoding",{encodings:S}),S}if(!u)return[c];let b=[];t?b=(a=yT(i==null?void 0:i.screenShareSimulcastLayers))!==null&&a!==void 0?a:vT(t,v):b=(o=yT(i==null?void 0:i.videoSimulcastLayers))!==null&&o!==void 0?o:vT(t,v);let k;if(b.length>0){const C=b[0];b.length>1&&([,k]=b);const S=Math.max(e,n);if(S>=960&&k)return cm(e,n,[C,k,v],m);if(S>=480)return cm(e,n,[C,v],m)}return cm(e,n,[v])}function FD(t,e,n){var i,a,o,c;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Be.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const u=t.mediaStreamTrack.getSettings(),f=(i=u.width)!==null&&i!==void 0?i:(a=t.dimensions)===null||a===void 0?void 0:a.width,h=(o=u.height)!==null&&o!==void 0?o:(c=t.dimensions)===null||c===void 0?void 0:c.height;return t.source===re.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Pg(t.source===re.Source.ScreenShare,f,h,n)}function VD(t,e,n,i){const a=GD(t,e,n);let{encoding:o}=a[0];const c=Math.max(e,n);for(let u=0;u<a.length;u+=1){const f=a[u];if(o=f.encoding,f.width>=c)break}if(i)switch(i){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function GD(t,e,n){if(t)return zD;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?UD:ID}function vT(t,e){if(t)return HD(e);const{width:n,height:i}=e,a=n>i?n/i:i/n;return Math.abs(a-16/9)<Math.abs(a-4/3)?BD:qD}function cm(t,e,n,i){const a=[];if(n.forEach((o,c)=>{if(c>=_g.length)return;const u=Math.min(t,e),h={rid:_g[c],scaleResolutionDownBy:Math.max(1,u/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},m=i&&o.encoding.maxFramerate?Math.min(i,o.encoding.maxFramerate):o.encoding.maxFramerate;m&&(h.maxFramerate=m);const v=Oo()||c===0;o.encoding.priority&&v&&(h.priority=o.encoding.priority,h.networkPriority=o.encoding.priority),a.push(h)}),Li()&&nE()==="ios"){let o;a.forEach(u=>{o?u.maxFramerate&&u.maxFramerate>o&&(o=u.maxFramerate):o=u.maxFramerate});let c=!0;a.forEach(u=>{var f;u.maxFramerate!=o&&(c&&(c=!1,Be.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Be.info('Setting framerate of encoding "'.concat((f=u.rid)!==null&&f!==void 0?f:"",'" to ').concat(o)),u.maxFramerate=o)})}return a}function yT(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:a}=n;return i.maxBitrate>a.maxBitrate?1:i.maxBitrate<a.maxBitrate?-1:i.maxBitrate===a.maxBitrate&&i.maxFramerate&&a.maxFramerate?i.maxFramerate>a.maxFramerate?1:-1:0})}class Ud{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function QD(t){return t.source===re.Source.ScreenShare||t.constraints.height&&oa(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const KD=5e3;class Id extends fE{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3?arguments[3]:void 0;super(e,re.Kind.Video,n,i,a),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>B(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(u){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:u}));return}const c=new Map(o.map(u=>[u.rid,u]));if(this.prevStats){let u=0;c.forEach((f,h)=>{var m;const v=(m=this.prevStats)===null||m===void 0?void 0:m.get(h);u+=hf(f,v)}),this._currentBitrate=u}this.prevStats=c}),this.senderLock=new bn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Sn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},wv))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return B(this,void 0,void 0,function*(){var n,i,a,o,c;yield e.pauseUpstream.call(this);try{for(var u=!0,f=Yr(this.simulcastCodecs.values()),h;h=yield f.next(),n=h.done,!n;u=!0)o=h.value,u=!1,yield(c=o.sender)===null||c===void 0?void 0:c.replaceTrack(null)}catch(m){i={error:m}}finally{try{!u&&!n&&(a=f.return)&&(yield a.call(f))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return B(this,void 0,void 0,function*(){var n,i,a,o,c;yield e.resumeUpstream.call(this);try{for(var u=!0,f=Yr(this.simulcastCodecs.values()),h;h=yield f.next(),n=h.done,!n;u=!0){o=h.value,u=!1;const m=o;yield(c=m.sender)===null||c===void 0?void 0:c.replaceTrack(m.mediaStreamTrack)}}catch(m){i={error:m}}finally{try{!u&&!n&&(a=f.return)&&(yield a.call(f))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===re.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===re.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return B(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(a=>{var o;if(a.type==="outbound-rtp"){const c={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,framesPerSecond:a.framesPerSecond,framesSent:a.framesSent,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,bytesSent:a.bytesSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationDurations:a.qualityLimitationDurations,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges,rid:(o=a.rid)!==null&&o!==void 0?o:a.id,retransmittedPacketsSent:a.retransmittedPacketsSent,targetBitrate:a.targetBitrate,timestamp:a.timestamp},u=i.get(a.remoteId);u&&(c.jitter=u.jitter,c.packetsLost=u.packetsLost,c.roundTripTime=u.roundTripTime),n.push(c)}}),n.sort((a,o)=>{var c,u;return((c=o.frameWidth)!==null&&c!==void 0?c:0)-((u=a.frameWidth)!==null&&u!==void 0?u:0)}),n})}setPublishingQuality(e){const n=[];for(let i=Wn.LOW;i<=Wn.HIGH;i+=1)n.push(new hv({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}restartTrack(e){return B(this,void 0,void 0,function*(){var n,i,a,o,c;let u;if(e){const v=yv({video:e});typeof v.video!="boolean"&&(u=v.video)}yield this.restart(u);try{for(var f=!0,h=Yr(this.simulcastCodecs.values()),m;m=yield h.next(),n=m.done,!n;f=!0){o=m.value,f=!1;const v=o;v.sender&&((c=v.sender.transport)===null||c===void 0?void 0:c.state)!=="closed"&&(v.mediaStreamTrack=this.mediaStreamTrack.clone(),yield v.sender.replaceTrack(v.mediaStreamTrack))}}catch(v){i={error:v}}finally{try{!f&&!n&&(a=h.return)&&(yield a.call(h))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return B(this,arguments,void 0,function(i){var a=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var c,u,f,h,m,v;if(yield n.setProcessor.call(a,i,o),!((m=a.processor)===null||m===void 0)&&m.processedTrack)try{for(var b=!0,k=Yr(a.simulcastCodecs.values()),C;C=yield k.next(),c=C.done,!c;b=!0)h=C.value,b=!1,yield(v=h.sender)===null||v===void 0?void 0:v.replaceTrack(a.processor.processedTrack)}catch(S){u={error:S}}finally{try{!b&&!c&&(f=k.return)&&(yield f.call(k))}finally{if(u)throw u.error}}}()})}setDegradationPreference(e){return B(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},KD))}setPublishingCodecs(e){return B(this,void 0,void 0,function*(){var n,i,a,o,c,u,f;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const h=[];try{for(n=!0,i=Yr(e);a=yield i.next(),o=a.done,!o;n=!0){f=a.value,n=!1;const m=f;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(m.qualities);else{const v=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:v})),!v||!v.sender){for(const b of m.qualities)if(b.enabled){h.push(m.codec);break}}else v.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield bT(v.sender,v.encodings,m.qualities,this.senderLock,this.log,this.logContext))}}}catch(m){c={error:m}}finally{try{!n&&!o&&(u=i.return)&&(yield u.call(i))}finally{if(c)throw c.error}}return h})}setPublishingLayers(e){return B(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield bT(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eE()&&this.isInBackground&&this.source===re.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function bT(t,e,n,i,a,o){return B(this,void 0,void 0,function*(){const c=yield i.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const u=t.getParameters(),{encodings:f}=u;if(!f)return;if(f.length!==e.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:f,senderEncodings:e}));return}let h=!1;const m=pi();if((m==null?void 0:m.name)==="Chrome"&&ss(m==null?void 0:m.version,"133")>0&&f[0].scalabilityMode){const b=f[0],k=new Ud(b.scalabilityMode);let C=ro.OFF;if(n.forEach(S=>{S.enabled&&(C===ro.OFF||S.quality>C)&&(C=S.quality)}),C===ro.OFF)b.active&&(b.active=!1,h=!0);else if(!b.active||k.spatial!==C+1){h=!0,b.active=!0;const S=new Ud(e[0].scalabilityMode);k.spatial=C+1,k.suffix=S.suffix,k.spatial===1&&(k.suffix=void 0),b.scalabilityMode=k.toString(),b.scaleResolutionDownBy=Math.pow(2,2-C),e[0].maxBitrate&&(b.maxBitrate=e[0].maxBitrate/(b.scaleResolutionDownBy*b.scaleResolutionDownBy))}}else f.forEach((b,k)=>{var C;let S=(C=b.rid)!==null&&C!==void 0?C:"";S===""&&(S="q");const O=hE(S),_=n.find(L=>L.quality===O);_&&b.active!==_.enabled&&(h=!0,b.active=_.enabled,a.debug("setting layer ".concat(_.quality," to ").concat(b.active?"enabled":"disabled"),o),Oo()&&(_.enabled?(b.scaleResolutionDownBy=e[k].scaleResolutionDownBy,b.maxBitrate=e[k].maxBitrate,b.maxFrameRate=e[k].maxFrameRate):(b.scaleResolutionDownBy=4,b.maxBitrate=10,b.maxFrameRate=2)))});h&&(u.encodings=f,a.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:u.encodings})),yield t.setParameters(u))}finally{c()}})}function hE(t){switch(t){case"f":return Wn.HIGH;case"h":return Wn.MEDIUM;case"q":return Wn.LOW;default:return Wn.HIGH}}function ST(t,e,n,i){if(!n)return[new Za({quality:Wn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const a=n[0].scalabilityMode,o=new Ud(a),c=[],u=o.suffix=="h"?1.5:2,f=o.suffix=="h"?2:3;for(let h=0;h<o.spatial;h+=1)c.push(new Za({quality:Math.min(Wn.HIGH,o.spatial-1)-h,width:Math.ceil(t/Math.pow(u,h)),height:Math.ceil(e/Math.pow(u,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(f,h)):0,ssrc:0}));return c}return n.map(a=>{var o,c,u;const f=(o=a.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let h=hE((c=a.rid)!==null&&c!==void 0?c:"");return new Za({quality:h,width:Math.ceil(t/f),height:Math.ceil(e/f),bitrate:(u=a.maxBitrate)!==null&&u!==void 0?u:0,ssrc:0})})}const TT="_lossy",kT="_reliable",YD=2*1e3,um="leave-reconnect";var ri;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(ri||(ri={}));class JD extends zi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=kv.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=ri.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Be,this.handleDataChannel=i=>B(this,[i],void 0,function(a){var o=this;let{channel:c}=a;return function*(){if(c){if(c.label===kT)o.reliableDCSub=c;else if(c.label===TT)o.lossyDCSub=c;else return;o.log.debug("on data channel ".concat(c.id,", ").concat(c.label),o.logContext),c.onmessage=o.handleDataMessage}}()}),this.handleDataMessage=i=>B(this,void 0,void 0,function*(){var a,o;const c=yield this.dataProcessLock.lock();try{let u;if(i.data instanceof ArrayBuffer)u=i.data;else if(i.data instanceof Blob)u=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const f=pn.fromBinary(new Uint8Array(u));((a=f.value)===null||a===void 0?void 0:a.case)==="speaker"?this.emit(be.ActiveSpeakersUpdate,f.value.value.speakers):(((o=f.value)===null||o===void 0?void 0:o.case)==="user"&&WD(f,f.value.value),this.emit(be.DataPacketReceived,f))}finally{c()}}),this.handleDataError=i=>{const o=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:c}=i.error;this.log.error("DataChannel error on ".concat(o,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:c}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const o=i.currentTarget.maxRetransmits===0?Ye.LOSSY:Ye.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(i,a)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=f=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(f,"ms. giving up"),this.logContext),this.emit(be.Disconnected),this.close()},c=Date.now()-this.reconnectStart;let u=this.getNextRetryDelay({elapsedMs:c,retryCount:this.reconnectAttempts});if(u===null){o(c);return}i===um&&(u=0),this.log.debug("reconnecting in ".concat(u,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Yt.setTimeout(()=>this.attemptReconnect(a).finally(()=>this.reconnectTimeout=void 0),u)},this.waitForRestarted=()=>new Promise((i,a)=>{this.pcState===ri.Connected&&i();const o=()=>{this.off(be.Disconnected,c),i()},c=()=>{this.off(be.Restarted,o),a()};this.once(be.Restarted,o),this.once(be.Disconnected,c)}),this.updateAndEmitDCBufferStatus=i=>{const a=this.isBufferStatusLow(i);typeof a<"u"&&a!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,a),this.emit(be.DCBufferStatusChanged,a,i))},this.isBufferStatusLow=i=>{const a=this.dataChannelForKind(i);if(a)return a.bufferedAmount<=a.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===dt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect($s.RR_SIGNAL_DISCONNECTED))},this.log=hr((n=e.loggerName)!==null&&n!==void 0?n:hi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new bv(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new bn,this.dataProcessLock=new bn,this.dcBufferStatus=new Map([[Ye.LOSSY,!0],[Ye.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(be.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(be.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(be.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(be.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(be.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(be.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(be.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(be.SignalRequestResponse,i)}get logContext(){var e,n,i,a,o,c,u,f;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(a=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||a===void 0?void 0:a.sid,participant:(c=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||c===void 0?void 0:c.identity,pID:(f=(u=this.latestJoinResponse)===null||u===void 0?void 0:u.participant)===null||f===void 0?void 0:f.sid}}join(e,n,i,a){return B(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,i,a);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate(),this.clientConfiguration=o.clientConfiguration,setTimeout(()=>{this.emit(be.SignalConnected)},10),o}catch(o){if(o instanceof lt&&o.reason===Ge.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,a);throw o}})}close(){return B(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(be.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return B(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return B(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new cr("a track with the same ID has already been published");return new Promise((n,i)=>{const a=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new lt("publication of local track timed out, no response from server",Ge.InternalError))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(a),n(o)},reject:()=>{clearTimeout(a),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return B(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return B(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==kt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const a=this.makeRTCConfiguration(e);this.pcManager=new ND(a,e.subscriberPrimary,this.loggerOptions),this.emit(be.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,c)=>{this.client.sendIceCandidate(o,c)},this.pcManager.onPublisherOffer=o=>{this.client.sendOffer(o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,c,u)=>B(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(c)&&(this.publisherConnectionPromise=void 0),o===kt.CONNECTED){const m=this.pcState===ri.New;this.pcState=ri.Connected,m&&this.emit(be.Connected,e)}else o===kt.FAILED&&this.pcState===ri.Connected&&(this.pcState=ri.Disconnected,this.handleDisconnect("peerconnection failed",u==="failed"?$s.RR_SUBSCRIBER_FAILED:$s.RR_PUBLISHER_FAILED));const f=this.client.isDisconnected||this.client.currentState===dt.RECONNECTING,h=[kt.FAILED,kt.CLOSING,kt.CLOSED].includes(o);f&&h&&!this._isClosed&&this.emit(be.Offline)}),this.pcManager.onTrack=o=>{this.emit(be.MediaTrackAdded,o.track,o.streams[0],o.receiver)},XD((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>B(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>B(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(be.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(be.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(be.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(be.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",$s.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case ao.DISCONNECT:this.emit(be.Disconnected,e==null?void 0:e.reason),this.close();break;case ao.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(um);break;case ao.RESUME:this.handleDisconnect(um)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const a=[];e.iceServers.forEach(o=>{const c={urls:o.urls};o.username&&(c.username=o.username),o.credential&&(c.credential=o.credential),a.push(c)}),i.iceServers=a}return e.clientConfiguration&&e.clientConfiguration.forceRelay===fc.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(TT,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(kT,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return B(this,void 0,void 0,function*(){if(Tg())return yield this.createTransceiverRTCRtpSender(e,n,i);if(kg())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new jt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,a){return B(this,void 0,void 0,function*(){if(Tg())return this.createSimulcastTransceiverSender(e,n,i,a);if(kg())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new jt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new jt("publisher is closed");const a=[];e.mediaStream&&a.push(e.mediaStream),Fo(e)&&(e.codec=n.videoCodec);const o={direction:"sendonly",streams:a};return i&&(o.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(e,n,i,a){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new jt("publisher is closed");const o={direction:"sendonly"};a&&(o.sendEncodings=a);const c=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,c.sender),c.sender})}createRTCRtpSender(e){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new jt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return B(this,void 0,void 0,function*(){var n,i,a;if(!this._isClosed){if(this.attemptingReconnect){Be.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===fc.DISABLED||((a=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&a!==void 0?a:kt.NEW)===kt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let c=!0;o instanceof jt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),c=!1):o instanceof eo||(this.fullReconnectOnNext=!0),c?this.handleDisconnect("reconnect",$s.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(be.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return B(this,void 0,void 0,function*(){var n,i,a;try{if(!this.url||!this.token)throw new jt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(be.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new eo;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(c){throw c instanceof lt&&c.reason===Ge.NotAllowed?new jt("could not reconnect, token might be expired"):new eo}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(be.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==dt.CONNECTED)throw new eo("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(be.Restarted)}catch(o){const c=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(c){yield this.restartConnection(c);return}else throw(a=this.regionUrlProvider)===null||a===void 0||a.resetAttempts(),o}})}resumeConnection(e){return B(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new jt("could not reconnect, url or token not saved");if(!this.pcManager)throw new jt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(be.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(a){let o="";throw a instanceof Error&&(o=a.message,this.log.error(a.message,Object.assign(Object.assign({},this.logContext),{error:a}))),a instanceof lt&&a.reason===Ge.NotAllowed?new jt("could not reconnect, token might be expired"):a instanceof lt&&a.reason===Ge.LeaveRequest?a:new eo(o)}if(this.emit(be.SignalResumed),i){const a=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(a)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==dt.CONNECTED)throw new eo("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(be.Resumed)})}waitForPCInitialConnection(e,n){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new jt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return B(this,void 0,void 0,function*(){this.pcState=ri.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Cn(YD),!this.pcManager)throw new jt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=ri.Connected}catch(e){throw this.pcState=ri.Disconnected,new lt("could not establish PC connection, ".concat(e.message),Ge.InternalError)}})}publishRpcResponse(e,n,i,a){return B(this,void 0,void 0,function*(){const o=new pn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcResponse",value:new iw({requestId:n,value:a?{case:"error",value:a.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(o,Ye.RELIABLE)})}publishRpcAck(e,n){return B(this,void 0,void 0,function*(){const i=new pn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcAck",value:new nw({requestId:n})}});yield this.sendDataPacket(i,Ye.RELIABLE)})}sendDataPacket(e,n){return B(this,void 0,void 0,function*(){const i=e.toBinary();yield this.ensurePublisherConnected(n);const a=this.dataChannelForKind(n);a&&a.send(i),this.updateAndEmitDCBufferStatus(n)})}waitForBufferStatusLow(e){return new Promise((n,i)=>B(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const a=()=>i("Engine closed");for(this.once(be.Closing,a);!this.dcBufferStatus.get(e);)yield Cn(10);this.off(be.Closing,a),n()}}))}ensureDataTransportConnected(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var o;if(!i.pcManager)throw new jt("PC manager is closed");const c=a?i.pcManager.subscriber:i.pcManager.publisher,u=a?"Subscriber":"Publisher";if(!c)throw new lt("".concat(u," connection not set"),Ge.InternalError);let f=!1;!a&&!i.dataChannelForKind(n,a)&&(i.createDataChannels(),f=!0),!f&&!a&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(f=!0),f&&i.negotiate();const h=i.dataChannelForKind(n,a);if((h==null?void 0:h.readyState)==="open")return;const m=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<m;){if(c.isICEConnected&&((o=i.dataChannelForKind(n,a))===null||o===void 0?void 0:o.readyState)==="open")return;yield Cn(50)}throw new lt("could not establish ".concat(u," connection, state: ").concat(c.getICEConnectionState()),Ge.InternalError)}()})}ensurePublisherConnected(e){return B(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==kt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return B(this,void 0,void 0,function*(){return new Promise((e,n)=>B(this,void 0,void 0,function*(){if(!this.pcManager){n(new yg("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,a=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(be.Closing,a),this.pcManager.publisher.once(lo.RTPVideoPayloadTypes,o=>{const c=new Map;o.forEach(u=>{const f=u.codec.toLowerCase();aD(f)&&c.set(u.payload,f)}),this.emit(be.RTPVideoMapUpdate,c)});try{yield this.pcManager.negotiate(i),e()}catch(o){o instanceof yg&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",$s.RR_UNKNOWN),n(o)}finally{this.off(be.Closing,a)}}))})}dataChannelForKind(e,n){if(n){if(e===Ye.LOSSY)return this.lossyDCSub;if(e===Ye.RELIABLE)return this.reliableDCSub}else{if(e===Ye.LOSSY)return this.lossyDC;if(e===Ye.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),c=this.pcManager.subscriber.getRemoteDescription(),u=(a=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&a!==void 0?a:!0,f=new Array,h=new Array;e.forEach(m=>{m.isDesired!==u&&f.push(m.trackSid),m.isEnabled||h.push(m.trackSid)}),this.client.sendSyncState(new bw({answer:o?Ld({sdp:o.sdp,type:o.type}):void 0,offer:c?Ld({sdp:c.sdp,type:c.type}):void 0,subscription:new uf({trackSids:f,subscribe:!u,participantTracks:[]}),publishTracks:pD(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:h}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,a)=>{(i==null?void 0:i.id)!==void 0&&i.id!==null&&e.push(new Sw({label:i.label,id:i.id,target:a}))};return n(this.dataChannelForKind(Ye.LOSSY),ui.PUBLISHER),n(this.dataChannelForKind(Ye.RELIABLE),ui.PUBLISHER),n(this.dataChannelForKind(Ye.LOSSY,!0),ui.SUBSCRIBER),n(this.dataChannelForKind(Ye.RELIABLE,!0),ui.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Yt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Sn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Sn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class eo extends Error{}function XD(t){return t!==void 0&&t>13}function WD(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class Ag{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return wg(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return B(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(a=>a.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),Be.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return B(this,void 0,void 0,function*(){const n=yield fetch("".concat(ZD(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new lt("Could not fetch region settings: ".concat(n.statusText),n.status===401?Ge.NotAllowed:Ge.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function ZD(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class pE{get info(){return this._info}constructor(e,n,i){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0}}class $D extends pE{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>B(this,void 0,void 0,function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:i.content})}catch{return{done:!0,value:void 0}}}),return(){return B(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return B(this,void 0,void 0,function*(){var e,n,i,a;let o=new Set;try{for(var c=!0,u=Yr(this),f;f=yield u.next(),e=f.done,!e;c=!0){a=f.value,c=!1;const h=a;o.add(h)}}catch(h){n={error:h}}finally{try{!c&&!e&&(i=u.return)&&(yield i.call(u))}finally{if(n)throw n.error}}return Array.from(o)})}}class eN extends pE{constructor(e,n,i){super(e,n,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=Sd(e.chunkIndex),a=this.receivedChunks.get(i);if(a&&a.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength;const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>B(this,void 0,void 0,function*(){try{const{done:i,value:a}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(a),{done:!1,value:n.decode(a.content)})}catch{return{done:!0,value:void 0}}}),return(){return B(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return B(this,void 0,void 0,function*(){var e,n,i,a;let o="";try{for(var c=!0,u=Yr(this),f;f=yield u.next(),e=f.done,!e;c=!0)a=f.value,c=!1,o+=a}catch(h){n={error:h}}finally{try{!c&&!e&&(i=u.return)&&(yield i.call(u))}finally{if(n)throw n.error}}return o})}}class mE{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return B(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class tN extends mE{}class nN extends mE{}class gE extends re{constructor(e,n,i,a,o){super(e,i,o),this.sid=n,this.receiver=a}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ye.Muted:ye.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ye.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return B(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),wv)),mD()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:a,rtpTimestamp:o}=i;o&&this.rtpTimestamp!==o&&(this.emit(ye.TimeSyncUpdate,{timestamp:a,rtpTimestamp:o}),this.rtpTimestamp=o)}};e()}}class vE extends gE{constructor(e,n,i,a,o,c){super(e,n,re.Kind.Audio,i,c),this.monitorReceiver=()=>B(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const u=yield this.getReceiverStats();u&&this.prevStats&&this.receiver&&(this._currentBitrate=hf(u,this.prevStats)),this.prevStats=u}),this.audioContext=a,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;Li()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Li())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return B(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Cg(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Cg(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(a=>{i.connect(a),i=a}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ye.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(a=>{this.emit(ye.AudioPlaybackFailed,a)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return B(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const dm=100;class iN extends gE{constructor(e,n,i,a,o){super(e,n,re.Kind.Video,i,o),this.elementInfos=[],this.monitorReceiver=()=>B(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=hf(c,this.prevStats)),this.prevStats=c}),this.debouncedHandleResize=Tv(()=>{this.updateDimensions()},dm),this.adaptiveStreamSettings=a}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?oo(this._mediaStreamTrack,n):no(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new rN(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return B(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",a=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(i=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&a.set(o.id,o)}),n&&i!==""&&a.get(i)&&(n.mimeType=a.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const i=this.elementInfos.reduce((u,f)=>Math.max(u,f.visibilityChangedAt||0),0),a=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(u=>u.pictureInPicture),c=this.elementInfos.some(u=>u.visible)&&!a||o;if(this.lastVisible!==c){if(!c&&Date.now()-i<dm){Yt.setTimeout(()=>{this.updateVisibility()},dm);return}this.lastVisible=c,this.emit(ye.VisibilityChanged,c,this)}}updateDimensions(){var e,n;let i=0,a=0;const o=this.getPixelDensity();for(const c of this.elementInfos){const u=c.width()*o,f=c.height()*o;u+f>i+a&&(i=u,a=f)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===a||(this.lastDimensions={width:i,height:a},this.emit(ye.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?nT():n||(nT()>2?2:1)}}class rN{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var a;const{target:o,isIntersecting:c}=i;o===this.element&&(this.isIntersecting=c,this.isPiP=Wl(this.element),this.visibilityChangedAt=Date.now(),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this))},this.onEnterPiP=()=>{var i,a,o;(a=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||a===void 0||a.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Wl(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Wl(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??Mg(e),this.isPiP=Sn()&&Wl(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=Mg(this.element),this.isPiP=Wl(this.element),this.element.handleResize=()=>{var a;(a=this.handleResize)===null||a===void 0||a.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,rT().observe(this.element),iT().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,a,o;(e=rT())===null||e===void 0||e.unobserve(this.element),(n=iT())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(o=(a=window.documentPictureInPicture)===null||a===void 0?void 0:a.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function Wl(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Mg(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Mg(t,e){const n=e||window;let i=t.offsetTop,a=t.offsetLeft;const o=t.offsetWidth,c=t.offsetHeight,{hidden:u}=t,{display:f}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,a+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&a<n.pageXOffset+n.innerWidth&&i+c>n.pageYOffset&&a+o>n.pageXOffset&&!u&&f!=="none"}class ar extends zi.EventEmitter{constructor(e,n,i,a){var o;super(),this.metadataMuted=!1,this.encryption=Ln.NONE,this.log=Be,this.handleMuted=()=>{this.emit(ye.Muted)},this.handleUnmuted=()=>{this.emit(ye.Unmuted)},this.log=hr((o=a==null?void 0:a.loggerName)!==null&&o!==void 0?o:hi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=re.Source.Unknown}setTrack(e){this.track&&(this.track.off(ye.Muted,this.handleMuted),this.track.off(ye.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ye.Muted,this.handleMuted),e.on(ye.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),$e(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Ln.NONE}get audioTrack(){if(pr(this.track))return this.track}get videoTrack(){if(Fo(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=re.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===re.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(ar||(ar={}));class zd extends ar{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,a){super(e,n.sid,n.name,a),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ye.Ended)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&this.track.off(ye.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(ye.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return B(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return B(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return B(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return B(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(pr(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Di.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Di.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Di.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Di.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(Di.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Di.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function pf(t,e){return B(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:a,optionsWithoutProcessor:o}=oE(t);let c=o.audio,u=o.video;if(i&&typeof o.audio=="object"&&(o.audio.processor=i),a&&typeof o.video=="object"&&(o.video.processor=a),t.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const v=o.audio.deviceId;o.audio.deviceId={exact:v},n=!0,c=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:v}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const v=o.video.deviceId;o.video.deviceId={exact:v},n=!0,u=Object.assign(Object.assign({},o.video),{deviceId:{ideal:v}})}(o.audio===!0||typeof o.audio=="object"&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),(o.video===!0||typeof o.video=="object"&&!o.video.deviceId)&&(o.video={deviceId:"default"});const f=rE(o,cE,uE),h=yv(f),m=navigator.mediaDevices.getUserMedia(h);o.audio&&(Ft.userMediaPromiseMap.set("audioinput",m),m.catch(()=>Ft.userMediaPromiseMap.delete("audioinput"))),o.video&&(Ft.userMediaPromiseMap.set("videoinput",m),m.catch(()=>Ft.userMediaPromiseMap.delete("videoinput")));try{const v=yield m;return yield Promise.all(v.getTracks().map(b=>B(this,void 0,void 0,function*(){const k=b.kind==="audio";let C=k?f.audio:f.video;(typeof C=="boolean"||!C)&&(C={});let S;const O=k?h.audio:h.video;typeof O!="boolean"&&(S=O);const _=b.getSettings().deviceId;S!=null&&S.deviceId&&oa(S.deviceId)!==_?S.deviceId=_:S||(S={deviceId:_});const L=jD(b,S,e);return L.kind===re.Kind.Video?L.source=re.Source.Camera:L.kind===re.Kind.Audio&&(L.source=re.Source.Microphone),L.mediaStream=v,pr(L)&&i?yield L.setProcessor(i):Fo(L)&&a&&(yield L.setProcessor(a)),L})))}catch(v){if(!n)throw v;return pf(Object.assign(Object.assign({},t),{audio:c,video:u}),e)}})}function aN(t){return B(this,void 0,void 0,function*(){return(yield pf({audio:!1,video:!0}))[0]})}function sN(t){return B(this,void 0,void 0,function*(){return(yield pf({audio:!0,video:!1}))[0]})}var Xn;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Xn||(Xn={}));function oN(t){switch(t){case ic.EXCELLENT:return Xn.Excellent;case ic.GOOD:return Xn.Good;case ic.POOR:return Xn.Poor;case ic.LOST:return Xn.Lost;default:return Xn.Unknown}}class yE extends zi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Dd.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,a,o,c){let u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Dd.STANDARD;var f;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Xn.Unknown,this.log=Be,this.log=hr((f=c==null?void 0:c.loggerName)!==null&&f!==void 0?f:hi.Participant),this.loggerOptions=c,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=a,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=u,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(re.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(re.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(re.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(ue.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ue.ParticipantNameChanged,e)}_setAttributes(e){const n=gD(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ue.AttributesChanged,n)}setPermissions(e){var n,i,a,o,c,u;const f=this.permissions,h=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((a=this.permissions)===null||a===void 0?void 0:a.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((c=this.permissions)===null||c===void 0?void 0:c.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,v)=>{var b;return m!==((b=this.permissions)===null||b===void 0?void 0:b.canPublishSources[v])})||e.canSubscribeMetrics!==((u=this.permissions)===null||u===void 0?void 0:u.canSubscribeMetrics);return this.permissions=e,h&&this.emit(ue.ParticipantPermissionsChanged,f),h}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ue.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=oN(e),n!==this._connectionQuality&&this.emit(ue.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>pr(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ye.Muted,()=>{this.emit(ue.TrackMuted,e)}),e.on(ye.Unmuted,()=>{this.emit(ue.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case re.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case re.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function lN(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new vw({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}const CT=15e3;class cN extends yE{constructor(e,n,i,a,o){super(e,n,void 0,void 0,void 0,{loggerName:a.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Ln.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new iE)},this.handleReconnected=()=>{var c,u;(u=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||u===void 0||u.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var c,u;this.reconnectFuture&&(this.reconnectFuture.promise.catch(f=>this.log.warn(f.message,this.logContext)),(u=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||u===void 0||u.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=c=>{const{requestId:u,reason:f,message:h}=c,m=this.pendingSignalRequests.get(u);m&&(f!==pv.OK&&m.reject(new Z1(h,f)),this.pendingSignalRequests.delete(u))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let u=c.value.value,f=null,h=null;u.value.case==="payload"?f=u.value.value:u.value.case==="error"&&(h=wt.fromProto(u.value.value)),this.handleIncomingRpcResponse(u.requestId,f,h);break;case"rpcAck":let m=c.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>lN(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,u)=>{if(u===void 0&&(u=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),$e(c)));return}this.engine.updateMuteStatus(c.sid,u)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),$e(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),$e(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const u=this.audioTrackPublications.get(c.sid);if(!u){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(u.trackSid,u.getTrackFeatures())},this.handleSubscribedQualityUpdate=c=>B(this,void 0,void 0,function*(){var u,f,h,m,v,b;if(!(!((v=this.roomOptions)===null||v===void 0)&&v.dynacast))return;const k=this.videoTrackPublications.get(c.trackSid);if(!k){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(c.subscribedCodecs.length>0){if(!k.videoTrack)return;const _=yield k.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var C=!0,S=Yr(_),O;O=yield S.next(),u=O.done,!u;C=!0){m=O.value,C=!1;const L=m;Y3(L)&&(this.log.debug("publish ".concat(L," for ").concat(k.videoTrack.sid),Object.assign(Object.assign({},this.logContext),$e(k))),yield this.publishAdditionalCodecForTrack(k.videoTrack,L,k.options))}}catch(L){f={error:L}}finally{try{!C&&!u&&(h=S.return)&&(yield h.call(S))}finally{if(f)throw f.error}}}else c.subscribedQualities.length>0&&(yield(b=k.videoTrack)===null||b===void 0?void 0:b.setPublishingLayers(c.subscribedQualities))}),this.handleLocalTrackUnpublished=c=>{const u=this.trackPublications.get(c.trackSid);if(!u){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(u.track)},this.handleTrackEnded=c=>B(this,void 0,void 0,function*(){if(c.source===re.Source.ScreenShare||c.source===re.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),$e(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Ia(c)||Gr(c))try{if(Sn())try{const u=yield navigator==null?void 0:navigator.permissions.query({name:c.source===re.Source.Camera?"camera":"microphone"});if(u&&u.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),$e(c))),u.onchange=()=>{u.state!=="denied"&&(c.isMuted||c.restartTrack(),u.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),$e(c))),Ia(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),$e(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=a,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Ln.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(be.RemoteMute,(n,i)=>{const a=this.trackPublications.get(n);!a||!a.track||(i?a.mute():a.unmute())}),this.engine.on(be.Connected,this.handleReconnected).on(be.SignalRestarted,this.handleReconnected).on(be.SignalResumed,this.handleReconnected).on(be.Restarting,this.handleReconnecting).on(be.Resuming,this.handleReconnecting).on(be.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(be.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(be.Disconnected,this.handleDisconnected).on(be.SignalRequestResponse,this.handleSignalRequestResponse).on(be.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return B(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return B(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return B(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return B(this,arguments,void 0,function(n){var i=this;let{metadata:a,name:o,attributes:c}=n;return function*(){return new Promise((u,f)=>B(i,void 0,void 0,function*(){var h,m;try{let v=!1;const b=yield this.engine.client.sendUpdateLocalMetadata((h=a??this.metadata)!==null&&h!==void 0?h:"",(m=o??this.name)!==null&&m!==void 0?m:"",c),k=performance.now();for(this.pendingSignalRequests.set(b,{resolve:u,reject:C=>{f(C),v=!0},values:{name:o,metadata:a,attributes:c}});performance.now()-k<5e3&&!v;){if((!o||this.name===o)&&(!a||this.metadata===a)&&(!c||Object.entries(c).every(C=>{let[S,O]=C;return this.attributes[S]===O||O===""&&!this.attributes[S]}))){this.pendingSignalRequests.delete(b),u();return}yield Cn(50)}f(new Z1("Request to update local metadata timed out","TimeoutError"))}catch(v){v instanceof Error&&f(v)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(re.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(re.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(re.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(ue.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return B(this,void 0,void 0,function*(){this.encryptionType=e?Ln.GCM:Ln.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,a){return B(this,void 0,void 0,function*(){var o,c;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let u=this.getTrackPublication(e);if(n)if(u)yield u.unmute();else{let f;if(this.pendingPublishing.has(e)){const h=yield this.waitForPendingPublicationOfSource(e);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield h==null?void 0:h.unmute(),h}this.pendingPublishing.add(e);try{switch(e){case re.Source.Camera:f=yield this.createTracks({video:(o=i)!==null&&o!==void 0?o:!0});break;case re.Source.Microphone:f=yield this.createTracks({audio:(c=i)!==null&&c!==void 0?c:!0});break;case re.Source.ScreenShare:f=yield this.createScreenTracks(Object.assign({},i));break;default:throw new cr(e)}}catch(h){throw f==null||f.forEach(m=>{m.stop()}),h instanceof Error&&this.emit(ue.MediaDevicesError,h),this.pendingPublishing.delete(e),h}try{const h=[];for(const v of f)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),$e(v))),h.push(this.publishTrack(v,a));[u]=yield Promise.all(h)}catch(h){throw f==null||f.forEach(m=>{m.stop()}),h}finally{this.pendingPublishing.delete(e)}}else if(!(u!=null&&u.track)&&this.pendingPublishing.has(e)&&(u=yield this.waitForPendingPublicationOfSource(e),u||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),u&&u.track)if(e===re.Source.ScreenShare){u=yield this.unpublishTrack(u.track);const f=this.getTrackPublication(re.Source.ScreenShareAudio);f&&f.track&&this.unpublishTrack(f.track)}else yield u.mute();return u})}enableCameraAndMicrophone(){return B(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(re.Source.Camera)||this.pendingPublishing.has(re.Source.Microphone))){this.pendingPublishing.add(re.Source.Camera),this.pendingPublishing.add(re.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(re.Source.Camera),this.pendingPublishing.delete(re.Source.Microphone)}}})}createTracks(e){return B(this,void 0,void 0,function*(){var n,i;e??(e={});const a=rE(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield pf(a,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(u=>(pr(u)&&(this.microphoneError=void 0,u.setAudioContext(this.audioContext),u.source=re.Source.Microphone,this.emit(ue.AudioStreamAcquired)),Fo(u)&&(this.cameraError=void 0,u.source=re.Source.Camera),u))}catch(o){throw o instanceof Error&&(e.audio&&(this.microphoneError=o),e.video&&(this.cameraError=o)),o}})}createScreenTracks(e){return B(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new gv("getDisplayMedia not supported");e.resolution===void 0&&!eD()&&(e.resolution=vv.h1080fps30.resolution);const n=hD(e),i=yield navigator.mediaDevices.getDisplayMedia(n),a=i.getVideoTracks();if(a.length===0)throw new cr("no video track found");const o=new Id(a[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=re.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const c=[o];if(i.getAudioTracks().length>0){this.emit(ue.AudioStreamAcquired);const u=new jd(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});u.source=re.Source.ScreenShareAudio,c.push(u)}return c})}publishTrack(e,n){return B(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return B(this,arguments,void 0,function(i,a){var o=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var u,f,h,m;Ia(i)&&i.setAudioContext(o.audioContext),yield(u=o.reconnectFuture)===null||u===void 0?void 0:u.promise,o.republishPromise&&!c&&(yield o.republishPromise),$a(i)&&o.pendingPublishPromises.has(i)&&(yield o.pendingPublishPromises.get(i));let v;if(i instanceof MediaStreamTrack)v=i.getConstraints();else{v=i.constraints;let _;switch(i.source){case re.Source.Microphone:_="audioinput";break;case re.Source.Camera:_="videoinput"}_&&o.activeDeviceMap.has(_)&&(v=Object.assign(Object.assign({},v),{deviceId:o.activeDeviceMap.get(_)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new jd(i,v,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":i=new Id(i,v,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new cr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let b;if(o.trackPublications.forEach(_=>{_.track&&_.track===i&&(b=_)}),b)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),$e(b))),b;const k="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,C=(f=a==null?void 0:a.forceStereo)!==null&&f!==void 0?f:k;C&&(a||(a={}),a.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),$e(i))),a.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=a.dtx)!==null&&h!==void 0||(a.dtx=!1),(m=a.red)!==null&&m!==void 0||(a.red=!1));const S=Object.assign(Object.assign({},o.roomOptions.publishDefaults),a);!tD()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),S.simulcast=!1),S.source&&(i.source=S.source);const O=new Promise((_,L)=>B(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==dt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:$e(i)}));const I=()=>B(this,void 0,void 0,function*(){try{const j=yield this.publish(i,S,C);_(j)}catch(j){L(j)}});setTimeout(()=>{this.engine.off(be.SignalConnected,I),L(new Zp("publishing rejected as engine not connected within timeout",408))},15e3),this.engine.once(be.SignalConnected,I),this.engine.on(be.Closing,()=>{this.engine.off(be.SignalConnected,I),L(new Zp("publishing rejected as engine closed",499))})}else try{const I=yield this.publish(i,S,C);_(I)}catch(I){L(I)}}catch(I){L(I)}}));o.pendingPublishPromises.set(i,O);try{return yield O}catch(_){throw _}finally{o.pendingPublishPromises.delete(i)}}()})}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),$e(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(a=>vD(a)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),$e(e))),!1)}publish(e,n,i){return B(this,void 0,void 0,function*(){var a,o,c,u,f,h,m,v,b,k;if(!this.hasPermissionsToPublish(e))throw new Zp("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(E=>$a(e)&&E.source===e.source)&&e.source!==re.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),$e(e))),n.stopMicTrackOnMute&&pr(e)&&(e.stopOnMute=!0),e.source===re.Source.ScreenShare&&Oo()&&(n.simulcast=!1),n.videoCodec==="av1"&&!W3()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!Z3()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Og),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(E=>n.videoCodec===Td(E.mime))||(n.videoCodec=Td(this.enabledPublishVideoCodecs[0].mime)));const S=n.videoCodec;e.on(ye.Muted,this.onTrackMuted),e.on(ye.Unmuted,this.onTrackUnmuted),e.on(ye.Ended,this.handleTrackEnded),e.on(ye.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ye.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const O=new cg({cid:e.mediaStreamTrack.id,name:n.name,type:re.kindToProto(e.kind),muted:e.isMuted,source:re.sourceToProto(e.source),disableDtx:!(!((a=n.dtx)!==null&&a!==void 0)||a),encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream,backupCodecPolicy:n==null?void 0:n.backupCodecPolicy});let _;if(e.kind===re.Kind.Video){let E={width:0,height:0};try{E=yield e.waitForDimensions()}catch{const U=(u=(c=this.roomOptions.videoCaptureDefaults)===null||c===void 0?void 0:c.resolution)!==null&&u!==void 0?u:pc.h720.resolution;E={width:U.width,height:U.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),$e(e)),{dims:E}))}O.width=E.width,O.height=E.height,Gr(e)&&(sc(S)&&(e.source===re.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),$e(e))))),n.scalabilityMode=(f=n.scalabilityMode)!==null&&f!==void 0?f:"L3T3_KEY"),O.simulcastCodecs=[new lg({codec:S,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Og}),n.backupCodec&&S!==n.backupCodec.codec&&O.encryption===Ln.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),O.simulcastCodecs.push(new lg({codec:n.backupCodec.codec,cid:""})))),_=Pg(e.source===re.Source.ScreenShare,O.width,O.height,n),O.layers=ST(O.width,O.height,_,sc(n.videoCodec))}else e.kind===re.Kind.Audio&&(_=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(v=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&v!==void 0?v:"high",networkPriority:(k=(b=n.audioPreset)===null||b===void 0?void 0:b.priority)!==null&&k!==void 0?k:"high"}]);if(!this.engine||this.engine.isClosed)throw new jt("cannot publish track when not connected");const L=()=>B(this,void 0,void 0,function*(){var E,D,U;if(!this.engine.pcManager)throw new jt("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,_),Gr(e)&&((E=n.degradationPreference)!==null&&E!==void 0||(n.degradationPreference=QD(e)),e.setDegradationPreference(n.degradationPreference)),_)if(Oo()&&e.kind===re.Kind.Audio){let K;for(const N of this.engine.pcManager.publisher.getTransceivers())if(N.sender===e.sender){K=N;break}K&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:K,codec:"opus",maxbr:!((D=_[0])===null||D===void 0)&&D.maxBitrate?_[0].maxBitrate/1e3:0})}else e.codec&&sc(e.codec)&&(!((U=_[0])===null||U===void 0)&&U.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:O.cid,codec:e.codec,maxbr:_[0].maxBitrate/1e3});yield this.engine.negotiate()});let I;if(this.enabledPublishVideoCodecs.length>0)I=(yield Promise.all([this.engine.addTrack(O),L()]))[0];else{I=yield this.engine.addTrack(O);let E;if(I.codecs.forEach(D=>{E===void 0&&(E=D.mimeType)}),E&&e.kind===re.Kind.Video){const D=Td(E);D!==S&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),$e(e)),{codec:D})),n.videoCodec=D,_=Pg(e.source===re.Source.ScreenShare,O.width,O.height,n))}yield L()}const j=new zd(e.kind,I,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return j.options=n,e.sid=I.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:_,trackInfo:I})),Gr(e)?e.startMonitor(this.engine.client):Ia(e)&&e.startMonitor(),this.addTrackPublication(j),this.emit(ue.LocalTrackPublished,j),j})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return B(this,void 0,void 0,function*(){var a;if(this.encryptionType!==Ln.NONE)return;let o;if(this.trackPublications.forEach(k=>{k.track&&k.track===e&&(o=k)}),!o)throw new cr("track is not published");if(!Gr(e))throw new cr("track is not a video track");const c=Object.assign(Object.assign({},(a=this.roomOptions)===null||a===void 0?void 0:a.publishDefaults),i),u=FD(e,n,c);if(!u){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),$e(e)));return}const f=e.addSimulcastTrack(n,u);if(!f)return;const h=new cg({cid:f.mediaStreamTrack.id,type:re.kindToProto(e.kind),muted:e.isMuted,source:re.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:c.videoCodec,cid:f.mediaStreamTrack.id}]});if(h.layers=ST(h.width,h.height,u),!this.engine||this.engine.isClosed)throw new jt("cannot publish track when not connected");const m=()=>B(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,f,c,u),yield this.engine.negotiate()}),b=(yield Promise.all([this.engine.addTrack(h),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:u,trackInfo:b}))})}unpublishTrack(e,n){return B(this,void 0,void 0,function*(){var i,a;if($a(e)){const h=this.pendingPublishPromises.get(e);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),$e(e))),yield h)}const o=this.getPublicationForTrack(e),c=o?$e(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),c)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),c));return}e=o.track,e.off(ye.Muted,this.onTrackMuted),e.off(ye.Unmuted,this.onTrackUnmuted),e.off(ye.Ended,this.handleTrackEnded),e.off(ye.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ye.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ye.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(a=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&a!==void 0?a:!0),n?e.stop():e.stopMonitor();let u=!1;const f=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<kt.FAILED&&f)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===f&&(h.direction="inactive",u=!0);if(this.engine.removeTrack(f)&&(u=!0),Gr(e)){for(const[,h]of e.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(u=!0),h.sender=void 0);e.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),c),{error:h}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case re.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case re.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(ue.LocalTrackUnpublished,o),o.setTrack(void 0),u&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return B(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((o,c)=>B(i,void 0,void 0,function*(){try{const u=[];this.trackPublications.forEach(f=>{f.track&&(n&&(f.options=Object.assign(Object.assign({},f.options),n)),u.push(f))}),yield Promise.all(u.map(f=>B(this,void 0,void 0,function*(){const h=f.track;yield this.unpublishTrack(h,!1),a&&!h.isMuted&&h.source!==re.Source.ScreenShare&&h.source!==re.Source.ScreenShareAudio&&(Ia(h)||Gr(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:f.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,f.options,!0)}))),o()}catch(u){c(u)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return B(this,arguments,void 0,function(n){var i=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const o=a.reliable?Ye.RELIABLE:Ye.LOSSY,c=a.destinationIdentities,u=a.topic,f=new pn({kind:o,value:{case:"user",value:new $C({participantIdentity:i.identity,payload:n,destinationIdentities:c,topic:u})}});yield i.engine.sendDataPacket(f,o)}()})}publishDtmf(e,n){return B(this,void 0,void 0,function*(){const i=new pn({kind:Ye.RELIABLE,value:{case:"sipDtmf",value:new ew({code:e,digit:n})}});yield this.engine.sendDataPacket(i,Ye.RELIABLE)})}sendChatMessage(e,n){return B(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n==null?void 0:n.attachments},a=new pn({value:{case:"chatMessage",value:new ng(Object.assign(Object.assign({},i),{timestamp:ht.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(a,Ye.RELIABLE),this.emit(ue.ChatMessage,i),i})}editChatMessage(e,n){return B(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),a=new pn({value:{case:"chatMessage",value:new ng(Object.assign(Object.assign({},i),{timestamp:ht.parse(i.timestamp),editTimestamp:ht.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(a,Ye.RELIABLE),this.emit(ue.ChatMessage,i),i})}sendText(e,n){return B(this,void 0,void 0,function*(){var i;const a=crypto.randomUUID(),c=new TextEncoder().encode(e).byteLength,u=(i=n==null?void 0:n.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),f=new Array(u?u.length+1:1).fill(0),h=(v,b)=>{var k;f[b]=v;const C=f.reduce((S,O)=>S+O,0);(k=n==null?void 0:n.onProgress)===null||k===void 0||k.call(n,C)},m=yield this.streamText({streamId:a,totalSize:c,destinationIdentities:n==null?void 0:n.destinationIdentities,topic:n==null?void 0:n.topic,attachedStreamIds:u,attributes:n==null?void 0:n.attributes});return yield m.write(e),h(1,0),yield m.close(),n!=null&&n.attachments&&u&&(yield Promise.all(n.attachments.map((v,b)=>B(this,void 0,void 0,function*(){return this._sendFile(u[b],v,{topic:n.topic,mimeType:v.type,onProgress:k=>{h(k,b+1)}})})))),m.info})}streamText(e){return B(this,void 0,void 0,function*(){var n,i;const a=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),o={id:a,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e==null?void 0:e.topic)!==null&&i!==void 0?i:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes},c=new rg({streamId:a,mimeType:o.mimeType,topic:o.topic,timestamp:Ua(o.timestamp),totalLength:Ua(e==null?void 0:e.totalSize),attributes:o.attributes,contentHeader:{case:"textHeader",value:new uw({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?ig.UPDATE:ig.CREATE})}}),u=e==null?void 0:e.destinationIdentities,f=new pn({destinationIdentities:u,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(f,Ye.RELIABLE);let h=0;const m=this,v=new WritableStream({write(C){return B(this,void 0,void 0,function*(){for(const S of dD(C,CT)){yield m.engine.waitForBufferStatusLow(Ye.RELIABLE);const O=new ag({content:S,streamId:a,chunkIndex:Ua(h)}),_=new pn({destinationIdentities:u,value:{case:"streamChunk",value:O}});yield m.engine.sendDataPacket(_,Ye.RELIABLE),h+=1}})},close(){return B(this,void 0,void 0,function*(){const C=new sg({streamId:a}),S=new pn({destinationIdentities:u,value:{case:"streamTrailer",value:C}});yield m.engine.sendDataPacket(S,Ye.RELIABLE)})},abort(C){console.log("Sink error:",C)}});let b=()=>B(this,void 0,void 0,function*(){yield k.close()});m.engine.once(be.Closing,b);const k=new tN(v,o,()=>this.engine.off(be.Closing,b));return k})}sendFile(e,n){return B(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return B(this,void 0,void 0,function*(){var a;const o=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:n.type,topic:i==null?void 0:i.topic,destinationIdentities:i==null?void 0:i.destinationIdentities}),c=n.stream().getReader();for(;;){const{done:u,value:f}=yield c.read();if(u)break;yield o.write(f)}return yield o.close(),o.info})}streamBytes(e){return B(this,void 0,void 0,function*(){var n,i,a,o,c;const u=(n=e==null?void 0:e.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),f=e==null?void 0:e.destinationIdentities,h={id:u,mimeType:(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(a=e==null?void 0:e.topic)!==null&&a!==void 0?a:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(o=e==null?void 0:e.name)!==null&&o!==void 0?o:"unknown"},m=new rg({totalLength:Ua((c=h.size)!==null&&c!==void 0?c:0),mimeType:h.mimeType,streamId:u,topic:h.topic,timestamp:Ua(Date.now()),contentHeader:{case:"byteHeader",value:new dw({name:h.name})}}),v=new pn({destinationIdentities:f,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(v,Ye.RELIABLE);let b=0;const k=new bn,C=this.engine,S=this.log,O=new WritableStream({write(L){return B(this,void 0,void 0,function*(){const I=yield k.lock();let j=0;try{for(;j<L.byteLength;){const E=L.slice(j,j+CT);yield C.waitForBufferStatusLow(Ye.RELIABLE);const D=new pn({destinationIdentities:f,value:{case:"streamChunk",value:new ag({content:E,streamId:u,chunkIndex:Ua(b)})}});yield C.sendDataPacket(D,Ye.RELIABLE),b+=1,j+=E.byteLength}}finally{I()}})},close(){return B(this,void 0,void 0,function*(){const L=new sg({streamId:u}),I=new pn({destinationIdentities:f,value:{case:"streamTrailer",value:L}});yield C.sendDataPacket(I,Ye.RELIABLE)})},abort(L){S.error("Sink error:",L)}});return new nN(O,h)})}performRpc(e){return B(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:a,method:o,payload:c,responseTimeout:u=1e4}=n;return function*(){return new Promise((h,m)=>B(i,void 0,void 0,function*(){var v,b,k,C;if(Cv(c)>dE){m(wt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((b=(v=this.engine.latestJoinResponse)===null||v===void 0?void 0:v.serverInfo)===null||b===void 0)&&b.version&&ss((C=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||C===void 0?void 0:C.version,"1.8.0")<0){m(wt.builtIn("UNSUPPORTED_SERVER"));return}const S=crypto.randomUUID();yield this.publishRpcRequest(a,S,o,c,u-2e3);const O=setTimeout(()=>{this.pendingAcks.delete(S),m(wt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(S),clearTimeout(_)},2e3);this.pendingAcks.set(S,{resolve:()=>{clearTimeout(O)},participantIdentity:a});const _=setTimeout(()=>{this.pendingResponses.delete(S),m(wt.builtIn("RESPONSE_TIMEOUT"))},u);this.pendingResponses.set(S,{resolve:(L,I)=>{clearTimeout(_),this.pendingAcks.has(S)&&(console.warn("RPC response received before ack",S),this.pendingAcks.delete(S),clearTimeout(O)),I?m(I):h(L??"")},participantIdentity:a})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const a=this.pendingResponses.get(e);a?(a.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,a,o){return B(this,void 0,void 0,function*(){const c=new pn({destinationIdentities:[e],kind:Ye.RELIABLE,value:{case:"rpcRequest",value:new tw({id:n,method:i,payload:a,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(c,Ye.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:a}]of this.pendingResponses)i===e&&(a(null,wt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var i,a;const o=this.trackPublications.get(n.sid);if(o){const c=o.isMuted||((a=(i=o.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&a!==void 0?a:!1);c!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),$e(o)),{mutedOnServer:c})),this.engine.client.sendMuteTrack(n.sid,c))}}),!0)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const a=i.track;a&&(e instanceof MediaStreamTrack?(Ia(a)||Gr(a))&&a.mediaStreamTrack===e&&(n=i):e===a&&(n=i))}),n}waitForPendingPublicationOfSource(e){return B(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const a=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[c]=o;return c.source===e});if(a)return a[1];yield Cn(20)}})}}class Bd extends ar{constructor(e,n,i,a){super(e,n.sid,n.name,a),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Wn.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(ye.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const a=new uf({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new aw({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ye.UpdateSubscription,a),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?ar.SubscriptionStatus.Unsubscribed:super.isSubscribed?ar.SubscriptionStatus.Subscribed:ar.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?ar.PermissionStatus.Allowed:ar.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.videoDimensions)===null||i===void 0?void 0:i.height)===e.height||(rm(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&rm(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,a=this.track;a!==e&&(a&&(a.off(ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),a.off(ye.VisibilityChanged,this.handleVisibilityChange),a.off(ye.Ended,this.handleEnded),a.detach(),a.stopMonitor(),this.emit(ye.Unsubscribed,a)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ye.VisibilityChanged,this.handleVisibilityChange),e.on(ye.Ended,this.handleEnded),this.emit(ye.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ye.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ye.Muted:ye.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ye.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ye.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===re.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return rm(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new fw({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=Wn.HIGH,this.emit(ye.UpdateSettings,e)}}class qd extends yE{static fromParticipantInfo(e,n,i){return new qd(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,a,o,c,u){let f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Dd.STANDARD;super(n,i||"",a,o,c,u,f),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ye.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),$e(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ye.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ye.SubscriptionPermissionChanged,n=>{this.emit(ue.TrackSubscriptionPermissionChanged,e,n)}),e.on(ye.SubscriptionStatusChanged,n=>{this.emit(ue.TrackSubscriptionStatusChanged,e,n)}),e.on(ye.Subscribed,n=>{this.emit(ue.TrackSubscribed,n,e)}),e.on(ye.Unsubscribed,n=>{this.emit(ue.TrackUnsubscribed,n,e)}),e.on(ye.SubscriptionFailed,n=>{this.emit(ue.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:re.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:re.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,a,o,c){let u=this.getTrackPublicationBySid(n);if(u||n.startsWith("TR")||this.trackPublications.forEach(m=>{!u&&e.kind===m.kind.toString()&&(u=m)}),!u){if(c===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ue.TrackSubscriptionFailed,n);return}c===void 0&&(c=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,a,o,c-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),$e(u))),this.emit(ue.TrackSubscriptionFailed,n);return}const f=e.kind==="video";let h;return f?h=new iN(e,n,a,o):h=new vE(e,n,a,this.audioContext,this.audioOutput),h.source=u.source,h.isMuted=u.isMuted,h.setMediaStream(i),h.start(),u.setTrack(h),this.volumeMap.has(u.source)&&xg(h)&&pr(h)&&h.setVolume(this.volumeMap.get(u.source)),u}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(a=>{var o,c;let u=this.getTrackPublicationBySid(a.sid);if(u)u.updateInfo(a);else{const f=re.kindFromProto(a.type);if(!f)return;u=new Bd(f,a,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerName}),u.updateInfo(a),i.set(a.sid,u);const h=Array.from(this.trackPublications.values()).find(m=>m.source===(u==null?void 0:u.source));h&&u.source!==re.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(u.source),Object.assign(Object.assign({},this.logContext),{oldTrack:$e(h),newTrack:$e(u)})),this.addTrackPublication(u)}n.set(a.sid,u)}),this.trackPublications.forEach(a=>{n.has(a.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),$e(a))),this.unpublishTrack(a.trackSid,!0))}),i.forEach(a=>{this.emit(ue.TrackPublished,a)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:a}=i;switch(a&&(a.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case re.Kind.Audio:this.audioTrackPublications.delete(e);break;case re.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ue.TrackUnpublished,i)}setAudioOutput(e){return B(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var a;pr(i.track)&&xg(i.track)&&n.push(i.track.setSinkId((a=e.deviceId)!==null&&a!==void 0?a:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var We;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(We||(We={}));const uN=4*1e3;class mr extends zi.EventEmitter{constructor(e){var n,i,a,o;if(super(),n=this,this.state=We.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Be,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(c,u,f)=>B(this,void 0,void 0,function*(){var h;if(!$3())throw Li()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===We.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(We.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==c&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),wg(new URL(c))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Ag(c,u):this.regionUrlProvider.updateToken(u),this.regionUrlProvider.fetchRegionSettings().then(k=>{var C;(C=this.regionUrlProvider)===null||C===void 0||C.setServerReportedRegions(k)}).catch(k=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:k}))}));const v=(k,C,S)=>B(this,void 0,void 0,function*(){var O,_;this.abortController&&this.abortController.abort();const L=new AbortController;this.abortController=L,m==null||m();try{yield this.attemptConnection(S??c,u,f,L),this.abortController=void 0,k()}catch(I){if(this.regionUrlProvider&&I instanceof lt&&I.reason!==Ge.Cancelled&&I.reason!==Ge.NotAllowed){let j=null;try{j=yield this.regionUrlProvider.getNextBestRegionUrl((O=this.abortController)===null||O===void 0?void 0:O.signal)}catch(E){if(E instanceof lt&&(E.status===401||E.reason===Ge.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),C(E);return}}j&&!(!((_=this.abortController)===null||_===void 0)&&_.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(I.message,". Retrying with another region: ").concat(j),this.logContext),this.recreateEngine(),yield v(k,C,j)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,sT(I)),C(I))}else{let j=di.UNKNOWN_REASON;I instanceof lt&&(j=sT(I)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,j),C(I)}}}),b=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new iE((k,C)=>{v(k,C,b)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(c,u,f,h,m,v)=>B(this,void 0,void 0,function*(){var b,k,C;const S=yield f.join(c,u,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout},v.signal);let O=S.serverInfo;if(O||(O={version:S.serverVersion,region:S.serverRegion}),this.serverInfo=O,this.log.debug("connected to Livekit Server ".concat(Object.entries(O).map(_=>{let[L,I]=_;return"".concat(L,": ").concat(I)}).join(", ")),{room:(b=S.room)===null||b===void 0?void 0:b.name,roomSid:(k=S.room)===null||k===void 0?void 0:k.sid,identity:(C=S.participant)===null||C===void 0?void 0:C.identity}),!O.version)throw new I3("unknown server version");return O.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),S}),this.applyJoinResponse=c=>{const u=c.participant;if(this.localParticipant.sid=u.sid,this.localParticipant.identity=u.identity,this.localParticipant.setEnabledPublishCodecs(c.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(c.sifTrailer)}catch(f){this.log.error(f instanceof Error?f.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:f}))}this.handleParticipantUpdates([u,...c.otherParticipants]),c.room&&this.handleRoomUpdate(c.room)},this.attemptConnection=(c,u,f,h)=>B(this,void 0,void 0,function*(){var m,v;this.state===We.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((v=this.regionUrlProvider)===null||v===void 0)&&v.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},kv),f),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const b=yield this.connectSignal(c,u,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(b),this.setupLocalParticipantEvents(),this.emit(ce.SignalConnected)}catch(b){yield this.engine.close(),this.recreateEngine();const k=new lt("could not establish signal connection",Ge.ServerUnreachable);throw b instanceof Error&&(k.message="".concat(k.message,": ").concat(b.message)),b instanceof lt&&(k.reason=b.reason,k.status=b.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:b})),k}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new lt("Connection attempt aborted",Ge.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(b){throw yield this.engine.close(),this.recreateEngine(),b}Sn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Sn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(We.Connected),this.emit(ce.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return B(n,[...u],void 0,function(){var h=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var v,b,k,C;const S=yield h.disconnectLock.lock();try{if(h.state===We.Disconnected){h.log.debug("already disconnected",h.logContext);return}h.log.info("disconnect from room",Object.assign({},h.logContext)),(h.state===We.Connecting||h.state===We.Reconnecting||h.isResuming)&&(h.log.warn("abort connection attempt",h.logContext),(v=h.abortController)===null||v===void 0||v.abort(),(k=(b=h.connectFuture)===null||b===void 0?void 0:b.reject)===null||k===void 0||k.call(b,new lt("Client initiated disconnect",Ge.Cancelled)),h.connectFuture=void 0),!((C=h.engine)===null||C===void 0)&&C.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(m,di.CLIENT_INITIATED),h.engine=void 0}finally{S()}}()})},this.onPageLeave=()=>B(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>B(this,void 0,void 0,function*(){const c=[],u=pi();if(u&&u.os==="iOS"){const f="livekit-dummy-audio-el";let h=document.getElementById(f);if(!h){h=document.createElement("audio"),h.id=f,h.autoplay=!0,h.hidden=!0;const m=im();m.enabled=!0;const v=new MediaStream([m]);h.srcObject=v,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:v,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(ce.Disconnected,()=>{h==null||h.remove(),h=null})}c.push(h)}this.remoteParticipants.forEach(f=>{f.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(m=>{c.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...c.map(f=>(f.muted=!1,f.play()))]),this.handleAudioPlaybackStarted()}catch(f){throw this.handleAudioPlaybackFailed(f),f}}),this.startVideo=()=>B(this,void 0,void 0,function*(){const c=[];for(const u of this.remoteParticipants.values())u.videoTrackPublications.forEach(f=>{var h;(h=f.track)===null||h===void 0||h.attachedElements.forEach(m=>{c.includes(m)||c.push(m)})});yield Promise.all(c.map(u=>u.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(u=>{u.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const c of this.remoteParticipants.values())this.handleParticipantDisconnected(c.identity,c);this.setAndEmitConnectionState(We.Reconnecting)&&this.emit(ce.Reconnecting)},this.handleSignalRestarted=c=>B(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(c.serverRegion),Object.assign(Object.assign({},this.logContext),{region:c.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(c);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(u){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:u}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:c.serverRegion}))}catch{return}this.setAndEmitConnectionState(We.Connected),this.emit(ce.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=c=>{c.forEach(u=>{var f;if(u.identity===this.localParticipant.identity){this.localParticipant.updateInfo(u);return}u.identity===""&&(u.identity=(f=this.sidToIdentity.get(u.sid))!==null&&f!==void 0?f:"");let h=this.remoteParticipants.get(u.identity);u.state===tg.DISCONNECTED?this.handleParticipantDisconnected(u.identity,h):h=this.getOrCreateParticipant(u.identity,u)})},this.handleActiveSpeakersUpdate=c=>{const u=[],f={};c.forEach(h=>{if(f[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),u.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(h.sid);m&&(m.audioLevel=h.level,m.setIsSpeaking(!0),u.push(m))}}),f[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{f[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=u,this.emitWhenConnected(ce.ActiveSpeakersChanged,u)},this.handleSpeakersChanged=c=>{const u=new Map;this.activeSpeakers.forEach(h=>{const m=this.remoteParticipants.get(h.identity);m&&m.sid!==h.sid||u.set(h.sid,h)}),c.forEach(h=>{let m=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=h.level,m.setIsSpeaking(h.active),h.active?u.set(h.sid,m):u.delete(h.sid))});const f=Array.from(u.values());f.sort((h,m)=>m.audioLevel-h.audioLevel),this.activeSpeakers=f,this.emitWhenConnected(ce.ActiveSpeakersChanged,f)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(u=>{const f=this.getRemoteParticipantBySid(u.participantSid);if(!f)return;const h=f.getTrackPublicationBySid(u.trackSid);if(!h||!h.track)return;const m=re.streamStateFromProto(u.state);m!==h.track.streamState&&(h.track.streamState=m,f.emit(ue.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(ce.TrackStreamStateChanged,h,h.track.streamState,f))})},this.handleSubscriptionPermissionUpdate=c=>{const u=this.getRemoteParticipantBySid(c.participantSid);if(!u)return;const f=u.getTrackPublicationBySid(c.trackSid);f&&f.setAllowed(c.allowed)},this.handleSubscriptionError=c=>{const u=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(c.trackSid));if(!u)return;const f=u.getTrackPublicationBySid(c.trackSid);f&&f.setSubscriptionError(c.err)},this.handleDataPacket=c=>{const u=this.remoteParticipants.get(c.participantIdentity);if(c.value.case==="user")this.handleUserPacket(u,c.value.value,c.kind);else if(c.value.case==="transcription")this.handleTranscription(u,c.value.value);else if(c.value.case==="sipDtmf")this.handleSipDtmf(u,c.value.value);else if(c.value.case==="chatMessage")this.handleChatMessage(u,c.value.value);else if(c.value.case==="metrics")this.handleMetrics(c.value.value,u);else if(c.value.case==="streamHeader")this.handleStreamHeader(c.value.value,c.participantIdentity);else if(c.value.case==="streamChunk")this.handleStreamChunk(c.value.value);else if(c.value.case==="streamTrailer")this.handleStreamTrailer(c.value.value);else if(c.value.case==="rpcRequest"){const f=c.value.value;this.handleIncomingRpcRequest(c.participantIdentity,f.id,f.method,f.payload,f.responseTimeoutMs,f.version)}},this.handleUserPacket=(c,u,f)=>{this.emit(ce.DataReceived,u.payload,c,f,u.topic),c==null||c.emit(ue.DataReceived,u.payload,f)},this.handleSipDtmf=(c,u)=>{this.emit(ce.SipDTMFReceived,u,c),c==null||c.emit(ue.SipDTMFReceived,u)},this.bufferedSegments=new Map,this.handleTranscription=(c,u)=>{const f=u.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(u.transcribedParticipantIdentity),h=f==null?void 0:f.trackPublications.get(u.trackId),m=oD(u,this.transcriptionReceivedTimes);h==null||h.emit(ye.TranscriptionReceived,m),f==null||f.emit(ue.TranscriptionReceived,m,h),this.emit(ce.TranscriptionReceived,m,f,h)},this.handleChatMessage=(c,u)=>{const f=lD(u);this.emit(ce.ChatMessage,f,c)},this.handleMetrics=(c,u)=>{this.emit(ce.MetricsReceived,c,u)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ce.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:c})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ce.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ce.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ce.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>B(this,void 0,void 0,function*(){var c,u,f;const h=Ft.getInstance().previousDevices,m=yield Ft.getInstance().getDevices(void 0,!1),v=pi();if((v==null?void 0:v.name)==="Chrome"&&v.os!=="iOS")for(let k of m){const C=h.find(S=>S.deviceId===k.deviceId);C&&C.label!==""&&C.kind===k.kind&&C.label!==k.label&&this.getActiveDevice(k.kind)==="default"&&this.emit(ce.ActiveDeviceChanged,k.kind,k.deviceId)}const b=["audiooutput","audioinput","videoinput"];for(let k of b){const C=fD(k),S=this.localParticipant.getTrackPublication(C);if(S&&(!((c=S.track)===null||c===void 0)&&c.isUserProvided))continue;const O=m.filter(L=>L.kind===k),_=this.getActiveDevice(k);if(_===((u=h.filter(L=>L.kind===k)[0])===null||u===void 0?void 0:u.deviceId)&&O.length>0&&((f=O[0])===null||f===void 0?void 0:f.deviceId)!==_){yield this.switchActiveDevice(k,O[0].deviceId);continue}k==="audioinput"&&!ua()||k==="videoinput"||O.length>0&&!O.find(L=>L.deviceId===this.getActiveDevice(k))&&(yield this.switchActiveDevice(k,O[0].deviceId))}this.emit(ce.MediaDevicesChanged)}),this.handleRoomUpdate=c=>{const u=this.roomInfo;this.roomInfo=c,u&&u.metadata!==c.metadata&&this.emitWhenConnected(ce.RoomMetadataChanged,c.metadata),(u==null?void 0:u.activeRecording)!==c.activeRecording&&this.emitWhenConnected(ce.RecordingStatusChanged,c.activeRecording)},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(u=>{if(u.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(u.quality);return}const f=this.getRemoteParticipantBySid(u.participantSid);f&&f.setConnectionQuality(u.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(ce.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalParticipantNameChanged=c=>{this.emit(ce.ParticipantNameChanged,c,this.localParticipant)},this.onLocalAttributesChanged=c=>{this.emit(ce.ParticipantAttributesChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(ce.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(ce.TrackUnmuted,c,this.localParticipant)},this.onTrackProcessorUpdate=c=>{var u;(u=c==null?void 0:c.onPublish)===null||u===void 0||u.call(c,this)},this.onLocalTrackPublished=c=>B(this,void 0,void 0,function*(){var u,f,h,m,v,b;(u=c.track)===null||u===void 0||u.on(ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(f=c.track)===null||f===void 0||f.on(ye.Restarted,this.onLocalTrackRestarted),(v=(m=(h=c.track)===null||h===void 0?void 0:h.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||v===void 0||v.call(m,this),this.emit(ce.LocalTrackPublished,c,this.localParticipant),Ia(c.track)&&(yield c.track.checkForSilence())&&this.emit(ce.LocalAudioSilenceDetected,c);const k=yield(b=c.track)===null||b===void 0?void 0:b.getDeviceId(!1),C=oT(c.source);C&&k&&k!==this.localParticipant.activeDeviceMap.get(C)&&(this.localParticipant.activeDeviceMap.set(C,k),this.emit(ce.ActiveDeviceChanged,C,k))}),this.onLocalTrackUnpublished=c=>{var u,f;(u=c.track)===null||u===void 0||u.off(ye.TrackProcessorUpdate,this.onTrackProcessorUpdate),(f=c.track)===null||f===void 0||f.off(ye.Restarted,this.onLocalTrackRestarted),this.emit(ce.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalTrackRestarted=c=>B(this,void 0,void 0,function*(){const u=yield c.getDeviceId(!1),f=oT(c.source);f&&u&&u!==this.localParticipant.activeDeviceMap.get(f)&&(this.log.debug("local track restarted, setting ".concat(f," ").concat(u," active"),this.logContext),this.localParticipant.activeDeviceMap.set(f,u),this.emit(ce.ActiveDeviceChanged,f,u))}),this.onLocalConnectionQualityChanged=c=>{this.emit(ce.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=c=>{this.emit(ce.MediaDevicesError,c)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(ce.ParticipantPermissionsChanged,c,this.localParticipant)},this.onLocalChatMessageSent=c=>{this.emit(ce.ChatMessage,c,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},DD),e),this.log=hr((i=this.options.loggerName)!==null&&i!==void 0?i:hi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},cE),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},uE),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},MD),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new bn,this.localParticipant=new cN("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",oa(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",oa(this.options.audioCaptureDefaults.deviceId)),!((a=this.options.audioOutput)===null||a===void 0)&&a.deviceId&&this.switchActiveDevice("audiooutput",oa(this.options.audioOutput.deviceId)).catch(c=>this.log.warn("Could not set audio output: ".concat(c.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Sn()){const c=new AbortController;(o=navigator.mediaDevices)===null||o===void 0||o.addEventListener("devicechange",this.handleDeviceChange,{signal:c.signal}),mr.cleanupRegistry&&mr.cleanupRegistry.register(this,()=>{c.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,i,a,o,c){return B(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),c!==1){yield this.engine.publishRpcResponse(e,n,null,wt.builtIn("UNSUPPORTED_VERSION"));return}const u=this.rpcHandlers.get(i);if(!u){yield this.engine.publishRpcResponse(e,n,null,wt.builtIn("UNSUPPORTED_METHOD"));return}let f=null,h=null;try{const m=yield u({requestId:n,callerIdentity:e,payload:a,responseTimeout:o});Cv(m)>dE?(f=wt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):h=m}catch(m){m instanceof wt?f=m:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),m),f=wt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,h,f)})}setE2EEEnabled(e){return B(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new yD(this.options.e2ee),this.e2eeManager.on(aa.ParticipantEncryptionStatusChanged,(n,i)=>{uD(i)&&(this.isE2EEEnabled=n),this.emit(ce.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(aa.EncryptionError,n=>this.emit(ce.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return B(this,void 0,void 0,function*(){return this.state===We.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=a=>{a.sid!==""&&(this.engine.off(be.RoomUpdate,i),e(a.sid))};this.engine.on(be.RoomUpdate,i),this.once(ce.Disconnected,()=>{this.engine.off(be.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new JD(this.options),this.engine.on(be.ParticipantUpdate,this.handleParticipantUpdates).on(be.RoomUpdate,this.handleRoomUpdate).on(be.SpeakersChanged,this.handleSpeakersChanged).on(be.StreamStateChanged,this.handleStreamStateUpdate).on(be.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(be.SubscriptionError,this.handleSubscriptionError).on(be.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(be.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(be.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(be.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(be.DataPacketReceived,this.handleDataPacket).on(be.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(We.SignalReconnecting)&&this.emit(ce.SignalReconnecting)}).on(be.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(We.Connected)&&this.emit(ce.Reconnected)}).on(be.SignalResumed,()=>{this.bufferedEvents=[],(this.state===We.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(be.Restarting,this.handleRestarting).on(be.SignalRestarted,this.handleSignalRestarted).on(be.Offline,()=>{this.setAndEmitConnectionState(We.Reconnecting)&&this.emit(ce.Reconnecting)}).on(be.DCBufferStatusChanged,(e,n)=>{this.emit(ce.DCBufferStatusChanged,e,n)}).on(be.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:a}=i;return a===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ue.LocalTrackSubscribed,n),this.emitWhenConnected(ce.LocalTrackSubscribed,n,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ft.getInstance().getDevices(e,n)}prepareConnection(e,n){return B(this,void 0,void 0,function*(){if(this.state===We.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(wg(new URL(e))&&n){this.regionUrlProvider=new Ag(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===We.Disconnected&&(this.regionUrl=i,yield fetch(Eg(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(Eg(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return B(this,void 0,void 0,function*(){let i=()=>{},a;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":a=new Oi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":a=new Oi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":a=new Oi({scenario:{case:"serverLeave",value:!0}});break;case"migration":a=new Oi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>B(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),a=new Oi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>B(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),a=new Oi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":a=new Oi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>B(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new df({reason:di.CLIENT_INITIATED,action:ao.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");a=new Oi({scenario:{case:"subscriberBandwidth",value:Ua(n)}});break;case"leave-full-reconnect":a=new Oi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}a&&(yield this.engine.client.sendSimulateScenario(a),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return B(this,arguments,void 0,function(i,a){var o=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var u,f,h,m,v,b,k,C;let S=!0,O=!1;const _=c?{exact:a}:a;if(i==="audioinput"){O=o.localParticipant.audioTrackPublications.size===0;const L=(u=o.getActiveDevice(i))!==null&&u!==void 0?u:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=_;const I=Array.from(o.localParticipant.audioTrackPublications.values()).filter(j=>j.source===re.Source.Microphone);try{S=(yield Promise.all(I.map(j=>{var E;return(E=j.audioTrack)===null||E===void 0?void 0:E.setDeviceId(_)}))).every(j=>j===!0)}catch(j){throw o.options.audioCaptureDefaults.deviceId=L,j}}else if(i==="videoinput"){O=o.localParticipant.videoTrackPublications.size===0;const L=(f=o.getActiveDevice(i))!==null&&f!==void 0?f:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=_;const I=Array.from(o.localParticipant.videoTrackPublications.values()).filter(j=>j.source===re.Source.Camera);try{S=(yield Promise.all(I.map(j=>{var E;return(E=j.videoTrack)===null||E===void 0?void 0:E.setDeviceId(_)}))).every(j=>j===!0)}catch(j){throw o.options.videoCaptureDefaults.deviceId=L,j}}else if(i==="audiooutput"){if(!Cg()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");o.options.webAudioMix&&(a=(h=yield Ft.getInstance().normalizeDeviceId("audiooutput",a))!==null&&h!==void 0?h:""),(m=(C=o.options).audioOutput)!==null&&m!==void 0||(C.audioOutput={});const L=(v=o.getActiveDevice(i))!==null&&v!==void 0?v:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=a;try{o.options.webAudioMix&&((b=o.audioContext)===null||b===void 0||b.setSinkId(a)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(I=>I.setAudioOutput({deviceId:a})))}catch(I){throw o.options.audioOutput.deviceId=L,I}}return(O||i==="audiooutput")&&(o.localParticipant.activeDeviceMap.set(i,i==="audiooutput"&&((k=o.options.audioOutput)===null||k===void 0?void 0:k.deviceId)||a),o.emit(ce.ActiveDeviceChanged,i,a)),S}()})}setupLocalParticipantEvents(){this.localParticipant.on(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ue.AttributesChanged,this.onLocalAttributesChanged).on(ue.TrackMuted,this.onLocalTrackMuted).on(ue.TrackUnmuted,this.onLocalTrackUnmuted).on(ue.LocalTrackPublished,this.onLocalTrackPublished).on(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ue.MediaDevicesError,this.onMediaDevicesError).on(ue.AudioStreamAcquired,this.startAudio).on(ue.ChatMessage,this.onLocalChatMessageSent).on(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===We.Connecting||this.state===We.Reconnecting){const m=()=>{this.onTrackAdded(e,n,i),v()},v=()=>{this.off(ce.Reconnected,m),this.off(ce.Connected,m),this.off(ce.Disconnected,v)};this.once(ce.Reconnected,m),this.once(ce.Connected,m),this.once(ce.Disconnected,v);return}if(this.state===We.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const a=X3(n.id),o=a[0];let c=a[1],u=e.id;if(c&&c.startsWith("TR")&&(u=c),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const f=Array.from(this.remoteParticipants.values()).find(m=>m.sid===o);if(!f){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={}),f.addSubscribedMediaTrack(e,u,n,i,h)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==We.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(a=>{a.trackPublications.forEach(o=>{a.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(a=>{var o,c,u;a.track&&this.localParticipant.unpublishTrack(a.track,e),e?((o=a.track)===null||o===void 0||o.detach(),(c=a.track)===null||c===void 0||c.stop()):(u=a.track)===null||u===void 0||u.stopMonitor()}),this.localParticipant.off(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ue.AttributesChanged,this.onLocalAttributesChanged).off(ue.TrackMuted,this.onLocalTrackMuted).off(ue.TrackUnmuted,this.onLocalTrackUnmuted).off(ue.LocalTrackPublished,this.onLocalTrackPublished).off(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ue.MediaDevicesError,this.onMediaDevicesError).off(ue.AudioStreamAcquired,this.startAudio).off(ue.ChatMessage,this.onLocalChatMessageSent).off(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Sn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(We.Disconnected),this.emit(ce.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(a=>{n.unpublishTrack(a.trackSid,!0)}),this.emit(ce.ParticipantDisconnected,n),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return B(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const a=this.byteStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let o;const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Sd(e.timestamp),attributes:e.attributes},u=new ReadableStream({start:f=>{o=f,this.byteStreamControllers.set(e.streamId,{info:c,controller:o,startTime:Date.now()})}});a(new $D(c,u,Sd(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const a=this.textStreamHandlers.get(e.topic);if(!a){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let o;const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},u=new ReadableStream({start:f=>{o=f,this.textStreamControllers.set(e.streamId,{info:c,controller:o,startTime:Date.now()})}});a(new eN(c,u,Sd(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}acquireAudioContext(){return B(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=sE())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(a=>a.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Cn(200)])}catch(a){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:a}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(ce.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let a;return n?a=qd.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):a=new qd(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&a.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&a.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),a}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const a=this.remoteParticipants.get(e);return n&&a.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),a}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(ce.ParticipantConnected,i),i.on(ue.TrackPublished,a=>{this.emitWhenConnected(ce.TrackPublished,a,i)}).on(ue.TrackSubscribed,(a,o)=>{a.kind===re.Kind.Audio?(a.on(ye.AudioPlaybackStarted,this.handleAudioPlaybackStarted),a.on(ye.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):a.kind===re.Kind.Video&&(a.on(ye.VideoPlaybackFailed,this.handleVideoPlaybackFailed),a.on(ye.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ce.TrackSubscribed,a,o,i)}).on(ue.TrackUnpublished,a=>{this.emit(ce.TrackUnpublished,a,i)}).on(ue.TrackUnsubscribed,(a,o)=>{this.emit(ce.TrackUnsubscribed,a,o,i)}).on(ue.TrackMuted,a=>{this.emitWhenConnected(ce.TrackMuted,a,i)}).on(ue.TrackUnmuted,a=>{this.emitWhenConnected(ce.TrackUnmuted,a,i)}).on(ue.ParticipantMetadataChanged,a=>{this.emitWhenConnected(ce.ParticipantMetadataChanged,a,i)}).on(ue.ParticipantNameChanged,a=>{this.emitWhenConnected(ce.ParticipantNameChanged,a,i)}).on(ue.AttributesChanged,a=>{this.emitWhenConnected(ce.ParticipantAttributesChanged,a,i)}).on(ue.ConnectionQualityChanged,a=>{this.emitWhenConnected(ce.ConnectionQualityChanged,a,i)}).on(ue.ParticipantPermissionsChanged,a=>{this.emitWhenConnected(ce.ParticipantPermissionsChanged,a,i)}).on(ue.TrackSubscriptionStatusChanged,(a,o)=>{this.emitWhenConnected(ce.TrackSubscriptionStatusChanged,a,o,i)}).on(ue.TrackSubscriptionFailed,(a,o)=>{this.emit(ce.TrackSubscriptionFailed,a,i,o)}).on(ue.TrackSubscriptionPermissionChanged,(a,o)=>{this.emitWhenConnected(ce.TrackSubscriptionPermissionChanged,a,o,i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,a)=>(i.push(...a.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&cD(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Yt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,di.STATE_MISMATCH))):e=0},uN)}clearConnectionReconcile(){this.connectionReconcileInterval&&Yt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ce.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.state===We.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===We.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return B(this,void 0,void 0,function*(){var n,i;const a=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new cv({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:ht.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new hc({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ce.SignalConnected),this.emit(ce.Connected),this.setAndEmitConnectionState(We.Connected),a.video){const c=new zd(re.Kind.Video,new to({source:Dt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ci.AUDIO,name:"video-dummy"}),new Id(a.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:aT(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ue.LocalTrackPublished,c)}if(a.audio){const c=new zd(re.Kind.Audio,new to({source:Dt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ci.AUDIO}),new jd(a.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:im(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ue.LocalTrackPublished,c)}for(let c=0;c<o.count-1;c+=1){let u=new hc({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:tg.ACTIVE,tracks:[],joinedAt:ht.parse(Date.now())});const f=this.getOrCreateParticipant(u.identity,u);if(o.video){const h=aT(160*((i=o.aspectRatios[c%o.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),m=new to({source:Dt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ci.AUDIO});f.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),u.tracks=[...u.tracks,m]}if(o.audio){const h=im(),m=new to({source:Dt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ci.AUDIO});f.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),u.tracks=[...u.tracks,m]}f.updateInfo(u)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(e!==ce.ActiveSpeakersChanged&&e!==ce.TranscriptionReceived){const o=bE(i).filter(c=>c!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...i)}}mr.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function bE(t){return t.map(e=>{if(e)return Array.isArray(e)?bE(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var oi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(oi||(oi={}));class ha extends zi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=oi.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new mr(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return B(this,void 0,void 0,function*(){if(this.status!==oi.IDLE)throw Error("check is running already");this.setStatus(oi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==oi.SKIPPED&&this.setStatus(this.isSuccess()?oi.SUCCESS:oi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return B(this,void 0,void 0,function*(){return this.room.state===We.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return B(this,void 0,void 0,function*(){this.room&&this.room.state!==We.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(oi.SKIPPED)}switchProtocol(e){return B(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(ce.Reconnecting,()=>{n=!0}),this.room.once(ce.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const a=Date.now()+1e4;for(;Date.now()<a;){if(i)return;yield Cn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class dN extends ha{get description(){return"Cloud regions"}perform(){return B(this,void 0,void 0,function*(){const e=new Ag(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let o=0;o<3;o++){const c=yield e.getNextBestRegionUrl();if(!c)break;if(i.has(c))continue;i.add(c);const u=yield this.checkCloudRegion(c);this.appendMessage("".concat(u.region," RTT: ").concat(u.rtt,"ms, duration: ").concat(u.duration,"ms")),n.push(u)}n.sort((o,c)=>(o.duration-c.duration)*.5+(o.rtt-c.rtt)*.5);const a=n[0];this.bestStats=a,this.appendMessage("best Cloud region: ".concat(a.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return B(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const a=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!a)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),c=1e3,f=1e6/c,h="A".repeat(c),m=Date.now();for(let C=0;C<f;C++)yield o.write(h);yield o.close();const v=Date.now(),b=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),k={region:a,rtt:1e4,duration:v-m};return b==null||b.forEach(C=>{C.type==="candidate-pair"&&C.nominated&&(k.rtt=C.currentRoundTripTime*1e3)}),yield this.disconnect(),k})}}const fm=1e4;class fN extends ha{get description(){return"Connection via UDP vs TCP"}perform(){return B(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(fm/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(fm/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return B(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let a=0;const o=()=>{a=(a+1)%360,i.fillStyle="hsl(".concat(a,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const u=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(u,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},v=setInterval(()=>B(this,void 0,void 0,function*(){const b=yield h.getRTCStatsReport();b==null||b.forEach(k=>{k.type==="outbound-rtp"?(m.packetsSent=k.packetsSent,m.qualityLimitationDurations=k.qualityLimitationDurations,m.bitrateTotal+=k.targetBitrate,m.count++):k.type==="remote-inbound-rtp"&&(m.packetsLost=k.packetsLost,m.rttTotal+=k.roundTripTime,m.jitterTotal+=k.jitter)})}),1e3);return yield new Promise(b=>setTimeout(b,fm)),clearInterval(v),u.stop(),n.remove(),yield this.disconnect(),m})}}class hN extends ha{get description(){return"Can publish audio"}perform(){return B(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield sN();if(yield aE(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(u=>setTimeout(u,3e3));const o=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!o)throw new Error("Could not get RTCStats");let c=0;if(o.forEach(u=>{u.type==="outbound-rtp"&&(u.kind==="audio"||!u.kind&&u.mediaType==="audio")&&(c=u.packetsSent)}),c===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(c," audio packets"))})}}class pN extends ha{get description(){return"Can publish video"}perform(){return B(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield aN();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(c=>setTimeout(c,5e3));const a=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="video"||!c.kind&&c.mediaType==="video")&&(o+=c.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(e){return B(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(a=>{i.onplay=()=>{setTimeout(()=>{var o,c,u,f;const h=document.createElement("canvas"),m=e.getSettings(),v=(c=(o=m.width)!==null&&o!==void 0?o:i.videoWidth)!==null&&c!==void 0?c:1280,b=(f=(u=m.height)!==null&&u!==void 0?u:i.videoHeight)!==null&&f!==void 0?f:720;h.width=v,h.height=b;const k=h.getContext("2d");k.drawImage(i,0,0);const S=k.getImageData(0,0,h.width,h.height).data;let O=!0;for(let _=0;_<S.length;_+=4)if(S[_]!==0||S[_+1]!==0||S[_+2]!==0){O=!1;break}O?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),a()},1e3)},i.play()}),i.remove()})}}class mN extends ha{get description(){return"Resuming connection after interruption"}perform(){return B(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,a=!1,o;const c=new Promise(h=>{setTimeout(h,5e3),o=h}),u=()=>{i=!0};n.on(ce.SignalReconnecting,u).on(ce.Reconnecting,u).on(ce.Reconnected,()=>{a=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const f=n.engine.client.onClose;if(f&&f(""),yield c,i){if(!a||n.state!==We.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class gN extends ha{get description(){return"Can connect via TURN"}perform(){return B(this,void 0,void 0,function*(){var e,n;const i=new bv,a=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,c=!1,u=!1;for(let f of a.iceServers)for(let h of f.urls)h.startsWith("turn:")?(c=!0,u=!0):h.startsWith("turns:")&&(c=!0,u=!0,o=!0),h.startsWith("stun:")&&(u=!0);u?c&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||c?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(f=>setTimeout(f,0)))})}}class vN extends ha{get description(){return"Establishing WebRTC connection"}perform(){return B(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ce.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(a,o)=>{if(a.candidate){const c=new RTCIceCandidate(a);let u="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(yN(c.address)?u+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,u+=" (passive)"):c.protocol==="udp"&&(n=!0)),this.appendMessage(u)}i&&i(a,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=a=>{a instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(a.errorCode," ").concat(a.errorText," ").concat(a.url))})});try{yield this.connect(),Be.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function yN(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class bN extends ha{get description(){return"Connecting to signal connection via WebSocket"}perform(){return B(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let a=new bv;const o=yield a.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===sw.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=o.serverInfo)===null||i===void 0?void 0:i.region)),yield a.close()})}}class fI extends zi.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:oi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==oi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return B(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),a=c=>{this.updateCheck(n,c)};i.on("update",a);const o=yield i.run();return i.off("update",a),o})}checkWebsocket(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(bN)})}checkWebRTC(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(vN)})}checkTURN(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(gN)})}checkReconnect(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(mN)})}checkPublishAudio(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(hN)})}checkPublishVideo(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(pN)})}checkConnectionProtocol(){return B(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(fN);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(dN)})}}function SN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const i=$a(t)?t.mediaStreamTrack:t,a=i.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in a){const c=a.facingMode;Be.trace("rawFacingMode",{rawFacingMode:c}),c&&typeof c=="string"&&CN(c)&&(o={facingMode:c,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Be.trace("Try to get facing mode from device label: (".concat(i.label,")"));const c=kN(i.label);c!==void 0&&(o=c)}return o}const wT=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),TN=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function kN(t){var e;const n=t.trim().toLowerCase();if(n!=="")return wT.has(n)?wT.get(n):(e=Array.from(TN.entries()).find(i=>{let[a]=i;return n.includes(a)}))===null||e===void 0?void 0:e[1]}function CN(t){return t===void 0||["user","environment","left","right"].includes(t)}const Hd=Math.min,es=Math.max,Fd=Math.round,Zu=Math.floor,Ni=t=>({x:t,y:t}),wN={left:"right",right:"left",bottom:"top",top:"bottom"},EN={start:"end",end:"start"};function ET(t,e,n){return es(t,Hd(e,n))}function mf(t,e){return typeof t=="function"?t(e):t}function os(t){return t.split("-")[0]}function gf(t){return t.split("-")[1]}function SE(t){return t==="x"?"y":"x"}function TE(t){return t==="y"?"height":"width"}function _o(t){return["top","bottom"].includes(os(t))?"y":"x"}function kE(t){return SE(_o(t))}function xN(t,e,n){n===void 0&&(n=!1);const i=gf(t),a=kE(t),o=TE(a);let c=a==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Vd(c)),[c,Vd(c)]}function RN(t){const e=Vd(t);return[Dg(t),e,Dg(e)]}function Dg(t){return t.replace(/start|end/g,e=>EN[e])}function ON(t,e,n){const i=["left","right"],a=["right","left"],o=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:i:e?i:a;case"left":case"right":return e?o:c;default:return[]}}function _N(t,e,n,i){const a=gf(t);let o=ON(os(t),n==="start",i);return a&&(o=o.map(c=>c+"-"+a),e&&(o=o.concat(o.map(Dg)))),o}function Vd(t){return t.replace(/left|right|bottom|top/g,e=>wN[e])}function PN(t){return{top:0,right:0,bottom:0,left:0,...t}}function AN(t){return typeof t!="number"?PN(t):{top:t,right:t,bottom:t,left:t}}function Gd(t){const{x:e,y:n,width:i,height:a}=t;return{width:i,height:a,top:n,left:e,right:e+i,bottom:n+a,x:e,y:n}}function xT(t,e,n){let{reference:i,floating:a}=t;const o=_o(e),c=kE(e),u=TE(c),f=os(e),h=o==="y",m=i.x+i.width/2-a.width/2,v=i.y+i.height/2-a.height/2,b=i[u]/2-a[u]/2;let k;switch(f){case"top":k={x:m,y:i.y-a.height};break;case"bottom":k={x:m,y:i.y+i.height};break;case"right":k={x:i.x+i.width,y:v};break;case"left":k={x:i.x-a.width,y:v};break;default:k={x:i.x,y:i.y}}switch(gf(e)){case"start":k[c]-=b*(n&&h?-1:1);break;case"end":k[c]+=b*(n&&h?-1:1);break}return k}const MN=async(t,e,n)=>{const{placement:i="bottom",strategy:a="absolute",middleware:o=[],platform:c}=n,u=o.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:v}=xT(h,i,f),b=i,k={},C=0;for(let S=0;S<u.length;S++){const{name:O,fn:_}=u[S],{x:L,y:I,data:j,reset:E}=await _({x:m,y:v,initialPlacement:i,placement:b,strategy:a,middlewareData:k,rects:h,platform:c,elements:{reference:t,floating:e}});m=L??m,v=I??v,k={...k,[O]:{...k[O],...j}},E&&C<=50&&(C++,typeof E=="object"&&(E.placement&&(b=E.placement),E.rects&&(h=E.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:a}):E.rects),{x:m,y:v}=xT(h,b,f)),S=-1)}return{x:m,y:v,placement:b,strategy:a,middlewareData:k}};async function CE(t,e){var n;e===void 0&&(e={});const{x:i,y:a,platform:o,rects:c,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:v="floating",altBoundary:b=!1,padding:k=0}=mf(e,t),C=AN(k),S=u[b?v==="floating"?"reference":"floating":v],O=Gd(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:m,strategy:f})),_=v==="floating"?{x:i,y:a,width:c.floating.width,height:c.floating.height}:c.reference,L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(L))?await(o.getScale==null?void 0:o.getScale(L))||{x:1,y:1}:{x:1,y:1},j=Gd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:L,strategy:f}):_);return{top:(O.top-j.top+C.top)/I.y,bottom:(j.bottom-O.bottom+C.bottom)/I.y,left:(O.left-j.left+C.left)/I.x,right:(j.right-O.right+C.right)/I.x}}const DN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:a,middlewareData:o,rects:c,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:m=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:S=!0,...O}=mf(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=os(a),L=_o(u),I=os(u)===u,j=await(f.isRTL==null?void 0:f.isRTL(h.floating)),E=b||(I||!S?[Vd(u)]:RN(u)),D=C!=="none";!b&&D&&E.push(..._N(u,S,C,j));const U=[u,...E],K=await CE(e,O),N=[];let P=((i=o.flip)==null?void 0:i.overflows)||[];if(m&&N.push(K[_]),v){const W=xN(a,c,j);N.push(K[W[0]],K[W[1]])}if(P=[...P,{placement:a,overflows:N}],!N.every(W=>W<=0)){var V,J;const W=(((V=o.flip)==null?void 0:V.index)||0)+1,ge=U[W];if(ge)return{data:{index:W,overflows:P},reset:{placement:ge}};let H=(J=P.filter(w=>w.overflows[0]<=0).sort((w,ve)=>w.overflows[1]-ve.overflows[1])[0])==null?void 0:J.placement;if(!H)switch(k){case"bestFit":{var Y;const w=(Y=P.filter(ve=>{if(D){const q=_o(ve.placement);return q===L||q==="y"}return!0}).map(ve=>[ve.placement,ve.overflows.filter(q=>q>0).reduce((q,y)=>q+y,0)]).sort((ve,q)=>ve[1]-q[1])[0])==null?void 0:Y[0];w&&(H=w);break}case"initialPlacement":H=u;break}if(a!==H)return{reset:{placement:H}}}return{}}}};async function NN(t,e){const{placement:n,platform:i,elements:a}=t,o=await(i.isRTL==null?void 0:i.isRTL(a.floating)),c=os(n),u=gf(n),f=_o(n)==="y",h=["left","top"].includes(c)?-1:1,m=o&&f?-1:1,v=mf(e,t);let{mainAxis:b,crossAxis:k,alignmentAxis:C}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof C=="number"&&(k=u==="end"?C*-1:C),f?{x:k*m,y:b*h}:{x:b*h,y:k*m}}const LN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:a,y:o,placement:c,middlewareData:u}=e,f=await NN(e,t);return c===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:c}}}}},jN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:a}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:u={fn:O=>{let{x:_,y:L}=O;return{x:_,y:L}}},...f}=mf(t,e),h={x:n,y:i},m=await CE(e,f),v=_o(os(a)),b=SE(v);let k=h[b],C=h[v];if(o){const O=b==="y"?"top":"left",_=b==="y"?"bottom":"right",L=k+m[O],I=k-m[_];k=ET(L,k,I)}if(c){const O=v==="y"?"top":"left",_=v==="y"?"bottom":"right",L=C+m[O],I=C-m[_];C=ET(L,C,I)}const S=u.fn({...e,[b]:k,[v]:C});return{...S,data:{x:S.x-n,y:S.y-i,enabled:{[b]:o,[v]:c}}}}}};function vf(){return typeof window<"u"}function Vo(t){return wE(t)?(t.nodeName||"").toLowerCase():"#document"}function jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bi(t){var e;return(e=(wE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wE(t){return vf()?t instanceof Node||t instanceof jn(t).Node:!1}function mi(t){return vf()?t instanceof Element||t instanceof jn(t).Element:!1}function ji(t){return vf()?t instanceof HTMLElement||t instanceof jn(t).HTMLElement:!1}function RT(t){return!vf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jn(t).ShadowRoot}function xc(t){const{overflow:e,overflowX:n,overflowY:i,display:a}=gi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(a)}function UN(t){return["table","td","th"].includes(Vo(t))}function yf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Ev(t){const e=xv(),n=mi(t)?gi(t):t;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function IN(t){let e=da(t);for(;ji(e)&&!Po(e);){if(Ev(e))return e;if(yf(e))return null;e=da(e)}return null}function xv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Po(t){return["html","body","#document"].includes(Vo(t))}function gi(t){return jn(t).getComputedStyle(t)}function bf(t){return mi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function da(t){if(Vo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RT(t)&&t.host||Bi(t);return RT(e)?e.host:e}function EE(t){const e=da(t);return Po(e)?t.ownerDocument?t.ownerDocument.body:t.body:ji(e)&&xc(e)?e:EE(e)}function mc(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=EE(t),o=a===((i=t.ownerDocument)==null?void 0:i.body),c=jn(a);if(o){const u=Ng(c);return e.concat(c,c.visualViewport||[],xc(a)?a:[],u&&n?mc(u):[])}return e.concat(a,mc(a,[],n))}function Ng(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xE(t){const e=gi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=ji(t),o=a?t.offsetWidth:n,c=a?t.offsetHeight:i,u=Fd(n)!==o||Fd(i)!==c;return u&&(n=o,i=c),{width:n,height:i,$:u}}function Rv(t){return mi(t)?t:t.contextElement}function co(t){const e=Rv(t);if(!ji(e))return Ni(1);const n=e.getBoundingClientRect(),{width:i,height:a,$:o}=xE(e);let c=(o?Fd(n.width):n.width)/i,u=(o?Fd(n.height):n.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const zN=Ni(0);function RE(t){const e=jn(t);return!xv()||!e.visualViewport?zN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BN(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==jn(t)?!1:e}function ls(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),o=Rv(t);let c=Ni(1);e&&(i?mi(i)&&(c=co(i)):c=co(t));const u=BN(o,n,i)?RE(o):Ni(0);let f=(a.left+u.x)/c.x,h=(a.top+u.y)/c.y,m=a.width/c.x,v=a.height/c.y;if(o){const b=jn(o),k=i&&mi(i)?jn(i):i;let C=b,S=Ng(C);for(;S&&i&&k!==C;){const O=co(S),_=S.getBoundingClientRect(),L=gi(S),I=_.left+(S.clientLeft+parseFloat(L.paddingLeft))*O.x,j=_.top+(S.clientTop+parseFloat(L.paddingTop))*O.y;f*=O.x,h*=O.y,m*=O.x,v*=O.y,f+=I,h+=j,C=jn(S),S=Ng(C)}}return Gd({width:m,height:v,x:f,y:h})}function Ov(t,e){const n=bf(t).scrollLeft;return e?e.left+n:ls(Bi(t)).left+n}function OE(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=i.left+e.scrollLeft-(n?0:Ov(t,i)),o=i.top+e.scrollTop;return{x:a,y:o}}function qN(t){let{elements:e,rect:n,offsetParent:i,strategy:a}=t;const o=a==="fixed",c=Bi(i),u=e?yf(e.floating):!1;if(i===c||u&&o)return n;let f={scrollLeft:0,scrollTop:0},h=Ni(1);const m=Ni(0),v=ji(i);if((v||!v&&!o)&&((Vo(i)!=="body"||xc(c))&&(f=bf(i)),ji(i))){const k=ls(i);h=co(i),m.x=k.x+i.clientLeft,m.y=k.y+i.clientTop}const b=c&&!v&&!o?OE(c,f,!0):Ni(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+m.x+b.x,y:n.y*h.y-f.scrollTop*h.y+m.y+b.y}}function HN(t){return Array.from(t.getClientRects())}function FN(t){const e=Bi(t),n=bf(t),i=t.ownerDocument.body,a=es(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=es(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+Ov(t);const u=-n.scrollTop;return gi(i).direction==="rtl"&&(c+=es(e.clientWidth,i.clientWidth)-a),{width:a,height:o,x:c,y:u}}function VN(t,e){const n=jn(t),i=Bi(t),a=n.visualViewport;let o=i.clientWidth,c=i.clientHeight,u=0,f=0;if(a){o=a.width,c=a.height;const h=xv();(!h||h&&e==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}return{width:o,height:c,x:u,y:f}}function GN(t,e){const n=ls(t,!0,e==="fixed"),i=n.top+t.clientTop,a=n.left+t.clientLeft,o=ji(t)?co(t):Ni(1),c=t.clientWidth*o.x,u=t.clientHeight*o.y,f=a*o.x,h=i*o.y;return{width:c,height:u,x:f,y:h}}function OT(t,e,n){let i;if(e==="viewport")i=VN(t,n);else if(e==="document")i=FN(Bi(t));else if(mi(e))i=GN(e,n);else{const a=RE(t);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return Gd(i)}function _E(t,e){const n=da(t);return n===e||!mi(n)||Po(n)?!1:gi(n).position==="fixed"||_E(n,e)}function QN(t,e){const n=e.get(t);if(n)return n;let i=mc(t,[],!1).filter(u=>mi(u)&&Vo(u)!=="body"),a=null;const o=gi(t).position==="fixed";let c=o?da(t):t;for(;mi(c)&&!Po(c);){const u=gi(c),f=Ev(c);!f&&u.position==="fixed"&&(a=null),(o?!f&&!a:!f&&u.position==="static"&&a&&["absolute","fixed"].includes(a.position)||xc(c)&&!f&&_E(t,c))?i=i.filter(h=>h!==c):a=u,c=da(c)}return e.set(t,i),i}function KN(t){let{element:e,boundary:n,rootBoundary:i,strategy:a}=t;const o=[...n==="clippingAncestors"?yf(e)?[]:QN(e,this._c):[].concat(n),i],c=o[0],u=o.reduce((f,h)=>{const m=OT(e,h,a);return f.top=es(m.top,f.top),f.right=Hd(m.right,f.right),f.bottom=Hd(m.bottom,f.bottom),f.left=es(m.left,f.left),f},OT(e,c,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function YN(t){const{width:e,height:n}=xE(t);return{width:e,height:n}}function JN(t,e,n){const i=ji(e),a=Bi(e),o=n==="fixed",c=ls(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const f=Ni(0);if(i||!i&&!o)if((Vo(e)!=="body"||xc(a))&&(u=bf(e)),i){const b=ls(e,!0,o,e);f.x=b.x+e.clientLeft,f.y=b.y+e.clientTop}else a&&(f.x=Ov(a));const h=a&&!i&&!o?OE(a,u):Ni(0),m=c.left+u.scrollLeft-f.x-h.x,v=c.top+u.scrollTop-f.y-h.y;return{x:m,y:v,width:c.width,height:c.height}}function hm(t){return gi(t).position==="static"}function _T(t,e){if(!ji(t)||gi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bi(t)===n&&(n=n.ownerDocument.body),n}function PE(t,e){const n=jn(t);if(yf(t))return n;if(!ji(t)){let a=da(t);for(;a&&!Po(a);){if(mi(a)&&!hm(a))return a;a=da(a)}return n}let i=_T(t,e);for(;i&&UN(i)&&hm(i);)i=_T(i,e);return i&&Po(i)&&hm(i)&&!Ev(i)?n:i||IN(t)||n}const XN=async function(t){const e=this.getOffsetParent||PE,n=this.getDimensions,i=await n(t.floating);return{reference:JN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function WN(t){return gi(t).direction==="rtl"}const ZN={convertOffsetParentRelativeRectToViewportRelativeRect:qN,getDocumentElement:Bi,getClippingRect:KN,getOffsetParent:PE,getElementRects:XN,getClientRects:HN,getDimensions:YN,getScale:co,isElement:mi,isRTL:WN};function AE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $N(t,e){let n=null,i;const a=Bi(t);function o(){var u;clearTimeout(i),(u=n)==null||u.disconnect(),n=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),o();const h=t.getBoundingClientRect(),{left:m,top:v,width:b,height:k}=h;if(u||e(),!b||!k)return;const C=Zu(v),S=Zu(a.clientWidth-(m+b)),O=Zu(a.clientHeight-(v+k)),_=Zu(m),L={rootMargin:-C+"px "+-S+"px "+-O+"px "+-_+"px",threshold:es(0,Hd(1,f))||1};let I=!0;function j(E){const D=E[0].intersectionRatio;if(D!==f){if(!I)return c();D?c(!1,D):i=setTimeout(()=>{c(!1,1e-7)},1e3)}D===1&&!AE(h,t.getBoundingClientRect())&&c(),I=!1}try{n=new IntersectionObserver(j,{...L,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,L)}n.observe(t)}return c(!0),o}function e4(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,h=Rv(t),m=a||o?[...h?mc(h):[],...mc(e)]:[];m.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const v=h&&u?$N(h,n):null;let b=-1,k=null;c&&(k=new ResizeObserver(_=>{let[L]=_;L&&L.target===h&&k&&(k.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var I;(I=k)==null||I.observe(e)})),n()}),h&&!f&&k.observe(h),k.observe(e));let C,S=f?ls(t):null;f&&O();function O(){const _=ls(t);S&&!AE(S,_)&&n(),S=_,C=requestAnimationFrame(O)}return n(),()=>{var _;m.forEach(L=>{a&&L.removeEventListener("scroll",n),o&&L.removeEventListener("resize",n)}),v==null||v(),(_=k)==null||_.disconnect(),k=null,f&&cancelAnimationFrame(C)}}const t4=LN,n4=jN,i4=DN,r4=(t,e,n)=>{const i=new Map,a={platform:ZN,...n},o={...a.platform,_c:i};return MN(t,e,{...a,platform:o})};var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ME(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lg={exports:{}},a4=Lg.exports,PT;function s4(){return PT||(PT=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(a4,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],o={},c=null;function u(S,O){var _=S[O];if(typeof _.bind=="function")return _.bind(S);try{return Function.prototype.bind.call(_,S)}catch{return function(){return Function.prototype.apply.apply(_,[S,arguments])}}}function f(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?f:console[S]!==void 0?u(console,S):console.log!==void 0?u(console,"log"):e}function m(){for(var S=this.getLevel(),O=0;O<a.length;O++){var _=a[O];this[_]=O<S?e:this.methodFactory(_,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function v(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function b(S,O,_){return h(S)||v.apply(this,arguments)}function k(S,O){var _=this,L,I,j,E="loglevel";typeof S=="string"?E+=":"+S:typeof S=="symbol"&&(E=void 0);function D(V){var J=(a[V]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=J;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+J+";"}catch{}}}function U(){var V;if(!(typeof window===n||!E)){try{V=window.localStorage[E]}catch{}if(typeof V===n)try{var J=window.document.cookie,Y=encodeURIComponent(E),W=J.indexOf(Y+"=");W!==-1&&(V=/^([^;]+)/.exec(J.slice(W+Y.length+1))[1])}catch{}return _.levels[V]===void 0&&(V=void 0),V}}function K(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E)}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(V){var J=V;if(typeof J=="string"&&_.levels[J.toUpperCase()]!==void 0&&(J=_.levels[J.toUpperCase()]),typeof J=="number"&&J>=0&&J<=_.levels.SILENT)return J;throw new TypeError("log.setLevel() called with invalid level: "+V)}_.name=S,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=O||b,_.getLevel=function(){return j??I??L},_.setLevel=function(V,J){return j=N(V),J!==!1&&D(j),m.call(_)},_.setDefaultLevel=function(V){I=N(V),U()||_.setLevel(V,!1)},_.resetLevel=function(){j=null,K(),m.call(_)},_.enableAll=function(V){_.setLevel(_.levels.TRACE,V)},_.disableAll=function(V){_.setLevel(_.levels.SILENT,V)},_.rebuild=function(){if(c!==_&&(L=N(c.getLevel())),m.call(_),c===_)for(var V in o)o[V].rebuild()},L=N(c?c.getLevel():"WARN");var P=U();P!=null&&(j=N(P)),m.call(_)}c=new k,c.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var O=o[S];return O||(O=o[S]=new k(S,c.methodFactory)),O};var C=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=C),c},c.getLoggers=function(){return o},c.default=c,c})}(Lg)),Lg.exports}var o4=s4();const l4=ME(o4);var jg=function(t,e){return jg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},jg(t,e)};function br(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jg(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function c4(t,e,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function u(m){try{h(i.next(m))}catch(v){c(v)}}function f(m){try{h(i.throw(m))}catch(v){c(v)}}function h(m){m.done?o(m.value):a(m.value).then(u,f)}h((i=i.apply(t,[])).next())})}function DE(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(h){return function(m){return f([h,m])}}function f(h){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,h[0]&&(n=0)),n;)try{if(i=1,a&&(o=h[0]&2?a.return:h[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,h[1])).done)return o;switch(a=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,a=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],a=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Ao(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mo(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(u){c={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return o}function gc(t,e,n){if(arguments.length===2)for(var i=0,a=e.length,o;i<a;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function uo(t){return this instanceof uo?(this.v=t,this):new uo(t)}function u4(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(k){return function(C){return Promise.resolve(C).then(k,v)}}function u(k,C){i[k]&&(a[k]=function(S){return new Promise(function(O,_){o.push([k,S,O,_])>1||f(k,S)})},C&&(a[k]=C(a[k])))}function f(k,C){try{h(i[k](C))}catch(S){b(o[0][3],S)}}function h(k){k.value instanceof uo?Promise.resolve(k.value.v).then(m,v):b(o[0][2],k)}function m(k){f("next",k)}function v(k){f("throw",k)}function b(k,C){k(C),o.shift(),o.length&&f(o[0][0],o[0][1])}}function d4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ao=="function"?Ao(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(u,f){c=t[o](c),a(u,f,c.done,c.value)})}}function a(o,c,u,f){Promise.resolve(f).then(function(h){o({value:h,done:u})},c)}}function ut(t){return typeof t=="function"}function _v(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var pm=_v(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Qd(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Rc=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,a,o;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var u=Ao(c),f=u.next();!f.done;f=u.next()){var h=f.value;h.remove(this)}}catch(S){e={error:S}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}else c.remove(this);var m=this.initialTeardown;if(ut(m))try{m()}catch(S){o=S instanceof pm?S.errors:[S]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var b=Ao(v),k=b.next();!k.done;k=b.next()){var C=k.value;try{AT(C)}catch(S){o=o??[],S instanceof pm?o=gc(gc([],Mo(o)),Mo(S.errors)):o.push(S)}}}catch(S){i={error:S}}finally{try{k&&!k.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}if(o)throw new pm(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)AT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Qd(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Qd(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),NE=Rc.EMPTY;function LE(t){return t instanceof Rc||t&&"closed"in t&&ut(t.remove)&&ut(t.add)&&ut(t.unsubscribe)}function AT(t){ut(t)?t():t.unsubscribe()}var f4={Promise:void 0},h4={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,gc([t,e],Mo(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function jE(t){h4.setTimeout(function(){throw t})}function Ug(){}function kd(t){t()}var Pv=function(t){br(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,LE(n)&&n.add(i)):i.destination=g4,i}return e.create=function(n,i,a){return new Ig(n,i,a)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Rc),p4=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){ed(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){ed(i)}else ed(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ed(n)}},t}(),Ig=function(t){br(e,t);function e(n,i,a){var o=t.call(this)||this,c;return ut(n)||!n?c={next:n??void 0,error:i??void 0,complete:a??void 0}:c=n,o.destination=new p4(c),o}return e}(Pv);function ed(t){jE(t)}function m4(t){throw t}var g4={closed:!0,next:Ug,error:m4,complete:Ug},Av=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Mv(t){return t}function v4(t){return t.length===0?Mv:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var nn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var a=this,o=b4(e)?e:new Ig(e,n,i);return kd(function(){var c=a,u=c.operator,f=c.source;o.add(u?u.call(o,f):f?a._subscribe(o):a._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=MT(n),new n(function(a,o){var c=new Ig({next:function(u){try{e(u)}catch(f){o(f),c.unsubscribe()}},error:o,complete:a});i.subscribe(c)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Av]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return v4(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=MT(e),new e(function(i,a){var o;n.subscribe(function(c){return o=c},function(c){return a(c)},function(){return i(o)})})},t.create=function(e){return new t(e)},t}();function MT(t){var e;return(e=t??f4.Promise)!==null&&e!==void 0?e:Promise}function y4(t){return t&&ut(t.next)&&ut(t.error)&&ut(t.complete)}function b4(t){return t&&t instanceof Pv||y4(t)&&LE(t)}function S4(t){return ut(t==null?void 0:t.lift)}function qi(t){return function(e){if(S4(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function gr(t,e,n,i,a){return new T4(t,e,n,i,a)}var T4=function(t){br(e,t);function e(n,i,a,o,c,u){var f=t.call(this,n)||this;return f.onFinalize=c,f.shouldUnsubscribe=u,f._next=i?function(h){try{i(h)}catch(m){n.error(m)}}:t.prototype._next,f._error=o?function(h){try{o(h)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,f._complete=a?function(){try{a()}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._complete,f}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Pv),k4=_v(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Do=function(t){br(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new DT(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new k4},e.prototype.next=function(n){var i=this;kd(function(){var a,o;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=Ao(i.currentObservers),u=c.next();!u.done;u=c.next()){var f=u.value;f.next(n)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}}})},e.prototype.error=function(n){var i=this;kd(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var a=i.observers;a.length;)a.shift().error(n)}})},e.prototype.complete=function(){var n=this;kd(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,a=this,o=a.hasError,c=a.isStopped,u=a.observers;return o||c?NE:(this.currentObservers=null,u.push(n),new Rc(function(){i.currentObservers=null,Qd(u,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,a=i.hasError,o=i.thrownError,c=i.isStopped;a?n.error(o):c&&n.complete()},e.prototype.asObservable=function(){var n=new nn;return n.source=this,n},e.create=function(n,i){return new DT(n,i)},e}(nn),DT=function(t){br(e,t);function e(n,i){var a=t.call(this)||this;return a.destination=n,a.source=i,a}return e.prototype.next=function(n){var i,a;(a=(i=this.destination)===null||i===void 0?void 0:i.next)===null||a===void 0||a.call(i,n)},e.prototype.error=function(n){var i,a;(a=(i=this.destination)===null||i===void 0?void 0:i.error)===null||a===void 0||a.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,a;return(a=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&a!==void 0?a:NE},e}(Do),C4=function(t){br(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,a=n.thrownError,o=n._value;if(i)throw a;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Do),w4={now:function(){return Date.now()}},E4=function(t){br(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(Rc),NT={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,gc([t,e],Mo(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},x4=function(t){br(e,t);function e(n,i){var a=t.call(this,n,i)||this;return a.scheduler=n,a.work=i,a.pending=!1,a}return e.prototype.schedule=function(n,i){var a;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var o=this.id,c=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(c,o,i)),this.pending=!0,this.delay=i,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(c,this.id,i),this},e.prototype.requestAsyncId=function(n,i,a){return a===void 0&&(a=0),NT.setInterval(n.flush.bind(n,this),a)},e.prototype.recycleAsyncId=function(n,i,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return i;i!=null&&NT.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(n,i);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var a=!1,o;try{this.work(n)}catch(c){a=!0,o=c||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,a=n.scheduler,o=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Qd(o,this),i!=null&&(this.id=this.recycleAsyncId(a,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(E4),LT=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=w4.now,t}(),R4=function(t){br(e,t);function e(n,i){i===void 0&&(i=LT.now);var a=t.call(this,n,i)||this;return a.actions=[],a._active=!1,a}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var a;this._active=!0;do if(a=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,a){for(;n=i.shift();)n.unsubscribe();throw a}},e}(LT),O4=new R4(x4);function _4(t){return t&&ut(t.schedule)}function P4(t){return t[t.length-1]}function Dv(t){return _4(P4(t))?t.pop():void 0}var Nv=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function UE(t){return ut(t==null?void 0:t.then)}function IE(t){return ut(t[Av])}function zE(t){return Symbol.asyncIterator&&ut(t==null?void 0:t[Symbol.asyncIterator])}function BE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function A4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qE=A4();function HE(t){return ut(t==null?void 0:t[qE])}function FE(t){return u4(this,arguments,function(){var e,n,i,a;return DE(this,function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,uo(e.read())];case 3:return n=o.sent(),i=n.value,a=n.done,a?[4,uo(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,uo(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function VE(t){return ut(t==null?void 0:t.getReader)}function pa(t){if(t instanceof nn)return t;if(t!=null){if(IE(t))return M4(t);if(Nv(t))return D4(t);if(UE(t))return N4(t);if(zE(t))return GE(t);if(HE(t))return L4(t);if(VE(t))return j4(t)}throw BE(t)}function M4(t){return new nn(function(e){var n=t[Av]();if(ut(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function D4(t){return new nn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function N4(t){return new nn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,jE)})}function L4(t){return new nn(function(e){var n,i;try{for(var a=Ao(t),o=a.next();!o.done;o=a.next()){var c=o.value;if(e.next(c),e.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}e.complete()})}function GE(t){return new nn(function(e){U4(t,e).catch(function(n){return e.error(n)})})}function j4(t){return GE(FE(t))}function U4(t,e){var n,i,a,o;return c4(this,void 0,void 0,function(){var c,u;return DE(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),n=d4(t),f.label=1;case 1:return[4,n.next()];case 2:if(i=f.sent(),!!i.done)return[3,4];if(c=i.value,e.next(c),e.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=f.sent(),a={error:u},[3,11];case 6:return f.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function la(t,e,n,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var o=e.schedule(function(){n(),a?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!a)return o}function QE(t,e){return e===void 0&&(e=0),qi(function(n,i){n.subscribe(gr(i,function(a){return la(i,t,function(){return i.next(a)},e)},function(){return la(i,t,function(){return i.complete()},e)},function(a){return la(i,t,function(){return i.error(a)},e)}))})}function KE(t,e){return e===void 0&&(e=0),qi(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function I4(t,e){return pa(t).pipe(KE(e),QE(e))}function z4(t,e){return pa(t).pipe(KE(e),QE(e))}function B4(t,e){return new nn(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function q4(t,e){return new nn(function(n){var i;return la(n,e,function(){i=t[qE](),la(n,e,function(){var a,o,c;try{a=i.next(),o=a.value,c=a.done}catch(u){n.error(u);return}c?n.complete():n.next(o)},0,!0)}),function(){return ut(i==null?void 0:i.return)&&i.return()}})}function YE(t,e){if(!t)throw new Error("Iterable cannot be null");return new nn(function(n){la(n,e,function(){var i=t[Symbol.asyncIterator]();la(n,e,function(){i.next().then(function(a){a.done?n.complete():n.next(a.value)})},0,!0)})})}function H4(t,e){return YE(FE(t),e)}function F4(t,e){if(t!=null){if(IE(t))return I4(t,e);if(Nv(t))return B4(t,e);if(UE(t))return z4(t,e);if(zE(t))return YE(t,e);if(HE(t))return q4(t,e);if(VE(t))return H4(t,e)}throw BE(t)}function JE(t,e){return e?F4(t,e):pa(t)}function jT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Dv(t);return JE(t,n)}function V4(t){return t instanceof Date&&!isNaN(t)}var G4=_v(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function Q4(t,e){var n=V4(t)?{first:t}:typeof t=="number"?{each:t}:t,i=n.first,a=n.each,o=n.with,c=o===void 0?K4:o,u=n.scheduler,f=u===void 0?O4:u,h=n.meta,m=h===void 0?null:h;if(i==null&&a==null)throw new TypeError("No timeout provided.");return qi(function(v,b){var k,C,S=null,O=0,_=function(L){C=la(b,f,function(){try{k.unsubscribe(),pa(c({meta:m,lastValue:S,seen:O})).subscribe(b)}catch(I){b.error(I)}},L)};k=v.subscribe(gr(b,function(L){C==null||C.unsubscribe(),O++,b.next(S=L),a>0&&_(a)},void 0,void 0,function(){C!=null&&C.closed||C==null||C.unsubscribe(),S=null})),!O&&_(i!=null?typeof i=="number"?i:+i-f.now():a)})}function K4(t){throw new G4(t)}function Jt(t,e){return qi(function(n,i){var a=0;n.subscribe(gr(i,function(o){i.next(t.call(e,o,a++))}))})}var Y4=Array.isArray;function J4(t,e){return Y4(e)?t.apply(void 0,gc([],Mo(e))):t(e)}function X4(t){return Jt(function(e){return J4(t,e)})}function W4(t,e,n,i,a,o,c,u){var f=[],h=0,m=0,v=!1,b=function(){v&&!f.length&&!h&&e.complete()},k=function(S){return h<i?C(S):f.push(S)},C=function(S){h++;var O=!1;pa(n(S,m++)).subscribe(gr(e,function(_){e.next(_)},function(){O=!0},void 0,function(){if(O)try{h--;for(var _=function(){var L=f.shift();c||C(L)};f.length&&h<i;)_();b()}catch(L){e.error(L)}}))};return t.subscribe(gr(e,k,function(){v=!0,b()})),function(){}}function Lv(t,e,n){return n===void 0&&(n=1/0),ut(e)?Lv(function(i,a){return Jt(function(o,c){return e(i,o,a,c)})(pa(t(i,a)))},n):(typeof e=="number"&&(n=e),qi(function(i,a){return W4(i,a,t,n)}))}function Z4(t){return Lv(Mv,t)}function $4(){return Z4(1)}function Kd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $4()(JE(t,Dv(t)))}var eL=["addListener","removeListener"],tL=["addEventListener","removeEventListener"],nL=["on","off"];function zg(t,e,n,i){if(ut(n)&&(i=n,n=void 0),i)return zg(t,e,n).pipe(X4(i));var a=Mo(aL(t)?tL.map(function(u){return function(f){return t[u](e,f,n)}}):iL(t)?eL.map(UT(t,e)):rL(t)?nL.map(UT(t,e)):[],2),o=a[0],c=a[1];if(!o&&Nv(t))return Lv(function(u){return zg(u,e,n)})(pa(t));if(!o)throw new TypeError("Invalid event target");return new nn(function(u){var f=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];return u.next(1<h.length?h:h[0])};return o(f),function(){return c(f)}})}function UT(t,e){return function(n){return function(i){return t[n](e,i)}}}function iL(t){return ut(t.addListener)&&ut(t.removeListener)}function rL(t){return ut(t.on)&&ut(t.off)}function aL(t){return ut(t.addEventListener)&&ut(t.removeEventListener)}function XE(t,e){return qi(function(n,i){var a=0;n.subscribe(gr(i,function(o){return t.call(e,o,a++)&&i.next(o)}))})}function sL(t,e){return e===void 0&&(e=Mv),t=t??oL,qi(function(n,i){var a,o=!0;n.subscribe(gr(i,function(c){var u=e(c);(o||!t(a,u))&&(o=!1,a=u,i.next(c))}))})}function oL(t,e){return t===e}function lL(t){return qi(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function cL(t){return qi(function(e,n){var i=!1,a=gr(n,function(){a==null||a.unsubscribe(),i=!0},Ug);pa(t).subscribe(a),e.subscribe(gr(n,function(o){return i&&n.next(o)}))})}function Ti(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Dv(t);return qi(function(i,a){(n?Kd(t,i,n):Kd(t,i)).subscribe(a)})}var uL=Object.defineProperty,IT=Object.getOwnPropertySymbols,dL=Object.prototype.hasOwnProperty,fL=Object.prototype.propertyIsEnumerable,zT=(t,e,n)=>e in t?uL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BT=(t,e)=>{for(var n in e||(e={}))dL.call(e,n)&&zT(t,n,e[n]);if(IT)for(var n of IT(e))fL.call(e,n)&&zT(t,n,e[n]);return t},ds=(t,e,n)=>new Promise((i,a)=>{var o=f=>{try{u(n.next(f))}catch(h){a(h)}},c=f=>{try{u(n.throw(f))}catch(h){a(h)}},u=f=>f.done?i(f.value):Promise.resolve(f.value).then(o,c);u((n=n.apply(t,e)).next())}),WE="lk";function wn(t){return typeof t>"u"?!1:hL(t)||pL(t)}function hL(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function pL(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function vc(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function tn(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(vc(t))return`${t.participant.identity}_${t.source}_placeholder`;if(wn(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function ZE(t,e){return typeof e>"u"?!1:wn(t)?e.some(n=>n.participant.identity===t.participant.identity&&wn(n)&&n.publication.trackSid===t.publication.trackSid):vc(t)?e.some(n=>n.participant.identity===t.participant.identity&&vc(n)&&n.source===t.source):!1}function mL(t,e){return vc(t)&&wn(e)&&e.participant.identity===t.participant.identity&&e.source===t.source}function gL(t,e,n){return e4(t,e,()=>ds(this,null,function*(){const{x:i,y:a}=yield r4(t,e,{placement:"top",middleware:[t4(6),i4(),n4({padding:5})]});n==null||n(i,a)}))}function vL(t,e){return!t.contains(e.target)}var yL=[ce.ConnectionStateChanged,ce.RoomMetadataChanged,ce.ActiveSpeakersChanged,ce.ConnectionQualityChanged,ce.ParticipantConnected,ce.ParticipantDisconnected,ce.ParticipantPermissionsChanged,ce.ParticipantMetadataChanged,ce.ParticipantNameChanged,ce.ParticipantAttributesChanged,ce.TrackMuted,ce.TrackUnmuted,ce.TrackPublished,ce.TrackUnpublished,ce.TrackStreamStateChanged,ce.TrackSubscriptionFailed,ce.TrackSubscriptionPermissionChanged,ce.TrackSubscriptionStatusChanged],bL=[...yL,ce.LocalTrackPublished,ce.LocalTrackUnpublished];ue.TrackPublished,ue.TrackUnpublished,ue.TrackMuted,ue.TrackUnmuted,ue.TrackStreamStateChanged,ue.TrackSubscribed,ue.TrackUnsubscribed,ue.TrackSubscriptionPermissionChanged,ue.TrackSubscriptionFailed,ue.LocalTrackPublished,ue.LocalTrackUnpublished;var SL=[ue.ConnectionQualityChanged,ue.IsSpeakingChanged,ue.ParticipantMetadataChanged,ue.ParticipantPermissionsChanged,ue.TrackMuted,ue.TrackUnmuted,ue.TrackPublished,ue.TrackUnpublished,ue.TrackStreamStateChanged,ue.TrackSubscriptionFailed,ue.TrackSubscriptionPermissionChanged,ue.TrackSubscriptionStatusChanged];[...SL,ue.LocalTrackPublished,ue.LocalTrackUnpublished];var gt=l4.getLogger("lk-components-js");gt.setDefaultLevel("WARN");var TL=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function $E(t,e,n,i){if(t.length<1)throw new Error("At least one grid layout definition must be provided.");const a=kL(t);if(n<=0||i<=0)return a[0];let o=0;const c=n/i>1?"landscape":"portrait";let u=a.find((f,h,m)=>{o=h;const v=m.findIndex((b,k)=>{const C=!b.orientation||b.orientation===c,S=k>h,O=b.maxTiles===f.maxTiles;return S&&O&&C})!==-1;return f.maxTiles>=e&&!v});if(u===void 0)if(u=a[a.length-1],u)gt.warn(`No layout found for: participantCount: ${e}, width/height: ${n}/${i} fallback to biggest available layout (${u}).`);else throw new Error("No layout or fallback layout found.");if((n<u.minWidth||i<u.minHeight)&&o>0){const f=a[o-1];u=$E(a.slice(0,o),f.maxTiles,n,i)}return u}function kL(t){return[...t].map(e=>{var n,i;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:(n=e.minWidth)!=null?n:0,minHeight:(i=e.minHeight)!=null?i:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:e.minWidth!==0||n.minWidth!==0?e.minWidth-n.minWidth:e.minHeight!==0||n.minHeight!==0?e.minHeight-n.minHeight:0)}function CL(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}function ex(t){return typeof t=="object"}function tx(t){return Array.isArray(t)&&t.filter(ex).length>0}function wL(t,e){return e.audioLevel-t.audioLevel}function EL(t,e){return t.isSpeaking===e.isSpeaking?0:t.isSpeaking?-1:1}function xL(t,e){var n,i,a,o;return t.lastSpokeAt!==void 0||e.lastSpokeAt!==void 0?((i=(n=e.lastSpokeAt)==null?void 0:n.getTime())!=null?i:0)-((o=(a=t.lastSpokeAt)==null?void 0:a.getTime())!=null?o:0):0}function Bg(t,e){var n,i,a,o;return((i=(n=t.joinedAt)==null?void 0:n.getTime())!=null?i:0)-((o=(a=e.joinedAt)==null?void 0:a.getTime())!=null?o:0)}function RL(t,e){return wn(t)?wn(e)?0:-1:wn(e)?1:0}function OL(t,e){const n=t.participant.isCameraEnabled,i=e.participant.isCameraEnabled;return n!==i?n?-1:1:0}function _L(t){const e=[],n=[],i=[],a=[];t.forEach(u=>{u.participant.isLocal&&u.source===re.Source.Camera?e.push(u):u.source===re.Source.ScreenShare?n.push(u):u.source===re.Source.Camera?i.push(u):a.push(u)});const o=PL(n),c=AL(i);return[...e,...o,...c,...a]}function PL(t){const e=[],n=[];return t.forEach(i=>{i.participant.isLocal?e.push(i):n.push(i)}),e.sort((i,a)=>Bg(i.participant,a.participant)),n.sort((i,a)=>Bg(i.participant,a.participant)),[...n,...e]}function AL(t){const e=[],n=[];return t.forEach(i=>{i.participant.isLocal?e.push(i):n.push(i)}),n.sort((i,a)=>i.participant.isSpeaking&&a.participant.isSpeaking?wL(i.participant,a.participant):i.participant.isSpeaking!==a.participant.isSpeaking?EL(i.participant,a.participant):i.participant.lastSpokeAt!==a.participant.lastSpokeAt?xL(i.participant,a.participant):wn(i)!==wn(a)?RL(i,a):i.participant.isCameraEnabled!==a.participant.isCameraEnabled?OL(i,a):Bg(i.participant,a.participant)),[...e,...n]}function ML(t,e){return t.reduce((n,i,a)=>a%e===0?[...n,[i]]:[...n.slice(0,-1),[...n.slice(-1)[0],i]],[])}function qT(t,e){const n=Math.max(t.length,e.length);return new Array(n).fill([]).map((i,a)=>[t[a],e[a]])}function Yd(t,e,n){return t.filter(i=>!e.map(a=>n(a)).includes(n(i)))}function qg(t){return t.map(e=>typeof e=="string"||typeof e=="number"?`${e}`:tn(e))}function DL(t,e){return{dropped:Yd(t,e,tn),added:Yd(e,t,tn)}}function NL(t){return t.added.length!==0||t.dropped.length!==0}function Hg(t,e){const n=e.findIndex(i=>tn(i)===tn(t));if(n===-1)throw new Error(`Element not part of the array: ${tn(t)} not in ${qg(e)}`);return n}function LL(t,e,n){const i=Hg(t,n),a=Hg(e,n);return n.splice(i,1,e),n.splice(a,1,t),n}function jL(t,e){const n=Hg(t,e);return e.splice(n,1),e}function UL(t,e){return[...e,t]}function mm(t,e){return ML(t,e)}function IL(t,e,n){let i=zL(t,e);if(i.length<e.length){const c=Yd(e,i,tn);i=[...i,...c]}const a=mm(i,n),o=mm(e,n);if(qT(a,o).forEach(([c,u],f)=>{if(c&&u){const h=mm(i,n)[f],m=DL(h,u);NL(m)&&(gt.debug(`Detected visual changes on page: ${f}, current: ${qg(c)}, next: ${qg(u)}`,{changes:m}),m.added.length===m.dropped.length&&qT(m.added,m.dropped).forEach(([v,b])=>{if(v&&b)i=LL(v,b,i);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${v}, ${b}`)}),m.added.length===0&&m.dropped.length>0&&m.dropped.forEach(v=>{i=jL(v,i)}),m.added.length>0&&m.dropped.length===0&&m.added.forEach(v=>{i=UL(v,i)}))}}),i.length>e.length){const c=Yd(i,e,tn);i=i.filter(u=>!c.map(tn).includes(tn(u)))}return i}function zL(t,e){return t.map(n=>e.find(a=>tn(n)===tn(a)||typeof n!="number"&&vc(n)&&wn(a)&&mL(n,a))??n)}function En(t){return`${WE}-${t}`}function BL(t){const e=Fg(t),n=nx(t.participant).pipe(Jt(()=>Fg(t)),Ti(e));return{className:En(t.source===re.Source.Camera||t.source===re.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Fg(t){if(wn(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(a=>a.source===e&&a.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function jv(t,...e){return new nn(n=>{const i=()=>{n.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(Ti(t))}function Uv(t,e){return new nn(n=>{const i=(...a)=>{n.next(a)};return t.on(e,i),()=>{t.off(e,i)}})}function qL(t){return Uv(t,ce.ConnectionStateChanged).pipe(Jt(([e])=>e),Ti(t.state))}function HL(t,e,n=!0){var i;const a=()=>ds(this,null,function*(){try{const u=yield mr.getLocalDevices(t,n);o.next(u)}catch(u){e==null||e(u)}}),o=new Do,c=o.pipe(lL(()=>{var u;(u=navigator==null?void 0:navigator.mediaDevices)==null||u.removeEventListener("devicechange",a)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(i=navigator==null?void 0:navigator.mediaDevices)==null||i.addEventListener("devicechange",a)}return Kd(mr.getLocalDevices(t,n).catch(u=>(e==null||e(u),[])),c)}function FL(t){return jv(t,ce.AudioPlaybackStatusChanged).pipe(Jt(e=>({canPlayAudio:e.canPlaybackAudio})))}function VL(t){return jv(t,ce.VideoPlaybackStatusChanged).pipe(Jt(e=>({canPlayVideo:e.canPlaybackVideo})))}function GL(t,e){return Uv(t,ce.ActiveDeviceChanged).pipe(XE(([n])=>n===e),Jt(([n,i])=>(gt.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:i}),i)))}function QL(t,e){return Uv(t,ce.ParticipantEncryptionStatusChanged).pipe(XE(([,n])=>(e==null?void 0:e.identity)===(n==null?void 0:n.identity)||!n&&(e==null?void 0:e.identity)===t.localParticipant.identity),Jt(([n])=>n),Ti(e!=null&&e.isLocal?e.isE2EEEnabled:!!(e!=null&&e.isEncrypted)))}function Iv(t,...e){return new nn(n=>{const i=()=>{n.next(t)};return e.forEach(a=>{t.on(a,i)}),()=>{e.forEach(a=>{t.off(a,i)})}}).pipe(Ti(t))}function nx(t){return Iv(t,ue.TrackMuted,ue.TrackUnmuted,ue.ParticipantPermissionsChanged,ue.TrackPublished,ue.TrackUnpublished,ue.LocalTrackPublished,ue.LocalTrackUnpublished,ue.MediaDevicesError,ue.TrackSubscriptionStatusChanged).pipe(Jt(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:a}=e,o=e.getTrackPublication(re.Source.Microphone),c=e.getTrackPublication(re.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:a,cameraTrack:c,microphoneTrack:o,participant:e}}))}function KL(t){return t?Iv(t,ue.ParticipantMetadataChanged,ue.ParticipantNameChanged).pipe(Jt(({name:e,identity:n,metadata:i})=>({name:e,identity:n,metadata:i})),Ti({name:t.name,identity:t.identity,metadata:t.metadata})):void 0}function YL(t){return zv(t,ue.ConnectionQualityChanged).pipe(Jt(([e])=>e),Ti(t.connectionQuality))}function zv(t,e){return new nn(n=>{const i=(...a)=>{n.next(a)};return t.on(e,i),()=>{t.off(e,i)}})}function ix(t){var e,n,i,a;return Iv(t.participant,ue.TrackMuted,ue.TrackUnmuted,ue.TrackSubscribed,ue.TrackUnsubscribed,ue.LocalTrackPublished,ue.LocalTrackUnpublished).pipe(Jt(o=>{var c,u;const f=(c=t.publication)!=null?c:o.getTrackPublication(t.source);return(u=f==null?void 0:f.isMuted)!=null?u:!0}),Ti((a=(i=(e=t.publication)==null?void 0:e.isMuted)!=null?i:(n=t.participant.getTrackPublication(t.source))==null?void 0:n.isMuted)!=null?a:!0))}function JL(t){return zv(t,ue.IsSpeakingChanged).pipe(Jt(([e])=>e))}function XL(t){return zv(t,ue.ParticipantPermissionsChanged).pipe(Jt(()=>t.permissions),Ti(t.permissions))}function WL(t,e,n,i,a){const{localParticipant:o}=e,c=(m,v)=>{let b=!1;switch(m){case re.Source.Camera:b=v.isCameraEnabled;break;case re.Source.Microphone:b=v.isMicrophoneEnabled;break;case re.Source.ScreenShare:b=v.isScreenShareEnabled;break}return b},u=nx(o).pipe(Jt(m=>c(t,m.participant)),Ti(c(t,o))),f=new Do,h=(m,v)=>ds(this,null,function*(){try{switch(v??(v=n),f.next(!0),t){case re.Source.Camera:return yield o.setCameraEnabled(m??!o.isCameraEnabled,v,i),o.isCameraEnabled;case re.Source.Microphone:return yield o.setMicrophoneEnabled(m??!o.isMicrophoneEnabled,v,i),o.isMicrophoneEnabled;case re.Source.ScreenShare:return yield o.setScreenShareEnabled(m??!o.isScreenShareEnabled,v,i),o.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(b){if(a&&b instanceof Error){a==null||a(b);return}else throw b}finally{f.next(!1)}});return{className:En("button"),toggle:h,enabledObserver:u,pendingObserver:f.asObservable()}}function ZL(){let t=!1;const e=new Do,n=new Do,i=a=>ds(this,null,function*(){n.next(!0),t=a??!t,e.next(t),n.next(!1)});return{className:En("button"),toggle:i,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function $L(t,e,n){const i=new C4(void 0),a=GL(e,t),o=(c,...u)=>ds(this,[c,...u],function*(f,h={}){var m,v,b;if(e){gt.debug(`Switching active device of kind "${t}" with id ${f}.`),yield e.switchActiveDevice(t,f,h.exact);const k=(m=e.getActiveDevice(t))!=null?m:f;k!==f&&f!=="default"&&gt.info(`We tried to select the device with id (${f}), but the browser decided to select the device with id (${k}) instead.`);let C;t==="audioinput"?C=(v=e.localParticipant.getTrackPublication(re.Source.Microphone))==null?void 0:v.track:t==="videoinput"&&(C=(b=e.localParticipant.getTrackPublication(re.Source.Camera))==null?void 0:b.track);const S=f==="default"&&!C||f==="default"&&(C==null?void 0:C.mediaStreamTrack.label.startsWith("Default"));i.next(S?f:k)}});return{className:En("media-device-select"),activeDeviceObservable:a,setActiveMediaDevice:o}}function e6(t){const e=n=>{t.disconnect(n)};return{className:En("disconnect-button"),disconnect:e}}function t6(t){const e=En("connection-quality"),n=YL(t);return{className:e,connectionQualityObserver:n}}function n6(t){let e="track-muted-indicator-camera";switch(t.source){case re.Source.Camera:e="track-muted-indicator-camera";break;case re.Source.Microphone:e="track-muted-indicator-microphone";break}const n=En(e),i=ix(t);return{className:n,mediaMutedObserver:i}}function i6(t){return{className:"lk-participant-name",infoObserver:KL(t)}}function r6(){return{className:En("participant-tile")}}function a6(){const t=e=>ds(this,null,function*(){gt.info("Start Audio for room: ",e),yield e.startAudio()});return{className:En("start-audio-button"),roomAudioPlaybackAllowedObservable:FL,handleStartAudioPlayback:t}}function s6(){const t=e=>ds(this,null,function*(){gt.info("Start Video for room: ",e),yield e.startVideo()});return{className:En("start-audio-button"),roomVideoPlaybackAllowedObservable:VL,handleStartVideoPlayback:t}}function o6(){return{className:[En("button"),En("chat-toggle")].join(" ")}}function l6(){return{className:[En("button"),En("focus-toggle-button")].join(" ")}}function HT(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],a=[];return i.forEach(o=>{e.forEach(c=>{const u=Array.from(o.trackPublications.values()).filter(f=>f.source===c&&(!n||f.track)).map(f=>({participant:o,publication:f,source:f.source}));a.push(...u)})}),{trackReferences:a,participants:i}}function c6(t,e,n){var i,a;const o=(i=n.additionalRoomEvents)!=null?i:bL,c=(a=n.onlySubscribed)!=null?a:!0,u=Array.from(new Set([ce.ParticipantConnected,ce.ParticipantDisconnected,ce.ConnectionStateChanged,ce.LocalTrackPublished,ce.LocalTrackUnpublished,ce.TrackPublished,ce.TrackUnpublished,ce.TrackSubscriptionStatusChanged,...o]).values());return jv(t,...u).pipe(Jt(f=>{const h=HT(f,e,c);return gt.debug(`TrackReference[] was updated. (length ${h.trackReferences.length})`,h),h}),Ti(HT(t,e,c)))}function u6(t,e=1e3){if(t===null)return jT(!1);const n=zg(t,"mousemove",{passive:!0}).pipe(Jt(()=>!0)),i=n.pipe(Q4({each:e,with:()=>Kd(jT(!1),i.pipe(cL(n)))}),sL());return i}function d6(t,e){if(typeof localStorage>"u"){gt.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){gt.error(`Error setting item to local storage: ${n}`)}}function f6(t){if(typeof localStorage>"u"){gt.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){gt.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){gt.error(`Error getting item from local storage: ${e}`);return}}function h6(t){return{load:()=>f6(t),save:e=>d6(t,e)}}var p6=`${WE}-user-choices`,Zl={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:m6,save:g6}=h6(p6);function v6(t,e=!1){e!==!0&&g6(t)}function y6(t,e=!1){var n,i,a,o,c;const u={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:Zl.videoEnabled,audioEnabled:(i=t==null?void 0:t.audioEnabled)!=null?i:Zl.audioEnabled,videoDeviceId:(a=t==null?void 0:t.videoDeviceId)!=null?a:Zl.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:Zl.audioDeviceId,username:(c=t==null?void 0:t.username)!=null?c:Zl.username};if(e)return u;{const f=m6();return BT(BT({},u),f??{})}}const Bv=T.createContext(void 0);function rx(){const t=T.useContext(Bv);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function qv(){return T.useContext(Bv)}const Hv=T.createContext(void 0);function Sf(){return T.useContext(Hv)}function Go(t){const e=Sf(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const ax=T.createContext(void 0);function sx(){return T.useContext(ax)}function Oc(t){const e=sx(),n=Sf(),i=t??e??(n==null?void 0:n.participant);if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}const Fv=T.createContext(void 0);function Vv(){const t=T.useContext(Fv);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Tf(){return T.useContext(Fv)}function _c(t){const e=Tf(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const b6=T.createContext(void 0);function S6(t){return T.useContext(b6)}function ox(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=ox(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function lx(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=ox(t))&&(i&&(i+=" "),i+=e);return i}function T6(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function Sr(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const a in i){const o=e[a],c=i[a];typeof o=="function"&&typeof c=="function"&&a[0]==="o"&&a[1]==="n"&&a.charCodeAt(2)>=65&&a.charCodeAt(2)<=90?e[a]=T6(o,c):(a==="className"||a==="UNSAFE_className")&&typeof o=="string"&&typeof c=="string"?e[a]=lx(o,c):e[a]=c!==void 0?c:o}}return e}function k6(t){return t!==void 0}function fs(...t){return Sr(...t.filter(k6))}function C6(t,e,n){return T.Children.map(t,i=>T.isValidElement(i)&&T.Children.only(t)?(i.props.class&&(e??(e={}),e.class=lx(i.props.class,e.class),e.style={...i.props.style,...e.style}),T.cloneElement(i,{...e,key:n})):i)}const w6=t=>{const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),e};function E6(t,e){const n=R6(),i=w6(e);return T.useLayoutEffect(()=>{let a=!1;const o=t.current;if(!o)return;function c(u,f){a||i.current(u,f)}return n==null||n.subscribe(o,c),()=>{a=!0,n==null||n.unsubscribe(o,c)}},[t.current,n,i]),n==null?void 0:n.observer}function x6(){let t=!1,e=[];const n=new Map;if(typeof window>"u")return;const i=new ResizeObserver((a,o)=>{e=e.concat(a),t||window.requestAnimationFrame(()=>{const c=new Set;for(let u=0;u<e.length;u++){if(c.has(e[u].target))continue;c.add(e[u].target);const f=n.get(e[u].target);f==null||f.forEach(h=>h(e[u],o))}e=[],t=!1}),t=!0});return{observer:i,subscribe(a,o){i.observe(a);const c=n.get(a)??[];c.push(o),n.set(a,c)},unsubscribe(a,o){const c=n.get(a)??[];if(c.length===1){i.unobserve(a),n.delete(a);return}const u=c.indexOf(o);u!==-1&&c.splice(u,1),n.set(a,c)}}}let FT;const R6=()=>FT||(FT=x6()),O6=t=>{const[e,n]=T.useState({width:0,height:0});T.useLayoutEffect(()=>{if(t.current){const{width:a,height:o}=t.current.getBoundingClientRect();n({width:a,height:o})}},[t.current]);const i=T.useCallback(a=>n(a.contentRect),[]);return E6(t,i),e};function Zn(t,e,n=!0){const[i,a]=T.useState(e);return T.useEffect(()=>{if(n&&a(e),typeof window>"u"||!t)return;const o=t.subscribe(a);return()=>o.unsubscribe()},[t,n]),i}function _6(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,i]=T.useState(e(t));function a(){i(e(t))}return T.useEffect(()=>{const o=window.matchMedia(t);return a(),o.addListener?o.addListener(a):o.addEventListener("change",a),()=>{o.removeListener?o.removeListener(a):o.removeEventListener("change",a)}},[t]),n}function P6(t={}){const e=Oc(t.participant),{className:n,connectionQualityObserver:i}=T.useMemo(()=>t6(e),[e]),a=Zn(i,Xn.Unknown);return{className:n,quality:a}}function A6(t){const e=_c(t),n=T.useMemo(()=>qL(e),[e]);return Zn(n,e.state)}function M6(t){const e=Vv(),n=A6(e);return{buttonProps:T.useMemo(()=>{const{className:i,disconnect:a}=e6(e);return Sr(t,{className:i,onClick:()=>a(t.stopTracks??!0),disabled:n===We.Disconnected})},[e,t,n])}}function D6(t){if(t.publication instanceof zd){const e=t.publication.track;if(e){const{facingMode:n}=SN(e);return n}}return"undefined"}function N6({trackRef:t,props:e}){const n=Go(t),i=qv(),{className:a}=T.useMemo(()=>l6(),[]),o=T.useMemo(()=>ZE(n,i==null?void 0:i.pin.state),[n,i==null?void 0:i.pin.state]);return{mergedProps:T.useMemo(()=>Sr(e,{className:a,onClick:c=>{var u,f,h,m,v;(u=e.onClick)==null||u.call(e,c),o?(h=i==null?void 0:(f=i.pin).dispatch)==null||h.call(f,{msg:"clear_pin"}):(v=i==null?void 0:(m=i.pin).dispatch)==null||v.call(m,{msg:"set_pin",trackReference:n})}}),[e,a,n,o,i==null?void 0:i.pin]),inFocus:o}}function L6(t,e,n={}){const i=n.gridLayouts??TL,{width:a,height:o}=O6(t),c=$E(i,e,a,o);return T.useEffect(()=>{t.current&&c&&(t.current.style.setProperty("--lk-col-count",c==null?void 0:c.columns.toString()),t.current.style.setProperty("--lk-row-count",c==null?void 0:c.rows.toString()))},[t,c]),{layout:c,containerWidth:a,containerHeight:o}}function VT(t,e={}){var n,i;const a=typeof t=="string"?e.participant:t.participant,o=Oc(a),c=typeof t=="string"?{participant:o,source:t}:t,[u,f]=T.useState(!!((n=c.publication)!=null&&n.isMuted||(i=o.getTrackPublication(c.source))!=null&&i.isMuted));return T.useEffect(()=>{const h=ix(c).subscribe(f);return()=>h.unsubscribe()},[tn(c)]),u}function j6(t){const e=Oc(t),n=T.useMemo(()=>JL(e),[e]);return Zn(n,e.isSpeaking)}function U6(){const t=Vv(),e=T.useMemo(()=>XL(t.localParticipant),[t]);return Zn(e,t.localParticipant.permissions)}function I6({kind:t,room:e,track:n,requestPermissions:i,onError:a}){const o=Tf(),c=T.useMemo(()=>e??o??new mr,[e,o]),u=T.useMemo(()=>HL(t,a,i),[t,i,a]),f=Zn(u,[]),[h,m]=T.useState((c==null?void 0:c.getActiveDevice(t))??"default"),{className:v,activeDeviceObservable:b,setActiveMediaDevice:k}=T.useMemo(()=>$L(t,c),[t,c,n]);return T.useEffect(()=>{const C=b.subscribe(S=>{S&&(gt.info("setCurrentDeviceId",S),m(S))});return()=>{C==null||C.unsubscribe()}},[b]),{devices:f,className:v,activeDeviceId:h,setActiveMediaDevice:k}}function z6(t,e,n={}){const i=T.useRef([]),a=T.useRef(-1),o=e!==a.current,c=typeof n.customSortFunction=="function"?n.customSortFunction(t):_L(t);let u=[...c];if(o===!1)try{u=IL(i.current,c,e)}catch(f){gt.error("Error while running updatePages(): ",f)}return o?i.current=c:i.current=u,a.current=e,u}function B6(t,e){const[n,i]=T.useState(1),a=Math.max(Math.ceil(e.length/t),1);n>a&&i(a);const o=n*t,c=o-t,u=m=>{i(v=>m==="next"?v===a?v:v+1:v===1?v:v-1)},f=m=>{m>a?i(a):m<1?i(1):i(m)},h=z6(e,t).slice(c,o);return{totalPageCount:a,nextPage:()=>u("next"),prevPage:()=>u("previous"),setPage:f,firstItemIndex:c,lastItemIndex:o,tracks:h,currentPage:n}}function q6({trackRef:t,onParticipantClick:e,disableSpeakingIndicator:n,htmlProps:i}){const a=Go(t),o=T.useMemo(()=>{const{className:b}=r6();return Sr(i,{className:b,onClick:k=>{var C;if((C=i.onClick)==null||C.call(i,k),typeof e=="function"){const S=a.publication??a.participant.getTrackPublication(a.source);e({participant:a.participant,track:S})}}})},[i,e,a.publication,a.source,a.participant]),c=a.participant.getTrackPublication(re.Source.Microphone),u=T.useMemo(()=>({participant:a.participant,source:re.Source.Microphone,publication:c}),[c,a.participant]),f=VT(a),h=VT(u),m=j6(a.participant),v=D6(a);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":f,"data-lk-speaking":n===!0?!1:m,"data-lk-local-participant":a.participant.isLocal,"data-lk-source":a.source,"data-lk-facing-mode":v,...o}}}function H6({room:t,props:e}){const n=_c(t),{className:i,roomAudioPlaybackAllowedObservable:a,handleStartAudioPlayback:o}=T.useMemo(()=>a6(),[]),c=T.useMemo(()=>a(n),[n,a]),{canPlayAudio:u}=Zn(c,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:T.useMemo(()=>Sr(e,{className:i,onClick:()=>{o(n)},style:{display:u?"none":"block"}}),[e,i,u,o,n]),canPlayAudio:u}}function F6({room:t,props:e}){const n=_c(t),{className:i,roomVideoPlaybackAllowedObservable:a,handleStartVideoPlayback:o}=T.useMemo(()=>s6(),[]),c=T.useMemo(()=>a(n),[n,a]),{canPlayVideo:u}=Zn(c,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:T.useMemo(()=>Sr(e,{className:i,onClick:()=>{o(n)},style:{display:u?"none":"block"}}),[e,i,u,o,n]),canPlayVideo:u}}function V6(t,e={}){const n=T.useRef(null),i=T.useRef(null),a=e.minSwipeDistance??50,o=f=>{i.current=null,n.current=f.targetTouches[0].clientX},c=f=>{i.current=f.targetTouches[0].clientX},u=T.useCallback(()=>{if(!n.current||!i.current)return;const f=n.current-i.current,h=f>a,m=f<-a;h&&e.onLeftSwipe&&e.onLeftSwipe(),m&&e.onRightSwipe&&e.onRightSwipe()},[a,e]);T.useEffect(()=>{const f=t.current;return f&&(f.addEventListener("touchstart",o,{passive:!0}),f.addEventListener("touchmove",c,{passive:!0}),f.addEventListener("touchend",u,{passive:!0})),()=>{f&&(f.removeEventListener("touchstart",o),f.removeEventListener("touchmove",c),f.removeEventListener("touchend",u))}},[t,u])}function G6({props:t}){const{dispatch:e,state:n}=rx().widget,{className:i}=T.useMemo(()=>o6(),[]);return{mergedProps:T.useMemo(()=>Sr(t,{className:i,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,i,e,n])}}function Q6(t){var e,n;const i=Go(t),{className:a,mediaMutedObserver:o}=T.useMemo(()=>n6(i),[tn(i)]);return{isMuted:Zn(o,!!((e=i.publication)!=null&&e.isMuted||(n=i.participant.getTrackPublication(i.source))!=null&&n.isMuted)),className:a}}function K6({source:t,onChange:e,initialState:n,captureOptions:i,publishOptions:a,onDeviceError:o,...c}){var u;const f=Tf(),h=(u=f==null?void 0:f.localParticipant)==null?void 0:u.getTrackPublication(t),m=T.useRef(!1),{toggle:v,className:b,pendingObserver:k,enabledObserver:C}=T.useMemo(()=>f?WL(t,f,i,a,o):ZL(),[f,t,JSON.stringify(i),a]),S=Zn(k,!1),O=Zn(C,n??!!(h!=null&&h.isEnabled));T.useEffect(()=>{e==null||e(O,m.current),m.current=!1},[O,e]),T.useEffect(()=>{n!==void 0&&(gt.debug("forcing initial toggle state",t,n),v(n))},[]);const _=T.useMemo(()=>Sr(c,{className:b}),[c,b]),L=T.useCallback(I=>{var j;m.current=!0,v().catch(()=>m.current=!1),(j=c.onClick)==null||j.call(c,I)},[c,v]);return{toggle:v,enabled:O,pending:S,track:h,buttonProps:{..._,"aria-pressed":O,"data-lk-source":t,"data-lk-enabled":O,disabled:S,onClick:L}}}function cx(t=[re.Source.Camera,re.Source.Microphone,re.Source.ScreenShare,re.Source.ScreenShareAudio,re.Source.Unknown],e={}){const n=_c(e.room),[i,a]=T.useState([]),[o,c]=T.useState([]),u=T.useMemo(()=>t.map(f=>ex(f)?f.source:f),[JSON.stringify(t)]);return T.useEffect(()=>{const f=c6(n,u,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:h,participants:m})=>{gt.debug("setting track bundles",h,m),a(h),c(m)});return()=>f.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),T.useMemo(()=>{if(tx(t)){const f=J6(t,o),h=Array.from(i);return o.forEach(m=>{f.has(m.identity)&&(f.get(m.identity)??[]).forEach(v=>{if(i.find(({participant:k,publication:C})=>m.identity===k.identity&&C.source===v))return;gt.debug(`Add ${v} placeholder for participant ${m.identity}.`);const b={participant:m,source:v};h.push(b)})}),h}else return i},[i,o,t])}function Y6(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function J6(t,e){const n=new Map;if(tx(t)){const i=t.filter(a=>a.withPlaceholder).map(a=>a.source);e.forEach(a=>{const o=a.getTrackPublications().map(u=>{var f;return(f=u.track)==null?void 0:f.source}).filter(u=>u!==void 0),c=Array.from(Y6(new Set(i),new Set(o)));c.length>0&&n.set(a.identity,c)})}return n}function X6(t={}){const[e,n]=T.useState(y6(t.defaults,t.preventLoad??!1)),i=T.useCallback(f=>{n(h=>({...h,audioEnabled:f}))},[]),a=T.useCallback(f=>{n(h=>({...h,videoEnabled:f}))},[]),o=T.useCallback(f=>{n(h=>({...h,audioDeviceId:f}))},[]),c=T.useCallback(f=>{n(h=>({...h,videoDeviceId:f}))},[]),u=T.useCallback(f=>{n(h=>({...h,username:f}))},[]);return T.useEffect(()=>{v6(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:i,saveVideoInputEnabled:a,saveAudioInputDeviceId:o,saveVideoInputDeviceId:c,saveUsername:u}}function W6(t,e={}){const n=Oc(t),i=_c(e.room),a=T.useMemo(()=>QL(i,n),[i,n]);return Zn(a,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const Z6=T.forwardRef(function(t,e){const{mergedProps:n}=G6({props:t});return T.createElement("button",{ref:e,...n},t.children)}),$6=T.forwardRef(function(t,e){const{buttonProps:n}=M6(t);return T.createElement("button",{ref:e,...n},t.children)}),ej=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},T.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),T.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),tj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},T.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),nj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...t},T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),GT=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),ij=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},T.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),rj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),aj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),sj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),oj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},T.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),T.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),lj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},T.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),T.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),cj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),uj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("g",{opacity:.25},T.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),dj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("g",{opacity:.25},T.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),T.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),fj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},T.createElement("g",{opacity:.25},T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),T.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),ux=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),T.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),hj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},T.createElement("g",{fill:"currentColor"},T.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),T.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),pj=t=>T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},T.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},T.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),mj=T.forwardRef(function({trackRef:t,...e},n){const i=Sf(),{mergedProps:a,inFocus:o}=N6({trackRef:t??i,props:e});return T.createElement(Bv.Consumer,null,c=>c!==void 0&&T.createElement("button",{ref:n,...a},e.children?e.children:o?T.createElement(pj,null):T.createElement(ij,null)))}),gm=T.forwardRef(function({kind:t,initialSelection:e,onActiveDeviceChange:n,onDeviceListChange:i,onDeviceSelectError:a,exactMatch:o,track:c,requestPermissions:u,onError:f,...h},m){const v=Tf(),b=T.useCallback(E=>{v&&v.emit(ce.MediaDevicesError,E),f==null||f(E)},[v,f]),{devices:k,activeDeviceId:C,setActiveMediaDevice:S,className:O}=I6({kind:t,room:v,track:c,requestPermissions:u,onError:b});T.useEffect(()=>{e!==void 0&&S(e)},[S]),T.useEffect(()=>{typeof i=="function"&&i(k)},[i,k]),T.useEffect(()=>{C&&C!==""&&(n==null||n(C))},[C]);const _=async E=>{try{await S(E,{exact:o??!0})}catch(D){if(D instanceof Error)a==null||a(D);else throw D}},L=T.useMemo(()=>fs(h,{className:O},{className:"lk-list"}),[O,h]),I=!!k.find(E=>E.label.toLowerCase().startsWith("default"));function j(E,D,U){return E===D||!I&&U===0&&D==="default"}return T.createElement("ul",{ref:m,...L},k.map((E,D)=>T.createElement("li",{key:E.deviceId,id:E.deviceId,"data-lk-active":j(E.deviceId,C,D),"aria-selected":j(E.deviceId,C,D),role:"option"},T.createElement("button",{className:"lk-button",onClick:()=>_(E.deviceId)},E.label))))}),gj=T.forwardRef(function({label:t,...e},n){const i=Vv(),{mergedProps:a,canPlayAudio:o}=H6({room:i,props:e}),{mergedProps:c,canPlayVideo:u}=F6({room:i,props:a}),{style:f,...h}=c;return f.display=o&&u?"none":"block",T.createElement("button",{ref:n,style:f,...h},t??`Start ${o?"Video":"Audio"}`)});function dx(t,e){switch(t){case re.Source.Microphone:return e?T.createElement(lj,null):T.createElement(oj,null);case re.Source.Camera:return e?T.createElement(tj,null):T.createElement(ej,null);case re.Source.ScreenShare:return e?T.createElement(hj,null):T.createElement(ux,null);default:return}}function vj(t){switch(t){case Xn.Excellent:return T.createElement(cj,null);case Xn.Good:return T.createElement(uj,null);case Xn.Poor:return T.createElement(dj,null);default:return T.createElement(fj,null)}}const vm=T.forwardRef(function({showIcon:t,...e},n){const{buttonProps:i,enabled:a}=K6(e),[o,c]=T.useState(!1);return T.useEffect(()=>{c(!0)},[]),o&&T.createElement("button",{ref:n,...i},(t??!0)&&dx(e.source,a),e.children)}),yj=T.forwardRef(function(t,e){const{className:n,quality:i}=P6(t),a=T.useMemo(()=>({...fs(t,{className:n}),"data-lk-quality":i}),[i,t,n]);return T.createElement("div",{ref:e,...a},t.children??vj(i))}),QT=T.forwardRef(function({participant:t,...e},n){const i=Oc(t),{className:a,infoObserver:o}=T.useMemo(()=>i6(i),[i]),{identity:c,name:u}=Zn(o,{name:i.name,identity:i.identity,metadata:i.metadata}),f=T.useMemo(()=>fs(e,{className:a,"data-lk-participant-name":u}),[e,a,u]);return T.createElement("span",{ref:n,...f},u!==""?u:c,e.children)}),bj=T.forwardRef(function({trackRef:t,show:e="always",...n},i){const{className:a,isMuted:o}=Q6(t),c=e==="always"||e==="muted"&&o||e==="unmuted"&&!o,u=T.useMemo(()=>fs(n,{className:a}),[a,n]);return c?T.createElement("div",{ref:i,...u,"data-lk-muted":o},n.children??dx(t.source,!o)):null}),Sj=t=>T.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},T.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),T.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function fx(t,e={}){const[n,i]=T.useState(Fg(t)),[a,o]=T.useState(n==null?void 0:n.isMuted),[c,u]=T.useState(n==null?void 0:n.isSubscribed),[f,h]=T.useState(n==null?void 0:n.track),[m,v]=T.useState("landscape"),b=T.useRef(),{className:k,trackObserver:C}=T.useMemo(()=>BL(t),[t.participant.sid??t.participant.identity,t.source,wn(t)&&t.publication.trackSid]);return T.useEffect(()=>{const S=C.subscribe(O=>{gt.debug("update track",O),i(O),o(O==null?void 0:O.isMuted),u(O==null?void 0:O.isSubscribed),h(O==null?void 0:O.track)});return()=>S==null?void 0:S.unsubscribe()},[C]),T.useEffect(()=>{var S,O;return f&&(b.current&&f.detach(b.current),(S=e.element)!=null&&S.current&&!(t.participant.isLocal&&(f==null?void 0:f.kind)==="audio")&&f.attach(e.element.current)),b.current=(O=e.element)==null?void 0:O.current,()=>{b.current&&(f==null||f.detach(b.current))}},[f,e.element]),T.useEffect(()=>{var S,O;if(typeof((S=n==null?void 0:n.dimensions)==null?void 0:S.width)=="number"&&typeof((O=n==null?void 0:n.dimensions)==null?void 0:O.height)=="number"){const _=n.dimensions.width>n.dimensions.height?"landscape":"portrait";v(_)}},[n]),{publication:n,isMuted:a,isSubscribed:c,track:f,elementProps:fs(e.props,{className:k,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n==null?void 0:n.source,...(n==null?void 0:n.kind)==="video"&&{"data-lk-orientation":m}})}}var ym,KT;function Tj(){if(KT)return ym;KT=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,f=typeof $u=="object"&&$u&&$u.Object===Object&&$u,h=typeof self=="object"&&self&&self.Object===Object&&self,m=f||h||Function("return this")(),v=Object.prototype,b=v.toString,k=Math.max,C=Math.min,S=function(){return m.Date.now()};function O(E,D,U){var K,N,P,V,J,Y,W=0,ge=!1,H=!1,w=!0;if(typeof E!="function")throw new TypeError(t);D=j(D)||0,_(U)&&(ge=!!U.leading,H="maxWait"in U,P=H?k(j(U.maxWait)||0,D):P,w="trailing"in U?!!U.trailing:w);function ve(me){var Te=K,Re=N;return K=N=void 0,W=me,V=E.apply(Re,Te),V}function q(me){return W=me,J=setTimeout(G,D),ge?ve(me):V}function y(me){var Te=me-Y,Re=me-W,Me=D-Te;return H?C(Me,P-Re):Me}function M(me){var Te=me-Y,Re=me-W;return Y===void 0||Te>=D||Te<0||H&&Re>=P}function G(){var me=S();if(M(me))return $(me);J=setTimeout(G,y(me))}function $(me){return J=void 0,w&&K?ve(me):(K=N=void 0,V)}function ne(){J!==void 0&&clearTimeout(J),W=0,K=Y=N=J=void 0}function fe(){return J===void 0?V:$(S())}function oe(){var me=S(),Te=M(me);if(K=arguments,N=this,Y=me,Te){if(J===void 0)return q(Y);if(H)return J=setTimeout(G,D),ve(Y)}return J===void 0&&(J=setTimeout(G,D)),V}return oe.cancel=ne,oe.flush=fe,oe}function _(E){var D=typeof E;return!!E&&(D=="object"||D=="function")}function L(E){return!!E&&typeof E=="object"}function I(E){return typeof E=="symbol"||L(E)&&b.call(E)==n}function j(E){if(typeof E=="number")return E;if(I(E))return e;if(_(E)){var D=typeof E.valueOf=="function"?E.valueOf():E;E=_(D)?D+"":D}if(typeof E!="string")return E===0?E:+E;E=E.replace(i,"");var U=o.test(E);return U||c.test(E)?u(E.slice(2),U?2:8):a.test(E)?e:+E}return ym=O,ym}var kj=Tj();const YT=ME(kj);function Cj(t){const e=T.useRef(t);e.current=t,T.useEffect(()=>()=>{e.current()},[])}function wj(t,e=500,n){const i=T.useRef();Cj(()=>{i.current&&i.current.cancel()});const a=T.useMemo(()=>{const o=YT(t,e,n),c=(...u)=>o(...u);return c.cancel=()=>{o.cancel()},c.isPending=()=>!!i.current,c.flush=()=>o.flush(),c},[t,e,n]);return T.useEffect(()=>{i.current=YT(t,e,n)},[t,e,n]),a}function Ej(t,e,n){const i=(h,m)=>h===m,a=t instanceof Function?t():t,[o,c]=T.useState(a),u=T.useRef(a),f=wj(c,e,n);return i(u.current,a)||(f(a),u.current=a),[o,f]}function xj({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:i=!1,initialIsIntersecting:a=!1,onChange:o}={}){var c;const[u,f]=T.useState(null),[h,m]=T.useState(()=>({isIntersecting:a,entry:void 0})),v=T.useRef();v.current=o;const b=((c=h.entry)==null?void 0:c.isIntersecting)&&i;T.useEffect(()=>{if(!u||!("IntersectionObserver"in window)||b)return;const S=new IntersectionObserver(O=>{const _=Array.isArray(S.thresholds)?S.thresholds:[S.thresholds];O.forEach(L=>{const I=L.isIntersecting&&_.some(j=>L.intersectionRatio>=j);m({isIntersecting:I,entry:L}),v.current&&v.current(I,L)})},{threshold:t,root:e,rootMargin:n});return S.observe(u),()=>{S.disconnect()}},[u,JSON.stringify(t),e,n,b,i]);const k=T.useRef(null);T.useEffect(()=>{var S;!u&&(S=h.entry)!=null&&S.target&&!i&&!b&&k.current!==h.entry.target&&(k.current=h.entry.target,m({isIntersecting:a,entry:void 0}))},[u,h.entry,i,b,a]);const C=[f,!!h.isIntersecting,h.entry];return C.ref=C[0],C.isIntersecting=C[1],C.entry=C[2],C}const Rj=T.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:i,manageSubscription:a,...o},c){const u=Go(i),f=T.useRef(null);T.useImperativeHandle(c,()=>f.current);const h=xj({root:f.current}),[m]=Ej(h,3e3);T.useEffect(()=>{a&&u.publication instanceof Bd&&(m==null?void 0:m.isIntersecting)===!1&&(h==null?void 0:h.isIntersecting)===!1&&u.publication.setSubscribed(!1)},[m,u,a]),T.useEffect(()=>{a&&u.publication instanceof Bd&&(h==null?void 0:h.isIntersecting)===!0&&u.publication.setSubscribed(!0)},[h,u,a]);const{elementProps:v,publication:b,isSubscribed:k}=fx(u,{element:f,props:o});T.useEffect(()=>{n==null||n(!!k)},[k,n]);const C=S=>{e==null||e(S),t==null||t({participant:u==null?void 0:u.participant,track:b})};return T.createElement("video",{ref:f,...v,muted:!0,onClick:C})}),hx=T.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},a){const o=Go(t),c=T.useRef(null);T.useImperativeHandle(a,()=>c.current);const{elementProps:u,isSubscribed:f,track:h,publication:m}=fx(o,{element:c,props:i});return T.useEffect(()=>{e==null||e(!!f)},[f,e]),T.useEffect(()=>{h===void 0||n===void 0||(h instanceof vE?h.setVolume(n):gt.warn("Volume can only be set on remote audio tracks."))},[n,h]),T.useEffect(()=>{m===void 0||i.muted===void 0||(m instanceof Bd?m.setEnabled(!i.muted):gt.warn("Can only call setEnabled on remote track publications."))},[i.muted,m,h]),T.createElement("audio",{ref:c,...u})});function Oj(t){const e=!!sx();return t.participant&&!e?T.createElement(ax.Provider,{value:t.participant},t.children):T.createElement(T.Fragment,null,t.children)}function _j(t){const e=!!Sf();return t.trackRef&&!e?T.createElement(Hv.Provider,{value:t.trackRef},t.children):T.createElement(T.Fragment,null,t.children)}const Pj=T.forwardRef(function({trackRef:t,children:e,onParticipantClick:n,disableSpeakingIndicator:i,...a},o){var c,u;const f=Go(t),{elementProps:h}=q6({htmlProps:a,disableSpeakingIndicator:i,onParticipantClick:n,trackRef:f}),m=W6(f.participant),v=qv(),b=(c=S6())==null?void 0:c.autoSubscription,k=T.useCallback(C=>{f.source&&!C&&v&&v.pin.dispatch&&ZE(f,v.pin.state)&&v.pin.dispatch({msg:"clear_pin"})},[f,v]);return T.createElement("div",{ref:o,style:{position:"relative"},...h},T.createElement(_j,{trackRef:f},T.createElement(Oj,{participant:f.participant},e??T.createElement(T.Fragment,null,wn(f)&&(((u=f.publication)==null?void 0:u.kind)==="video"||f.source===re.Source.Camera||f.source===re.Source.ScreenShare)?T.createElement(Rj,{trackRef:f,onSubscriptionStatusChanged:k,manageSubscription:b}):wn(f)&&T.createElement(hx,{trackRef:f,onSubscriptionStatusChanged:k}),T.createElement("div",{className:"lk-participant-placeholder"},T.createElement(Sj,null)),T.createElement("div",{className:"lk-participant-metadata"},T.createElement("div",{className:"lk-participant-metadata-item"},f.source===re.Source.Camera?T.createElement(T.Fragment,null,m&&T.createElement(sj,{style:{marginRight:"0.25rem"}}),T.createElement(bj,{trackRef:{participant:f.participant,source:re.Source.Microphone},show:"muted"}),T.createElement(QT,null)):T.createElement(T.Fragment,null,T.createElement(ux,{style:{marginRight:"0.25rem"}}),T.createElement(QT,null,"'s screen"))),T.createElement(yj,{className:"lk-participant-metadata-item"}))),T.createElement(mj,{trackRef:f}))))});function Aj({tracks:t,...e}){return T.createElement(T.Fragment,null,t.map(n=>T.createElement(Hv.Provider,{value:n,key:tn(n)},C6(e.children))))}function Mj({totalPageCount:t,nextPage:e,prevPage:n,currentPage:i,pagesContainer:a}){const[o,c]=T.useState(!1);return T.useEffect(()=>{let u;return a&&(u=u6(a.current,2e3).subscribe(c)),()=>{u&&u.unsubscribe()}},[a]),T.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},T.createElement("button",{className:"lk-button",onClick:n},T.createElement(GT,null)),T.createElement("span",{className:"lk-pagination-count"},`${i} of ${t}`),T.createElement("button",{className:"lk-button",onClick:e},T.createElement(GT,null)))}const Dj=T.forwardRef(function({totalPageCount:t,currentPage:e},n){const i=new Array(t).fill("").map((a,o)=>o+1===e?T.createElement("span",{"data-lk-active":!0,key:o}):T.createElement("span",{key:o}));return T.createElement("div",{ref:n,className:"lk-pagination-indicator"},i)});function Nj({tracks:t,...e}){const n=T.createRef(),i=T.useMemo(()=>fs(e,{className:"lk-grid-layout"}),[e]),{layout:a}=L6(n,t.length),o=B6(a.maxTiles,t);return V6(n,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),T.createElement("div",{ref:n,"data-lk-pagination":o.totalPageCount>1,...i},T.createElement(Aj,{tracks:o.tracks},e.children),t.length>a.maxTiles&&T.createElement(T.Fragment,null,T.createElement(Dj,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),T.createElement(Mj,{pagesContainer:n,...o})))}function Lj({volume:t,muted:e}){const n=cx([re.Source.Microphone,re.Source.ScreenShareAudio,re.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===re.Kind.Audio);return T.createElement("div",{style:{display:"none"}},n.map(i=>T.createElement(hx,{key:tn(i),trackRef:i,volume:t,muted:e})))}function JT({kind:t,initialSelection:e,onActiveDeviceChange:n,tracks:i,requestPermissions:a=!1,...o}){const[c,u]=T.useState(!1),[f,h]=T.useState([]),[m,v]=T.useState(!0),[b,k]=T.useState(a),C=(L,I)=>{gt.debug("handle device change"),u(!1),n==null||n(L,I)},S=T.useRef(null),O=T.useRef(null);T.useLayoutEffect(()=>{c&&k(!0)},[c]),T.useLayoutEffect(()=>{let L;return S.current&&O.current&&(f||m)&&(L=gL(S.current,O.current,(I,j)=>{O.current&&Object.assign(O.current.style,{left:`${I}px`,top:`${j}px`})})),v(!1),()=>{L==null||L()}},[S,O,f,m]);const _=T.useCallback(L=>{O.current&&L.target!==S.current&&c&&vL(O.current,L)&&u(!1)},[c,O,S]);return T.useEffect(()=>(document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}),[_]),T.createElement(T.Fragment,null,T.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":c,...o,onClick:()=>u(!c),ref:S},o.children),!o.disabled&&T.createElement("div",{className:"lk-device-menu",ref:O,style:{visibility:c?"visible":"hidden"}},t?T.createElement(gm,{initialSelection:e,onActiveDeviceChange:L=>C(t,L),onDeviceListChange:h,kind:t,track:i==null?void 0:i[t],requestPermissions:b}):T.createElement(T.Fragment,null,T.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),T.createElement(gm,{kind:"audioinput",onActiveDeviceChange:L=>C("audioinput",L),onDeviceListChange:h,track:i==null?void 0:i.audioinput,requestPermissions:b}),T.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),T.createElement(gm,{kind:"videoinput",onActiveDeviceChange:L=>C("videoinput",L),onDeviceListChange:h,track:i==null?void 0:i.videoinput,requestPermissions:b}))))}function jj({props:t}){const{dispatch:e,state:n}=rx().widget,i="lk-button lk-settings-toggle";return{mergedProps:T.useMemo(()=>Sr(t,{className:i,onClick:()=>{e&&e({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[t,i,e,n])}}const Uj=T.forwardRef(function(t,e){const{mergedProps:n}=jj({props:t});return T.createElement("button",{ref:e,...n},t.children)});function Ij({variation:t,controls:e,saveUserChoices:n=!0,onDeviceError:i,...a}){var o;const[c,u]=T.useState(!1),f=qv();T.useEffect(()=>{var N,P;((N=f==null?void 0:f.widget.state)==null?void 0:N.showChat)!==void 0&&u((P=f==null?void 0:f.widget.state)==null?void 0:P.showChat)},[(o=f==null?void 0:f.widget.state)==null?void 0:o.showChat]);const h=_6(`(max-width: ${c?1e3:760}px)`)?"minimal":"verbose";t??(t=h);const m={leave:!0,...e},v=U6();v?(m.camera??(m.camera=v.canPublish),m.microphone??(m.microphone=v.canPublish),m.screenShare??(m.screenShare=v.canPublish),m.chat??(m.chat=v.canPublishData&&(e==null?void 0:e.chat))):(m.camera=!1,m.chat=!1,m.microphone=!1,m.screenShare=!1);const b=T.useMemo(()=>t==="minimal"||t==="verbose",[t]),k=T.useMemo(()=>t==="textOnly"||t==="verbose",[t]),C=CL(),[S,O]=T.useState(!1),_=T.useCallback(N=>{O(N)},[O]),L=fs({className:"lk-control-bar"},a),{saveAudioInputEnabled:I,saveVideoInputEnabled:j,saveAudioInputDeviceId:E,saveVideoInputDeviceId:D}=X6({preventSave:!n}),U=T.useCallback((N,P)=>P?I(N):null,[I]),K=T.useCallback((N,P)=>P?j(N):null,[j]);return T.createElement("div",{...L},m.microphone&&T.createElement("div",{className:"lk-button-group"},T.createElement(vm,{source:re.Source.Microphone,showIcon:b,onChange:U,onDeviceError:N=>i==null?void 0:i({source:re.Source.Microphone,error:N})},k&&"Microphone"),T.createElement("div",{className:"lk-button-group-menu"},T.createElement(JT,{kind:"audioinput",onActiveDeviceChange:(N,P)=>E(P??"default")}))),m.camera&&T.createElement("div",{className:"lk-button-group"},T.createElement(vm,{source:re.Source.Camera,showIcon:b,onChange:K,onDeviceError:N=>i==null?void 0:i({source:re.Source.Camera,error:N})},k&&"Camera"),T.createElement("div",{className:"lk-button-group-menu"},T.createElement(JT,{kind:"videoinput",onActiveDeviceChange:(N,P)=>D(P??"default")}))),m.screenShare&&C&&T.createElement(vm,{source:re.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:b,onChange:_,onDeviceError:N=>i==null?void 0:i({source:re.Source.ScreenShare,error:N})},k&&(S?"Stop screen share":"Share screen")),m.chat&&T.createElement(Z6,null,b&&T.createElement(nj,null),k&&"Chat"),m.settings&&T.createElement(Uj,null,b&&T.createElement(rj,null),k&&"Settings"),m.leave&&T.createElement($6,null,b&&T.createElement(aj,null),k&&"Leave"),T.createElement(gj,null))}const zj=()=>{const t=cx([{source:re.Source.Camera,withPlaceholder:!0},{source:re.Source.ScreenShare,withPlaceholder:!1}],{onlySubscribed:!1});return R.jsx(Nj,{tracks:t,style:{height:"calc(100vh - var(--lk-control-bar-height))"},children:R.jsx(Pj,{})})},Bj=({token:t,serverUrl:e})=>{const[n]=T.useState(()=>new mr({adaptiveStream:!0,dynacast:!0}));return T.useEffect(()=>{(async()=>{try{if(!e||!t){console.error("Missing serverUrl or token");return}await n.connect(e,t),console.log("Connected to the room successfully!")}catch(o){console.error("Error connecting to the room:",o)}})();const a=()=>{console.log("Room disconnected. Reloading page..."),window.location.reload()};return n.on("disconnected",a),()=>{n.off("disconnected",a),n&&n.connected&&n.disconnect()}},[n,e,t]),R.jsx(Fv.Provider,{value:n,children:R.jsxs("div",{"data-lk-theme":"default",style:{height:"100vh"},children:[R.jsx(zj,{}),R.jsx(Lj,{}),R.jsx(Ij,{onLeave:()=>n.disconnect()})]})})},qj=({handleConnect:t})=>{const[e,n]=T.useState(""),[i,a]=T.useState(""),o=()=>{if(!e||!i){alert("Please provide both Room ID and Name.");return}t({roomId:e,userName:i})};return R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"roomId",className:"block text-sm font-medium text-white",children:"Room ID"}),R.jsx("input",{id:"roomId",type:"text",value:e,onChange:c=>n(c.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Room ID"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"userName",className:"block text-sm font-medium text-white",children:"Name"}),R.jsx("input",{id:"userName",type:"text",value:i,onChange:c=>a(c.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your name"})]}),R.jsx("div",{children:R.jsx("button",{onClick:o,className:"mt-4 w-full py-2 px-4 bg-blue-600 cursor-pointer text-white rounded-md shadow-md hover:bg-blue-700",children:"Join Room"})})]})},Gv=()=>{const[t,e]=T.useState(""),n=async({roomId:i,userName:a})=>{const o=await HA(i,a);e({...o.data})};return R.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:t?R.jsx(Bj,{token:t.token,serverUrl:t.url}):R.jsx("div",{className:"grid grid-cols-1 gap-8",children:R.jsx(qj,{handleConnect:n})})})},Hj=()=>{const[t,e]=T.useState("Profile"),[n,i]=T.useState(""),[a,o]=T.useState(""),[c,u]=T.useState(""),f=vr(),h=localStorage.getItem("userEmail")||"",m=[{name:"Profile",icon:"M12 12a4 4 0 100-8 4 4 0 000 8zM12 14c-4.42 0-8 1.79-8 4v2h16v-2c0-2.21-3.58-4-8-4z"},{name:"Jobs",icon:"M4 6h16v2H4zm0 4h16v2H4zm0 4h16v2H4z"},{name:"Applicants",icon:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12a4 4 0 100-8 4 4 0 000 8z"},{name:"Create Room",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3 9h-2v-2h-2v2H9v2h2v2h2v-2h2v-2z"},{name:"Join Room",icon:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}],v=()=>{switch(t){case"Profile":return R.jsx(MC,{userEmail:h,Role:"HR"});case"Jobs":return R.jsx(IA,{hrEmail:h,setSelectedJobId:i,onJobClick:b=>f(`/jobs/edit/${b}`)});case"Applicants":return R.jsx(BA,{});case"Create Room":return R.jsx("main",{className:"bg-gray-800 p-6 rounded-xl shadow-lg max-w-xl mx-auto",children:R.jsx(yr,{fields:[{name:"roomId",label:"Room ID",type:"text",value:a,isPassword:!1},{name:"date",label:"Interview Date",type:"datetime-local",value:c,isPassword:!1}],onSubmit:b=>{if(b.preventDefault(),!a.trim()||!c){alert("Please fill all fields.");return}const k=a.trim(),C=new Date(c).toISOString();localStorage.setItem("roomId",k),localStorage.setItem("time",C),alert("Interview Room details saved.")},buttonLabel:"Save Interview Info",isLoading:!1,errors:{},handleChange:b=>{const{name:k,value:C}=b.target;k==="roomId"&&o(C),k==="date"&&u(C)}})});case"Join Room":return R.jsx("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg max-w-xl mx-auto",children:R.jsx(Gv,{})});default:return null}};return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col md:flex-row  ",children:[R.jsx(AC,{activeSection:t,setActiveSection:e,sections:m}),R.jsxs("main",{className:"flex-1 p-6 md:p-10 md:ml-24 overflow-auto ",children:[R.jsx("h1",{className:"text-3xl text-center text-white font-extrabold mb-10 tracking-wide",children:"HR Dashboard"}),R.jsx("div",{className:"animate-fade-in",children:v()})]}),n&&""]})},Fj=({isLoading:t,appliedJobs:e,error:n})=>{const{mutate:i,isPending:a}=MA(),o=c=>{i(c,{onSuccess:u=>{alert(u)},onError:u=>{var m,v;const f=(m=u==null?void 0:u.response)==null?void 0:m.status,h=((v=u==null?void 0:u.response)==null?void 0:v.data)||"Something went wrong";alert(`Error ${f}: ${h}`)}})};return t?R.jsx("div",{className:"text-gray-400 text-center w-full py-4",children:"Loading applied jobs..."}):n?R.jsx("div",{className:"text-red-500 text-center w-full py-4",children:"Error loading jobs."}):!Array.isArray(e)||e.length===0?R.jsx("div",{className:"text-gray-400 text-center w-full py-4",children:"No jobs applied yet."}):R.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 w-full",children:e.map((c,u)=>{var f;return R.jsxs("div",{className:"bg-gray-800 p-5 rounded-2xl shadow-lg border border-gray-700 hover:border-blue-500 transition-all flex flex-col justify-between",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl text-white font-semibold mb-3 break-words",children:c.title||`Application ID: ${(f=c.id)==null?void 0:f.slice(-6).toUpperCase()}`}),R.jsxs("p",{className:"text-gray-400 text-sm mb-1",children:[R.jsx("span",{className:"font-medium",children:"Status:"})," ",c.status]}),R.jsxs("p",{className:"text-gray-400 text-sm mb-1",children:[R.jsx("span",{className:"font-medium",children:"Applied on:"})," ",new Date(c.appliedOn).toLocaleDateString()]}),R.jsxs("p",{className:"text-gray-400 text-sm mb-1 break-all",children:[R.jsx("span",{className:"font-medium",children:"Resume:"})," ",R.jsx("a",{href:c.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"View"})]}),R.jsxs("p",{className:"text-gray-400 text-sm mb-1 break-words",children:[R.jsx("span",{className:"font-medium",children:"Email:"})," ",c.applicantEmail]}),R.jsxs("p",{className:"text-gray-400 text-sm mb-2 break-all",children:[R.jsx("span",{className:"font-medium",children:"Job ID:"})," ",c.jobId]})]}),R.jsx(yn,{to:`/jobs/${c.jobId}`,className:"text-sm text-blue-500 no-underline mt-3 inline-block hover:underline",children:"View Job Posting "}),R.jsx("button",{onClick:()=>o(c.id),disabled:a,className:`mt-2 px-4 py-1 rounded text-sm text-white cursor-pointer ${a?"bg-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:a?"Withdrawing...":"Withdraw"})]},c.id||u)})})},Vj=()=>{const[t,e]=T.useState("Profile"),n=localStorage.getItem("userEmail")||"",{data:i,isLoading:a,error:o}=LA(n),c=[{name:"Profile",icon:"M12 12a4 4 0 100-8 4 4 0 000 8zM12 14c-4.42 0-8 1.79-8 4v2h16v-2c0-2.21-3.58-4-8-4z"},{name:"Applied Jobs",icon:"M4 6h16v2H4zm0 4h16v2H4zm0 4h16v2H4z"},{name:"Join Room",icon:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}],u=()=>{switch(t){case"Profile":return R.jsx(MC,{userEmail:n,Role:"Applicant"});case"Applied Jobs":return R.jsx(Fj,{isLoading:a,appliedJobs:i,error:o});case"Join Room":return R.jsx("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg max-w-xl mx-auto",children:R.jsx(Gv,{})});default:return null}};return R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-gray-800 flex flex-col md:flex-row",children:[R.jsx(AC,{activeSection:t,setActiveSection:e,sections:c}),R.jsxs("main",{className:"flex-1 p-6 md:p-10 md:ml-24",children:[R.jsx("h1",{className:"text-3xl text-center text-white font-extrabold mb-10 tracking-wide",children:"Applicant Dashboard"}),u()]})]})};var bm={},Sm={},$l={},Tm={},XT;function Gj(){return XT||(XT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=e}(Tm)),Tm}var km,WT;function Qj(){if(WT)return km;WT=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,f=typeof Qu=="object"&&Qu&&Qu.Object===Object&&Qu,h=typeof self=="object"&&self&&self.Object===Object&&self,m=f||h||Function("return this")(),v=Object.prototype,b=v.toString,k=Math.max,C=Math.min,S=function(){return m.Date.now()};function O(E,D,U){var K,N,P,V,J,Y,W=0,ge=!1,H=!1,w=!0;if(typeof E!="function")throw new TypeError(t);D=j(D)||0,_(U)&&(ge=!!U.leading,H="maxWait"in U,P=H?k(j(U.maxWait)||0,D):P,w="trailing"in U?!!U.trailing:w);function ve(me){var Te=K,Re=N;return K=N=void 0,W=me,V=E.apply(Re,Te),V}function q(me){return W=me,J=setTimeout(G,D),ge?ve(me):V}function y(me){var Te=me-Y,Re=me-W,Me=D-Te;return H?C(Me,P-Re):Me}function M(me){var Te=me-Y,Re=me-W;return Y===void 0||Te>=D||Te<0||H&&Re>=P}function G(){var me=S();if(M(me))return $(me);J=setTimeout(G,y(me))}function $(me){return J=void 0,w&&K?ve(me):(K=N=void 0,V)}function ne(){J!==void 0&&clearTimeout(J),W=0,K=Y=N=J=void 0}function fe(){return J===void 0?V:$(S())}function oe(){var me=S(),Te=M(me);if(K=arguments,N=this,Y=me,Te){if(J===void 0)return q(Y);if(H)return J=setTimeout(G,D),ve(Y)}return J===void 0&&(J=setTimeout(G,D)),V}return oe.cancel=ne,oe.flush=fe,oe}function _(E){var D=typeof E;return!!E&&(D=="object"||D=="function")}function L(E){return!!E&&typeof E=="object"}function I(E){return typeof E=="symbol"||L(E)&&b.call(E)==n}function j(E){if(typeof E=="number")return E;if(I(E))return e;if(_(E)){var D=typeof E.valueOf=="function"?E.valueOf():E;E=_(D)?D+"":D}if(typeof E!="string")return E===0?E:+E;E=E.replace(i,"");var U=o.test(E);return U||c.test(E)?u(E.slice(2),U?2:8):a.test(E)?e:+E}return km=O,km}var Cm={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var ZT;function kf(){return ZT||(ZT=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(o=a(o,i(u)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var c="";for(var u in o)e.call(o,u)&&o[u]&&(c=a(c,u));return c}function a(o,c){return c?o?o+" "+c:o+c:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(Cm)),Cm.exports}var Se={},wm={},$T;function px(){return $T||($T=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Ui());function n(a){return a&&a.__esModule?a:{default:a}}var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(o){return e.default.createElement("ul",{style:{display:"block"}},o)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(o){return e.default.createElement("button",null,o+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};t.default=i}(wm)),wm}var ek;function Pc(){if(ek)return Se;ek=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.checkSpecKeys=Se.checkNavigable=Se.changeSlide=Se.canUseDOM=Se.canGoNext=void 0,Se.clamp=h,Se.extractObject=void 0,Se.filterSettings=ve,Se.validSettings=Se.swipeStart=Se.swipeMove=Se.swipeEnd=Se.slidesOnRight=Se.slidesOnLeft=Se.slideHandler=Se.siblingDirection=Se.safePreventDefault=Se.lazyStartIndex=Se.lazySlidesOnRight=Se.lazySlidesOnLeft=Se.lazyEndIndex=Se.keyHandler=Se.initializedState=Se.getWidth=Se.getTrackLeft=Se.getTrackCSS=Se.getTrackAnimateCSS=Se.getTotalSlides=Se.getSwipeDirection=Se.getSlideCount=Se.getRequiredLazySlides=Se.getPreClones=Se.getPostClones=Se.getOnDemandLazySlides=Se.getNavigableIndexes=Se.getHeight=void 0;var t=n(Ui()),e=n(px());function n(q){return q&&q.__esModule?q:{default:q}}function i(q){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(q)}function a(q,y){var M=Object.keys(q);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(q);y&&(G=G.filter(function($){return Object.getOwnPropertyDescriptor(q,$).enumerable})),M.push.apply(M,G)}return M}function o(q){for(var y=1;y<arguments.length;y++){var M=arguments[y]!=null?arguments[y]:{};y%2?a(Object(M),!0).forEach(function(G){c(q,G,M[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(M)):a(Object(M)).forEach(function(G){Object.defineProperty(q,G,Object.getOwnPropertyDescriptor(M,G))})}return q}function c(q,y,M){return y=u(y),y in q?Object.defineProperty(q,y,{value:M,enumerable:!0,configurable:!0,writable:!0}):q[y]=M,q}function u(q){var y=f(q,"string");return i(y)=="symbol"?y:String(y)}function f(q,y){if(i(q)!="object"||!q)return q;var M=q[Symbol.toPrimitive];if(M!==void 0){var G=M.call(q,y);if(i(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(q)}function h(q,y,M){return Math.max(y,Math.min(q,M))}var m=Se.safePreventDefault=function(y){var M=["onTouchStart","onTouchMove","onWheel"];M.includes(y._reactName)||y.preventDefault()},v=Se.getOnDemandLazySlides=function(y){for(var M=[],G=b(y),$=k(y),ne=G;ne<$;ne++)y.lazyLoadedList.indexOf(ne)<0&&M.push(ne);return M};Se.getRequiredLazySlides=function(y){for(var M=[],G=b(y),$=k(y),ne=G;ne<$;ne++)M.push(ne);return M};var b=Se.lazyStartIndex=function(y){return y.currentSlide-C(y)},k=Se.lazyEndIndex=function(y){return y.currentSlide+S(y)},C=Se.lazySlidesOnLeft=function(y){return y.centerMode?Math.floor(y.slidesToShow/2)+(parseInt(y.centerPadding)>0?1:0):0},S=Se.lazySlidesOnRight=function(y){return y.centerMode?Math.floor((y.slidesToShow-1)/2)+1+(parseInt(y.centerPadding)>0?1:0):y.slidesToShow},O=Se.getWidth=function(y){return y&&y.offsetWidth||0},_=Se.getHeight=function(y){return y&&y.offsetHeight||0},L=Se.getSwipeDirection=function(y){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,G,$,ne,fe;return G=y.startX-y.curX,$=y.startY-y.curY,ne=Math.atan2($,G),fe=Math.round(ne*180/Math.PI),fe<0&&(fe=360-Math.abs(fe)),fe<=45&&fe>=0||fe<=360&&fe>=315?"left":fe>=135&&fe<=225?"right":M===!0?fe>=35&&fe<=135?"up":"down":"vertical"},I=Se.canGoNext=function(y){var M=!0;return y.infinite||(y.centerMode&&y.currentSlide>=y.slideCount-1||y.slideCount<=y.slidesToShow||y.currentSlide>=y.slideCount-y.slidesToShow)&&(M=!1),M};Se.extractObject=function(y,M){var G={};return M.forEach(function($){return G[$]=y[$]}),G},Se.initializedState=function(y){var M=t.default.Children.count(y.children),G=y.listRef,$=Math.ceil(O(G)),ne=y.trackRef&&y.trackRef.node,fe=Math.ceil(O(ne)),oe;if(y.vertical)oe=$;else{var me=y.centerMode&&parseInt(y.centerPadding)*2;typeof y.centerPadding=="string"&&y.centerPadding.slice(-1)==="%"&&(me*=$/100),oe=Math.ceil(($-me)/y.slidesToShow)}var Te=G&&_(G.querySelector('[data-index="0"]')),Re=Te*y.slidesToShow,Me=y.currentSlide===void 0?y.initialSlide:y.currentSlide;y.rtl&&y.currentSlide===void 0&&(Me=M-1-y.initialSlide);var Qe=y.lazyLoadedList||[],Ke=v(o(o({},y),{},{currentSlide:Me,lazyLoadedList:Qe}));Qe=Qe.concat(Ke);var qe={slideCount:M,slideWidth:oe,listWidth:$,trackWidth:fe,currentSlide:Me,slideHeight:Te,listHeight:Re,lazyLoadedList:Qe};return y.autoplaying===null&&y.autoplay&&(qe.autoplaying="playing"),qe},Se.slideHandler=function(y){var M=y.waitForAnimate,G=y.animating,$=y.fade,ne=y.infinite,fe=y.index,oe=y.slideCount,me=y.lazyLoad,Te=y.currentSlide,Re=y.centerMode,Me=y.slidesToScroll,Qe=y.slidesToShow,Ke=y.useCSS,qe=y.lazyLoadedList;if(M&&G)return{};var Ne=fe,Je,Et,_e,vt={},xt={},Pt=ne?fe:h(fe,0,oe-1);if($){if(!ne&&(fe<0||fe>=oe))return{};fe<0?Ne=fe+oe:fe>=oe&&(Ne=fe-oe),me&&qe.indexOf(Ne)<0&&(qe=qe.concat(Ne)),vt={animating:!0,currentSlide:Ne,lazyLoadedList:qe,targetSlide:Ne},xt={animating:!1,targetSlide:Ne}}else Je=Ne,Ne<0?(Je=Ne+oe,ne?oe%Me!==0&&(Je=oe-oe%Me):Je=0):!I(y)&&Ne>Te?Ne=Je=Te:Re&&Ne>=oe?(Ne=ne?oe:oe-1,Je=ne?0:oe-1):Ne>=oe&&(Je=Ne-oe,ne?oe%Me!==0&&(Je=0):Je=oe-Qe),!ne&&Ne+Qe>=oe&&(Je=oe-Qe),Et=P(o(o({},y),{},{slideIndex:Ne})),_e=P(o(o({},y),{},{slideIndex:Je})),ne||(Et===_e&&(Ne=Je),Et=_e),me&&(qe=qe.concat(v(o(o({},y),{},{currentSlide:Ne})))),Ke?(vt={animating:!0,currentSlide:Je,trackStyle:N(o(o({},y),{},{left:Et})),lazyLoadedList:qe,targetSlide:Pt},xt={animating:!1,currentSlide:Je,trackStyle:K(o(o({},y),{},{left:_e})),swipeLeft:null,targetSlide:Pt}):vt={currentSlide:Je,trackStyle:K(o(o({},y),{},{left:_e})),lazyLoadedList:qe,targetSlide:Pt};return{state:vt,nextState:xt}},Se.changeSlide=function(y,M){var G,$,ne,fe,oe,me=y.slidesToScroll,Te=y.slidesToShow,Re=y.slideCount,Me=y.currentSlide,Qe=y.targetSlide,Ke=y.lazyLoad,qe=y.infinite;if(fe=Re%me!==0,G=fe?0:(Re-Me)%me,M.message==="previous")ne=G===0?me:Te-G,oe=Me-ne,Ke&&!qe&&($=Me-ne,oe=$===-1?Re-1:$),qe||(oe=Qe-me);else if(M.message==="next")ne=G===0?me:G,oe=Me+ne,Ke&&!qe&&(oe=(Me+me)%Re+G),qe||(oe=Qe+me);else if(M.message==="dots")oe=M.index*M.slidesToScroll;else if(M.message==="children"){if(oe=M.index,qe){var Ne=W(o(o({},y),{},{targetSlide:oe}));oe>M.currentSlide&&Ne==="left"?oe=oe-Re:oe<M.currentSlide&&Ne==="right"&&(oe=oe+Re)}}else M.message==="index"&&(oe=Number(M.index));return oe},Se.keyHandler=function(y,M,G){return y.target.tagName.match("TEXTAREA|INPUT|SELECT")||!M?"":y.keyCode===37?G?"next":"previous":y.keyCode===39?G?"previous":"next":""},Se.swipeStart=function(y,M,G){return y.target.tagName==="IMG"&&m(y),!M||!G&&y.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:y.touches?y.touches[0].pageX:y.clientX,startY:y.touches?y.touches[0].pageY:y.clientY,curX:y.touches?y.touches[0].pageX:y.clientX,curY:y.touches?y.touches[0].pageY:y.clientY}}},Se.swipeMove=function(y,M){var G=M.scrolling,$=M.animating,ne=M.vertical,fe=M.swipeToSlide,oe=M.verticalSwiping,me=M.rtl,Te=M.currentSlide,Re=M.edgeFriction,Me=M.edgeDragged,Qe=M.onEdge,Ke=M.swiped,qe=M.swiping,Ne=M.slideCount,Je=M.slidesToScroll,Et=M.infinite,_e=M.touchObject,vt=M.swipeEvent,xt=M.listHeight,Pt=M.listWidth;if(!G){if($)return m(y);ne&&fe&&oe&&m(y);var It,Hi={},ma=P(M);_e.curX=y.touches?y.touches[0].pageX:y.clientX,_e.curY=y.touches?y.touches[0].pageY:y.clientY,_e.swipeLength=Math.round(Math.sqrt(Math.pow(_e.curX-_e.startX,2)));var Ac=Math.round(Math.sqrt(Math.pow(_e.curY-_e.startY,2)));if(!oe&&!qe&&Ac>10)return{scrolling:!0};oe&&(_e.swipeLength=Ac);var ga=(me?-1:1)*(_e.curX>_e.startX?1:-1);oe&&(ga=_e.curY>_e.startY?1:-1);var va=Math.ceil(Ne/Je),yt=L(M.touchObject,oe),ln=_e.swipeLength;return Et||(Te===0&&(yt==="right"||yt==="down")||Te+1>=va&&(yt==="left"||yt==="up")||!I(M)&&(yt==="left"||yt==="up"))&&(ln=_e.swipeLength*Re,Me===!1&&Qe&&(Qe(yt),Hi.edgeDragged=!0)),!Ke&&vt&&(vt(yt),Hi.swiped=!0),ne?It=ma+ln*(xt/Pt)*ga:me?It=ma-ln*ga:It=ma+ln*ga,oe&&(It=ma+ln*ga),Hi=o(o({},Hi),{},{touchObject:_e,swipeLeft:It,trackStyle:K(o(o({},M),{},{left:It}))}),Math.abs(_e.curX-_e.startX)<Math.abs(_e.curY-_e.startY)*.8||_e.swipeLength>10&&(Hi.swiping=!0,m(y)),Hi}},Se.swipeEnd=function(y,M){var G=M.dragging,$=M.swipe,ne=M.touchObject,fe=M.listWidth,oe=M.touchThreshold,me=M.verticalSwiping,Te=M.listHeight,Re=M.swipeToSlide,Me=M.scrolling,Qe=M.onSwipe,Ke=M.targetSlide,qe=M.currentSlide,Ne=M.infinite;if(!G)return $&&m(y),{};var Je=me?Te/oe:fe/oe,Et=L(ne,me),_e={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(Me||!ne.swipeLength)return _e;if(ne.swipeLength>Je){m(y),Qe&&Qe(Et);var vt,xt,Pt=Ne?qe:Ke;switch(Et){case"left":case"up":xt=Pt+D(M),vt=Re?E(M,xt):xt,_e.currentDirection=0;break;case"right":case"down":xt=Pt-D(M),vt=Re?E(M,xt):xt,_e.currentDirection=1;break;default:vt=Pt}_e.triggerSlideHandler=vt}else{var It=P(M);_e.trackStyle=N(o(o({},M),{},{left:It}))}return _e};var j=Se.getNavigableIndexes=function(y){for(var M=y.infinite?y.slideCount*2:y.slideCount,G=y.infinite?y.slidesToShow*-1:0,$=y.infinite?y.slidesToShow*-1:0,ne=[];G<M;)ne.push(G),G=$+y.slidesToScroll,$+=Math.min(y.slidesToScroll,y.slidesToShow);return ne},E=Se.checkNavigable=function(y,M){var G=j(y),$=0;if(M>G[G.length-1])M=G[G.length-1];else for(var ne in G){if(M<G[ne]){M=$;break}$=G[ne]}return M},D=Se.getSlideCount=function(y){var M=y.centerMode?y.slideWidth*Math.floor(y.slidesToShow/2):0;if(y.swipeToSlide){var G,$=y.listRef,ne=$.querySelectorAll&&$.querySelectorAll(".slick-slide")||[];if(Array.from(ne).every(function(me){if(y.vertical){if(me.offsetTop+_(me)/2>y.swipeLeft*-1)return G=me,!1}else if(me.offsetLeft-M+O(me)/2>y.swipeLeft*-1)return G=me,!1;return!0}),!G)return 0;var fe=y.rtl===!0?y.slideCount-y.currentSlide:y.currentSlide,oe=Math.abs(G.dataset.index-fe)||1;return oe}else return y.slidesToScroll},U=Se.checkSpecKeys=function(y,M){return M.reduce(function(G,$){return G&&y.hasOwnProperty($)},!0)?null:console.error("Keys Missing:",y)},K=Se.getTrackCSS=function(y){U(y,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var M,G,$=y.slideCount+2*y.slidesToShow;y.vertical?G=$*y.slideHeight:M=Y(y)*y.slideWidth;var ne={opacity:1,transition:"",WebkitTransition:""};if(y.useTransform){var fe=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",oe=y.vertical?"translate3d(0px, "+y.left+"px, 0px)":"translate3d("+y.left+"px, 0px, 0px)",me=y.vertical?"translateY("+y.left+"px)":"translateX("+y.left+"px)";ne=o(o({},ne),{},{WebkitTransform:fe,transform:oe,msTransform:me})}else y.vertical?ne.top=y.left:ne.left=y.left;return y.fade&&(ne={opacity:1}),M&&(ne.width=M),G&&(ne.height=G),window&&!window.addEventListener&&window.attachEvent&&(y.vertical?ne.marginTop=y.left+"px":ne.marginLeft=y.left+"px"),ne},N=Se.getTrackAnimateCSS=function(y){U(y,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var M=K(y);return y.useTransform?(M.WebkitTransition="-webkit-transform "+y.speed+"ms "+y.cssEase,M.transition="transform "+y.speed+"ms "+y.cssEase):y.vertical?M.transition="top "+y.speed+"ms "+y.cssEase:M.transition="left "+y.speed+"ms "+y.cssEase,M},P=Se.getTrackLeft=function(y){if(y.unslick)return 0;U(y,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var M=y.slideIndex,G=y.trackRef,$=y.infinite,ne=y.centerMode,fe=y.slideCount,oe=y.slidesToShow,me=y.slidesToScroll,Te=y.slideWidth,Re=y.listWidth,Me=y.variableWidth,Qe=y.slideHeight,Ke=y.fade,qe=y.vertical,Ne=0,Je,Et,_e=0;if(Ke||y.slideCount===1)return 0;var vt=0;if($?(vt=-V(y),fe%me!==0&&M+me>fe&&(vt=-(M>fe?oe-(M-fe):fe%me)),ne&&(vt+=parseInt(oe/2))):(fe%me!==0&&M+me>fe&&(vt=oe-fe%me),ne&&(vt=parseInt(oe/2))),Ne=vt*Te,_e=vt*Qe,qe?Je=M*Qe*-1+_e:Je=M*Te*-1+Ne,Me===!0){var xt,Pt=G&&G.node;if(xt=M+V(y),Et=Pt&&Pt.childNodes[xt],Je=Et?Et.offsetLeft*-1:0,ne===!0){xt=$?M+V(y):M,Et=Pt&&Pt.children[xt],Je=0;for(var It=0;It<xt;It++)Je-=Pt&&Pt.children[It]&&Pt.children[It].offsetWidth;Je-=parseInt(y.centerPadding),Je+=Et&&(Re-Et.offsetWidth)/2}}return Je},V=Se.getPreClones=function(y){return y.unslick||!y.infinite?0:y.variableWidth?y.slideCount:y.slidesToShow+(y.centerMode?1:0)},J=Se.getPostClones=function(y){return y.unslick||!y.infinite?0:y.slideCount},Y=Se.getTotalSlides=function(y){return y.slideCount===1?1:V(y)+y.slideCount+J(y)},W=Se.siblingDirection=function(y){return y.targetSlide>y.currentSlide?y.targetSlide>y.currentSlide+ge(y)?"left":"right":y.targetSlide<y.currentSlide-H(y)?"right":"left"},ge=Se.slidesOnRight=function(y){var M=y.slidesToShow,G=y.centerMode,$=y.rtl,ne=y.centerPadding;if(G){var fe=(M-1)/2+1;return parseInt(ne)>0&&(fe+=1),$&&M%2===0&&(fe+=1),fe}return $?0:M-1},H=Se.slidesOnLeft=function(y){var M=y.slidesToShow,G=y.centerMode,$=y.rtl,ne=y.centerPadding;if(G){var fe=(M-1)/2+1;return parseInt(ne)>0&&(fe+=1),!$&&M%2===0&&(fe+=1),fe}return $?M-1:0};Se.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var w=Se.validSettings=Object.keys(e.default);function ve(q){return w.reduce(function(y,M){return q.hasOwnProperty(M)&&(y[M]=q[M]),y},{})}return Se}var ec={},tk;function Kj(){if(tk)return ec;tk=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.Track=void 0;var t=i(Ui()),e=i(kf()),n=Pc();function i(N){return N&&N.__esModule?N:{default:N}}function a(N){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a(N)}function o(){return o=Object.assign?Object.assign.bind():function(N){for(var P=1;P<arguments.length;P++){var V=arguments[P];for(var J in V)Object.prototype.hasOwnProperty.call(V,J)&&(N[J]=V[J])}return N},o.apply(this,arguments)}function c(N,P){if(!(N instanceof P))throw new TypeError("Cannot call a class as a function")}function u(N,P){for(var V=0;V<P.length;V++){var J=P[V];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,I(J.key),J)}}function f(N,P,V){return P&&u(N.prototype,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function h(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(P&&P.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),P&&m(N,P)}function m(N,P){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,Y){return J.__proto__=Y,J},m(N,P)}function v(N){var P=C();return function(){var J=S(N),Y;if(P){var W=S(this).constructor;Y=Reflect.construct(J,arguments,W)}else Y=J.apply(this,arguments);return b(this,Y)}}function b(N,P){if(P&&(a(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(N)}function k(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function C(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C=function(){return!!N})()}function S(N){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},S(N)}function O(N,P){var V=Object.keys(N);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(N);P&&(J=J.filter(function(Y){return Object.getOwnPropertyDescriptor(N,Y).enumerable})),V.push.apply(V,J)}return V}function _(N){for(var P=1;P<arguments.length;P++){var V=arguments[P]!=null?arguments[P]:{};P%2?O(Object(V),!0).forEach(function(J){L(N,J,V[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(V)):O(Object(V)).forEach(function(J){Object.defineProperty(N,J,Object.getOwnPropertyDescriptor(V,J))})}return N}function L(N,P,V){return P=I(P),P in N?Object.defineProperty(N,P,{value:V,enumerable:!0,configurable:!0,writable:!0}):N[P]=V,N}function I(N){var P=j(N,"string");return a(P)=="symbol"?P:String(P)}function j(N,P){if(a(N)!="object"||!N)return N;var V=N[Symbol.toPrimitive];if(V!==void 0){var J=V.call(N,P);if(a(J)!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(N)}var E=function(P){var V,J,Y,W,ge;P.rtl?ge=P.slideCount-1-P.index:ge=P.index,Y=ge<0||ge>=P.slideCount,P.centerMode?(W=Math.floor(P.slidesToShow/2),J=(ge-P.currentSlide)%P.slideCount===0,ge>P.currentSlide-W-1&&ge<=P.currentSlide+W&&(V=!0)):V=P.currentSlide<=ge&&ge<P.currentSlide+P.slidesToShow;var H;P.targetSlide<0?H=P.targetSlide+P.slideCount:P.targetSlide>=P.slideCount?H=P.targetSlide-P.slideCount:H=P.targetSlide;var w=ge===H;return{"slick-slide":!0,"slick-active":V,"slick-center":J,"slick-cloned":Y,"slick-current":w}},D=function(P){var V={};return(P.variableWidth===void 0||P.variableWidth===!1)&&(V.width=P.slideWidth),P.fade&&(V.position="relative",P.vertical?V.top=-P.index*parseInt(P.slideHeight):V.left=-P.index*parseInt(P.slideWidth),V.opacity=P.currentSlide===P.index?1:0,V.zIndex=P.currentSlide===P.index?999:998,P.useCSS&&(V.transition="opacity "+P.speed+"ms "+P.cssEase+", visibility "+P.speed+"ms "+P.cssEase)),V},U=function(P,V){return P.key||V},K=function(P){var V,J=[],Y=[],W=[],ge=t.default.Children.count(P.children),H=(0,n.lazyStartIndex)(P),w=(0,n.lazyEndIndex)(P);return t.default.Children.forEach(P.children,function(ve,q){var y,M={message:"children",index:q,slidesToScroll:P.slidesToScroll,currentSlide:P.currentSlide};!P.lazyLoad||P.lazyLoad&&P.lazyLoadedList.indexOf(q)>=0?y=ve:y=t.default.createElement("div",null);var G=D(_(_({},P),{},{index:q})),$=y.props.className||"",ne=E(_(_({},P),{},{index:q}));if(J.push(t.default.cloneElement(y,{key:"original"+U(y,q),"data-index":q,className:(0,e.default)(ne,$),tabIndex:"-1","aria-hidden":!ne["slick-active"],style:_(_({outline:"none"},y.props.style||{}),G),onClick:function(me){y.props&&y.props.onClick&&y.props.onClick(me),P.focusOnSelect&&P.focusOnSelect(M)}})),P.infinite&&P.fade===!1){var fe=ge-q;fe<=(0,n.getPreClones)(P)&&(V=-fe,V>=H&&(y=ve),ne=E(_(_({},P),{},{index:V})),Y.push(t.default.cloneElement(y,{key:"precloned"+U(y,V),"data-index":V,tabIndex:"-1",className:(0,e.default)(ne,$),"aria-hidden":!ne["slick-active"],style:_(_({},y.props.style||{}),G),onClick:function(me){y.props&&y.props.onClick&&y.props.onClick(me),P.focusOnSelect&&P.focusOnSelect(M)}}))),V=ge+q,V<w&&(y=ve),ne=E(_(_({},P),{},{index:V})),W.push(t.default.cloneElement(y,{key:"postcloned"+U(y,V),"data-index":V,tabIndex:"-1",className:(0,e.default)(ne,$),"aria-hidden":!ne["slick-active"],style:_(_({},y.props.style||{}),G),onClick:function(me){y.props&&y.props.onClick&&y.props.onClick(me),P.focusOnSelect&&P.focusOnSelect(M)}}))}}),P.rtl?Y.concat(J,W).reverse():Y.concat(J,W)};return ec.Track=function(N){h(V,N);var P=v(V);function V(){var J;c(this,V);for(var Y=arguments.length,W=new Array(Y),ge=0;ge<Y;ge++)W[ge]=arguments[ge];return J=P.call.apply(P,[this].concat(W)),L(k(J),"node",null),L(k(J),"handleRef",function(H){J.node=H}),J}return f(V,[{key:"render",value:function(){var Y=K(this.props),W=this.props,ge=W.onMouseEnter,H=W.onMouseOver,w=W.onMouseLeave,ve={onMouseEnter:ge,onMouseOver:H,onMouseLeave:w};return t.default.createElement("div",o({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},ve),Y)}}]),V}(t.default.PureComponent),ec}var tc={},nk;function Yj(){if(nk)return tc;nk=1;function t(E){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(E)}Object.defineProperty(tc,"__esModule",{value:!0}),tc.Dots=void 0;var e=a(Ui()),n=a(kf()),i=Pc();function a(E){return E&&E.__esModule?E:{default:E}}function o(E,D){var U=Object.keys(E);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(E);D&&(K=K.filter(function(N){return Object.getOwnPropertyDescriptor(E,N).enumerable})),U.push.apply(U,K)}return U}function c(E){for(var D=1;D<arguments.length;D++){var U=arguments[D]!=null?arguments[D]:{};D%2?o(Object(U),!0).forEach(function(K){u(E,K,U[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(U)):o(Object(U)).forEach(function(K){Object.defineProperty(E,K,Object.getOwnPropertyDescriptor(U,K))})}return E}function u(E,D,U){return D=v(D),D in E?Object.defineProperty(E,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):E[D]=U,E}function f(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")}function h(E,D){for(var U=0;U<D.length;U++){var K=D[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(E,v(K.key),K)}}function m(E,D,U){return D&&h(E.prototype,D),Object.defineProperty(E,"prototype",{writable:!1}),E}function v(E){var D=b(E,"string");return t(D)=="symbol"?D:String(D)}function b(E,D){if(t(E)!="object"||!E)return E;var U=E[Symbol.toPrimitive];if(U!==void 0){var K=U.call(E,D);if(t(K)!="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)}function k(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),D&&C(E,D)}function C(E,D){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(K,N){return K.__proto__=N,K},C(E,D)}function S(E){var D=L();return function(){var K=I(E),N;if(D){var P=I(this).constructor;N=Reflect.construct(K,arguments,P)}else N=K.apply(this,arguments);return O(this,N)}}function O(E,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(E)}function _(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function L(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L=function(){return!!E})()}function I(E){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},I(E)}var j=function(D){var U;return D.infinite?U=Math.ceil(D.slideCount/D.slidesToScroll):U=Math.ceil((D.slideCount-D.slidesToShow)/D.slidesToScroll)+1,U};return tc.Dots=function(E){k(U,E);var D=S(U);function U(){return f(this,U),D.apply(this,arguments)}return m(U,[{key:"clickHandler",value:function(N,P){P.preventDefault(),this.props.clickHandler(N)}},{key:"render",value:function(){for(var N=this.props,P=N.onMouseEnter,V=N.onMouseOver,J=N.onMouseLeave,Y=N.infinite,W=N.slidesToScroll,ge=N.slidesToShow,H=N.slideCount,w=N.currentSlide,ve=j({slideCount:H,slidesToScroll:W,slidesToShow:ge,infinite:Y}),q={onMouseEnter:P,onMouseOver:V,onMouseLeave:J},y=[],M=0;M<ve;M++){var G=(M+1)*W-1,$=Y?G:(0,i.clamp)(G,0,H-1),ne=$-(W-1),fe=Y?ne:(0,i.clamp)(ne,0,H-1),oe=(0,n.default)({"slick-active":Y?w>=fe&&w<=$:w===fe}),me={message:"dots",index:M,slidesToScroll:W,currentSlide:w},Te=this.clickHandler.bind(this,me);y=y.concat(e.default.createElement("li",{key:M,className:oe},e.default.cloneElement(this.props.customPaging(M),{onClick:Te})))}return e.default.cloneElement(this.props.appendDots(y),c({className:this.props.dotsClass},q))}}]),U}(e.default.PureComponent),tc}var ja={},ik;function Jj(){if(ik)return ja;ik=1;function t(E){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},t(E)}Object.defineProperty(ja,"__esModule",{value:!0}),ja.PrevArrow=ja.NextArrow=void 0;var e=a(Ui()),n=a(kf()),i=Pc();function a(E){return E&&E.__esModule?E:{default:E}}function o(){return o=Object.assign?Object.assign.bind():function(E){for(var D=1;D<arguments.length;D++){var U=arguments[D];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(E[K]=U[K])}return E},o.apply(this,arguments)}function c(E,D){var U=Object.keys(E);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(E);D&&(K=K.filter(function(N){return Object.getOwnPropertyDescriptor(E,N).enumerable})),U.push.apply(U,K)}return U}function u(E){for(var D=1;D<arguments.length;D++){var U=arguments[D]!=null?arguments[D]:{};D%2?c(Object(U),!0).forEach(function(K){f(E,K,U[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(U)):c(Object(U)).forEach(function(K){Object.defineProperty(E,K,Object.getOwnPropertyDescriptor(U,K))})}return E}function f(E,D,U){return D=b(D),D in E?Object.defineProperty(E,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):E[D]=U,E}function h(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")}function m(E,D){for(var U=0;U<D.length;U++){var K=D[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(E,b(K.key),K)}}function v(E,D,U){return D&&m(E.prototype,D),Object.defineProperty(E,"prototype",{writable:!1}),E}function b(E){var D=k(E,"string");return t(D)=="symbol"?D:String(D)}function k(E,D){if(t(E)!="object"||!E)return E;var U=E[Symbol.toPrimitive];if(U!==void 0){var K=U.call(E,D);if(t(K)!="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)}function C(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),D&&S(E,D)}function S(E,D){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(K,N){return K.__proto__=N,K},S(E,D)}function O(E){var D=I();return function(){var K=j(E),N;if(D){var P=j(this).constructor;N=Reflect.construct(K,arguments,P)}else N=K.apply(this,arguments);return _(this,N)}}function _(E,D){if(D&&(t(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(E)}function L(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function I(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!E})()}function j(E){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},j(E)}return ja.PrevArrow=function(E){C(U,E);var D=O(U);function U(){return h(this,U),D.apply(this,arguments)}return v(U,[{key:"clickHandler",value:function(N,P){P&&P.preventDefault(),this.props.clickHandler(N,P)}},{key:"render",value:function(){var N={"slick-arrow":!0,"slick-prev":!0},P=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(N["slick-disabled"]=!0,P=null);var V={key:"0","data-role":"none",className:(0,n.default)(N),style:{display:"block"},onClick:P},J={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},Y;return this.props.prevArrow?Y=e.default.cloneElement(this.props.prevArrow,u(u({},V),J)):Y=e.default.createElement("button",o({key:"0",type:"button"},V)," ","Previous"),Y}}]),U}(e.default.PureComponent),ja.NextArrow=function(E){C(U,E);var D=O(U);function U(){return h(this,U),D.apply(this,arguments)}return v(U,[{key:"clickHandler",value:function(N,P){P&&P.preventDefault(),this.props.clickHandler(N,P)}},{key:"render",value:function(){var N={"slick-arrow":!0,"slick-next":!0},P=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(N["slick-disabled"]=!0,P=null);var V={key:"1","data-role":"none",className:(0,n.default)(N),style:{display:"block"},onClick:P},J={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},Y;return this.props.nextArrow?Y=e.default.cloneElement(this.props.nextArrow,u(u({},V),J)):Y=e.default.createElement("button",o({key:"1",type:"button"},V)," ","Next"),Y}}]),U}(e.default.PureComponent),ja}var mx=function(){if(typeof Map<"u")return Map;function t(e,n){var i=-1;return e.some(function(a,o){return a[0]===n?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),a=this.__entries__[i];return a&&a[1]},e.prototype.set=function(n,i){var a=t(this.__entries__,n);~a?this.__entries__[a][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,a=t(i,n);~a&&i.splice(a,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var a=0,o=this.__entries__;a<o.length;a++){var c=o[a];n.call(i,c[1],c[0])}},e}()}(),Vg=typeof window<"u"&&typeof document<"u"&&window.document===document,Jd=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Xj=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Jd):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Wj=2;function Zj(t,e){var n=!1,i=!1,a=0;function o(){n&&(n=!1,t()),i&&u()}function c(){Xj(o)}function u(){var f=Date.now();if(n){if(f-a<Wj)return;i=!0}else n=!0,i=!1,setTimeout(c,e);a=f}return u}var $j=20,eU=["top","right","bottom","left","width","height","size","weight"],tU=typeof MutationObserver<"u",nU=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Zj(this.refresh.bind(this),$j)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!Vg||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),tU?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Vg||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,a=eU.some(function(o){return!!~i.indexOf(o)});a&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),gx=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];Object.defineProperty(t,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return t},No=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||Jd},vx=Cf(0,0,0,0);function Xd(t){return parseFloat(t)||0}function rk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,a){var o=t["border-"+a+"-width"];return i+Xd(o)},0)}function iU(t){for(var e=["top","right","bottom","left"],n={},i=0,a=e;i<a.length;i++){var o=a[i],c=t["padding-"+o];n[o]=Xd(c)}return n}function rU(t){var e=t.getBBox();return Cf(0,0,e.width,e.height)}function aU(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return vx;var i=No(t).getComputedStyle(t),a=iU(i),o=a.left+a.right,c=a.top+a.bottom,u=Xd(i.width),f=Xd(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=rk(i,"left","right")+o),Math.round(f+c)!==n&&(f-=rk(i,"top","bottom")+c)),!oU(t)){var h=Math.round(u+o)-e,m=Math.round(f+c)-n;Math.abs(h)!==1&&(u-=h),Math.abs(m)!==1&&(f-=m)}return Cf(a.left,a.top,u,f)}var sU=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof No(t).SVGGraphicsElement}:function(t){return t instanceof No(t).SVGElement&&typeof t.getBBox=="function"}}();function oU(t){return t===No(t).document.documentElement}function lU(t){return Vg?sU(t)?rU(t):aU(t):vx}function cU(t){var e=t.x,n=t.y,i=t.width,a=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,c=Object.create(o.prototype);return gx(c,{x:e,y:n,width:i,height:a,top:n,right:e+i,bottom:a+n,left:e}),c}function Cf(t,e,n,i){return{x:t,y:e,width:n,height:i}}var uU=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Cf(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=lU(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),dU=function(){function t(e,n){var i=cU(n);gx(this,{target:e,contentRect:i})}return t}(),fU=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new mx,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof No(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new uU(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof No(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new dU(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),yx=typeof WeakMap<"u"?new WeakMap:new mx,bx=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=nU.getInstance(),i=new fU(e,n,this);yx.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){bx.prototype[t]=function(){var e;return(e=yx.get(this))[t].apply(e,arguments)}});var hU=function(){return typeof Jd.ResizeObserver<"u"?Jd.ResizeObserver:bx}();const pU=Object.freeze(Object.defineProperty({__proto__:null,default:hU},Symbol.toStringTag,{value:"Module"})),mU=IO(pU);var ak;function gU(){if(ak)return $l;ak=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.InnerSlider=void 0;var t=h(Ui()),e=h(Gj()),n=h(Qj()),i=h(kf()),a=Pc(),o=Kj(),c=Yj(),u=Jj(),f=h(mU);function h(Y){return Y&&Y.__esModule?Y:{default:Y}}function m(Y){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},m(Y)}function v(){return v=Object.assign?Object.assign.bind():function(Y){for(var W=1;W<arguments.length;W++){var ge=arguments[W];for(var H in ge)Object.prototype.hasOwnProperty.call(ge,H)&&(Y[H]=ge[H])}return Y},v.apply(this,arguments)}function b(Y,W){if(Y==null)return{};var ge=k(Y,W),H,w;if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(Y);for(w=0;w<ve.length;w++)H=ve[w],!(W.indexOf(H)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,H)&&(ge[H]=Y[H])}return ge}function k(Y,W){if(Y==null)return{};var ge={},H=Object.keys(Y),w,ve;for(ve=0;ve<H.length;ve++)w=H[ve],!(W.indexOf(w)>=0)&&(ge[w]=Y[w]);return ge}function C(Y,W){var ge=Object.keys(Y);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Y);W&&(H=H.filter(function(w){return Object.getOwnPropertyDescriptor(Y,w).enumerable})),ge.push.apply(ge,H)}return ge}function S(Y){for(var W=1;W<arguments.length;W++){var ge=arguments[W]!=null?arguments[W]:{};W%2?C(Object(ge),!0).forEach(function(H){P(Y,H,ge[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ge)):C(Object(ge)).forEach(function(H){Object.defineProperty(Y,H,Object.getOwnPropertyDescriptor(ge,H))})}return Y}function O(Y,W){if(!(Y instanceof W))throw new TypeError("Cannot call a class as a function")}function _(Y,W){for(var ge=0;ge<W.length;ge++){var H=W[ge];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(Y,V(H.key),H)}}function L(Y,W,ge){return W&&_(Y.prototype,W),Object.defineProperty(Y,"prototype",{writable:!1}),Y}function I(Y,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(W&&W.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),Object.defineProperty(Y,"prototype",{writable:!1}),W&&j(Y,W)}function j(Y,W){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,w){return H.__proto__=w,H},j(Y,W)}function E(Y){var W=K();return function(){var H=N(Y),w;if(W){var ve=N(this).constructor;w=Reflect.construct(H,arguments,ve)}else w=H.apply(this,arguments);return D(this,w)}}function D(Y,W){if(W&&(m(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(Y)}function U(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function K(){try{var Y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K=function(){return!!Y})()}function N(Y){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},N(Y)}function P(Y,W,ge){return W=V(W),W in Y?Object.defineProperty(Y,W,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Y[W]=ge,Y}function V(Y){var W=J(Y,"string");return m(W)=="symbol"?W:String(W)}function J(Y,W){if(m(Y)!="object"||!Y)return Y;var ge=Y[Symbol.toPrimitive];if(ge!==void 0){var H=ge.call(Y,W);if(m(H)!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(Y)}return $l.InnerSlider=function(Y){I(ge,Y);var W=E(ge);function ge(H){var w;O(this,ge),w=W.call(this,H),P(U(w),"listRefHandler",function(q){return w.list=q}),P(U(w),"trackRefHandler",function(q){return w.track=q}),P(U(w),"adaptHeight",function(){if(w.props.adaptiveHeight&&w.list){var q=w.list.querySelector('[data-index="'.concat(w.state.currentSlide,'"]'));w.list.style.height=(0,a.getHeight)(q)+"px"}}),P(U(w),"componentDidMount",function(){if(w.props.onInit&&w.props.onInit(),w.props.lazyLoad){var q=(0,a.getOnDemandLazySlides)(S(S({},w.props),w.state));q.length>0&&(w.setState(function(M){return{lazyLoadedList:M.lazyLoadedList.concat(q)}}),w.props.onLazyLoad&&w.props.onLazyLoad(q))}var y=S({listRef:w.list,trackRef:w.track},w.props);w.updateState(y,!0,function(){w.adaptHeight(),w.props.autoplay&&w.autoPlay("update")}),w.props.lazyLoad==="progressive"&&(w.lazyLoadTimer=setInterval(w.progressiveLazyLoad,1e3)),w.ro=new f.default(function(){w.state.animating?(w.onWindowResized(!1),w.callbackTimers.push(setTimeout(function(){return w.onWindowResized()},w.props.speed))):w.onWindowResized()}),w.ro.observe(w.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(M){M.onfocus=w.props.pauseOnFocus?w.onSlideFocus:null,M.onblur=w.props.pauseOnFocus?w.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",w.onWindowResized):window.attachEvent("onresize",w.onWindowResized)}),P(U(w),"componentWillUnmount",function(){w.animationEndCallback&&clearTimeout(w.animationEndCallback),w.lazyLoadTimer&&clearInterval(w.lazyLoadTimer),w.callbackTimers.length&&(w.callbackTimers.forEach(function(q){return clearTimeout(q)}),w.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",w.onWindowResized):window.detachEvent("onresize",w.onWindowResized),w.autoplayTimer&&clearInterval(w.autoplayTimer),w.ro.disconnect()}),P(U(w),"componentDidUpdate",function(q){if(w.checkImagesLoad(),w.props.onReInit&&w.props.onReInit(),w.props.lazyLoad){var y=(0,a.getOnDemandLazySlides)(S(S({},w.props),w.state));y.length>0&&(w.setState(function($){return{lazyLoadedList:$.lazyLoadedList.concat(y)}}),w.props.onLazyLoad&&w.props.onLazyLoad(y))}w.adaptHeight();var M=S(S({listRef:w.list,trackRef:w.track},w.props),w.state),G=w.didPropsChange(q);G&&w.updateState(M,G,function(){w.state.currentSlide>=t.default.Children.count(w.props.children)&&w.changeSlide({message:"index",index:t.default.Children.count(w.props.children)-w.props.slidesToShow,currentSlide:w.state.currentSlide}),w.props.autoplay?w.autoPlay("update"):w.pause("paused")})}),P(U(w),"onWindowResized",function(q){w.debouncedResize&&w.debouncedResize.cancel(),w.debouncedResize=(0,n.default)(function(){return w.resizeWindow(q)},50),w.debouncedResize()}),P(U(w),"resizeWindow",function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,y=!!(w.track&&w.track.node);if(y){var M=S(S({listRef:w.list,trackRef:w.track},w.props),w.state);w.updateState(M,q,function(){w.props.autoplay?w.autoPlay("update"):w.pause("paused")}),w.setState({animating:!1}),clearTimeout(w.animationEndCallback),delete w.animationEndCallback}}),P(U(w),"updateState",function(q,y,M){var G=(0,a.initializedState)(q);q=S(S(S({},q),G),{},{slideIndex:G.currentSlide});var $=(0,a.getTrackLeft)(q);q=S(S({},q),{},{left:$});var ne=(0,a.getTrackCSS)(q);(y||t.default.Children.count(w.props.children)!==t.default.Children.count(q.children))&&(G.trackStyle=ne),w.setState(G,M)}),P(U(w),"ssrInit",function(){if(w.props.variableWidth){var q=0,y=0,M=[],G=(0,a.getPreClones)(S(S(S({},w.props),w.state),{},{slideCount:w.props.children.length})),$=(0,a.getPostClones)(S(S(S({},w.props),w.state),{},{slideCount:w.props.children.length}));w.props.children.forEach(function(Et){M.push(Et.props.style.width),q+=Et.props.style.width});for(var ne=0;ne<G;ne++)y+=M[M.length-1-ne],q+=M[M.length-1-ne];for(var fe=0;fe<$;fe++)q+=M[fe];for(var oe=0;oe<w.state.currentSlide;oe++)y+=M[oe];var me={width:q+"px",left:-y+"px"};if(w.props.centerMode){var Te="".concat(M[w.state.currentSlide],"px");me.left="calc(".concat(me.left," + (100% - ").concat(Te,") / 2 ) ")}return{trackStyle:me}}var Re=t.default.Children.count(w.props.children),Me=S(S(S({},w.props),w.state),{},{slideCount:Re}),Qe=(0,a.getPreClones)(Me)+(0,a.getPostClones)(Me)+Re,Ke=100/w.props.slidesToShow*Qe,qe=100/Qe,Ne=-qe*((0,a.getPreClones)(Me)+w.state.currentSlide)*Ke/100;w.props.centerMode&&(Ne+=(100-qe*Ke/100)/2);var Je={width:Ke+"%",left:Ne+"%"};return{slideWidth:qe+"%",trackStyle:Je}}),P(U(w),"checkImagesLoad",function(){var q=w.list&&w.list.querySelectorAll&&w.list.querySelectorAll(".slick-slide img")||[],y=q.length,M=0;Array.prototype.forEach.call(q,function(G){var $=function(){return++M&&M>=y&&w.onWindowResized()};if(!G.onclick)G.onclick=function(){return G.parentNode.focus()};else{var ne=G.onclick;G.onclick=function(fe){ne(fe),G.parentNode.focus()}}G.onload||(w.props.lazyLoad?G.onload=function(){w.adaptHeight(),w.callbackTimers.push(setTimeout(w.onWindowResized,w.props.speed))}:(G.onload=$,G.onerror=function(){$(),w.props.onLazyLoadError&&w.props.onLazyLoadError()}))})}),P(U(w),"progressiveLazyLoad",function(){for(var q=[],y=S(S({},w.props),w.state),M=w.state.currentSlide;M<w.state.slideCount+(0,a.getPostClones)(y);M++)if(w.state.lazyLoadedList.indexOf(M)<0){q.push(M);break}for(var G=w.state.currentSlide-1;G>=-(0,a.getPreClones)(y);G--)if(w.state.lazyLoadedList.indexOf(G)<0){q.push(G);break}q.length>0?(w.setState(function($){return{lazyLoadedList:$.lazyLoadedList.concat(q)}}),w.props.onLazyLoad&&w.props.onLazyLoad(q)):w.lazyLoadTimer&&(clearInterval(w.lazyLoadTimer),delete w.lazyLoadTimer)}),P(U(w),"slideHandler",function(q){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,M=w.props,G=M.asNavFor,$=M.beforeChange,ne=M.onLazyLoad,fe=M.speed,oe=M.afterChange,me=w.state.currentSlide,Te=(0,a.slideHandler)(S(S(S({index:q},w.props),w.state),{},{trackRef:w.track,useCSS:w.props.useCSS&&!y})),Re=Te.state,Me=Te.nextState;if(Re){$&&$(me,Re.currentSlide);var Qe=Re.lazyLoadedList.filter(function(Ke){return w.state.lazyLoadedList.indexOf(Ke)<0});ne&&Qe.length>0&&ne(Qe),!w.props.waitForAnimate&&w.animationEndCallback&&(clearTimeout(w.animationEndCallback),oe&&oe(me),delete w.animationEndCallback),w.setState(Re,function(){G&&w.asNavForIndex!==q&&(w.asNavForIndex=q,G.innerSlider.slideHandler(q)),Me&&(w.animationEndCallback=setTimeout(function(){var Ke=Me.animating,qe=b(Me,["animating"]);w.setState(qe,function(){w.callbackTimers.push(setTimeout(function(){return w.setState({animating:Ke})},10)),oe&&oe(Re.currentSlide),delete w.animationEndCallback})},fe))})}}),P(U(w),"changeSlide",function(q){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,M=S(S({},w.props),w.state),G=(0,a.changeSlide)(M,q);if(!(G!==0&&!G)&&(y===!0?w.slideHandler(G,y):w.slideHandler(G),w.props.autoplay&&w.autoPlay("update"),w.props.focusOnSelect)){var $=w.list.querySelectorAll(".slick-current");$[0]&&$[0].focus()}}),P(U(w),"clickHandler",function(q){w.clickable===!1&&(q.stopPropagation(),q.preventDefault()),w.clickable=!0}),P(U(w),"keyHandler",function(q){var y=(0,a.keyHandler)(q,w.props.accessibility,w.props.rtl);y!==""&&w.changeSlide({message:y})}),P(U(w),"selectHandler",function(q){w.changeSlide(q)}),P(U(w),"disableBodyScroll",function(){var q=function(M){M=M||window.event,M.preventDefault&&M.preventDefault(),M.returnValue=!1};window.ontouchmove=q}),P(U(w),"enableBodyScroll",function(){window.ontouchmove=null}),P(U(w),"swipeStart",function(q){w.props.verticalSwiping&&w.disableBodyScroll();var y=(0,a.swipeStart)(q,w.props.swipe,w.props.draggable);y!==""&&w.setState(y)}),P(U(w),"swipeMove",function(q){var y=(0,a.swipeMove)(q,S(S(S({},w.props),w.state),{},{trackRef:w.track,listRef:w.list,slideIndex:w.state.currentSlide}));y&&(y.swiping&&(w.clickable=!1),w.setState(y))}),P(U(w),"swipeEnd",function(q){var y=(0,a.swipeEnd)(q,S(S(S({},w.props),w.state),{},{trackRef:w.track,listRef:w.list,slideIndex:w.state.currentSlide}));if(y){var M=y.triggerSlideHandler;delete y.triggerSlideHandler,w.setState(y),M!==void 0&&(w.slideHandler(M),w.props.verticalSwiping&&w.enableBodyScroll())}}),P(U(w),"touchEnd",function(q){w.swipeEnd(q),w.clickable=!0}),P(U(w),"slickPrev",function(){w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"previous"})},0))}),P(U(w),"slickNext",function(){w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"next"})},0))}),P(U(w),"slickGoTo",function(q){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q=Number(q),isNaN(q))return"";w.callbackTimers.push(setTimeout(function(){return w.changeSlide({message:"index",index:q,currentSlide:w.state.currentSlide},y)},0))}),P(U(w),"play",function(){var q;if(w.props.rtl)q=w.state.currentSlide-w.props.slidesToScroll;else if((0,a.canGoNext)(S(S({},w.props),w.state)))q=w.state.currentSlide+w.props.slidesToScroll;else return!1;w.slideHandler(q)}),P(U(w),"autoPlay",function(q){w.autoplayTimer&&clearInterval(w.autoplayTimer);var y=w.state.autoplaying;if(q==="update"){if(y==="hovered"||y==="focused"||y==="paused")return}else if(q==="leave"){if(y==="paused"||y==="focused")return}else if(q==="blur"&&(y==="paused"||y==="hovered"))return;w.autoplayTimer=setInterval(w.play,w.props.autoplaySpeed+50),w.setState({autoplaying:"playing"})}),P(U(w),"pause",function(q){w.autoplayTimer&&(clearInterval(w.autoplayTimer),w.autoplayTimer=null);var y=w.state.autoplaying;q==="paused"?w.setState({autoplaying:"paused"}):q==="focused"?(y==="hovered"||y==="playing")&&w.setState({autoplaying:"focused"}):y==="playing"&&w.setState({autoplaying:"hovered"})}),P(U(w),"onDotsOver",function(){return w.props.autoplay&&w.pause("hovered")}),P(U(w),"onDotsLeave",function(){return w.props.autoplay&&w.state.autoplaying==="hovered"&&w.autoPlay("leave")}),P(U(w),"onTrackOver",function(){return w.props.autoplay&&w.pause("hovered")}),P(U(w),"onTrackLeave",function(){return w.props.autoplay&&w.state.autoplaying==="hovered"&&w.autoPlay("leave")}),P(U(w),"onSlideFocus",function(){return w.props.autoplay&&w.pause("focused")}),P(U(w),"onSlideBlur",function(){return w.props.autoplay&&w.state.autoplaying==="focused"&&w.autoPlay("blur")}),P(U(w),"render",function(){var q=(0,i.default)("slick-slider",w.props.className,{"slick-vertical":w.props.vertical,"slick-initialized":!0}),y=S(S({},w.props),w.state),M=(0,a.extractObject)(y,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),G=w.props.pauseOnHover;M=S(S({},M),{},{onMouseEnter:G?w.onTrackOver:null,onMouseLeave:G?w.onTrackLeave:null,onMouseOver:G?w.onTrackOver:null,focusOnSelect:w.props.focusOnSelect&&w.clickable?w.selectHandler:null});var $;if(w.props.dots===!0&&w.state.slideCount>=w.props.slidesToShow){var ne=(0,a.extractObject)(y,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),fe=w.props.pauseOnDotsHover;ne=S(S({},ne),{},{clickHandler:w.changeSlide,onMouseEnter:fe?w.onDotsLeave:null,onMouseOver:fe?w.onDotsOver:null,onMouseLeave:fe?w.onDotsLeave:null}),$=t.default.createElement(c.Dots,ne)}var oe,me,Te=(0,a.extractObject)(y,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);Te.clickHandler=w.changeSlide,w.props.arrows&&(oe=t.default.createElement(u.PrevArrow,Te),me=t.default.createElement(u.NextArrow,Te));var Re=null;w.props.vertical&&(Re={height:w.state.listHeight});var Me=null;w.props.vertical===!1?w.props.centerMode===!0&&(Me={padding:"0px "+w.props.centerPadding}):w.props.centerMode===!0&&(Me={padding:w.props.centerPadding+" 0px"});var Qe=S(S({},Re),Me),Ke=w.props.touchMove,qe={className:"slick-list",style:Qe,onClick:w.clickHandler,onMouseDown:Ke?w.swipeStart:null,onMouseMove:w.state.dragging&&Ke?w.swipeMove:null,onMouseUp:Ke?w.swipeEnd:null,onMouseLeave:w.state.dragging&&Ke?w.swipeEnd:null,onTouchStart:Ke?w.swipeStart:null,onTouchMove:w.state.dragging&&Ke?w.swipeMove:null,onTouchEnd:Ke?w.touchEnd:null,onTouchCancel:w.state.dragging&&Ke?w.swipeEnd:null,onKeyDown:w.props.accessibility?w.keyHandler:null},Ne={className:q,dir:"ltr",style:w.props.style};return w.props.unslick&&(qe={className:"slick-list"},Ne={className:q}),t.default.createElement("div",Ne,w.props.unslick?"":oe,t.default.createElement("div",v({ref:w.listRefHandler},qe),t.default.createElement(o.Track,v({ref:w.trackRefHandler},M),w.props.children)),w.props.unslick?"":me,w.props.unslick?"":$)}),w.list=null,w.track=null,w.state=S(S({},e.default),{},{currentSlide:w.props.initialSlide,targetSlide:w.props.initialSlide?w.props.initialSlide:0,slideCount:t.default.Children.count(w.props.children)}),w.callbackTimers=[],w.clickable=!0,w.debouncedResize=null;var ve=w.ssrInit();return w.state=S(S({},w.state),ve),w}return L(ge,[{key:"didPropsChange",value:function(w){for(var ve=!1,q=0,y=Object.keys(this.props);q<y.length;q++){var M=y[q];if(!w.hasOwnProperty(M)){ve=!0;break}if(!(m(w[M])==="object"||typeof w[M]=="function"||isNaN(w[M]))&&w[M]!==this.props[M]){ve=!0;break}}return ve||t.default.Children.count(this.props.children)!==t.default.Children.count(w.children)}}]),ge}(t.default.Component),$l}var Em,sk;function vU(){if(sk)return Em;sk=1;var t=function(e){return e.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()};return Em=t,Em}var xm,ok;function yU(){if(ok)return xm;ok=1;var t=vU(),e=function(a){var o=/[height|width]$/;return o.test(a)},n=function(a){var o="",c=Object.keys(a);return c.forEach(function(u,f){var h=a[u];u=t(u),e(u)&&typeof h=="number"&&(h=h+"px"),h===!0?o+=u:h===!1?o+="not "+u:o+="("+u+": "+h+")",f<c.length-1&&(o+=" and ")}),o},i=function(a){var o="";return typeof a=="string"?a:a instanceof Array?(a.forEach(function(c,u){o+=n(c),u<a.length-1&&(o+=", ")}),o):n(a)};return xm=i,xm}var Rm,lk;function bU(){if(lk)return Rm;lk=1;function t(e){this.options=e,!e.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},Rm=t,Rm}var Om,ck;function Sx(){if(ck)return Om;ck=1;function t(i,a){var o=0,c=i.length,u;for(o;o<c&&(u=a(i[o],o),u!==!1);o++);}function e(i){return Object.prototype.toString.apply(i)==="[object Array]"}function n(i){return typeof i=="function"}return Om={isFunction:n,isArray:e,each:t},Om}var _m,uk;function SU(){if(uk)return _m;uk=1;var t=bU(),e=Sx().each;function n(i,a){this.query=i,this.isUnconditional=a,this.handlers=[],this.mql=window.matchMedia(i);var o=this;this.listener=function(c){o.mql=c.currentTarget||c,o.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(i){var a=new t(i);this.handlers.push(a),this.matches()&&a.on()},removeHandler:function(i){var a=this.handlers;e(a,function(o,c){if(o.equals(i))return o.destroy(),!a.splice(c,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(i){i.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var i=this.matches()?"on":"off";e(this.handlers,function(a){a[i]()})}},_m=n,_m}var Pm,dk;function TU(){if(dk)return Pm;dk=1;var t=SU(),e=Sx(),n=e.each,i=e.isFunction,a=e.isArray;function o(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return o.prototype={constructor:o,register:function(c,u,f){var h=this.queries,m=f&&this.browserIsIncapable;return h[c]||(h[c]=new t(c,m)),i(u)&&(u={match:u}),a(u)||(u=[u]),n(u,function(v){i(v)&&(v={match:v}),h[c].addHandler(v)}),this},unregister:function(c,u){var f=this.queries[c];return f&&(u?f.removeHandler(u):(f.clear(),delete this.queries[c])),this}},Pm=o,Pm}var Am,fk;function kU(){if(fk)return Am;fk=1;var t=TU();return Am=new t,Am}var hk;function CU(){return hk||(hk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=c(Ui()),n=gU(),i=c(yU()),a=c(px()),o=Pc();function c(N){return N&&N.__esModule?N:{default:N}}function u(N){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(N)}function f(){return f=Object.assign?Object.assign.bind():function(N){for(var P=1;P<arguments.length;P++){var V=arguments[P];for(var J in V)Object.prototype.hasOwnProperty.call(V,J)&&(N[J]=V[J])}return N},f.apply(this,arguments)}function h(N,P){var V=Object.keys(N);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(N);P&&(J=J.filter(function(Y){return Object.getOwnPropertyDescriptor(N,Y).enumerable})),V.push.apply(V,J)}return V}function m(N){for(var P=1;P<arguments.length;P++){var V=arguments[P]!=null?arguments[P]:{};P%2?h(Object(V),!0).forEach(function(J){E(N,J,V[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(V)):h(Object(V)).forEach(function(J){Object.defineProperty(N,J,Object.getOwnPropertyDescriptor(V,J))})}return N}function v(N,P){if(!(N instanceof P))throw new TypeError("Cannot call a class as a function")}function b(N,P){for(var V=0;V<P.length;V++){var J=P[V];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,D(J.key),J)}}function k(N,P,V){return P&&b(N.prototype,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function C(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(P&&P.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),P&&S(N,P)}function S(N,P){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,Y){return J.__proto__=Y,J},S(N,P)}function O(N){var P=I();return function(){var J=j(N),Y;if(P){var W=j(this).constructor;Y=Reflect.construct(J,arguments,W)}else Y=J.apply(this,arguments);return _(this,Y)}}function _(N,P){if(P&&(u(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(N)}function L(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function I(){try{var N=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!N})()}function j(N){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},j(N)}function E(N,P,V){return P=D(P),P in N?Object.defineProperty(N,P,{value:V,enumerable:!0,configurable:!0,writable:!0}):N[P]=V,N}function D(N){var P=U(N,"string");return u(P)=="symbol"?P:String(P)}function U(N,P){if(u(N)!="object"||!N)return N;var V=N[Symbol.toPrimitive];if(V!==void 0){var J=V.call(N,P);if(u(J)!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(N)}var K=(0,o.canUseDOM)()&&kU();t.default=function(N){C(V,N);var P=O(V);function V(J){var Y;return v(this,V),Y=P.call(this,J),E(L(Y),"innerSliderRefHandler",function(W){return Y.innerSlider=W}),E(L(Y),"slickPrev",function(){return Y.innerSlider.slickPrev()}),E(L(Y),"slickNext",function(){return Y.innerSlider.slickNext()}),E(L(Y),"slickGoTo",function(W){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Y.innerSlider.slickGoTo(W,ge)}),E(L(Y),"slickPause",function(){return Y.innerSlider.pause("paused")}),E(L(Y),"slickPlay",function(){return Y.innerSlider.autoPlay("play")}),Y.state={breakpoint:null},Y._responsiveMediaHandlers=[],Y}return k(V,[{key:"media",value:function(Y,W){K.register(Y,W),this._responsiveMediaHandlers.push({query:Y,handler:W})}},{key:"componentDidMount",value:function(){var Y=this;if(this.props.responsive){var W=this.props.responsive.map(function(H){return H.breakpoint});W.sort(function(H,w){return H-w}),W.forEach(function(H,w){var ve;w===0?ve=(0,i.default)({minWidth:0,maxWidth:H}):ve=(0,i.default)({minWidth:W[w-1]+1,maxWidth:H}),(0,o.canUseDOM)()&&Y.media(ve,function(){Y.setState({breakpoint:H})})});var ge=(0,i.default)({minWidth:W.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(ge,function(){Y.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(Y){K.unregister(Y.query,Y.handler)})}},{key:"render",value:function(){var Y=this,W,ge;this.state.breakpoint?(ge=this.props.responsive.filter(function(fe){return fe.breakpoint===Y.state.breakpoint}),W=ge[0].settings==="unslick"?"unslick":m(m(m({},a.default),this.props),ge[0].settings)):W=m(m({},a.default),this.props),W.centerMode&&(W.slidesToScroll>1,W.slidesToScroll=1),W.fade&&(W.slidesToShow>1,W.slidesToScroll>1,W.slidesToShow=1,W.slidesToScroll=1);var H=e.default.Children.toArray(this.props.children);H=H.filter(function(fe){return typeof fe=="string"?!!fe.trim():!!fe}),W.variableWidth&&(W.rows>1||W.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),W.variableWidth=!1);for(var w=[],ve=null,q=0;q<H.length;q+=W.rows*W.slidesPerRow){for(var y=[],M=q;M<q+W.rows*W.slidesPerRow;M+=W.slidesPerRow){for(var G=[],$=M;$<M+W.slidesPerRow&&(W.variableWidth&&H[$].props.style&&(ve=H[$].props.style.width),!($>=H.length));$+=1)G.push(e.default.cloneElement(H[$],{key:100*q+10*M+$,tabIndex:-1,style:{width:"".concat(100/W.slidesPerRow,"%"),display:"inline-block"}}));y.push(e.default.createElement("div",{key:10*q+M},G))}W.variableWidth?w.push(e.default.createElement("div",{key:q,style:{width:ve}},y)):w.push(e.default.createElement("div",{key:q},y))}if(W==="unslick"){var ne="regular slider "+(this.props.className||"");return e.default.createElement("div",{className:ne},H)}else w.length<=W.slidesToShow&&!W.infinite&&(W.unslick=!0);return e.default.createElement(n.InnerSlider,f({style:this.props.style,ref:this.innerSliderRefHandler},(0,o.filterSettings)(W)),w)}}]),V}(e.default.Component)}(Sm)),Sm}var pk;function wU(){return pk||(pk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(CU());function n(i){return i&&i.__esModule?i:{default:i}}t.default=e.default}(bm)),bm}var EU=wU();const Tx=Ek(EU),xU=[{src:"https://assets.entrepreneur.com/content/3x2/2000/20150823040038-shutterstock-141719248.jpeg",alt:"job giving image"},{src:"https://img.freepik.com/premium-photo/online-interview-concept-device-screenshot-with-mature-man-making-video-call-talking-camera_116547-22052.jpg",alt:"interview giving image"},{src:"https://thumbs.dreamstime.com/b/boss-human-resources-manager-handshaking-male-job-candidate-offering-employment-agreement-document-hr-manager-101359075.jpg",alt:"offer image"}],RU=()=>{const t=vr(),[e,n]=T.useState(!1),i=localStorage.getItem("userEmail"),{data:a,isLoading:o}=lf(i),c=(a==null?void 0:a.role)==="HR",u=a!=null&&a.name?a.name.split(" ")[0]:"",f=u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",h=c?"/profile/hr":"/profile/applicant",m=!!(i&&a),v=()=>{t(h),n(!1)},b=()=>{n(C=>!C)};T.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]);const k={dots:!0,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,cssEase:"ease-in-out",arrows:!1,pauseOnHover:!1,lazyLoad:"progressive"};return o?R.jsx("div",{className:"p-4 text-center",children:"Loading..."}):R.jsxs("header",{className:"bg-gray-900 text-white shadow-md  w-full z-50",children:[R.jsxs("div",{className:"container mx-auto flex justify-between md:justify-evenly items-center px-4 ",children:[R.jsx(yn,{to:"/",className:"flex items-center space-x-2",children:R.jsx("img",{src:PC,alt:"Logo",className:"h-16 w-auto"})}),R.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:["/","/jobs","/contact"].map((C,S)=>{const O=["Home","Jobs","Contact"][S];return R.jsx(yn,{to:C,className:"text-lg font-medium text-[#2865FC] hover:text-blue-400 transition duration-300",children:O},O)})}),R.jsx("div",{className:"hidden md:block",children:m?R.jsx("span",{onClick:v,className:"cursor-pointer bg-gray-800 py-2 px-4 rounded-full hover:text-blue-400 transition",children:f}):R.jsx(yn,{to:"/login",children:R.jsx("button",{className:"py-2 px-4 bg-blue-600 cursor-pointer rounded-lg hover:bg-blue-700 transition",children:"Login"})})}),R.jsx("div",{className:"md:hidden ",children:R.jsx("button",{onClick:b,className:"text-white bg-transparent focus:outline-none",children:e?R.jsx(A_,{size:24}):R.jsx(O_,{size:24})})})]}),R.jsxs(Xa,{className:`md:hidden flex flex-col justify-around bg-gray-800 transition-all duration-500 ease-in-out overflow-hidden ${e?"min-h-screen py-6":"max-h-0 py-0"}`,children:[R.jsxs("div",{className:"flex flex-col items-center justify-start space-y-5 px-6",children:[["/","/jobs","/contact"].map((C,S)=>{const O=["Home","Jobs","Contact"][S];return R.jsx(yn,{to:C,onClick:b,className:"text-lg font-semibold text-blue-400 hover:text-white transition",children:O},O)}),m?R.jsx("span",{onClick:v,className:"cursor-pointer text-white font-medium hover:text-blue-400 transition",children:f}):R.jsx(yn,{to:"/login",children:R.jsx("button",{onClick:b,className:"py-2 px-6 cursor-pointer bg-blue-600 rounded-lg hover:bg-blue-700 transition text-white font-medium",children:"Login"})})]}),R.jsx("div",{className:"w-full max-w-4xl mx-auto px-4 pt-6 sm:pt-8",children:R.jsx(Tx,{...k,children:xU.map((C,S)=>R.jsx("div",{className:"px-2",children:R.jsx("img",{src:C.src,alt:C.alt,className:"w-full h-68 object-cover rounded-lg",loading:"lazy"})},S))})})]})]})},OU=()=>R.jsxs("footer",{className:"bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 pt-16 pb-10 md:px-20 ",children:[R.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-12",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Smart Hire"}),R.jsx("p",{className:"text-gray-400 mb-4",children:"Connecting talent with opportunities."}),R.jsx("img",{src:PC,alt:"Logo",className:"h-24 w-auto"})]}),R.jsxs("div",{children:[R.jsx("h4",{className:"text-xl font-semibold mb-4 text-white",children:"Navigation"}),R.jsx("ul",{className:"space-y-3 text-gray-400",children:[{label:"Home",to:"/"},{label:"Jobs",to:"/jobs"},{label:"Contact",to:"/contact"},{label:"Privacy Policy",to:"/privacy"},{label:"Terms of Service",to:"/terms"}].map(({label:t,to:e})=>R.jsx("li",{children:R.jsx(yn,{to:e,className:"hover:text-blue-400 transition duration-300",children:t})},t))})]}),R.jsxs("div",{children:[R.jsx("h4",{className:"text-xl font-semibold mb-4 text-white",children:"Newsletter"}),R.jsx("p",{className:"text-gray-400 mb-4",children:"Stay updated with our latest job postings and insights."}),R.jsxs("form",{className:"flex flex-col sm:flex-row items-center gap-2",children:[R.jsx("input",{type:"email",placeholder:"Your email",className:"w-full px-4 py-2 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none"}),R.jsx("button",{className:"w-full sm:w-auto px-5 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors text-white font-medium",children:"Subscribe"})]})]}),R.jsxs("div",{children:[R.jsx("h4",{className:"text-xl font-semibold mb-4 text-white",children:"Follow Us"}),R.jsxs("div",{className:"flex space-x-4 text-white",children:[R.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noreferrer",children:R.jsx(R_,{className:"w-6 h-6 hover:text-blue-400 transition"})}),R.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noreferrer",children:R.jsx(x_,{className:"w-6 h-6 hover:text-blue-400 transition"})}),R.jsx("a",{href:"https://github.com",target:"_blank",rel:"noreferrer",children:R.jsx(E_,{className:"w-6 h-6 hover:text-blue-400 transition"})})]})]})]}),R.jsxs("div",{className:"mt-12 border-t border-gray-700 pt-6 text-center text-sm text-gray-500",children:[" ",new Date().getFullYear()," Smart Job Portal. All rights reserved."]})]}),_U=()=>R.jsxs("section",{className:"relative w-full h-[600px] md:h-[700px] text-gray-100 flex items-center",children:[R.jsxs("div",{className:"absolute inset-0",children:[R.jsx("img",{src:"https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",alt:"Workspace",className:"w-full h-full object-cover"}),R.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/60 to-black/10"})]}),R.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto w-full flex flex-col md:flex-row items-center justify-between gap-10 px-4 md:px-0 ",children:[R.jsxs("div",{className:"md:w-1/2",children:[R.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold leading-tight mb-4",children:["Find Your ",R.jsx("span",{className:"text-blue-500",children:"Dream Job"})]}),R.jsx("p",{className:"text-lg text-gray-200 mb-6",children:"Unlock opportunities, connect with top employers, and begin the journey to your ideal career."}),R.jsx(yn,{to:"/jobs",children:R.jsx("button",{className:"py-3 px-6 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all text-sm font-medium tracking-wide",children:"Explore Jobs"})})]}),R.jsx("div",{className:"hidden md:block md:w-1/2",children:R.jsx("img",{src:"https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",alt:"Workspace",className:"rounded-xl shadow-lg w-full"})})]})]}),PU=({feedback:t})=>{const{name:e,stars:n,description:i,date:a}=t,o=c=>Array.from({length:5},(f,h)=>R.jsx("span",{className:h<c?"text-yellow-400":"text-gray-500",children:h<c?"":""},h));return R.jsx("div",{className:"bg-gray-800 text-gray-100 drop-shadow-md overflow-hidden rounded-xl my-4 w-80 flex flex-col hover:shadow-lg transition-shadow",children:R.jsxs("div",{className:"p-5",children:[R.jsx("h1",{className:"font-semibold text-lg truncate mb-2",children:e}),R.jsx("div",{className:"flex mb-2",children:o(n)}),R.jsx("p",{className:"text-sm text-gray-400 line-clamp-3 mb-2",children:i}),R.jsx("p",{className:"text-xs text-gray-500",children:new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})},AU=[{name:"John Doe",stars:5,description:"This platform made job hunting effortless. Found my dream role in days!",date:"2025-01-12T10:00:00Z"},{name:"Jane Smith",stars:4,description:"Great interface and job listings, but more filtering options would be nice.",date:"2025-02-15T14:30:00Z"},{name:"Michael Chen",stars:5,description:"The application process is seamless. Highly recommend for job seekers!",date:"2024-12-20T09:15:00Z"},{name:"Emily Davis",stars:3,description:"Good platform, but response times from employers could be faster.",date:"2025-03-01T16:45:00Z"},{name:"Carlos Rivera",stars:4,description:"Really user-friendly. The job recommendations were spot-on.",date:"2025-01-30T11:20:00Z"},{name:"Sarah Johnson",stars:5,description:"Fantastic experience! The portal connected me with top employers.",date:"2025-02-28T13:00:00Z"}],MU=()=>{const t={dots:!0,infinite:!1,speed:600,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]};return R.jsx("section",{className:"w-full bg-gray-900 py-20",children:R.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[R.jsxs("div",{className:"text-center mb-12",children:[R.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:["What Our ",R.jsx("span",{className:"text-blue-600",children:"Users Say"})]}),R.jsx("p",{className:"text-gray-400 text-sm md:text-base",children:"Genuine voices from job seekers and recruiters."})]}),R.jsx(Tx,{...t,className:"mx-2 md:mx-0",children:AU.map((e,n)=>R.jsx("div",{className:"px-3",children:R.jsx(PU,{feedback:e})},n))})]})})};function DU(t){return $n({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.32943 3.27158C6.56252 2.8332 7.9923 3.10749 8.97927 4.09446C10.1002 5.21537 10.3019 6.90741 9.5843 8.23385L20.293 18.9437L18.8788 20.3579L8.16982 9.64875C6.84325 10.3669 5.15069 10.1654 4.02952 9.04421C3.04227 8.05696 2.7681 6.62665 3.20701 5.39332L5.44373 7.63C6.02952 8.21578 6.97927 8.21578 7.56505 7.63C8.15084 7.04421 8.15084 6.09446 7.56505 5.50868L5.32943 3.27158ZM15.6968 5.15512L18.8788 3.38736L20.293 4.80157L18.5252 7.98355L16.7574 8.3371L14.6361 10.4584L13.2219 9.04421L15.3432 6.92289L15.6968 5.15512ZM8.97927 13.2868L10.3935 14.7011L5.09018 20.0044C4.69966 20.3949 4.06649 20.3949 3.67597 20.0044C3.31334 19.6417 3.28744 19.0699 3.59826 18.6774L3.67597 18.5902L8.97927 13.2868Z"},child:[]}]})(t)}function NU(t){return $n({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"},child:[]}]})(t)}function LU(t){return $n({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 1L20.2169 2.82598C20.6745 2.92766 21 3.33347 21 3.80217V13.7889C21 15.795 19.9974 17.6684 18.3282 18.7812L12 23L5.6718 18.7812C4.00261 17.6684 3 15.795 3 13.7889V3.80217C3 3.33347 3.32553 2.92766 3.78307 2.82598L12 1ZM12 3.04879L5 4.60434V13.7889C5 15.1263 5.6684 16.3752 6.7812 17.1171L12 20.5963L17.2188 17.1171C18.3316 16.3752 19 15.1263 19 13.7889V4.60434L12 3.04879ZM16.4524 8.22183L17.8666 9.63604L11.5026 16L7.25999 11.7574L8.67421 10.3431L11.5019 13.1709L16.4524 8.22183Z"},child:[]}]})(t)}const jU=()=>{const t=[{title:"Easy Job Search",detail:"AI-powered filtering tailored to your skills and interests.",icon:R.jsx(NU,{className:"w-8 h-8 text-orange-400"})},{title:"Secure Applications",detail:"Your data is encrypted and handled with utmost care.",icon:R.jsx(LU,{className:"w-8 h-8 text-orange-400"})},{title:"HR Tools",detail:"Streamlined hiring from applicant filtering to interviews.",icon:R.jsx(DU,{className:"w-8 h-8 text-orange-400"})}];return R.jsxs("section",{className:"bg-gray-900 w-full py-16 px-6 md:px-16 lg:px-32",children:[R.jsxs("div",{className:"flex flex-col items-center mb-12 text-center max-w-4xl mx-auto space-y-4",children:[R.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white leading-tight",children:["Why Choose ",R.jsx("span",{className:"text-[#155DFC]",children:"SmartHire"}),"?"]}),R.jsx("p",{className:"text-base sm:text-xl text-gray-300 px-4",children:"JobFlow leverages cutting-edge AI and robust security to provide a seamless experience for both job seekers and HR professionals."})]}),R.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>R.jsx("div",{className:"p-6 bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-shadow duration-300 hover:scale-[1.02] transform",children:R.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[R.jsx("span",{className:"rounded-full 	bg-[#2c2c2c] p-4 text-white text-2xl",children:e.icon}),R.jsx("h3",{className:"text-xl font-semibold text-white",children:e.title}),R.jsx("p",{className:"text-base text-gray-300",children:e.detail})]})},n))})]})},UU=()=>{var n;const t=Ii(),e=(n=t==null?void 0:t.state)==null?void 0:n.message;return T.useEffect(()=>{var i,a,o;e&&(alert(e),window.history.replaceState({},document.title)),(((i=t.state)==null?void 0:i.from)==="login"||((a=t.state)==null?void 0:a.from)==="signup"||((o=t.state)==null?void 0:o.from)==="profile")&&(window.location.reload(),window.history.replaceState({},document.title))},[t,e]),R.jsxs("main",{className:"bg-gray-900 text-gray-100",children:[R.jsx(Xa,{className:"py-2 bg-gray-900",children:R.jsx(_U,{})}),R.jsx(Xa,{className:"py-2 bg-gray-800",children:R.jsx(jU,{})}),R.jsx(Xa,{className:"pb-2 bg-gray-800",children:R.jsx(MU,{})})]})},IU=()=>{const{pathname:t}=Ii();return T.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[t]),null},zU=()=>{const{jobId:t}=Zd(),e=vr(),n=localStorage.getItem("userEmail"),{data:i}=sv(t),[a,o]=T.useState({}),{mutate:c}=hA(),{mutate:u}=pA();T.useEffect(()=>{i&&o({...i,isRemote:!!i.isRemote})},[i]);const f=b=>o(k=>({...k,[b.target.name]:b.target.value})),h=()=>{c({updatedJob:a,email:n},{onSuccess:()=>e("/profile/hr")})},m=()=>u({jobId:t,email:n},{onSuccess:()=>e("/profile/hr")}),v=[{label:"Job Title",name:"title",type:"text",value:a.title},{label:"Category",name:"category",type:"text",value:a.category},{label:"Description",name:"description",type:"textarea",value:a.description},{label:"Eligibility",name:"eligibility",type:"textarea",value:a.eligibility},{label:"Job Type",name:"type",type:"text",value:a.type},{label:"Location",name:"location",type:"text",value:a.location},{label:"Experience Level",name:"experienceLevel",type:"text",value:a.experienceLevel},{label:"Skills (comma-separated)",name:"skills",type:"text",value:a.skills},{label:"Tags (comma-separated)",name:"tags",type:"text",value:a.tags},{label:"Remote",name:"isRemote",type:"checkbox",value:a.isRemote},{label:"Salary (LPA)",name:"salary",type:"text",value:a.salary},{label:"Deadline",name:"deadline",type:"datetime-local",value:a.deadline}];return i?R.jsxs("div",{className:"p-6 max-w-xl mx-auto bg-gray-900 rounded-lg space-y-4",children:[v.map(({label:b,type:k,name:C,value:S})=>R.jsx(Fk,{label:b,type:k,name:C,value:S||"",onChange:f},C)),R.jsxs("div",{className:"flex gap-4 justify-end",children:[R.jsx(xo,{label:"Update",onClick:h}),R.jsx(xo,{label:"Delete",onClick:m})]})]}):R.jsx("p",{className:"text-gray-400",children:"Loading..."})},Nn=({children:t})=>localStorage.getItem("accessToken")?t:R.jsx(Lk,{to:"/",state:{message:"Please Login first"}}),BU=()=>{const[t,e]=T.useState({name:"",email:"",message:""}),[n,i]=T.useState({}),[a,o]=T.useState(!1),c=[{label:"Name",type:"text",name:"name",value:t.name},{label:"Email",type:"email",name:"email",value:t.email},{label:"Message",type:"textarea",name:"message",value:t.message}],u=h=>{e(m=>({...m,[h.target.name]:h.target.value})),i(m=>({...m,[h.target.name]:""}))},f=async h=>{h.preventDefault(),o(!0);const m={};if(t.name||(m.name="Name is required"),t.email||(m.email="Email is required"),t.message||(m.message="Message is required"),Object.keys(m).length>0){i(m),o(!1);return}setTimeout(()=>{alert("Message sent successfully!"),e({name:"",email:"",message:""}),o(!1)},1e3)};return R.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 py-10",children:R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 bg-white/10 backdrop-blur-md p-10 rounded-2xl shadow-xl w-full max-w-6xl",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-2",children:"Contact Me"}),R.jsx("p",{className:"text-gray-300 mb-6 text-center",children:"I'd love to hear from you!"}),R.jsx(yr,{fields:c,onSubmit:f,buttonLabel:"Send Message",isLoading:a,errors:n,handleChange:u})]}),R.jsxs("div",{className:"flex flex-col justify-center items-center text-white text-center space-y-6",children:[R.jsx("img",{src:"https://assets.entrepreneur.com/content/3x2/2000/20150823040038-shutterstock-141719248.jpeg",alt:"Contact",className:"rounded-xl shadow-lg w-full max-w-sm object-cover"}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-semibold",children:"Reach Me"}),R.jsx("p",{children:"Email: smartHire@contact.com"}),R.jsx("p",{children:"Phone: +91 99933XXXXX"}),R.jsx("p",{children:"Location: India (Remote)"})]})]})]})})},qU=()=>{const{applicantEmail:t,jobId:e}=Zd(),{mutate:n,isLoading:i}=DA(),a=new Date().toISOString().split("T")[0],[o,c]=T.useState({salary:"",offerDate:a,bonus:"",benefits:"",employmentType:"",noticePeriod:"",probationPeriod:""}),[u,f]=T.useState({}),h=[{label:"Salary",name:"salary",type:"text",value:o.salary,required:!0},{label:"Offer Date",name:"offerDate",type:"date",value:o.offerDate,required:!0},{label:"Bonus",name:"bonus",type:"text",value:o.bonus},{label:"Benefits",name:"benefits",type:"text",value:o.benefits},{label:"Employment Type",name:"employmentType",type:"text",value:o.employmentType,required:!0},{label:"Notice Period (days)",name:"noticePeriod",type:"number",value:o.noticePeriod,required:!0},{label:"Probation Period",name:"probationPeriod",type:"text",value:o.probationPeriod}],m=b=>{c({...o,[b.target.name]:b.target.value})},v=b=>{b.preventDefault();const k={};if(h.forEach(S=>{S.required&&!o[S.name]&&(k[S.name]="Required")}),Object.keys(k).length>0){f(k);return}const C={applicantEmail:t,jobId:e,...o};n(C)};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-950 px-4",children:R.jsx(ts,{title:"Generate Offer Letter",children:R.jsx(yr,{fields:h,onSubmit:v,buttonLabel:"Send Offer Letter",isLoading:i,errors:u,handleChange:m})})})},HU=()=>R.jsx(l_,{children:R.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-900",children:[R.jsx(RU,{}),R.jsxs("main",{className:"flex-1",children:[R.jsx(IU,{}),R.jsxs(I2,{children:[R.jsx(Kt,{path:"/",element:R.jsx(UU,{})}),R.jsx(Kt,{path:"/login",element:R.jsx(nA,{})}),R.jsx(Kt,{path:"/signup",element:R.jsx(iA,{})}),R.jsx(Kt,{path:"/jobs/:jobId/apply",element:R.jsx(Nn,{children:R.jsx(UA,{})})}),R.jsx(Kt,{path:"/post-job",element:R.jsx(Nn,{children:R.jsx(gA,{})})}),R.jsx(Kt,{path:"/jobs/:jobId",element:R.jsx(Nn,{children:R.jsx(kA,{})})}),R.jsx(Kt,{path:"/profile/hr",element:R.jsx(Nn,{children:R.jsx(Hj,{})})}),R.jsx(Kt,{path:"/offer/:applicantEmail/:jobId",element:R.jsx(Nn,{children:R.jsx(qU,{})})}),R.jsx(Kt,{path:"/profile/applicant",element:R.jsx(Nn,{children:R.jsx(Vj,{})})}),R.jsx(Kt,{path:"/jobs",element:R.jsx(Nn,{children:R.jsx(SA,{})})}),R.jsx(Kt,{path:"/jobs/edit/:jobId",element:R.jsx(Nn,{children:R.jsx(zU,{})})}),R.jsx(Kt,{path:"/interviews/:roomId",element:R.jsx(Nn,{children:R.jsx(Gv,{})})}),R.jsx(Kt,{path:"/contact",element:R.jsx(Nn,{children:R.jsx(BU,{})})}),R.jsx(Kt,{path:"/privacy",element:R.jsx(Nn,{children:R.jsx("div",{className:"container mx-auto p-4 text-gray-100",children:"Privacy Policy (Placeholder)"})})}),R.jsx(Kt,{path:"/terms",element:R.jsx(Nn,{children:R.jsx("div",{className:"container mx-auto p-4 text-gray-100",children:"Terms of Service (Placeholder)"})})}),R.jsx(Kt,{path:"/blog",element:R.jsx(Nn,{children:R.jsx("div",{className:"container mx-auto p-4 text-gray-100",children:"Blog (Placeholder)"})})})]})]}),R.jsx(OU,{})]})}),FU=new J_;YO.createRoot(document.getElementById("root")).render(R.jsx(T.StrictMode,{children:R.jsx(eP,{client:FU,children:R.jsx(HU,{})})}));
